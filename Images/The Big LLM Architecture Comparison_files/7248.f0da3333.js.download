"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7248"],{72925:function(e,t,n){n.d(t,{Z:()=>i});let i={themedSelectOption:"themedSelectOption-uLytVj",noUnderline:"noUnderline-eUUJmS",podcastPaywallMenuButton:"podcastPaywallMenuButton-pkG3vq",paywallMenuDropdown:"paywallMenuDropdown-r7kYMC",paywallMenuDropdownItem:"paywallMenuDropdownItem-DQmkqr",paywallMenuDropdownIcon:"paywallMenuDropdownIcon-hVB_f0",paywallMenuDropdownItemTop:"paywallMenuDropdownItemTop-fWca_0",paywallMenuDropdownDeleteItem:"paywallMenuDropdownDeleteItem-ChWkG9"}},21694:function(e,t,n){n.d(t,{Z:()=>i});let i={root:"root-LeqPP3",badge:"badge-WYVub3",circle:"circle-_ZTVoA"}},23970:function(e,t,n){n.d(t,{m:()=>l});var i=n(16584),o=n(4615);function l(e){let{children:t}=e;return(0,i.tZ)(o.f6,{theme:"substack-theme",children:t})}},99987:function(e,t,n){n.d(t,{Z:()=>a});var i=n(7409),o=n(99282),l=n(16584),r=n(64515);let a=e=>(0,l.BX)(r.l,(0,o._)((0,i._)({},e),{name:"PlayIconRound",svgParams:{height:24,width:24},children:[(0,l.tZ)("path",{className:"outer-circle",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{className:"inner-triangle",d:"M10 8L16 12L10 16V8Z",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})]}))},28161:function(e,t,n){n.d(t,{Z:()=>a});var i=n(7409),o=n(99282),l=n(16584),r=n(64515);let a=e=>(0,l.BX)(r.l,(0,o._)((0,i._)({},e),{name:"SubstackLogoIcon",svgParams:{height:18,width:16,fill:"#ff6719",stroke:"none"},children:[(0,l.tZ)("path",{d:"M16 4H0V6H16V4Z"}),(0,l.tZ)("path",{d:"M0 8V18L7.9993 13.534L16 18V8H0Z"}),(0,l.tZ)("path",{d:"M16 0H0V2H16V0Z"})]}))},43470:function(e,t,n){n.d(t,{v:()=>$});var i=n(7409),o=n(16584),l=n(30396),r=n(94184),a=n.n(r),d=n(14293),s=n.n(d),c=n(98814),u=n(28161),p=n(57577),m=n(33804),h=n(99282),v=n(8971),_=n(64998),f=n(94499),y=n(98422),g=n(19081),Z=n(84747),w=n(17043);let b={subMenuTrigger:"subMenuTrigger-SKUcXd",subMenuItem:"subMenuItem-zrY1yO",disabled:"disabled-TCpkl9",logo:"logo-Jt_Kvr",chevron:"chevron-_e2GYQ"};function k(e){let{className:t,hideBorders:n,items:i,menuItemClassName:r,selectedMenuItemClassName:d,selectedSlug:s,pub:u}=e,{isMobile:p}=(0,y.v9)(),m=(0,l.sO)(null),[h,k]=(0,l.eJ)(!1),[x,C]=(0,l.eJ)(!1);function I(e){let{scrollLeft:t,scrollWidth:n,clientWidth:i}=e;k(t>10),C(n-(i+t)>10)}let B=e=>()=>{let{current:t}=m;t&&t.scrollBy({left:250*e,behavior:"smooth"})};return(0,l.d4)(()=>{I(m.current)},[]),(0,o.tZ)("div",{className:a()("overflow-list-container",t),children:(0,o.BX)(g.gq,{borderBottom:n?void 0:"detail",borderTop:n||p?void 0:"detail",className:a()("section-bar",{scroll:!0,"overflow-left":h,"overflow-right":x}),font:"text",height:p?44:48,justifyContent:p?"start":"center",paddingX:4,position:"relative",children:[(0,o.tZ)("div",{ref:m,className:"overflow-items",onScroll:e=>I(e.target),children:i.map(e=>{let{label:t,href:n,slug:i,isNative:l,onClick:c,noFollow:p,subItems:m,newTab:h}=e;return m?(0,o.tZ)(Z.M,{hideOnScroll:!0,layerOptions:{placement:"bottom-start",triggerOffset:6},title:t,trigger:(0,o.tZ)("div",{className:a()("menu-item",{selected:i===s},r,d&&{[d]:i===s}),children:(0,o.BX)(f.Z,{className:b.subMenuTrigger,native:l,rel:p?"nofollow":null,onClick:c,children:[(0,o.tZ)("span",{className:"overflow-item-text",children:t}),(0,o.tZ)(v.Z,{className:b.chevron,size:16})]})}),children:m.map(e=>{let{label:t,href:n,slug:i,isNative:l,onClick:r,noFollow:d,logoUrl:s}=e,c=!!i&&parseInt("".concat(i))===(null==u?void 0:u.id),p=s||(null==u?void 0:u.logo_url);return(0,o.tZ)(Z.u,{className:a()(b.subMenuItem,{[b.disabled]:c}),disabled:c,href:n,native:l,priority:"primary",rel:d?"nofollow":void 0,onClick:r,children:(0,o.BX)(g.gq,{alignItems:"center",gap:12,style:{margin:"-4px 0 -4px -4px"},children:[p&&(0,o.tZ)("img",{className:b.logo,src:(0,w.zF)(p,64),width:32}),t]})})})}):(0,o.tZ)("div",{className:a()("menu-item",{selected:i===s},r,d&&{[d]:i===s}),children:(0,o.tZ)(f.Z,{href:n,native:l,newTab:h,rel:p?"nofollow":null,onClick:c,children:(0,o.tZ)("span",{className:"overflow-item-text",children:t})})})})}),(0,o.tZ)("div",{className:"left-button",children:(0,o.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:B(-1),children:(0,o.tZ)(c.Z,{strokeWidth:1.5})})}),(0,o.tZ)("div",{className:"right-button",children:(0,o.tZ)("div",{className:"scroll-button-hitbox",role:"button",onClick:B(1),children:(0,o.tZ)(_.Z,{strokeWidth:1.5})})})]})})}var x=n(95441),C=n(56629),I=n(40647),B=n(48884),N=n(76819),E=n(6070),S=n(63651),M=n(84864);let T={zeteo:{121146:"We’re Not Kidding"}},P=["/about","/chat","/archive","/newsletters"],F=e=>{let{isChatActive:t,isMeetingsActive:n,pub:i,selectedSectionId:l}=e,{language:r}=(0,x.M1)(),{getSettingFor:a}=(0,C.So)(),{getConfigFor:d}=(0,I.xR)(),s=!!d("publication_tabs_reorder"),c=!!a("notes_feed_enabled"),u=!!(a("reader_referrals_enabled")&&a("reader_referrals_leaderboard_enabled")),p=O({groupNewsletters:!!a("group_sections_and_podcasts_in_menu_enabled"),navBarItems:(0,N.Rx)(i.navigationBarItems||[],{isFeedEnabled:c,isChatActive:!!t,isChatEnabled:!!i.threads_v2_enabled,isMeetingsActive:!!n,hasMultipleNewsletters:i.sections&&i.sections.length>0,isReaderReferralsLeaderboardActive:u,language:r,useReordering:s}).filter(e=>!e.is_hidden),pub:i,language:r});return(0,o.tZ)(k,{items:p,className:"sections-overflow",selectedSlug:l,pub:i})},O=e=>{let{groupNewsletters:t,navBarItems:n,pub:i,language:o}=e,{iString:l}=B.mb.i(o),r=[];r.push({href:"/",label:l("Home"),slug:"/home"}),i.podcast_enabled&&i.show_pub_podcast_tab&&r.push({href:"/podcast",label:l("Podcast"),slug:"/podcast"});let a=[];return(0,E.Vb)({pub:i})?a=D({navBarItems:n,groups:[{label:"Shows",condition:e=>!!e.section}]}):(0,E.jC)({pub:i})?a=D({navBarItems:n,groups:[{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===118995},excludeFromOthers:!0,isStandalone:!0},{condition:e=>{var t;return(null===(t=e.section)||void 0===t?void 0:t.id)===121146},excludeFromOthers:!0,isStandalone:!0},{label:"Shows",condition:e=>{var t,n;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)||(null===(n=e.postTag)||void 0===n?void 0:n.slug)==="townhall"}},{label:"Columns",condition:e=>{var t,n,i;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)&&![132068,243259].includes(null!==(i=null===(n=e.section)||void 0===n?void 0:n.id)&&void 0!==i?i:-1)}},{label:"Documentaries",condition:e=>{var t,n;return[132068,214805,243259].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)}}]}):(0,E.VL)({pub:i})?(r.push({href:"/listen",label:"Shows",slug:"/listen"}),a=D({navBarItems:n.filter(e=>!e.section||!e.section.is_podcast||(0,M.sectionIsSpecificallyMarkedAsNewsletter)({section:e.section,pub:i})),groups:[{label:"Newsletters",condition:e=>!!e.section}]})):a=(0,E.p$)({pub:i})?D({navBarItems:n,groups:[{label:"Projects",condition:e=>{var t,n;return[146942,146943,150226].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"News / Research",condition:e=>{var t,n;return[146936,146935].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Calls-to-Action",condition:e=>{var t,n;return[146939,146941,146949].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)},excludeFromOthers:!0},{label:"Recommendations",condition:e=>{var t,n;return[146958].includes(null!==(n=null===(t=e.section)||void 0===t?void 0:t.id)&&void 0!==n?n:-1)||"https://bookshop.org/shop/globalfreedoms"===e.link_url},excludeFromOthers:!0},{label:"Podcasts",condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)},excludeFromOthers:!0}]}):t?D({navBarItems:n,groups:[{label:l("Newsletters"),condition:e=>{var t;return!!e.section&&!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}},{label:l("Podcasts"),condition:e=>{var t;return!!(null===(t=e.section)||void 0===t?void 0:t.is_podcast)}}]}):n,[...r,...L({groupedNavBarItems:a,pub:i})]},D=e=>{let{navBarItems:t,groups:n}=e,i=[...t],o=[],l=[...t];for(let e of n)if(e.isStandalone){let t=i.find(e.condition);if(!t)continue;o.push(t),l=l.filter(e=>e!==t),e.excludeFromOthers&&(i=i.filter(e=>e!==t))}else{var r;let t=i.filter(e.condition);if(0===t.length)continue;o.push({label:null!==(r=e.label)&&void 0!==r?r:"Other",navBarItems:t}),l=l.filter(t=>!e.condition(t)),e.excludeFromOthers&&(i=i.filter(t=>!e.condition(t)))}return[...o,...l]},L=e=>{let{groupedNavBarItems:t,pub:n}=e;return t.map(e=>"navBarItems"in e?{label:e.label,subItems:e.navBarItems.map(e=>X({navBarItem:e,pub:n}))}:X({navBarItem:e,pub:n}))},X=e=>{var t,n,o,l,r,a;let{navBarItem:d,pub:s}=e;if(d.section){let e=d.section,a=e.is_podcast&&null!==(l=null===(n=s.sections.find(t=>t.id===e.id))||void 0===n?void 0:null===(t=n.podcastSettings)||void 0===t?void 0:t.podcast_art_url)&&void 0!==l?l:e.logo_url;return(0,h._)((0,i._)({label:null!==(r=null===(o=T[s.subdomain])||void 0===o?void 0:o[e.id])&&void 0!==r?r:(0,M.truncateText)(e.name,30),href:(0,S.Ucy)(s,{section:e})},a?{logoUrl:a}:null),{slug:e.id})}let c=(0,N.Hs)(d),u="link"===c&&!(d.standard_key||P.includes(null!==(a=d.link_url)&&void 0!==a?a:"")),p=u&&s.tier<2;return(0,h._)((0,i._)({href:(0,S.Oz)(s,d,{addBase:u}),label:(0,M.truncateText)((0,N.ye)(d),30)},p?{noFollow:p}:null,"page"===c?{isNative:!0}:null),{slug:(0,S.Oz)(s,d,{addBase:!1}),newTab:u})};var z=n(347),A=n(98914);let q=()=>Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),R=e=>{let{alwaysShow:t,disable:n,menuContentRef:i,menuHeight:o}=e,r=(0,l.sO)(!1),a=(0,l.sO)(q()),d=(0,l.sO)(q()),s=(0,l.I4)((e,t)=>{a.current=t,i.current&&(i.current.style.position=e,i.current.style.top="fixed"===e&&t>=0?"":"".concat(t,"px"))},[i]),c=(0,l.I4)(()=>{s("absolute",q()-o),r.current=!1},[o,s]),u=(0,l.I4)(e=>{let t=e.target;((null==t?void 0:t.classList.contains("footnote-number"))||(null==t?void 0:t.classList.contains("footnote-anchor")))&&(r.current=!0,setTimeout(c,0))},[c]),p=(0,l.I4)(()=>{var e;if(t){s("fixed",0);return}if(r.current)return;let l=d.current;d.current=q();let c=d.current,u=(null===(e=i.current)||void 0===e?void 0:e.style.position)==="fixed",p=c<=0||0>=(0,A.bs)(),m=c>=(0,A.bs)(),h=c>l,v=c<l;if(p){s("fixed",0);return}if(n){s("absolute",0);return}if(!m){if(h){if(u&&a.current>=0){s("absolute",c);return}if(!u&&a.current<c-o){s("fixed",-o);return}}if(v){if(a.current>c){s("fixed",c);return}let e=Math.max(c-o,0);if(a.current<e){s("absolute",e);return}}}},[t,i,n,s,o]);(0,l.d4)(()=>{if("undefined"!=typeof window)return window.addEventListener("scroll",p),window.addEventListener("click",u),p(),()=>{window.removeEventListener("scroll",p),window.removeEventListener("click",u)}},[n,u,p,s])};var U=n(68833),j=n(9682),V=n(15771),H=n(10510),J=n(63474),W=n(58175),G=n(61135),K=n(60308),Y=n(47929);let Q={mainMenuContent:"mainMenuContent-DME8DR",profileContext:"profileContext-urkyyv",topBar:"topBar-pIF0J1",titleWithWordmark:"titleWithWordmark-GfqxEZ",titleContainer:"titleContainer-DJYq5v",title:"title-oOnUGd",buttonsContainer:"buttonsContainer-SJBuep",logoContainer:"logoContainer-p12gJb"},$=e=>{var t;let{className:n,freeSignup:r,freeSignupEmail:d,hasViralGiftsCount:s,hideNavBar:m,hideTitle:h,isAccountContext:v,isChatActive:_,isMeetingsActive:f,isPostView:Z,pub:w,selectedSectionId:b,showCustomerSupportModeModal:k,user:x,profile:C}=e;h="profile"===w.homepage_type||h;let{getConfigFor:B}=(0,I.xR)(),{isMobile:N}=(0,y.v9)(),[M]=(0,j.tv)(),T=(0,l.sO)(null),P=(0,l.sO)(null),O=(0,l.sO)(null),D="profile"===w.homepage_type,L=D&&M.path.match(/\/profile\/(subscribers|followers|following)/),X=!D&&!!w.logo_url&&!(0,E.kb)({pub:w}),z=!!(!h&&w.logo_url_wide),A=Z?!!B("show_menu_on_posts"):!m,q=(0,E.kb)({pub:w})||!!(B("larger_wordmark_on_publication_homepage")&&z),{currentMenuHeight:G,currentTopBarHeight:$,isMinimized:ei,maxMenuHeight:eo}=ee({hasExpandableTopBar:q,forceMaximized:!Z&&!v,forceMinimized:!!v,isMobile:N,showNavBar:A,showWordmark:z}),el=!N&&q&&ei?20:0,er=N?q?32:20:q?72:36,ea=!N&&q&&ei?.5555555555555556:1;R({alwaysShow:!1,disable:!Z,menuContentRef:T,menuHeight:G});let{shouldCenterTitle:ed}=et({buttonsRef:O,titleRef:P,horizontalGap:12,horizontalPadding:q?40:20}),es=N||!ed,ec=v?(0,S.SVA)(w):"/",eu=D&&!Z&&!v&&!N;return(0,o.tZ)(en,{profile:C,pub:w,useAccentTheme:!!v,children:(0,o.BX)("div",{className:a()("main-menu",n),"data-testid":"navbar",children:[(0,o.BX)("div",{ref:T,className:a()(Q.mainMenuContent,eu&&Q.profileContext),children:[(0,o.BX)(g.gq,{alignItems:"center",borderBottom:A?void 0:"detail",className:Q.topBar,gap:12,justifyContent:"space-between",paddingBottom:N?12*!A:void 0,paddingTop:N?12:void 0,paddingX:N?12:q?40:20,style:N?void 0:{position:"relative",height:$-1},children:[(0,o.BX)("div",{className:Q.logoContainer,style:(0,i._)({display:D||!X&&es?"none":null,flexBasis:0,flexGrow:+!es},q?{transform:"translateX(-".concat(el,"px)")}:null),children:[D&&(0,o.BX)(g.gq,{alignItems:"center",gap:40,children:[(0,o.tZ)(g.hs,{alignItems:"center",as:"a",height:20,href:(0,S.n1t)((0,S.SVA)(),{utm_content:Y.fZ.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:N?(0,o.tZ)(u.Z,{height:24}):(0,o.tZ)(u.Z,{style:{transform:"scale(1.4)"}})}),L&&(0,o.tZ)(V.hU,{className:Q.backButton,href:(0,K.TJI)(w),size:N?"sm":"md",children:(0,o.tZ)(c.Z,{size:20})})]}),X&&(0,o.tZ)(H.jM,{href:ec,pub:w,size:N?32:40,onClick:()=>{(0,U.j)(U.FP.NAV_BAR_HOME_LINK_CLICKED)}})]}),!h&&(0,o.tZ)("div",{ref:P,className:Q.titleContainer,style:(0,i._)({flexGrow:0},q?{transform:"translateX(".concat(es?-el:0,"px)")}:null),children:(0,o.tZ)(W.xv,{as:"h1",className:a()(Q.title,{[null!==(t=Q.titleWithWordmark)&&void 0!==t?t:""]:w.logo_url_wide}),font:"pub-headings",children:(0,o.tZ)(J.A0,{href:ec,children:w.logo_url_wide?(0,o.tZ)("img",{alt:w.name,src:(0,S.zF4)(w.logo_url_wide,null,{height:2*er,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:(0,i._)({display:"block",height:er},q?{transform:"scale(".concat(ea,")"),transformOrigin:es?"left":"center"}:null)}):w.name})})}),(0,o.tZ)(g.gq,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:1},children:(0,o.tZ)("div",{ref:O,className:Q.buttonsContainer,style:q?{transform:"translateX(".concat(el,"px)")}:void 0,children:(0,o.tZ)(p.Z,{freeSignup:r,freeSignupEmail:d,hasViralGiftsCount:s,isMeetingsActive:f,pub:w,showCustomerSupportModeModal:k,user:x})})})]}),A&&(0,o.tZ)(F,{isChatActive:_,isMeetingsActive:f,pub:w,selectedSectionId:b})]}),(0,o.tZ)("div",{style:{height:eo}})]})})},ee=e=>{let{forceMaximized:t,forceMinimized:n,hasExpandableTopBar:i,isMobile:o,showNavBar:r,showWordmark:a}=e,[d,c]=(0,l.eJ)(!1),u=(0,l.sO)(null),p=!!n||!t&&d,m=e=>o?r?44:56:i?e?72:120:a?88:72,h=r?o?45:50:0,v=m(n)+h,_=m(p),f=(0,l.I4)(()=>{let e=u.current,t=document.documentElement.scrollTop||document.body.scrollTop;if(u.current=t,!s()(e))t>e?t>v+5&&c(!0):t<=0&&c(!1)},[v]);return(0,l.d4)(()=>(window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)),[f]),{currentMenuHeight:_+h,currentTopBarHeight:_,isMinimized:p,maxMenuHeight:v}},et=e=>{let{buttonsRef:t,titleRef:n,horizontalGap:i,horizontalPadding:o}=e,{isMobile:r}=(0,y.v9)(),[a,d]=(0,l.eJ)(!r),s=(0,l.I4)(()=>{if(!t.current||!n.current)return;if(r){d(!1);return}let e=t.current.getBoundingClientRect().width,l=n.current.getBoundingClientRect().width;d(.5*document.body.clientWidth-e-i-o>.5*l)},[t,i,o,r,n]);return(0,l.d4)(()=>(window.addEventListener("resize",s),s(),setTimeout(s,0),()=>{window.removeEventListener("resize",s)}),[s]),{shouldCenterTitle:a}},en=e=>{let{profile:t,pub:n,useAccentTheme:i,children:l}=e;return i?(0,o.tZ)(m.w,{children:l}):"profile"===n.homepage_type&&t?(0,o.tZ)(G.F,{profile:t,children:l}):(0,o.tZ)(z.h,{children:l})}},13561:function(e,t,n){n.d(t,{A:()=>g});var i=n(16584),o=n(6400),l=n(30396),r=n(19425),a=n(79403),d=n(94184),s=n.n(d),c=n(50308),u=n.n(c),p=n(41352),m=n(347),h=n(15771),v=n(19081),_=n(63124),f=n(88e3);let y={modal:"modal-Suw4en",modalBody:"modalBody-s4SL_V",modalBodyStretched:"modalBodyStretched-aq1p4E"},g=e=>{let{children:t,disableCloseOnBackdropClick:n=!1,fullscreenMobile:d,hideCloseButton:c,initialFocus:g,isOpen:Z,maxFullscreenMobile:w,overflow:b,testId:k="modal",width:x=660,stretchModal:C=!1,onClose:I=()=>void 0,onEscape:B}=e,N=(0,l.sO)(null);return(0,i.tZ)(m.h,{children:(0,i.tZ)(r.u,{as:o.Fragment,show:Z,children:(0,i.BX)(a.V,{as:"div",className:y.modal,"data-testid":k,initialFocus:void 0===g?N:g,onClick:e=>e.stopPropagation(),onClose:n?u():I,onKeyDown:B?e=>{let{code:t}=e;B&&"Escape"===t&&B(e)}:void 0,onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:[(0,i.tZ)("div",{ref:N,"aria-hidden":"true",style:{position:"absolute",left:"-9999px"},tabIndex:-1}),(0,i.BX)(_.Uv,{children:[(0,i.tZ)(_.sc,{children:(0,i.tZ)(_._n,{})}),(0,i.tZ)(f.Q,{children:(0,i.tZ)(f.l,{className:C?s()(y.modalBodyStretched,"the-free-press-theme"):s()(y.modalBody,"the-free-press-theme"),fullscreenMobile:d,maxFullscreenMobile:w,overflow:b,width:x,children:(0,i.tZ)(m.h,{children:(0,i.BX)(v.tu,{paddingTop:c?24:8,children:[!c&&(0,i.tZ)(v.gq,{justifyContent:"end",children:(0,i.tZ)(h.hU,{priority:"quaternary",onClick:I,children:(0,i.tZ)(p.Z,{})})}),t]})})})})]})]})})})}},35543:function(e,t,n){n.d(t,{Sv:()=>S,Xe:()=>B,oJ:()=>N,oh:()=>E,yr:()=>M});var i=n(7409),o=n(99282),l=n(58865),r=n(16584),a=n(30396),d=n(82569),s=n.n(d),c=n(21442),u=n(24028),p=n(69241),m=n(19548),h=n(95441),v=n(60807),_=n(54371),f=n(6910),y=n(48980),g=n(63018),Z=n(98914),w=n(84747),b=n(70379),k=n(81043),x=n(23945);function C(){let e=(0,l._)(["Followed ",""]);return C=function(){return e},e}function I(){let e=(0,l._)(["Unfollowed ",""]);return I=function(){return e},e}function B(e){let t=(0,v.aF)();return(0,g._I)("/api/v1/feed/following",(0,i._)({auto:!!t},e))}function N(){let{mutate:e}=(0,p.kY)();return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e("/api/v1/feed/following",...n)}}function E(e,t,n){let{isFollowing:i,toggle:o}=S(e,t,n),l=(0,v.aF)(),a=(0,m.gc)(null==e?void 0:e.id),d=!!(l&&e&&l.id!==e.id)&&!a,s=[];return d&&s.push((0,r.tZ)(w.u,{leading:i?(0,r.tZ)(f.m,{stroke:"var(--color-fg-primary)"}):(0,r.tZ)(_.w,{stroke:"var(--color-fg-primary)"}),onClick:o,children:i?"Unfollow":"Follow"})),s}function S(e,t,n,l){let a=(0,v.aF)(),{onboardingModalRef:d,requireLogin:p}=(0,k.SJ)(),m=function(e,t){let{data:n}=B(t);return(null!=n?n:[]).includes(null!=e?e:0)}(null==e?void 0:e.id,l),{mutate:_,data:f}=B(l),g=(0,b.pm)(),w=(0,x.Q1)((null==e?void 0:e.name)||""),{iString:N,iTemplate:E}=(0,h.M1)(),S=async l=>{if(e){if(!a&&d.current){p?p():d.current.open();return}_(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l?[...t,e.id]:s()(t,e.id)},{revalidate:!1});try{await (0,y.rd)("/api/v1/feed/".concat(e.id,"/follow"),{method:l?"POST":"DELETE",json:{surface:t,noteId:n}}),g.popToast(e=>(0,r.tZ)(b.FN,(0,o._)((0,i._)({},e),{Icon:l?c.Z:u.Z,text:l?E(C(),w):E(I(),w),cta:N("Undo"),onAccept:()=>S(!l)})))}catch(e){g.popToast(t=>(0,r.tZ)(b.FN,(0,o._)((0,i._)({},t),{text:(0,Z.zx)(e)})));return}}};return{isFollowing:m,toggle:()=>S(!m),isLoaded:!!f}}function M(e,t,n){let{isFollowing:i,toggle:o}=S(e,t,n),[l,r]=(0,a.eJ)(!1);return{isFollowing:i,buttonProps:{onClick:()=>{o(),i||r(!0)},onMouseLeave:()=>r(!1)}}}},99259:function(e,t,n){n.d(t,{M$:()=>s,Nj:()=>d});var i=n(16584),o=n(6400),l=n(30396),r=n(14773);let a=(0,o.createContext)({isOnDestination:(0,r.MM)()});function d(e){let{children:t}=e,n=(0,l.Ye)(()=>({isOnDestination:(0,r.MM)()}),[]);return(0,i.tZ)(a.Provider,{value:n,children:t})}function s(){return(0,l.qp)(a)}a.displayName="IsDestinationContext"},93155:function(e,t,n){n.d(t,{DY:()=>d,dd:()=>s});var i=n(16584),o=n(6400),l=n(30396),r=n(10704);let a=(0,o.createContext)({openModal:()=>{},closeModal:()=>{}});function d(e){let{children:t}=e,[n,o]=(0,l.eJ)(!1),[d,s]=(0,l.eJ)({width:540,children:null}),c=()=>{o(!1)};return(0,i.BX)(a.Provider,{value:{openModal:e=>{s(e),o(!0)},closeModal:c},children:[(0,i.tZ)(r.u_,{isOpen:n,onClose:c,width:d.width,overflow:"hidden",children:d?d.children:null}),t]})}function s(){return(0,l.qp)(a)}a.displayName="ModalContext"},36518:function(e,t,n){n.d(t,{N$:()=>h,lR:()=>_});var i=n(16584),o=n(6400),l=n(30396),r=n(32351),a=n(14952),d=n(48980),s=n(8635),c=n(7882),u=n(98750),p=n(98914),m=n(6070);function h(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:o=!1,activityToken:l,children:r}=e;return(0,i.tZ)(f,{defaultState:null==t?void 0:t.activity,shouldLoad:n,shouldPoll:o,activityToken:l,children:r})}let v=(0,o.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:async()=>!0,markAllAsRead:async()=>{},hasLoadedOnce:!1});function _(){return(0,l.qp)(v)}function f(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:o=!1,activityToken:h,children:_}=e,f=(0,c.ib)({pathname:"/api/v1/activity/unread",deps:[],auto:n,initialResult:t,query:{token:h}}),y=(0,a.Ij)(),g=!!y&&(0,m.HD)({pub:y}),Z=!(0,u.th)()&&!g,w=async()=>{let e=await (0,d.rd)("/api/v1/activity/unread",{method:"post",json:{after:new Date().toISOString(),token:h}});f.setResult(e)};(0,s.Z)(async()=>{if(o&&n&&(0,p.dr)()){var e;let t=(null===(e=f.result)||void 0===e?void 0:e.count)||0,n=await f.refetch();if(t!==(!(n instanceof Error)&&n.count||0))return!0}},6e4);let b=null!=f.result?f.result.count:0;return(0,l.d4)(()=>{try{var e,t;null===(e=(t=navigator).setAppBadge)||void 0===e||e.call(t,b)}catch(e){console.warn(e)}},[b]),(0,i.BX)(v.Provider,{value:{lastViewedAt:null!=f.result?f.result.lastViewedAt:null,activityUnreadCount:b,activityUnreadAtMax:null!=f.result&&f.result.max,refetch:f.refetch,markAllAsRead:w,hasLoadedOnce:f.hasLoadedOnce},children:[(0,i.tZ)(r.Metadata,{badge:Z?b:void 0}),_]})}v.displayName="NotificationsContext"},5952:function(e,t,n){n.d(t,{Bk:()=>R,WS:()=>D,bN:()=>L});var i=n(7409),o=n(99282),l=n(16584),r=n(30396),a=n(87764),d=n(64998),s=n(85685),c=n(57391),u=n(95441),p=n(92291),m=n(77338),h=n(42375),v=n(93963),_=n(62903),f=n(25991),y=n(19619),g=n(85527),Z=n(53678),w=n(16451),b=n(76721),k=n(68833),x=n(80878),C=n(7882),I=n(98914),B=n(19081),N=n(58175),E=n(15503),S=n(27744),M=n(2009),T=n(50312);n(33017);var P=n(31377),F=n(63651),O=n(5749);function D(e){var t,n,r,a,d;let{comment:s,item:c,isParent:u,showReplyingTo:m,showContext:Z,utm_content:b,parentCommentUserId:N,hideable:T=!1}=e,O=(0,h.rI)(),D=(0,g.F)(),X=(0,S.de)(c),z=()=>(0,E.rw)(c,O,"profile",{tabId:D}),R=!s.ancestor_path,U=c.publication&&c.post&&(0,P.getPostAuthor)(c.publication,c.post),j=(0,C.ib)({pathname:"/api/v1/trending-topics/toggle",method:"POST"}),V=null;if(!R){let e=null===(t=s.ancestor_path)||void 0===t?void 0:t.split(".").pop(),i=e&&Number(e);V=null!==(r=null===(n=c.parentComments)||void 0===n?void 0:n.find(e=>(null==e?void 0:e.id)===i))&&void 0!==r?r:null}let H=m&&(R&&U||!R&&V),J=(0,E.Gv)(c,{isModuleItem:!0}),W=async()=>{var e,t,n,i,o;(0,E.rw)(c,O,"context",{tabId:D}),(0,k.j)(k.FP.SEE_MORE_NOTES_IN_CATEGORY_CLICKED,{tagId:null===(e=c.context.tag)||void 0===e?void 0:e.id,noteId:null===(t=c.comment)||void 0===t?void 0:t.id}),await j.refetch({method:"POST",json:{enable:!0,categoryID:null===(i=c.context)||void 0===i?void 0:null===(n=i.tag)||void 0===n?void 0:n.id}}),(0,I.uX)("/home/category/".concat(null===(o=c.context.tag)||void 0===o?void 0:o.id),{local_navigation:!1})},G=(0,P.getCommentAuthor)(s),K=!u&&["comment_like","comment_restack","note_like"].includes(c.context.type);return(0,l.tZ)(w.oM,{showGutter:u,hasContext:Z,onClick:e=>{if(!e.defaultPrevented&&!X){(0,E.rw)(c,O,"item",{tabId:D});let t="search"===O&&"undefined"!=typeof location?location.pathname:null,n=(0,F.Sgq)(s,{noBase:!s.hidden&&M.L,urlParams:{utmSource:t}});(0,x.Q)(e,s.hidden&&c.publication?(0,F.W1P)(c.publication,{addBase:!0,params:{next:n}}):n,{newTab:!!s.hidden,native:s.hidden,state:{showBack:!0}})}},entityKey:c.entity_key,children:(0,l.BX)(y.n,{user:G,item:c,comment:s,children:[Z||K?(0,l.tZ)(_.L,{context:c.context,onClick:()=>(0,E.rw)(c,O,"context",{tabId:D}),utm_content:b}):null,c.context.tag?(0,l.tZ)(_.L,{context:(0,o._)((0,i._)({},c.context),{type:"topic"}),onClick:W,utm_content:b}):null,(0,l.BX)(B.gq,{gap:12,alignItems:"start",children:[(0,l.tZ)(w.Fb,{user:G,onClick:z,utm_content:b}),(0,l.BX)(B.tu,{gap:8,flex:"grow",minWidth:0,children:[(0,l.BX)(B.tu,{gap:12,children:[(0,l.BX)(B.tu,{gap:4,children:[(0,l.tZ)(f.Ev,{author:G,post:null!==(a=c.post)&&void 0!==a?a:void 0,comment:s,onClick:z,utm_content:b,publication:null!==(d=c.publication)&&void 0!==d?d:void 0,item:c,allowHide:T,parentCommentUserId:N}),H&&(0,l.tZ)(q,{isTopLevel:R,postAuthor:U,parentComment:V,item:c}),s.body&&(0,l.tZ)(L,{comment:s,item:c})]}),s.attachments&&(0,l.tZ)(p.yd,{parent:s,attachments:s.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,E.rw)(c,O,"attachment",{tabId:D,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:n}})},onSavePostClick:J,utm_content:b,item:c}),(0,l.tZ)(A,{item:c})]}),!s.hidden&&(0,l.tZ)(v.$w,{item:c,comment:s})]})]})]})})}function L(e){let{comment:t,item:n,large:i,paddingRight:o}=e,a=(0,h.rI)(),d=(0,g.F)(),{bodyJson:s,truncatedBodyJson:c,isTruncated:u,shouldExpandInline:p}=(0,b.Z)(t),[v,_]=(0,r.eJ)(!1),f=i||!u||v,y=f?s:c;return(0,l.BX)(B.tu,{className:O.Z.feedCommentBody,paddingRight:o,children:[(0,l.tZ)(w.sP,{children:t.hidden&&n?(0,l.tZ)(X,{pub:null==n?void 0:n.publication}):y&&(0,l.tZ)(m.x,{content:y,onLinkClicked:()=>{n&&(0,E.rw)(n,a,"link",{tabId:d,extraEventProps:{commentId:t.id}})},attachedLinks:R(t)},f)}),!f&&(0,l.tZ)(z,{onClick:e=>{n&&(0,E.rw)(n,a,"see_more",{tabId:d,extraEventProps:{commentId:t.id}}),p?(e.preventDefault(),_(!0)):(0,I.uX)((0,F.Sgq)(t,{noBase:M.L,urlParams:{utmSource:"search"===a&&"undefined"!=typeof location?location.pathname:null}}),{event:e,state:{showBack:!0}})}})]})}function X(e){let{pub:t}=e;return(0,l.BX)(l.HY,{children:[(0,l.BX)("i",{children:["This comment is only visible to paid subscribers of ",null==t?void 0:t.name]}),(0,l.tZ)("br",{}),(0,l.tZ)("b",{children:"Subscribe to view →"})]})}function z(e){let{iString:t}=(0,u.M1)();return(0,l.BX)(B.hs,{className:O.Z.seeMore,children:[(0,l.tZ)(B.hs,{className:O.Z.seeMoreFade}),(0,l.tZ)(N.xv.B3,{color:"secondary",weight:"medium",className:O.Z.seeMoreText,children:(0,l.tZ)(Z.hh,(0,o._)((0,i._)({},e),{children:t("See more")}))})]})}let A=e=>{let{item:t}=e,{getExperimentVariant:n,exposeExperiment:i}=(0,c.jc)(),[o,s]=(0,r.eJ)(!1),{trendingTopic:u}=t;if((0,r.d4)(()=>{u&&(i("web_notes_trending_topics_enabled"),"treatment"===n("web_notes_trending_topics_enabled")&&s(!0))},[u,i,n]),!u||!o)return null;let p=(0,F.BxF)(u.query,"feed-comment"),m=u.query.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,l.tZ)(T.r,{href:p,target:"_blank",onClick:()=>{(0,k.j)(k.FP.FEED_ITEM_TRENDING_TOPIC_CLICKED,{query:u.query})},children:(0,l.BX)(B.gq,{display:"inline-flex",radius:"sm",bg:"secondary",alignItems:"center",padding:4,children:[(0,l.tZ)(a.Z,{height:14}),(0,l.tZ)(N.xv,{fontSize:11,color:"primary",fontWeight:"bold",children:m}),(0,l.tZ)(d.Z,{height:14})]})})};function q(e){var t;let{isTopLevel:n,postAuthor:i,parentComment:o,item:r}=e,a=n?i:o?{id:o.user_id,user_id:o.user_id,name:o.name,photo_url:o.photo_url}:i,d=n?(0,F.mx9)(r.publication,r.post,{noBase:M.L}):(0,F.Sgq)(o,{noBase:M.L}),c=(null===(t=n?i:o)||void 0===t?void 0:t.name)||"";return a?(0,l.BX)(N.xv.B5,{color:"secondary",translated:!0,children:["Replying to"," ",(0,l.tZ)(s.ProfileHoverCard,{subject:a,dontStopPropagation:!0,utmSource:"feed",children:(0,l.tZ)(Z.hh,{href:d,children:I18N.p(c)})})]}):null}function R(e){return e.attachments?e.attachments.map(e=>"link"===e.type?e.linkMetadata.url:"post"===e.type?(0,F.uRy)(e.publication,e.post):"publication"===e.type?(0,F.SVA)(e.publication):"comment"===e.type?(0,F.Sgq)(e.comment):"").filter(Boolean):[]}},62110:function(e,t,n){n.d(t,{_:()=>f});var i=n(16584),o=n(30396),l=n(35162),r=n(64729),a=n(95441),d=n(42375),s=n(98170),c=n(85527),u=n(15771),p=n(19081),m=n(6490),h=n(58175),v=n(15503),_=n(5749);function f(e){let{item:t,pub:n,post:r}=e,[d,s]=(0,o.eJ)(!1),{iString:c}=(0,a.M1)();return(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.hU,{priority:"quaternary",size:"sm",className:_.Z.moreButton,onClick:()=>s(!0),children:(0,i.tZ)(l.Z,{size:16})}),(0,i.BX)(m.u_,{isOpen:d,onClose:()=>s(!1),width:440,children:[(0,i.tZ)(m.xB,{icon:(0,i.tZ)(l.Z,{size:20}),title:c("Auto-generated clip"),showClose:!0,onClose:()=>s(!1)}),(0,i.tZ)(m.fe,{children:(0,i.tZ)(p.tu,{gap:16,children:(0,i.tZ)(h.xv.B3,{children:c("Substack automatically selected this clip for you from the full video below.")})})}),(0,i.tZ)(m.mz,{primaryButton:(0,i.tZ)(y,{item:t,pub:n,post:r,onClose:()=>s(!1)}),secondaryButton:(0,i.tZ)(u.zx,{priority:"secondary",onClick:()=>s(!1),children:c("Done")})})]})]})}let y=e=>{let{item:t,pub:n,post:l,onClose:p}=e,{iString:m}=(0,a.M1)(),h=(0,s.vE)({post:l,publication:n}),_=(0,d.rI)(),f=(0,o.qp)(c.q);return(0,i.tZ)(r.i,{children:(0,i.tZ)(u.zx,{priority:"primary",onClick:e=>{(0,v.rw)(t,_,"watch_full_episode",{tabId:f}),h(e),p()},children:m("View Full Episode")})})}},13748:function(e,t,n){n.d(t,{U:()=>et,v:()=>ei});var i=n(7409),o=n(99282),l=n(98848),r=n(16584),a=n(30396),d=n(13718),s=n(71787),c=n(13025),u=n(71499),p=n(76789),m=n(12795),h=n(22448),v=n(95058),_=n(11607),f=n(71408),y=n(9404),g=n(89038),Z=n(20816),w=n(51455),b=n(94442),k=n(79094),x=n(19548),C=n(35543),I=n(95441),B=n(93155),N=n(40647),E=n(60807),S=n(42375),M=n(85527),T=n(48980),P=n(7882),F=n(98914),O=n(15771),D=n(19081),L=n(99916),X=n(15562),z=n(78096),A=n(70379),q=n(46585),R=n(15503),U=n(27744),j=n(2009),V=n(81043),H=n(75419),J=n(98012),W=n(31377),G=n(42886),K=n(33884),Y=n(63651),Q=n(84864),$=n(5749);let ee=e=>{let{item:t,parentItem:n}=e;if(!t.comment&&!t.post)return null;let i=null;if("post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply"))i=t.post.id;else if((null==n?void 0:n.type)==="note_reply"){var o;let e=null===(o=t.parentComments[0])||void 0===o?void 0:o.id;e&&(i=e)}else i=t.comment.id;return i?{id:i,type:"post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply")?"post":"comment"}:null};function et(e){var t,n,l,g,Z,b,V;let{publication:et,post:ei,comment:eo,item:el,parentItem:er,allowHide:ea=!1}=e,ed=(0,A.pm)(),{getConfigFor:es}=(0,N.xR)(),ec=(0,S.rI)(),eu=(0,M.F)(),ep=(0,U.I0)(),em=(0,U.kc)(),{iString:eh}=(0,I.M1)(),[ev,e_]=(0,a.eJ)(!1),[ef,ey]=(0,a.eJ)(!1),eg=(0,E.aF)(),{openModal:eZ,closeModal:ew}=(0,B.dd)(),eb=null!==(b=null==eo?void 0:null===(t=eo.ancestor_path)||void 0===t?void 0:t.split(".").filter(Boolean).map(Number).map(e=>em.comments.get(e)))&&void 0!==b?b:[],ek=eo?(0,W.getCommentAuthor)(eo):et&&ei?(0,W.getPostAuthor)(et,ei):{id:0,name:"void"},ex=el&&"entity_key"in el?el.entity_key:void 0,eC=(0,x.CH)(ek,{surface:ec,noteId:ex,onClick(e){el&&(0,R.rw)(el,ec,e,{tabId:eu})}}),eI=(0,k.zH)({comment:eo,publication:et,post:ei,item:el}),eB=(0,C.oh)(ek,ec,ex),eN=(0,P.ib)({pathname:"/api/v1/comment/".concat(null!==(V=null==eo?void 0:eo.id)&&void 0!==V?V:0),method:"DELETE",json:{publication_id:null==et?void 0:et.id}}),eE=async()=>{if(!eo||(e_(!1),eN.isLoading))return;let e=await eN.refetch();if(e instanceof Error){alert((0,F.zx)(e));return}ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Note deleted"),Icon:d.Z}))),ep({type:"comment_delete",payload:{publication:null!=et?et:void 0,post:null!=ei?ei:void 0,comment:eo}})},eS=(0,H.i3)(),eM=async()=>{eo&&eS.open({editComment:eo,tabId:eu,surface:ec,editingUserId:null==eg?void 0:eg.id})},eT=el&&(0,G.D2)(el)&&"post"===el.type&&el.mediaClip,eP=async(e,t)=>{await (0,T.rd)("/api/v1/comment/".concat(e.id,"/juice"),{method:"POST",json:{times_to_show:t}}),ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Juiced"),Icon:u.Z}))),ey(!1)},eF=async(e,t)=>{let n;let l=ee({item:e,parentItem:er});if(!l)return;switch(t){case"1hour":n=1;break;case"8hours":n=8;break;case"24hours":n=24}let a=n?{expires_at:(0,J.Z)().add(n,"hour").toISOString()}:{},{id:d,type:s}=l;await (0,T.rd)("/api/v1/notification_settings/".concat(s,"/").concat(d,"/mute"),{method:"POST",json:a}),ep({type:"item_pause_notifications",payload:{entityKey:e.entity_key}}),ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Paused"),Icon:p.Z})))},eO=async e=>{let t=ee({item:e,parentItem:er});if(!t)return;let{id:n,type:l}=t;await (0,T.rd)("/api/v1/notification_settings/".concat(l,"/").concat(n,"/mute"),{method:"DELETE"}),ep({type:"item_unpause_notifications",payload:{entityKey:e.entity_key}}),ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Unpaused"),Icon:p.Z})))},eD=async()=>{try{if(!eo){ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Error starting workflow: comment not found")})));return}let{workflowId:e}=await (0,T.rd)("/api/v1/comment/".concat(eo.id,"/workflow"),{method:"POST",json:{}});ed.popToast(t=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},t),{text:"Workflow started with id ".concat(e)})))}catch(e){ed.popToast(t=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},t),{text:"Error starting workflow: ".concat(e)})))}},eL=ea&&el&&"entity_key"in el&&eg&&eg.id!==ek.id,eX=eg&&eg.id===ek.id,ez=eg&&!!(null==el?void 0:null===(n=el.post)||void 0===n?void 0:n.publishedBylines.find(e=>e.id===eg.id)),eA=eg&&(null==er?void 0:er.type)==="note_reply"&&(null==el?void 0:null===(l=el.parentComments[0])||void 0===l?void 0:l.user_id)===eg.id,eq=(eX||ez||eA)&&(null==el?void 0:el.type)&&["comment","post"].includes(el.type),eR=[(0,r.tZ)(L.sN,{leading:(0,r.tZ)(s.Z,{}),onClick:()=>{let e=eo?(0,Y.Sgq)(eo):ei?(0,Y.mx9)(et,ei,{mediaClip:eT||void 0}):null;(0,F.vQ)(e),ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Copied link to clipboard"),Icon:s.Z})))},children:eh("Copy link")}),!eo&&ei&&(0,r.tZ)(en,{post:ei}),...eB,(0,r.tZ)(L.sN,{leading:(0,r.tZ)(m.Z,{}),onClick:()=>{eZ({children:(0,r.tZ)(w.I,{comment:eo||void 0,onClose:ew}),width:540})},children:eh("Embed")}),eo?(0,r.tZ)(L.sN,{leading:(0,r.tZ)(c.Z,{}),onClick:()=>{ed.popToast(e=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},e),{text:eh("Downloading image..."),Icon:c.Z})))},href:(0,K.IY)(eo.id),target:"_blank",download:!0,children:eh("Save as image")}):null].filter(Boolean),eU=[(0,Q.canEditComment)(eg,eo)&&(0,r.tZ)(L.sN,{leading:(0,r.tZ)(h.Z,{}),onClick:eM,children:eh("Edit")}),eo&&((null==eg?void 0:eg.is_global_admin)||(null==eg?void 0:eg.id)===eo.user_id||es("show_note_stats_for_all_notes")||(0,Q.canManageCommentAsPrimaryUser)(eg,eo))?(0,r.tZ)(L.sN,{leading:(0,r.tZ)(v.Z,{}),href:(0,K.wn)(eo,{noBase:j.L}),native:!0,children:eh("View stats")}):null].filter(Boolean),ej=(null==el?void 0:el.type)&&["comment","post"].includes(el.type)&&em.mutedFeedItems.has(el.entity_key),eV=[eL&&(0,r.tZ)(L.sN,{leading:(0,r.tZ)(_.Z,{}),onClick:async()=>{try{ep({type:"item_hide",payload:{entityKey:el.entity_key}}),await (0,T.rd)("/api/v1/note/".concat(el.entity_key,"/hide"),{method:"POST",json:{tabId:eu,surface:ec}})}catch(e){ed.popToast(t=>(0,r.tZ)(A.FN,(0,o._)((0,i._)({},t),{text:(0,F.zx)(e)})))}},children:(eg.is_admin||eg.is_contributor)&&"post-page-restacks-list"===ec?eh("Hide note from post"):eh("Hide note")}),eq&&(ej?(0,r.tZ)(q.WS,{onClick:()=>eO(el),customLabel:eh("Unpause notifications")}):(0,r.tZ)(q.KV,{onMute:e=>eF(el,e),customLabel:eh("Pause notifications")})),(null==eg?void 0:eg.is_global_admin)&&eo&&(null===(Z=eo.attachments)||void 0===Z?void 0:null===(g=Z[0])||void 0===g?void 0:g.type)==="video"?(0,r.tZ)(L.sN,{leading:(0,r.tZ)(f.Z,{}),priority:"secondary",onClick:eD,children:eh("Run workflow")}):null].filter(Boolean),eH=[...eC,eI,(0,Q.canDeleteComment)(eg,eo,{pub:null!=et?et:void 0,post:null!=ei?ei:void 0,parentComments:eb})&&(0,r.tZ)(L.sN,{leading:(0,r.tZ)(d.Z,{}),priority:"destructive",onClick:()=>e_(!0),children:eh("Delete")}),(null==eg?void 0:eg.is_global_admin)&&eo?(0,r.tZ)(L.sN,{leading:(0,r.tZ)(u.Z,{}),priority:"destructive",onClick:async()=>{ey(!0)},children:eh("Juice")}):null].filter(Boolean),eJ=[0!==eR.length&&eR,0!==eU.length&&(0,r.tZ)(L.xw,{children:eU}),0!==eV.length&&(0,r.tZ)(L.xw,{children:eV}),0!==eH.length&&(0,r.tZ)(L.xw,{children:eH})];return 0===eJ.length?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(L.v2,{trigger:(0,r.tZ)(D.hs,{className:$.Z.moreButtonContainer,children:(0,r.tZ)(O.hU,{priority:"quaternary",size:"sm",className:$.Z.moreButton,"aria-label":eh("More options"),children:(0,r.tZ)(y.Z,{size:16})})}),onOpen:()=>{el&&(0,R.rw)(el,ec,"menu",{tabId:eu})},children:eJ}),(0,r.tZ)(X.W,{isOpen:ev,title:eh("Delete note"),description:eh("Are you sure you want to permanently delete this note? This action cannot be undone."),primaryButton:(0,r.tZ)(O.zx,{priority:"destructive",onClick:eE,children:eh("Delete")}),secondaryButton:(0,r.tZ)(O.zx,{priority:"secondary",onClick:()=>e_(!1),children:eh("Cancel")}),onClose:()=>e_(!1)}),(null==eg?void 0:eg.is_global_admin)&&(0,r.tZ)(X.W,{isOpen:ef,title:eh("Juice note"),description:eh("How many additional impressions would you like this note to receive? 100 impressions equals roughly 1-3 likes."),primaryButton:(0,r.BX)(z.dm,{priority:"secondary-outline",size:"md",children:[(0,r.tZ)(z.yo,{onClick:async()=>{await eP(eo,100)},children:"100"}),(0,r.tZ)(z.yo,{onClick:async()=>{await eP(eo,500)},children:"500"}),(0,r.tZ)(z.yo,{onClick:async()=>{await eP(eo,1e3)},children:"1000"})]}),secondaryButton:(0,r.tZ)(D.hs,{flex:"grow",children:(0,r.tZ)(O.zx,{priority:"secondary",onClick:()=>ey(!1),children:eh("Cancel")})}),onClose:()=>ey(!1)})]})}function en(e){var{post:t}=e,n=(0,l._)(e,["post"]);let a=(0,E.aF)(),{requireLogin:d}=(0,V.SJ)(),s=()=>null==d?void 0:d({redirectOverride:(0,Y.uRy)(null,t,{urlParams:{triggerSave:!0}})}),c=ei(t),{iString:u}=(0,I.M1)();return(0,r.tZ)(L.sN,(0,o._)((0,i._)({leading:t.is_saved?(0,r.tZ)(g.Z,{}):(0,r.tZ)(Z.Z,{}),onClick:()=>a?c():s()},n),{children:u(t.is_saved?"Unsave":"Save")}))}function ei(e){let t=(0,U.I0)(),n=(0,b.c1)();return()=>{let i=e.id,o=!e.is_saved;(0,b.TJ)(i,o,{surface:"reader"}),n(o),t({type:"post_save",payload:{postId:i,isSaved:o}})}}},69181:function(e,t,n){n.d(t,{C:()=>g,Qn:()=>f,j0:()=>y,u0:()=>Z});var i=n(16584),o=n(30396),l=n(64998),r=n(60129),a=n(64729),d=n(95441),s=n(42375),c=n(98170),u=n(6246),p=n(85527),m=n(63474),h=n(43570),v=n(15503),_=n(20063);let f=()=>{let{iString:e}=(0,d.M1)();return(0,i.tZ)(h.Vp,{theme:"error",priority:"primary",className:_.Z.livePill,children:e("LIVE")})},y=()=>{let{iString:e}=(0,d.M1)();return(0,i.tZ)(a.i,{children:(0,i.tZ)(h.D7,{priority:"primary",children:e("WAS LIVE")})})},g=e=>{let{viewerCount:t}=e;return(0,i.tZ)(h.D7,{priority:"primary",leading:(0,i.tZ)(r.Z,{size:18}),children:(0,u.T)(t)})},Z=e=>{let{item:t,pub:n,post:r,onViewEpisodeClick:a}=e,{iString:u}=(0,d.M1)(),m=(0,c.vE)({post:r,publication:n}),_=(0,s.rI)(),f=(0,o.qp)(p.q);return(0,i.tZ)(h.D7,{priority:"primary",onClick:e=>{t&&(0,v.rw)(t,_,"watch_full_episode",{tabId:f}),null==a||a(),m(e)},trailing:(0,i.tZ)(l.Z,{size:16}),children:u("View full episode")})};(0,m.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",className:_.Z.viewerCountContainer})},42375:function(e,t,n){n.d(t,{$U:()=>p,rI:()=>h});var i=n(16584),o=n(98661),l=n(30396),r=n(25642),a=n(27744),d=n(75822),s=n(81043),c=n(75419),u=n(41233);function p(e){let{state:t,dispatch:n,surface:o,children:p}=e,{onboardingModalRef:h}=(0,s.SJ)(),v=(0,l.Ye)(()=>({dispatch:n}),[]);return(0,i.tZ)(m.Provider,{value:o,children:(0,i.tZ)(a.RR.Provider,{value:v,children:(0,i.tZ)(a.ev.Provider,{value:t,children:(0,i.tZ)(r.ju,{children:(0,i.tZ)(c.Au,{children:(0,i.BX)(d.qS,{children:[p,(0,i.tZ)(u.fA,{isOpen:!!t.isSigningIn,onCancel:()=>n({type:"sign_in",payload:{isSigningIn:!1}}),onSuccess:()=>{n({type:"sign_in",payload:{isSigningIn:!1}}),document.location.reload()},onSignup:()=>{var e;n({type:"sign_in",payload:{isSigningIn:!1}}),null===(e=h.current)||void 0===e||e.open()},noExit:t.signInNoExit})]})})})})})})}let m=(0,o.createContext)("feed");function h(){return(0,l.qp)(m)}},43251:function(e,t,n){n.d(t,{Lw:()=>o});var i=n(60308);function o(e,t){return(null==e?void 0:e.profile_set_up_at)?(0,i.NNq)(e,t):(0,i.Nhr)((null==t?void 0:t.utm_source)?{utm_source:t.utm_source}:void 0)}},46234:function(e,t,n){n.d(t,{B:()=>s});var i=n(7409),o=n(16584),l=n(19081),r=n(58175),a=n(14773),d=n(63651);let s=e=>{let{firehoseFeedUrl:t,pub:n,section:s,trackingSource:c,variant:u="default"}=e,p=(0,a.n1)("/p/how-do-i-add-a-bulwark-member-only",(0,i._)({utm_source:c},s?{utm_content:s.id}:null)),m=(0,a.n1)("/account/add-all-podcasts",(0,i._)({utm_source:c},s?{utm_content:s.id}:null)),h=t?(0,o.BX)(r.xv.B3,{as:"li",font:"text",children:["Click here to set up your podcast app for"," ",(0,o.tZ)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:"everything in one feed"})]}):null,v=(0,d.W1P)(n,{params:{utm_source:c}});return(0,o.tZ)("div",{className:"container-o06YlK",children:"member-only"===u?(0,o.BX)(l.tu,{as:"ul",gap:4,children:[(0,o.BX)(r.xv.B3,{as:"li",font:"text",children:["Want to listen without ads? Join Bulwark+ for exclusive ad-free versions of all Bulwark shows."," ",(0,o.tZ)("a",{href:v,rel:"noopener noreferrer",target:"_blank",children:"Upgrade now"})]}),(0,o.BX)(r.xv.B3,{as:"li",font:"text",children:["Already a Bulwark+ member? Login to access premium shows. ",(0,o.tZ)("a",{href:p,children:"Learn more here"})]})]}):(0,o.BX)(l.tu,{as:"ul",gap:4,children:[(0,o.BX)(r.xv.B3,{as:"li",font:"text",children:["Learn about"," ",(0,o.tZ)("a",{href:p,rel:"noopener noreferrer",target:"_blank",children:"setting up your Bulwark+ private podcast feeds"})]}),h||(0,o.BX)(r.xv.B3,{as:"li",font:"text",children:["Add the Bulwark Premium Show"," ",(0,o.tZ)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:"super feed"})]})]})})}},30733:function(e,t,n){n.d(t,{N:()=>a});var i=n(16584),o=n(94184),l=n.n(o),r=n(71068);let a=e=>{let{children:t,columns:n=2,paddingTop:o=24}=e,a=(0,r.oB)({paddingTop:o,paddingX:16,paddingBottom:32});return(0,i.tZ)("div",{className:l()("container-kIrj2N",a,{"containerThreeColumn-Rot594":3===n,"containerFourColumn-vOHVwe":4===n}),children:t})}},24547:function(e,t,n){n.d(t,{H:()=>u});var i=n(7409),o=n(16584),l=n(94184),r=n.n(l),a=n(94874),d=n(71068),s=n(84864),c=n(36786);function u(e){let{users:t,renderAvatar:n=e=>(0,o.tZ)(a.qE,(0,i._)({},e)),max:l=5,total:d,size:s=32,direction:u="ltr",className:v,renderCount:_,loading:f}=e,y=l?t.slice(0,l):t,g=d?d-y.length:l?t.length-l:0,Z="rtl"===u?[...y].reverse():y,w=(0,o.tZ)(p,{size:s,remainingCount:g}),b=null==_?void 0:_(g),k=.25*s,x=Math.max(.125*s,3);return(0,o.BX)(m,{children:[(0,o.BX)(h,{className:r()(c.Z[u],v),style:{"--scale":"".concat(s,"px"),"--offset":"".concat(k,"px"),"--border-width":"".concat(x,"px")},children:[f?function(e){let{size:t,max:n}=e;return Array(n).fill(null).map((e,i)=>(0,o.tZ)(a.GX,{size:t,className:r()(c.Z.avatar,0!==i&&c.Z.overlap,i===n-1&&c.Z.last)},i))}({size:s,max:l}):Z.map((e,t)=>n({user:e,size:s,className:r()(c.Z.avatar,0!==t&&c.Z.overlap,t===Z.length-1&&c.Z.last)})),g>0&&!_&&w]}),g>0&&_&&b]})}function p(e){let{size:t,remainingCount:n}=e;return(0,o.tZ)(a.mw,{className:r()(c.Z.avatar,c.Z.overlap,c.Z.last),size:t,children:(0,o.tZ)(a.XH,{size:t,text:"+".concat((0,s.numberToRoughShortString)(Math.max(n,1),{plusSignifier:""}))})})}let m=(0,d.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",justifyContent:"start"}),h=(0,d.zo)({display:"flex",direction:"row",alignItems:"center",justifyContent:"start"})},84370:function(e,t,n){n.d(t,{T:()=>a});var i=n(16584),o=n(43570),l=n(58175),r=n(52503);function a(e){let{modifier:t,children:n,className:a}=e,d=function(e){let t=navigator.platform.toLowerCase().includes("mac");switch(null==e?void 0:e.toLowerCase()){case"cmd":return t?"⌘":"Ctrl + ";case"shift":return t?"⇧":"Shift + ";case"alt":case"opt":return t?"⌥":"Alt + ";case"ctrl":return t?"⌃":"Ctrl + ";case"esc":return"Esc";case"left":return"←";case"right":return"→";case"up":return"↑";case"down":return"↓";default:return""}}(t);return(0,i.tZ)(o.Vp,{priority:"secondary-outline",theme:"default",className:a,children:(0,i.BX)(l.xv,{as:"kbd",font:"text",weight:"regular",color:"secondary",className:r.Z.kbd,children:[d,n]})})}},15562:function(e,t,n){n.d(t,{W:()=>l});var i=n(16584),o=n(6490);let l=e=>{let{isOpen:t=!1,title:n,description:l,icon:r,onClose:a,primaryButton:d,secondaryButton:s}=e;return(0,i.BX)(o.u_,{isOpen:t,onClose:a,children:[n&&(0,i.tZ)(o.xB,{title:n,description:l,showClose:!1,icon:r}),(0,i.tZ)(o.ex,{}),(0,i.tZ)(o.mz,{primaryButton:d,secondaryButton:s})]})}},78096:function(e,t,n){n.d(t,{dm:()=>_,gd:()=>f,yo:()=>y});var i=n(7409),o=n(99282),l=n(98848),r=n(16584),a=n(94184),d=n.n(a),s=n(98661),c=n(86374),u=n(95441),p=n(15771),m=n(19081),h=n(99916),v=n(87815);let _=e=>{var{priority:t="secondary-outline",size:n="md"}=e,o=(0,l._)(e,["priority","size"]);"secondary-outline"===t&&(t="tertiary");let a="tertiary"===t;return(0,r.tZ)(Z.Provider,{value:{priority:t,size:n},children:(0,r.tZ)(m.X2,(0,i._)({radius:"sm"===n?"xs":"sm",className:d()(v.Z.group,a&&v.Z.outlined)},o))})},f=e=>{var{children:t,priority:n="primary",size:a="md",menuItems:d,additionalMenuProps:s={}}=e,p=(0,l._)(e,["children","priority","size","menuItems","additionalMenuProps"]);let{iString:m}=(0,u.M1)();return(0,r.BX)(_,{priority:n,size:a,children:[(0,r.tZ)(y,(0,o._)((0,i._)({},p),{children:t})),(0,r.tZ)(h.v2,(0,o._)((0,i._)({},s),{placement:"bottom-end",trigger:(0,r.tZ)(g,(0,o._)((0,i._)({},p),{"aria-label":m("Dropdown menu"),children:(0,r.tZ)(c.Z,{size:"sm"===a?16:"md"===a?20:24})})),children:d}))]})},y=(0,s.forwardRef)((e,t)=>{var{className:n}=e,a=(0,l._)(e,["className"]);let{priority:c,size:u}=(0,s.useContext)(Z);return(0,r.tZ)(p.zx,(0,o._)((0,i._)({priority:c,size:u,className:d()(v.Z.segment,n)},a),{ref:t}))}),g=(0,s.forwardRef)((e,t)=>{var{className:n}=e,a=(0,l._)(e,["className"]);let{priority:c,size:u}=(0,s.useContext)(Z);return(0,r.tZ)(p.hU,(0,o._)((0,i._)({priority:c,size:u,className:d()(v.Z.segment,n)},a),{ref:t}))}),Z=(0,s.createContext)({priority:"primary",size:"md"})},57693:function(e,t,n){n.d(t,{l:()=>f});var i=n(16584),o=n(30396),l=n(19425),r=n(20160),a=n(57391),d=n(36518),s=n(60807),c=n(68833),u=n(7882),p=n(19081),m=n(74312),h=n(98012);let v={alert:"alert-pEnrFa",transition:"transition-FsyEAS",enterFrom:"enterFrom-dljIVN",enterTo:"enterTo-HLLVxF",leaveFrom:"leaveFrom-aHkaAL",leaveTo:"leaveTo-k1oI5e"},_=e=>{(0,c.j)(c.FP.NOTIFICATIONS_ALERT_SHOWN,["comment_audience","comment_id","community_comment_id","created_at","id","mention_id","publication_id","sender_count","target_comment_id","target_community_comment_id","target_community_post_id","target_post_id","target_user_id","type"].reduce((t,n)=>(t[n]=null==e?void 0:e[n],t),{}))};function f(){var e;let{activityUnreadCount:t}=(0,d.lR)(),{exposeExperiment:c,getExperimentVariant:f}=(0,a.jc)(),{isLoading:y,result:g,refetch:Z}=(0,u.ib)({pathname:"/api/v1/activity-feed-web",query:{limit:1},auto:!1});(0,o.d4)(()=>{t>0&&Z()},[t]);let[w,b]=(0,o.eJ)(!1),[k,x]=(0,o.eJ)(!1),{isLoading:C,fetch:I,result:B}=(0,m.Oe)({module:"./MiniNotificationsViewer",onRequest:()=>Promise.all([n.e("9669"),n.e("236"),n.e("7833"),n.e("5990")]).then(n.bind(n,79075)),fetchImmediately:!1}),N=(0,h.Z)(),{userSettings:E,changeSetting:S}=(0,s.SE)(),M=null==g?void 0:null===(e=g.activityItems)||void 0===e?void 0:e[0],T=(null==M?void 0:M.created_at)?(0,h.Z)(null==M?void 0:M.created_at):N.subtract(100,"year"),P=(null==E?void 0:E.last_notification_alert_shown_at)?(0,h.Z)(E.last_notification_alert_shown_at):N.subtract(100,"year"),F=7>N.diff(T,"day")&&T.diff(P,"hour")>2,O=(0,o.sO)(null),D=()=>{O.current&&window.clearTimeout(O.current)},L=()=>{D(),O.current=window.setTimeout(()=>{b(!1)},6e3)};return(0,o.d4)(()=>{F&&t>0&&(c("notification_alert_improved"),"treatment"!==f("notification_alert_improved")||(B&&!w?window.setTimeout(()=>{b(!0),S("last_notification_alert_shown_at",(0,h.Z)().toISOString()),_(M),L()},2e3):B||C||I()))},[y,g,t,C,F,w,b]),(0,i.tZ)(i.HY,{children:(w||k)&&g&&(0,i.tZ)(l.u,{style:{position:"fixed",left:"auto",right:20,top:92,zIndex:100},appear:!0,show:w,beforeEnter:()=>x(!0),afterLeave:()=>x(!1),enter:v.transition,enterFrom:v.enterFrom,enterTo:v.enterTo,leave:v.transition,leaveFrom:v.leaveFrom,leaveTo:v.leaveTo,children:(0,i.tZ)(r.W,{children:(0,i.tZ)(p.hs,{radius:"md",border:"detail",className:v.alert,onMouseEnter:D,onMouseLeave:L,shadow:"lg",bg:"primary",children:(0,i.tZ)(m.cr,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsStack,onRequest:()=>Promise.all([n.e("9669"),n.e("236"),n.e("7833"),n.e("5990")]).then(n.bind(n,79075)),result:g,isReadOnly:!0})})})})})}},83010:function(e,t,n){n.d(t,{H:()=>c,n:()=>u});var i=n(7409),o=n(99282),l=n(16584),r=n(6400),a=n(30396),d=n(68833);let s=(0,r.createContext)({surface:null,platform:"web"});function c(e){let{children:t,trackingProps:n}=e,o=(0,a.qp)(s),r=(0,a.Ye)(()=>(0,i._)({},o,n),Object.values(n));return(0,l.tZ)(s.Provider,{value:r,children:t})}function u(){let e=(0,a.qp)(s);return(t,n)=>(0,d.j)(t,(0,i._)((0,o._)((0,i._)({},e),{ui:"page"===e.surface?"activity-page":e.surface}),n))}},8828:function(e,t,n){n.d(t,{dd:()=>l,oH:()=>o});var i=n(48980);let o=function(){let{before:e,tab:t="all"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{try{var o,l;let r=await (0,i.rd)("/api/v1/messages/inbox",{query:{paginate:"true",tab:t,before:e}});n({type:"inbox-new_items",payload:{threads:null==r?void 0:r.threads,hasMore:null==r?void 0:r.more,directMessagesUnreadCount:null==r?void 0:r.directMessagesUnreadCount,pendingInviteCount:null==r?void 0:r.pendingInviteCount,pendingInviteUnreadCount:null!==(o=null==r?void 0:r.pendingInviteUnreadCount)&&void 0!==o?o:null==r?void 0:r.pendingInviteCount,pubChatUnreadCount:null!==(l=null==r?void 0:r.pubChatUnreadCount)&&void 0!==l?l:0,mostRecentChatTimestamp:r.mostRecentChatTimestamp}})}catch(e){if(console.warn("error",e),e instanceof i.kp)n({type:"inbox-new_error",payload:{error:e}});else throw e}}},l=e=>async t=>{"direct-message"===e&&t(o({tab:"people"})),t({type:"inbox-set_filter",payload:e})}},15503:function(e,t,n){n.d(t,{CD:()=>Z,Eg:()=>c,Gv:()=>k,Kr:()=>b,MJ:()=>g,a2:()=>p,iI:()=>v,qG:()=>y,rw:()=>u,zi:()=>s});var i=n(7409),o=n(99282),l=n(41609),r=n.n(l),a=n(42375),d=n(68833);function s(e,t){var n;let{extraEventProps:i={},tabId:o,primaryItem:l,isLoggedIn:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="trackingParameters"in e?null===(n=e.trackingParameters)||void 0===n?void 0:n.item_entity_key:null;a&&r&&fetch("/api/v1/reader/feed/".concat(a,"/seen"),{method:"POST"}),f("seen",e,t,{extraEventProps:i,tabId:o,primaryItem:l})}function c(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f("seen_for_duration",e,t,{extraEventProps:(0,o._)((0,i._)({},l),{timeVisible:n}),tabId:r,primaryItem:a})}function u(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};f("clicked",e,t,{extraEventProps:(0,o._)((0,i._)({clicked_element:n},l),{tabId:r,primaryItem:a})})}function p(e,t){let{extraEventProps:n={},tabId:l,primaryItem:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f("swiped",e,t,{extraEventProps:(0,o._)((0,i._)({},n),{tabId:l,primaryItem:r})})}function m(e){var t,n,i,o,l,r,a,d,s,c,u,p,m;let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{primaryItem:v}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{item_primary_entity_key:v&&"entity_key"in v?v.entity_key:"entity_key"in e?e.entity_key:"",item_entity_key:"entity_key"in e?e.entity_key:"",item_type:e.type,item_content_user_id:"comment"in e?e.comment&&e.comment.user_id?e.comment.user_id:0:"post"in e?null!==(u=null===(n=e.post.publishedBylines)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.id)&&void 0!==u?u:e.publication.author_id:0,item_content_timestamp:"comment"in e&&(null===(i=e.comment)||void 0===i?void 0:i.date)?new Date(e.comment.date).toISOString():"post"in e&&(null===(o=e.post)||void 0===o?void 0:o.post_date)?new Date(e.post.post_date).toISOString():"community_post"in e&&(null===(l=e.community_post)||void 0===l?void 0:l.created_at)?new Date(e.community_post.created_at).toISOString():null,item_context_type:"context"in e?e.context.type:"",item_context_type_bucket:"context"in e&&null!==(p=e.context.typeBucket)&&void 0!==p?p:"",item_context_timestamp:new Date("context"in e?e.context.timestamp:new Date).toISOString(),item_context_user_id:"context"in e?null===(r=e.context.users[0])||void 0===r?void 0:r.id:void 0,item_context_user_ids:"context"in e&&(null!==(m=null===(a=e.context.users)||void 0===a?void 0:a.length)&&void 0!==m?m:0)>0?e.context.users.map(e=>{let{id:t}=e;return t}):[],item_publication_id:"publication"in e?null===(d=e.publication)||void 0===d?void 0:d.id:void 0,item_post_id:null===(s=e.post)||void 0===s?void 0:s.id,item_comment_id:null===(c=e.comment)||void 0===c?void 0:c.id,item_can_reply:!("canReply"in e)||e.canReply,item_source:"frontend",item_model_rank:null,item_model_score:null,tab_id:null!=h?h:void 0,item_module_id:"id"in e?e.id:void 0,followed_user_count:0,subscribed_publication_count:0,is_following:!1,is_explicitly_subscribed:!1}}function h(e,t){let{primaryItem:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"comment"===e.type||"post"===e.type||"featuredCollection"===e.type||"featuredPublication"===e.type?r()(e.trackingParameters)?m(e,t,{primaryItem:n}):e.trackingParameters:m(e,t,{primaryItem:n})}function v(e){let{primaryItem:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o._)((0,i._)({},e),{trackingParameters:m(e,null,{primaryItem:t})})}n(31406),n(84864);let _=new Map([["featuredCollection","featured_collection"],["featuredPublication","featured_publication"]]);function f(e,t,n){let{extraEventProps:o={},tabId:l,primaryItem:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=h(t,null!=l?l:null,{primaryItem:r}),s=_.get(t.type);(0,d.j)("seen"===e?d.FP.FEED_ITEM_SEEN:"seen_for_duration"===e?d.FP.FEED_ITEM_SEEN_FOR_DURATION:"swiped"===e?d.FP.FEED_ITEM_SWIPED:d.FP.FEED_ITEM_CLICKED,(0,i._)({surface:n,tabId:l,module:s},a,o))}function y(e,t,n){let{extraEventProps:o={},tabId:l,primaryItem:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=h(t,null!=l?l:null,{primaryItem:r}),s=_.get(t.type);(0,d.j)("seen"===e?d.FP.FEED_MODULE_ITEM_SEEN:d.FP.FEED_MODULE_ITEM_CLICKED,(0,i._)({surface:n,tabId:l,module:s},a,o))}function g(e,t){let{extraEventProps:n={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};w("seen",e,t,{extraEventProps:n})}function Z(e,t,n){let{extraEventProps:o={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};w("clicked",e,t,{extraEventProps:(0,i._)({clicked_element:n},o)})}function w(e,t,n){var o,l,r;let{extraEventProps:a={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,d.j)("seen"===e?d.FP.FEED_USER_SUGGESTION_SEEN:d.FP.FEED_USER_SUGGESTION_CLICKED,(0,i._)({suggested_user_id:t.user.id,suggested_publication_id:null!==(l=null===(o=t.publication)||void 0===o?void 0:o.id)&&void 0!==l?l:null,suggestion_source:null!==(r=t.source)&&void 0!==r?r:null,surface:n},t.trackingParameters,a))}function b(e,t){let{tabId:n,noteId:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,d.j)(d.FP.FEED_HIDDEN_ATTACHMENT_SHOWN,{attachmentId:e,reason:t,tabId:n,noteId:i})}function k(e){let{props:t,isModuleItem:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,a.rI)(),l=n?y:f;return n=>{l("clicked",e,o,{extraEventProps:(0,i._)({clicked_element:n},t)})}}},76819:function(e,t,n){n.d(t,{Hs:()=>r,Rx:()=>a,ye:()=>l});var i=n(7409),o=n(75561);function l(e){var t,n,i;return e.link_title||(null===(t=e.postTag)||void 0===t?void 0:t.name)||(null===(n=e.section)||void 0===n?void 0:n.name)||(null===(i=e.post)||void 0===i?void 0:i.title)||""}function r(e){var t;return e.postTag?"tag":e.section?"section":(null===(t=e.post)||void 0===t?void 0:t.type)==="page"?"page":e.post?"post":"link"}function a(e,t){let{isChatActive:n,isMeetingsActive:l,hasMultipleNewsletters:r,isChatEnabled:a,isFeedEnabled:d,isReaderReferralsLeaderboardActive:s,language:c="en",useReordering:u=!1}=t,p=e.filter(e=>!e.standard_key),m=new Map(e.filter(e=>e.standard_key).map(e=>[e.standard_key,e])),{iString:h}=I18N.i(c);for(let e of p){var v;(null===(v=e.section)||void 0===v?void 0:v.hide_from_navbar)&&(e.is_hidden=!0)}let _=[d&&{standard_key:"notes",link_title:"Notes",link_url:"/notes"},a&&{standard_key:"chat",link_title:"Chat",link_url:"/chat",is_hidden:!n},l&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...p,{standard_key:"archive",link_title:h("Archive"),link_url:"/archive"},r&&{standard_key:"newsletters",link_title:h("Newsletters"),link_url:"/newsletters",is_hidden:!0},s&&{standard_key:"leaderboard",link_title:h("Leaderboard"),link_url:"/leaderboard"},{standard_key:"about",link_title:h("About"),link_url:"/about"}].filter(e=>!!e).map(e=>{if(e.standard_key){let t=m.get(e.standard_key);if(t)return(0,o.CD)((0,i._)({},e),t)}return e});if(u){let e=["about","notes","chat","archive"];return[..._.filter(t=>!e.includes(t.standard_key||"")),...e.map(e=>_.find(t=>t.standard_key===e)).filter(e=>!!e)].filter(e=>!!e)}return _}},62515:function(e,t,n){n.d(t,{Ds:()=>d,Rm:()=>l,aD:()=>r,gp:()=>a});var i=n(14773),o=n(63651);function l(e,t){return(0,i.Q2)("/chat/".concat(e),t)}function r(e,t){return(0,i.Q2)("/chat/".concat(e),t)}function a(e){return(0,i.Q2)("/chat/new",e)}function d(e){let{userId:t,userName:n}=e,l=(0,o.JlE)({userId:t,userName:n});return"".concat((0,i.ZX)(),"/chat/dm/user/").concat(l)}}}]);