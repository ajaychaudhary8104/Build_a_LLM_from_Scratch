"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9294"],{81352:function(e,t,i){i.d(t,{Z:()=>n});let n={activeLike:"activeLike-n4wXdc",activeSave:"activeSave-UgcaYI",actionMenu:"actionMenu-PHX5iz",relative:"relative-IkyQqe"}},55749:function(e,t,i){i.d(t,{Z:()=>n});let n={queue:"queue-EZRP7x",cardWrapper:"cardWrapper-qR0zV5",smallCardWrapper:"smallCardWrapper-GidLX3",archived:"archived-tVgnOK",arrow:"arrow-M1xp9f",disabled:"disabled-C1q6TH",link:"link-gPxpTf",highlight:"highlight-khGgmH",border:"border-Sobc4n",playButtonContainer:"playButtonContainer-SkXFOr",playButton:"playButton-NfBL9x",logoContainerShadow:"logoContainerShadow-MadM6a",cornerLogo:"cornerLogo-sq79Zv",vibranceTertiaryIcon:"vibranceTertiaryIcon-FMLmJq",vibranceSecondaryText:"vibranceSecondaryText-mI5k5T",vibranceTertiaryBg:"vibranceTertiaryBg-dway6D",closeButton:"closeButton-dm0qJO",closeIcon:"closeIcon-dUQ0_l",card:"card-DZvXCa",smallCard:"smallCard-QlKXKt",cardBg:"cardBg-Vnz3e5",cardTop:"cardTop-qa11Ls",bigCardTop:"bigCardTop-xISBuI",smallCardTop:"smallCardTop-YuCbBT",gifPreview:"gifPreview-jTpyu3",coverImage:"coverImage-h44eo2",audioWaveform:"audioWaveform-QTkNO2",audioLogoContainer:"audioLogoContainer-yUWOV3",cardBottom:"cardBottom-KjkXaq",smallCardRight:"smallCardRight-A8Afqo",titleContainerMinHeight:"titleContainerMinHeight-QKOvED",title:"title-EwaRJw",smallCardAuthor:"smallCardAuthor-MXnD06",iconButton:"iconButton-g5L_4l",isSaved:"isSaved-Ml5fNZ",newIconButton:"newIconButton-AH4esm",livePreview:"livePreview-t_LWyR",blur:"blur-Q0P53N",explicitIcon:"explicitIcon-otqJ1H"}},97501:function(e,t,i){i.d(t,{Z:()=>n});let n={container:"container-fi9IrN",nav:"nav-ptYSWX"}},16104:function(e,t,i){i(16584),i(64515)},51833:function(e,t,i){i.d(t,{Z:()=>o});var n=i(7409),r=i(99282),a=i(16584),l=i(64515);let o=e=>(0,a.BX)(l.l,(0,r._)((0,n._)({},e),{name:"PlayIconRounded",svgParams:{width:14,height:19},stroke:"none",children:[(0,a.tZ)("path",{d:"M0.679688 9.30398C0.679688 12.7684 2.96869 15.1988 6.3359 15.4816V17.5409H3.05706C2.68588 17.5409 2.38539 17.8413 2.38539 18.2126C2.38539 18.5837 2.68588 18.8754 3.05706 18.8754H10.9493C11.3204 18.8754 11.6209 18.5837 11.6209 18.2126C11.6209 17.8413 11.3204 17.5409 10.9493 17.5409H7.67041V15.4816C11.0465 15.1988 13.3266 12.7684 13.3266 9.30398V7.50991C13.3266 7.13872 13.0349 6.84708 12.6638 6.84708C12.2926 6.84708 11.9921 7.13872 11.9921 7.50991V9.25095C11.9921 12.2647 10.0301 14.262 7.00758 14.262C3.9762 14.262 2.0142 12.2647 2.0142 9.25095V7.50991C2.0142 7.13872 1.72255 6.84708 1.34252 6.84708C0.971336 6.84708 0.679688 7.13872 0.679688 7.50991V9.30398ZM7.00758 12.3619C8.7663 12.3619 9.95053 11.045 9.95053 9.16262V3.25008C9.95053 1.35878 8.7663 0.0507812 7.00758 0.0507812C5.24001 0.0507812 4.05574 1.35878 4.05574 3.25008V9.16262C4.05574 11.045 5.24001 12.3619 7.00758 12.3619Z"})," "]}))},19911:function(e,t,i){i.d(t,{Z:()=>c});var n=i(7409),r=i(99282),a=i(98848),l=i(16584),o=i(64515);let c=e=>{var{size:t=16,fill:i="var(--color-fg-primary)",className:c}=e,d=(0,a._)(e,["size","fill","className"]);return(0,l.tZ)(o.l,(0,r._)((0,n._)({},d),{name:"QueueCloseIcon",svgParams:{viewBox:"0 0 16 16"},width:t,height:t,fill:i,stroke:"none",className:c,children:(0,l.tZ)("path",{d:"M3.23486 13.1055C3.12907 12.9997 3.05924 12.877 3.02539 12.7373C2.99154 12.5977 2.99154 12.458 3.02539 12.3184C3.05924 12.1787 3.12695 12.0581 3.22852 11.9565L7.01172 8.16699L3.22852 4.38379C3.12695 4.28646 3.05924 4.16797 3.02539 4.02832C2.99577 3.88444 2.99577 3.74268 3.02539 3.60303C3.05924 3.46338 3.12907 3.34066 3.23486 3.23486C3.33643 3.12907 3.45703 3.05924 3.59668 3.02539C3.74056 2.99154 3.88232 2.99154 4.02197 3.02539C4.16585 3.05924 4.28857 3.12695 4.39014 3.22852L8.17334 7.01172L11.9565 3.22852C12.0581 3.12695 12.1787 3.05924 12.3184 3.02539C12.458 2.99154 12.5977 2.99154 12.7373 3.02539C12.877 3.05924 12.9997 3.13118 13.1055 3.24121C13.2113 3.34277 13.2811 3.46338 13.3149 3.60303C13.353 3.74268 13.353 3.88232 13.3149 4.02197C13.2811 4.16162 13.2134 4.28223 13.1118 4.38379L9.33496 8.16699L13.1118 11.9565C13.2134 12.0581 13.2811 12.1787 13.3149 12.3184C13.3488 12.458 13.3488 12.5977 13.3149 12.7373C13.2811 12.877 13.2113 12.9997 13.1055 13.1055C12.9997 13.2113 12.877 13.2811 12.7373 13.3149C12.5977 13.3488 12.458 13.3488 12.3184 13.3149C12.1787 13.2811 12.0581 13.2134 11.9565 13.1118L8.17334 9.32861L4.39014 13.1118C4.28857 13.2134 4.16797 13.2811 4.02832 13.3149C3.88867 13.3488 3.74691 13.3488 3.60303 13.3149C3.46338 13.2811 3.34066 13.2113 3.23486 13.1055Z"})}))}},4168:function(e,t,i){i(16584),i(64515)},84251:function(e,t,i){i.d(t,{Z:()=>o});var n=i(7409),r=i(99282),a=i(16584),l=i(64515);let o=e=>{var t,i;return(0,a.tZ)(l.l,(0,r._)((0,n._)({},e),{name:"UsersIconFilled",svgParams:{height:30,width:30,fill:"#B6B6B6",stroke:"none"},children:(0,a.tZ)("path",{d:"M10.125 16.5527C11.7943 16.5527 13.2268 17.0199 14.3604 17.748C12.7381 19.1583 11.8242 20.9607 11.8242 22.5781C11.8242 23.0415 11.9179 23.4885 12.1416 23.877H4.68555C3.45508 23.877 2.9668 23.3887 2.9668 22.5C2.9668 19.8047 5.7207 16.5527 10.125 16.5527ZM21.3652 16.582C26.4336 16.5821 29.5879 20.0586 29.5879 22.5781C29.5879 23.4375 29.041 23.8769 27.5078 23.877H15.2324C13.6992 23.877 13.1524 23.4375 13.1523 22.5781C13.1523 20.0586 16.3066 16.582 21.3652 16.582ZM10.1348 7.64648C11.9414 7.64648 13.5332 9.18945 13.5332 11.2988C13.5332 13.418 11.9512 15.0586 10.1348 15.0586C8.30859 15.0586 6.72656 13.418 6.72656 11.3184C6.72656 9.22852 8.31836 7.64649 10.1348 7.64648ZM21.375 6.31836C23.4648 6.31837 25.2812 8.10548 25.2812 10.5176C25.2812 12.959 23.4746 14.834 21.375 14.834C19.2754 14.834 17.4688 12.959 17.4688 10.5371C17.4688 8.14453 19.2852 6.31836 21.375 6.31836Z",fill:null!==(t=e.fill)&&void 0!==t?t:"white",style:"fill:".concat(null!==(i=e.fill)&&void 0!==i?i:"white",";fill-opacity:1;")})}))}},39341:function(e,t,i){i(16584);var n=i(6400);i(30396),(0,n.createContext)({}).displayName="WWWContext"},12337:function(e,t,i){i.d(t,{O:()=>b});var n=i(7409),r=i(16584),a=i(30396),l=i(93974),o=i(77747),c=i(42375),d=i(62903),s=i(25991),u=i(85527),m=i(16451),h=i(80878),p=i(19081),v=i(15503),g=i(91400),f=i(63651);function b(e){let{item:t,author:i}=e,n=(0,c.rI)(),l=(0,a.qp)(u.q),o=()=>(0,v.rw)(t,n,"profile",{tabId:l}),b=(0,g.XA)(),y=b?(0,f._5K)({postId:t.community_post.id,utm_source:n}):(0,f.xC8)({pubId:t.community_post.publication_id,postId:t.community_post.id,noBase:!0,params:{backAction:f.DsN}});return(0,r.BX)(p.tu,{paddingY:16,paddingX:{mobile:16,desktop:0},gap:8,cursor:"pointer",onClick:e=>{e.defaultPrevented||((0,v.rw)(t,n,"item",{tabId:l}),(0,h.Q)(e,y,{native:b}))},children:[(0,r.tZ)(d.L,{context:t.context,onClick:()=>(0,v.rw)(t,n,"context",{tabId:l}),utm_content:t.entity_key}),(0,r.BX)(p.hs,{gap:12,children:[(0,r.tZ)(m.Fb,{user:i,onClick:o,utm_content:t.entity_key}),(0,r.BX)(p.tu,{gap:8,flex:"grow",children:[(0,r.tZ)(s.Ev,{author:i,onClick:o,utm_content:t.entity_key,publication:t.publication,item:t,timestamp:t.community_post.created_at,hideSubscribeCta:!0}),(0,r.tZ)(Z,{communityPost:t.community_post,pub:t.publication,author:i,feedSurface:n,userPubRole:t.user_pub_role,contextType:t.context.type,useClientSideRouting:!b})]})]})]})}function Z(e){var t,i;let{communityPost:c,feedSurface:d,author:s,pub:u,userPubRole:m,contextType:h,useClientSideRouting:v}=e,[g,b]=(0,a.eJ)({reactions:null!==(t=c.reactions)&&void 0!==t?t:{},currentReaction:null!==(i=c.reaction)&&void 0!==i?i:void 0}),Z=async e=>{var t,i;let{id:r,reaction:a}=e,l=a===g.currentReaction,c=(0,n._)({},g.reactions);if(c[a]=(null!==(t=g.reactions[a])&&void 0!==t?t:0)+(l?-1:1),l){let e=await (0,o.aQ)(a,r,"posts");!l&&g.currentReaction&&(c[g.currentReaction]=(null!==(i=c[g.currentReaction])&&void 0!==i?i:0)-1),e instanceof Error||b({currentReaction:void 0,reactions:c})}else await (0,o.oQ)(a,r,"posts") instanceof Error||b({reactions:c,currentReaction:a})};return(0,r.BX)(p.tu,{gap:2,alignItems:"start",children:[(0,r.tZ)(l.qp,{communityPost:c,hideReply:!1,userBlockStatus:null,isFounding:null==m?void 0:m.is_founding,isPaid:(null==m?void 0:m.membership_state)==="subscribed",isReadOnly:!0,useClientSideRouting:v,utmSource:d,pub:u,truncate:!0,surface:d,author:s,reactionsContext:{type:"chat_subscribed"===h?"feed-subscribed":"feed-recommended",id:c.id},reaction:g.currentReaction,reactions:g.reactions,handleReactionClick:Z,backAction:f.DsN,outline:"detail"}),(0,r.tZ)(l.mZ,{direction:"incoming",commenters:c.recent_commenters,count:c.comment_count,hasUnread:!!(c.most_recent_comment_created_at&&c.user_last_viewed_timestamp&&c.user_last_viewed_timestamp<c.most_recent_comment_created_at),outline:"detail"})]})}},12302:function(e,t,i){i.d(t,{Z:()=>v});var n=i(16584),r=i(35543),a=i(95441),l=i(16451),o=i(68833),c=i(80878),d=i(80026),s=i(63474),u=i(65958),m=i(15503),h=i(33555),p=i(63651);let v=e=>{let{item:t}=e,{iString:i}=(0,a.M1)();return(0,n.BX)(d.tu,{gap:8,paddingBottom:12,children:[(0,n.tZ)(d.sg,{children:t.results.map((e,i)=>(0,n.tZ)(g,{user:e,rank:i,item:t}))}),t.hasMore&&(0,n.tZ)(d.zx,{onClick:e=>(0,c.Q)(e,t.expansionUrl),priority:"secondary",children:i("See more people")})]})},g=e=>{var t,i;let{user:c,rank:v,item:g}=e,{isFollowing:f,toggle:b}=(0,r.Sv)(c,"top-search"),Z=(0,u.s)({source:"top-search"}),y=()=>{(0,m.rw)(g,"search","user-result"),(0,o.j)(o.FP.GLOBAL_SEARCH_RESULT_CLICKED,{search_key:"top-search",result_type:"user",rank:v})},{iString:C}=(0,a.M1)();return(0,n.BX)(d.X2,{padding:8,gap:12,justifyContent:"space-between",children:[(0,n.tZ)(d.X2,{gap:12,onClick:y,children:(0,n.BX)(s.A0,{href:(0,p.NNq)(c,{utm_source:"top-search"}),children:[(0,n.tZ)(l.Fb,{user:c,onClick:y}),(0,n.BX)(d.sg,{children:[(0,n.BX)(d.xv.B3,{weight:"semibold",children:[c.name,"\xa0",(0,n.tZ)(h.UserBadge,{tier:c.bestseller_tier,userBadge:null===(t=c.status)||void 0===t?void 0:t.badge,userId:c.id,inline:!0,size:"sm"})]}),(0,n.tZ)(d.xv.B4,{color:"secondary",children:"".concat(c.handle?"@".concat(c.handle,"  ∙ "):"").concat(c.primaryPublication?null===(i=c.primaryPublication)||void 0===i?void 0:i.name:"")}),c.bio?(0,n.tZ)(d.xv.B4,{clamp:1,children:c.bio}):null]})]})}),f?c.can_dm?(0,n.tZ)(d.zx,{priority:"tertiary",onClick:()=>{Z.handleStart([c.id]),y()},children:C("Message")}):null:(0,n.tZ)(d.zx,{onClick:e=>{e.preventDefault(),b(),y()},children:C("Follow")})]})}},95128:function(e,t,i){i.d(t,{w:()=>m});var n=i(16584),r=i(64998),a=i(68833),l=i(61254),o=i(19081),c=i(58175),d=i(93630),s=i(22838),u=i(63651);function m(e){let{item:t}=e,i=(0,u.k5c)({categoryId:"bestseller"===t.category.id?"bestseller":t.category.id,ranking:"trending",backAction:(0,u.mIK)({type:"bestseller"===t.category.id?s.qX.Secondary:s.qX.Category,id:t.category.id.toString()})});return 0===t.items.length?null:(0,n.BX)(o.tu,{children:[(0,n.tZ)(c.hh,{href:i,children:(0,n.BX)(o.hs,{alignItems:"center",gap:8,paddingBottom:16,paddingTop:24,children:[(0,n.BX)(c.xv.H3,{children:["Rising in ",t.category.name]}),(0,n.tZ)(r.Z,{})]})}),(0,n.tZ)(o.tu,{paddingY:8,children:(0,n.tZ)(d.l6,{items:t.items,surface:"feed",onClickItem:e=>{let{publication:t,rank:i}=e;(0,a.j)(a.FP.LEADERBOARD_ITEM_CLICKED,{publication_id:t.id,rank:i,surface:"feed"})}})}),(0,n.tZ)(l.iz,{paddingY:8})]})}},31465:function(e,t,i){i.d(t,{e:()=>p});var n=i(16584),r=i(20888),a=i(42375),l=i(87447),o=i(80878),c=i(15771),d=i(19081),s=i(58175),u=i(15503),m=i(91400),h=i(63651);function p(e){let{item:t}=e,i=(0,m.XA)(),p=(0,u.Gv)(t,{isModuleItem:!0}),v=(0,a.rI)();return(0,n.BX)(l.hr,{item:t,onFirstVisible:()=>(0,u.qG)("seen",t,v,{extraEventProps:{clicked_element:"row"}}),children:[(0,n.tZ)(s.xv.H2,{children:t.title}),(0,n.BX)(l.Mr,{cursor:"pointer",onClick:e=>{p("collection"),(0,o.Q)(e,(0,h.tsE)(t.id,{noBase:!0}))},children:[(0,n.tZ)(r.e,{src:t.image_url,maxWidth:560,imageProps:{height:i?194:260,smartCrop:!0},objectFit:"cover"}),(0,n.tZ)(d.tu,{padding:20,gap:16,children:(0,n.BX)(d.tu,{gap:6,children:[(0,n.tZ)(s.xv.H3,{children:t.card_title}),(0,n.tZ)(s.xv.B4,{color:"secondary",children:t.card_subtitle}),(0,n.tZ)(c.zx,{priority:"secondary-outline",children:t.button_title})]})})]})]})}},73730:function(e,t,i){i.d(t,{a:()=>R});var n=i(16584),r=i(13742),a=i(31012),l=i(95441),o=i(42375),c=i(87447),d=i(7409),s=i(58865),u=i(30396),m=i(24237),h=i(9404),p=i(48980),v=i(71068),g=i(15771),f=i(19081),b=i(99916),Z=i(78446);function y(){let e=(0,s._)(["We’ll no longer suggest ",""]);return y=function(){return e},e}function C(e){let{onUndo:t}=e,{iString:i}=(0,l.M1)();return(0,n.BX)(f.tu,{padding:16,alignItems:"center",color:"secondary",children:[(0,n.tZ)(v.xu,{children:i("We’ll no longer suggest this publication.")}),(0,n.tZ)(v.xu,{children:(0,n.tZ)(g.kG,{resetCss:!0,style:{textDecoration:"underline"},onClick:e=>{e.preventDefault(),t()},children:i("Undo")})})]})}function _(e){let{iString:t}=(0,l.M1)();return(0,n.tZ)(b.v2,(0,d._)({trigger:(0,n.tZ)(g.hU,{"aria-label":t("More options"),priority:"quaternary",size:"sm",onClick:e=>{e.stopPropagation()},children:(0,n.tZ)(h.Z,{size:16})})},e))}var B=i(80878),S=i(10510),I=i(58175),k=i(15503),x=i(91400),w=i(64172),X=i(60308),N=i(63651),E=i(47929);function R(e){let{item:t}=e,{iString:i}=(0,l.M1)(),{publication:d}=t,s=d.logo_url,h={utm_source:E.b3.substack,utm_content:E.fZ.feedFeaturedPublication},v=(0,x.XA)(),{isSubscribed:R}=(0,w.Y0)(d.id),P=(0,k.Gv)(t,{isModuleItem:!0}),M=(0,o.rI)(),L=function(e){let{publication:t,onSelect:i}=e,{iString:r,iTemplate:a}=(0,l.M1)(),o=(0,Z.N4)(),[c,d]=(0,u.eJ)(!1),s=async()=>{!o.isConfirming&&await o.confirm()&&(d(!0),(0,p.rd)("/api/v1/reader/interest",{method:"POST",json:{type:"publication",publication_id:t.id,sentiment:"negative"}}),i("not_interested"))};return{handleUndo:()=>{d(!1),(0,p.rd)("/api/v1/reader/interest",{method:"DELETE",json:{type:"publication",publication_id:t.id}}),i("undo_not_interested")},notInterested:c,menu:(0,n.BX)(n.HY,{children:[(0,n.tZ)(_,{children:(0,n.tZ)(b.sN,{leading:(0,n.tZ)(m.Z,{}),onClick:s,children:r("Not interested in publication")})}),(0,n.tZ)(Z.sm,{modal:o,title:r("Not interested?"),body:a(y(),t.name)})]})}}({publication:d,onSelect:P});return(0,n.BX)(c.hr,{item:t,onFirstVisible:()=>(0,k.qG)("seen",t,M),children:[(0,n.BX)(f.hs,{alignItems:"center",justifyContent:"space-between",children:[(0,n.tZ)(I.xv.H2,{children:t.title}),L.menu]}),(0,n.BX)(c.Mr,{cursor:L.notInterested?void 0:"pointer",onClick:L.notInterested?void 0:e=>{e.defaultPrevented||(P("publication"),(0,B.Q)(e,(0,X.TJI)(d,{params:h}),{newTab:!0,native:!0}))},children:[(0,n.tZ)(c.EB,{imageUrl:s,width:350,children:(0,n.tZ)(c.up,{justifyContent:"center",alignItems:"center",paddingY:32,children:(0,n.tZ)(S.wk,{pub:t.publication,size:v?72:128})})}),(0,n.BX)(f.tu,{padding:20,gap:20,alignItems:"center",children:[(0,n.BX)(f.tu,{gap:6,children:[(0,n.tZ)(I.xv.H3,{children:t.publication.name}),(0,n.tZ)(I.xv.B4,{children:t.card_subtitle}),(0,n.BX)(I.xv.Meta,{ellipsis:!0,children:["by ",t.publication.author_name]})]}),R?(0,n.tZ)(g.zx,{priority:"secondary-outline",leading:(0,n.tZ)(r.Z,{size:20}),children:i("Subscribed")}):(0,n.tZ)(g.zx,{leading:(0,n.tZ)(a.Z,{size:20}),priority:"secondary-accent",onClick:()=>{P("subscribe")},href:(0,N.W1P)(t.publication,{addBase:!0,params:h}),newTab:!0,children:i("Subscribe")})]}),L.notInterested&&(0,n.tZ)(f.hs,{justifyContent:"center",alignItems:"center",bg:"primary",style:{position:"absolute",inset:0},children:(0,n.tZ)(C,{onUndo:L.handleUndo})})]})]})}},87447:function(e,t,i){i.d(t,{up:()=>N,hr:()=>S,rF:()=>_,O3:()=>B,EB:()=>X,Mr:()=>w});var n=i(7409),r=i(99282),a=i(98848),l=i(16584),o=i(30396),c=i(94184),d=i.n(c),s=i(10968),u=i(60807),m=i(42375),h=i(85527);i(53678);var p=i(98750),v=i(71068),g=i(19081);i(58175);var f=i(15503),b=i(91400),Z=i(63651),y=i(88356),C=i(5749);function _(e){let{item:t,children:i,onFirstVisible:a,className:c,ariaLabel:v}=e,g=(0,o.sO)(null),Z=(0,m.rI)(),_=(0,o.qp)(h.q),S=(0,b.XA)(),I=(0,u.aF)();return(0,p.MW)(g,()=>{let e;if("comment"===t.type){var i;let{isTruncated:a}=(0,y.X)(t.comment,{isMobile:S});if(e={isTruncated:a},g.current&&(null===(i=t.comment.attachments)||void 0===i?void 0:i.length)){let i=t.comment.attachments.filter(e=>"image"===e.type),a=i.length>2?(0,s.kw)(i,g.current.clientWidth):0;e=(0,r._)((0,n._)({},e),{isMediaTruncated:a>g.current.clientWidth})}}(0,f.zi)(t,Z,{tabId:_,extraEventProps:e,isLoggedIn:!!I}),a&&a()},e=>{(0,f.Eg)(t,Z,e,{tabId:_})}),(0,l.tZ)(B,{ref:g,className:d()("userSuggestions"!==t.type?C.Z.contain:void 0,c),role:"article","aria-label":v,children:i})}let B=(0,v.zo)({display:"flex",direction:"column",className:C.Z.feedItem,position:"relative"});function S(e){let{item:t,children:i,onFirstVisible:n}=e;return(0,l.tZ)(_,{item:t,onFirstVisible:n,children:(0,l.tZ)(k,{children:i})})}let I=(0,v.zo)({display:"flex",direction:"column",paddingX:{mobile:16,desktop:0}}),k=(0,v.zo)({paddingY:24,gap:16},I),x=(0,v.oB)({cursor:"pointer"}),w=(0,v.zo)({position:"relative",display:"flex",direction:"column",radius:"md",bg:"elevated",border:"detail",shadow:"md",overflow:"hidden"},e=>{var{className:t,cursor:i}=e,r=(0,a._)(e,["className","cursor"]);return(0,l.tZ)("div",(0,n._)({className:d()("pointer"===i&&x,t)},r))});function X(e){var{className:t,children:i,imageUrl:o,width:c,height:s}=e,u=(0,a._)(e,["className","children","imageUrl","width","height"]);let m=o&&(0,Z.zF4)(o,c,{height:s,gravity:"auto",format:"jpg"});return(0,l.tZ)(g.hs,(0,r._)((0,n._)({},u),{className:d()("blurBg-fkm1Tn",t),style:m?{backgroundImage:"url('".concat(m,"')"),backgroundColor:"transparent"}:void 0,children:i}))}let N=(0,v.E7)({className:"blurFg-BbZZn1",display:"flex",flex:"grow"})},62514:function(e,t,i){i(30396),i(20042),i(39341),i(68833),i(48980)},76971:function(e,t,i){i.d(t,{Z:()=>p});var n=i(16584),r=i(20253),a=i(35047),l=i(35702),o=i(68833),c=i(65205),d=i(15771),s=i(10510),u=i(31406),m=i(76560),h=i(60308);let p=e=>{let{pub:t,user:i,setStep:p,entry:v}=e,g=(0,u.gs)();return(0,n.tZ)("div",{className:"pub-landing-step",children:(0,n.BX)(r.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_SIGNUP_SUCCEEDED,{entry:v}),i||(0,l.a)({user:e.body.user}),p(m.c.CATEGORIES)},children:[(0,n.BX)("div",{className:"headings",children:[(0,n.tZ)(s.wk,{pub:t,size:84}),(0,n.tZ)("h3",{className:"publication-title",children:t.name}),(0,n.tZ)("p",{className:"publication-description",children:t.editorial_bio||t.hero_text}),(0,n.tZ)("p",{className:"publication-details",children:(0,a.sv)(t)})]}),(0,n.tZ)("input",{type:"hidden",name:"email",value:null==i?void 0:i.email}),(0,n.tZ)("input",{type:"hidden",name:"source",value:"".concat(v,"-reader-onboarding")}),(0,n.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,n.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,n.tZ)("input",{type:"hidden",name:"first_url",value:c.xY}),(0,n.tZ)("input",{type:"hidden",name:"first_referrer",value:c.ip}),(0,n.tZ)("input",{type:"hidden",name:"first_session_url",value:c.ac}),(0,n.tZ)("input",{type:"hidden",name:"first_session_referrer",value:c.qR}),(0,n.tZ)("input",{type:"hidden",name:"current_url",value:c.UE}),(0,n.tZ)("input",{type:"hidden",name:"current_referrer",value:c.xU}),Object.entries(g).map(e=>{let[t,i]=e;return(0,n.tZ)("input",{type:"hidden",name:t,value:i},t)}),(0,n.BX)("div",{className:"modal-ctas",children:[(0,n.tZ)("a",{className:"button let-me-read",href:(0,h.n1t)((0,h.SVA)(t),{no_cover:!0,utm_source:"".concat(v,"-reader-onboarding")}),onClick:()=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_LET_ME_READ_CLICKED,{entry:v}),(0,o.x6)(t,v)},children:"Let me read it first"}),(0,n.tZ)(d.zx,{priority:"primary",onClick:e=>{(0,o.j)(o.FP.READER_ONBOARDING_PUB_LANDING_SUBSCRIBE_CLICKED,{entry:v}),i||(e.preventDefault(),p(m.c.PUB_SIGNUP))},type:"submit",children:"Subscribe"})]})]})})}},48146:function(e,t,i){i.d(t,{Z:()=>Z});var n=i(16584),r=i(30396),a=i(20253),l=i(35047),o=i(60807),c=i(35702),d=i(68833),s=i(65205),u=i(15771),m=i(19081),h=i(10510),p=i(58175),v=i(57641),g=i(31406),f=i(76560),b=i(60308);let Z=e=>{let{pub:t,user:i,profile:Z,setStep:y,entry:C}=e,{setUser:_}=(0,o.SE)(),[B,S]=(0,r.eJ)(""),[I,k]=(0,r.eJ)(!1),[x,w]=(0,r.eJ)(!1),X=(0,g.gs)();return(0,n.BX)("div",{className:"pub-signup-step",children:[(0,n.BX)("div",{className:"headings",children:[(0,n.tZ)(h.wk,{pub:t,size:84,className:"pub-icon"}),(0,n.tZ)("h3",{className:"publication-title",children:Z?"Create an account to start reading":"Subscribe to ".concat(t.name)}),(0,n.tZ)("p",{className:"publication-description",children:Z?"Create a Substack account to subscribe to ".concat(Z.name):t.editorial_bio||t.hero_text}),(0,n.tZ)("p",{className:"publication-details",children:Z?"Author of ".concat(t.name):(0,l.sv)(t)})]}),(0,n.BX)(a.ZP,{method:"post",action:"/api/v1/reader/signup/pub",loading:!1,autoLock:!0,onSuccess:e=>{i||((0,c.a)({user:e.body.user}),_(e.body.user)),e.body.requires_confirmation?((0,d.j)(d.FP.READER_ONBOARDING_PUB_SIGNUP_FAILED,{reason:"user_exists",entry:C}),k(!0)):((0,d.j)(d.FP.READER_ONBOARDING_PUB_SIGNUP_SUCCEEDED,{entry:C}),(0,c.a)({user:e.body.user}),y(f.c.CATEGORIES))},children:[(0,n.BX)("p",{children:[(0,n.tZ)("label",{for:"email",children:"Email"}),(0,n.tZ)("input",{type:"email",name:"email","aria-label":"Email",value:B,tabIndex:0,onInput:e=>{S(e.target.value)},onChange:e=>{S(e.target.value)}}),(0,n.tZ)("input",{type:"hidden",name:"source",value:"".concat(C,"-reader-onboarding")}),(0,n.tZ)("input",{type:"hidden",name:"publication_id",value:t.id}),(0,n.tZ)("input",{type:"hidden",name:"noWelcomeEmail",value:"true"}),(0,n.tZ)("input",{type:"hidden",name:"first_url",value:s.xY}),(0,n.tZ)("input",{type:"hidden",name:"first_referrer",value:s.ip}),(0,n.tZ)("input",{type:"hidden",name:"first_session_url",value:s.ac}),(0,n.tZ)("input",{type:"hidden",name:"first_session_referrer",value:s.qR}),(0,n.tZ)("input",{type:"hidden",name:"current_url",value:s.UE}),(0,n.tZ)("input",{type:"hidden",name:"current_referrer",value:s.xU}),Object.entries(X).map(e=>{let[t,i]=e;return(0,n.tZ)("input",{type:"hidden",name:t,value:i},t)}),I&&(0,n.BX)("div",{className:"error",children:["Additional confirmation is required to complete your signup. Please"," ",(0,n.tZ)("a",{href:(0,b.uXE)({for_pub:t.subdomain,email:B}),children:"login"})," ","or click the confirmation link in your email."]})]}),(0,n.tZ)("div",{id:"error-container"}),(0,n.BX)(m.tu,{alignItems:"center",justifyContent:"space-between",paddingTop:64,gap:4,children:[(0,n.tZ)(v.O,{checked:x,onCheckboxChange:e=>{w(e)}}),(0,n.tZ)(u.zx,{type:"submit",priority:"primary",disabled:!x||!B,style:{marginTop:12,marginBottom:4},children:"Subscribe and continue"}),(0,n.BX)(p.xv.B5,{weight:"light",color:"secondary",children:["Already have a Substack account?"," ",(0,n.tZ)(p.xv.B5,{as:"a",weight:"light",color:"secondary",href:(0,b.uXE)({for_pub:t.subdomain}),target:"_blank",style:{textDecoration:"underline"},children:"Sign in"})]})]})]})]})}},2017:function(e,t,i){i.d(t,{h:()=>b});var n=i(16584),r=i(30396),a=i(29032),l=i(31122),o=i(95441),c=i(48980),d=i(98914),s=i(71068),u=i(15771),m=i(19081),h=i(58175),p=i(11879),v=i(98012),g=i(63651);let f={countdownTimer:"countdownTimer-Hez1AS"};function b(e){var t;let{liveStream:i,post:b}=e,{iString:y}=(0,o.M1)(),{liveStream:C}=(0,p.R)({liveStream:i}),[_,B]=(0,r.eJ)((0,v.Z)(null==C?void 0:C.liveStream.scheduled_at).valueOf()-Date.now()),[S,I]=(0,r.eJ)((0,v.Z)(null==C?void 0:C.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")));if((0,r.d4)(()=>{(null==C?void 0:C.liveStream.scheduled_at)&&I((0,v.Z)(C.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")))},[C]),(0,r.d4)(()=>{(null==C?void 0:C.liveStream.scheduled_at)&&B((0,v.Z)(C.liveStream.scheduled_at).valueOf()-Date.now());let e=setInterval(()=>{B((0,v.Z)(null==C?void 0:C.liveStream.scheduled_at).valueOf()-Date.now())},1e3);return()=>clearInterval(e)},[C]),!(null==C?void 0:C.liveStream.id))return null;if((null==C?void 0:C.liveStream.status)==="active")return(0,n.tZ)(l.Y,{activeLiveStream:C,isFeedItem:!0,listenForViewerCount:!1});let k=Math.max(_/1e3,0),x=Math.floor(k/60/60/24),w=Math.floor(k/60/60%24),X=Math.floor(k/60%60),N=String(x).padStart(2,"0"),E=String(w).padStart(2,"0"),R=String(X).padStart(2,"0"),P=String(Math.floor(k%60)).padStart(2,"0");return(0,n.tZ)(a.C,{children:(0,n.BX)(s.xu,{as:"a",href:(0,g.bHR)({liveStreamId:null==C?void 0:C.liveStream.id}),radius:"md",overflow:"hidden",children:[(0,n.tZ)(m.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"black",children:S?(0,n.tZ)(m.hs,{className:f.countdownTimer,justifyContent:"center",alignItems:"center",children:(0,n.BX)(m.hs,{children:[x>0?(0,n.BX)(n.HY,{children:[(0,n.tZ)(Z,{value:N,unit:"DAYS"}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})})]}):null,(0,n.tZ)(Z,{value:E,unit:"HR"}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:R,unit:"MIN"}),0===x?(0,n.BX)(n.HY,{children:[(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:P,unit:"SEC"})]}):null]})}):(0,n.BX)(m.tu,{className:f.countdownTimer,justifyContent:"center",alignItems:"center",gap:4,children:[(0,n.BX)(m.hs,{children:[(0,n.tZ)(Z,{value:R}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(Z,{value:P})]}),(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",transform:"uppercase",children:y("Starting soon...")})]})}),(0,n.BX)(m.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"secondary",borderTop:"detail",children:[(0,n.BX)(m.tu,{gap:4,children:[(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:null==C?void 0:null===(t=C.liveStream.user)||void 0===t?void 0:t.name}),(0,n.tZ)(h.xv.B4,{weight:"bold",color:"white",children:null==C?void 0:C.liveStream.title})]}),(0,n.tZ)(u.zx,{priority:"primary",onClick:async()=>{try{await (0,c.rd)("/api/v1/live_stream/".concat(null==C?void 0:C.liveStream.id,"/rsvp"),{method:"PUT"})}catch(e){console.error(e)}(0,d.uX)((0,g.bHR)({liveStreamId:null==C?void 0:C.liveStream.id}),{local_navigation:!1})},children:S?"Interested":"Join now"})]})]})})}let Z=e=>{let{value:t,unit:i}=e;return(0,n.BX)(m.tu,{alignItems:"center",gap:4,children:[(0,n.tZ)(m.tu,{justifyContent:"end",alignItems:"center",height:40,children:(0,n.tZ)(h.xv.B4,{font:"digit",fontSize:30,lineHeight:30,color:"white",children:t})}),i&&(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:i})]})}},11879:function(e,t,i){i.d(t,{R:()=>o});var n=i(30396),r=i(48980),a=i(92039),l=i(98012);let o=e=>{var t,i;let{liveStream:o}=e,c=(0,a.rG)(),[d,s]=(0,n.eJ)(null),[u,m]=(0,n.eJ)(o),[h,p]=(0,n.eJ)(null);return(0,n.d4)(()=>{m(o)},[o]),(0,n.d4)(()=>{if(!u||"scheduled"!==u.liveStream.status)return;let e=(0,l.Z)(u.liveStream.scheduled_at),t=(0,l.Z)();if(9e5>e.diff(t)){let e=setInterval(()=>{(0,r.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{"scheduled"!==e.activeLiveStream.liveStream.status&&(s(null),p(e.activeLiveStream))}).catch(e=>{console.error(e)})},1e3);s(e)}return null==c?void 0:c.listen({["live-stream:".concat(u.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:started"&&((0,r.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{p(e.activeLiveStream)}).catch(e=>{console.error(e)}),d&&s(null))}})},[null==u?void 0:null===(t=u.liveStream)||void 0===t?void 0:t.id,null==u?void 0:null===(i=u.liveStream)||void 0===i?void 0:i.status,c]),(0,n.d4)(()=>{if(h){let e=h.liveStream.is_rtmp?h.liveStreamInformation.playbackUrl:h.liveStreamInformation.desktopPlaybackUrl;if(e){let t=setInterval(()=>{(0,r.rd)(e).then(()=>{s(null),m(h),p(null)})},1e3);s(t)}}},[h]),(0,n.d4)(()=>()=>{d&&clearInterval(d)},[d]),{liveStream:u,setLiveStream:m}}},41427:function(e,t,i){function n(e,t){return e.startsWith(t.replace(/\?.*$/,""))}function r(e,t){return e.replace(/\?.*$/,"")===t.replace(/\?.*$/,"")}i.d(t,{M:()=>r,h:()=>n})},94827:function(e,t,i){i.d(t,{Rj:()=>m});var n=i(16584);i(6400);var r=i(30396),a=i(94184),l=i.n(a),o=i(31012),c=i(1852);i(16104),i(35047),i(94499);var d=i(95441);i(62514),i(68833),i(98914);var s=i(15771);i(10510),i(60308);let u={desktop:15,mobile:6},m=e=>{let{className:t,hasFeatured:i,categories:a,categoryId:m,categoryIds:h,loadingCategoryId:p,ranking:v,onCategoryClicked:g,defaultExpanded:f}=e,[b,Z]=(0,r.eJ)(f||!1),[y,C]=(0,r.eJ)(new Set),_=u[(0,c.useMediaQuery)({query:"only screen and (max-width: 650px)"})?"mobile":"desktop"],{iString:B}=(0,d.M1)(),S=a?b?a:a.slice(0,_):[],I=e=>e.id===m||(null==h?void 0:h.includes(e.id)),k=e=>{C(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})};return(0,n.BX)("div",{className:l()("categories",t),children:[i&&(0,n.tZ)(s.zx,{priority:"featured"!==m||p&&"featured"!==p?"secondary":"primary-mono",loading:"featured"===p&&"featured"!==m,onClick:()=>{g({categoryId:"featured",ranking:"all",categories:a})},children:B("Featured")}),S.map(e=>{var t;let i=y.has(e.id),r=e.subcategories&&e.subcategories.length>0,l=I(e)&&(!p||p===e.id),o=p===e.id&&m!==e.id;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.zx,{priority:l?"primary-mono":"secondary-outline",loading:o,onClick:()=>{g({categoryId:e.id,ranking:v,categories:a}),r&&k(e.id)},className:l?"test-active":"test-inactive",children:B(e.name||"")}),i&&r&&(null==e?void 0:null===(t=e.subcategories)||void 0===t?void 0:t.map(e=>{let t=I(e)&&(!p||p===e.id),i=p===e.id&&m!==e.id;return(0,n.tZ)(s.zx,{priority:t?"primary-mono":"secondary",loading:i,onClick:()=>g({categoryId:e.id,ranking:v,categories:a}),children:B(e.name)},e.id)}))]})}),a&&a.length>_&&!b&&(0,n.tZ)(s.hU,{priority:"secondary-outline",onClick:()=>Z(!0),children:(0,n.tZ)(o.Z,{size:20})})]})}},22419:function(e,t,i){i.d(t,{lq:()=>n});let n=25}}]);