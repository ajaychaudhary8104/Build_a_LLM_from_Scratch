"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7424"],{30356:function(e,t,n){if(n.d(t,{k:()=>u}),5288==n.j)var r=n(7409);if(5288==n.j)var i=n(99282);if(5288==n.j)var l=n(98848);var a=n(16584),o=n(94184),s=n.n(o),c=n(80026),d=n(17043);function u(e){var{src:t,width:n,height:o,sourceFormats:u=["webp"],radius:m,className:h,options:g}=e,b=(0,l._)(e,["src","width","height","sourceFormats","radius","className","options"]);let v=[n,2*n,3*n],f=n/o,_=(0,i._)((0,r._)({crop:"fill"},g),{height:o}),Z="".concat(n,"px"),y=v.map(e=>({width:e,height:Math.floor(e/f)}));return(0,a.BX)("picture",{className:p,children:[u.map(e=>(0,a.tZ)("source",{type:"image/".concat(e),srcSet:y.map(n=>{let{width:l,height:a}=n;return"".concat((0,d.zF)(t,l,(0,i._)((0,r._)({},_),{height:a,format:e}))," ").concat(l,"w")}).join(", ")},e)),(0,a.tZ)("img",(0,i._)((0,r._)({src:(0,d.zF)(t,n,_),srcSet:y.map(e=>{let{width:n,height:l}=e;return"".concat((0,d.zF)(t,n,(0,i._)((0,r._)({},_),{height:l}))," ").concat(n,"w")}).join(", "),sizes:Z,width:n,height:o},b),{className:s()(h,(0,c.oB)({radius:m}))}))]})}let p=(0,c.oB)({display:"contents"})},35047:function(e,t,n){n.d(t,{Eh:()=>V,ZP:()=>D,sv:()=>j});var r=n(7409),i=n(99282),l=n(58865),a=n(16584),o=n(98661),s=n(30396),c=n(94184),d=n.n(c),u=n(36808),p=n(64998),m=n(41352),h=n(91925),g=n(12620),b=n(64343),v=n(21312),f=n(20888),_=n(75744),Z=n(57391),y=n(95441),x=n(56629),N=n(40647),w=n(35702),C=n(68833),S=n(98914),B=n(71068),k=n(15771),E=n(19081),I=n(10510),P=n(58175),L=n(64528),F=n(74312),A=n(33555),T=n(34590),M=n(31377),X=n(60308),H=n(26111),O=n(6911),R=n(70408),z=n(84864),q=n(47929),W=n(31190);function J(){let e=(0,l._)(["By ",""]);return J=function(){return e},e}let U="intro_popup_last_hidden_at";function j(e){let{includePrice:t=!0,includeRankingDetail:r=!0,includeByline:i=!0,includeBadge:l=!1,rankingDetailOverrideText:o=null,language:s="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=s||e.language,{iTemplate:d}=I18N.i(s||e.language),u=(0,z.getByLine)(e),p=null;return r&&(p=o||(e.rankingDetailByLanguage&&"en"!==c&&e.rankingDetailByLanguage[c]?e.rankingDetailByLanguage[c].rankingDetail:e.rankingDetail)),(0,a.BX)(L.N,{separator:" \xb7 ",children:[i&&u?(0,a.BX)(E.hs,{inline:!0,gap:4,children:[d(J(),u),l&&(0,a.tZ)(F.cr,{module:"../user_badge/UserBadge",resolve:e=>e.UserBadge,onRequest:()=>Promise.resolve().then(n.bind(n,33555)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,a.tZ)(E.hs,{alignItems:"center",children:(0,a.tZ)(A.UserBadge,{size:"sm",tier:e.author_bestseller_tier})}):(0,a.tZ)(a.HY,{})})]}):null,p,t&&function(e,t){let{language:n}=t,r=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],i=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],l=r||i;if(l)return(0,T.bP)(l,{language:n})}(e,{language:s})]})}let D=(0,o.memo)(e=>{var t,n,l;let{publication:o,user:c,post:d,onHide:p,freeSignup:m,hidden:g,alwaysShow:b,showOnMount:v,freeSignupEmail:f,email:_,referralCode:y,blurbs:B,launchWelcomePage:k,topThreePosts:E,topThreeSubscribers:I}=e,{getConfigFor:P}=(0,N.xR)(),L=P("welcome_page_query_params"),[F,A]=(0,s.eJ)(!1),[T,O]=(0,s.eJ)(!!(k||b)),R=(e,t)=>{var n;return L&&null!==(n=(0,H.x)(e))&&void 0!==n?n:t},[W]=(0,s.eJ)(R("no_skip",void 0)),[J]=(0,s.eJ)(R("no_blurbs",!1)),[j]=(0,s.eJ)(()=>{let e=R("hero_text",void 0);return e?decodeURIComponent(e):void 0}),{getExperimentVariant:D,exposeExperiment:V}=(0,Z.jc)(),{getSettingFor:Q}=(0,x.So)(),$=null!==(t=(0,H.x)("force"))&&void 0!==t?t:void 0;(0,s.d4)(()=>{let e=e=>{"Escape"===e.key&&er(!0)};if(T)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[T]),(0,s.d4)(()=>{if(k&&!ei()||et()){if("undefined"!=typeof window&&(0,S.cn)(document.documentElement,"has-intro-popup"),(0,H.x)("r")){let e=(0,H.x)("r");c&&(0,z.userReferralKey)(c)===e||(0,C.j)(C.FP.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,z.userFromReferralKey)(e)})}ee()}else p&&p(),(0,w.a)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,S.IV)(document.documentElement,"has-intro-popup"),!b&&"undefined"!=typeof window&&(0,S.pv)(document.documentElement,"show-intro-popup")&&(0,S.IV)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,S.iO)(e)),()=>{"undefined"!=typeof window&&(0,S.IV)(document.documentElement,"has-intro-popup"),er(!0)}},[]);let ee=()=>{"undefined"==typeof window||((0,S.cn)(document.documentElement,"show-intro-popup"),(0,C.j)(C.FP.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!f,has_free_signup:!!m,functional_version:!0,launch_welcome_page:k,always_show:b,hidden:g,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null,test_experiment_variant_v5:D("test_experiment_v5")}),V("test_experiment_v5"),b||(0,C.XY)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),O(!0)},et=(0,s.I4)(()=>!!b||!g&&(!!v||!!F||!ei()&&!!(null==d||d&&!(0,M.isPaidAudience)(d.audience))&&!m&&(!c||!c.is_free_subscribed&&!c.is_subscribed)),[b,m,g,d,v,F,c]),en=Q("display_welcome_page_details")&&o.freeSubscriberCount&&!(0,S.K1)()&&!$&&!o.invite_only&&!y&&!o.custom_domain&&(null==E?void 0:E.length)&&(null==I?void 0:I.length)&&!W&&!j;(0,s.d4)(()=>{T&&et()&&en&&V("welcome_page_update_desktop_visuals_limited")},[V,Q,en,et,T]);let er=e=>{e||(el(),setTimeout(()=>{(0,w.a)({hide_intro_popup:!0})},500)),p&&p(),!b&&"undefined"!=typeof window&&(0,S.pv)(document.documentElement,"show-intro-popup")&&(0,S.IV)(document.documentElement,"show-intro-popup")},ei=()=>{let e=u.get(U);return!!(e&&new Date(e)>new Date(Date.now()-864e5))},el=()=>{u.set(U,new Date().toJSON(),{expires:3650})},ea=async e=>{(0,C.j)(C.FP.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),el(),A(!0),(0,w.a)({freeSignup:!0,freeSignupEmail:e.body.email});let t=b?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,X.n1t)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,X.n1t)("/subscribe",(0,i._)((0,r._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:q.b3.coverPage,email:e.body.email,skip_redirect_check:!0}))},eo=()=>{(0,C.j)(C.FP.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),er()};if(!T||!et())return null;let es=(0,a.tZ)(K,{source:"cover_page",email:_,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:f,referralCode:y,forceSignup:null!==(l=null!==(n=(0,H.x)("force"))&&void 0!==n?n:W)&&void 0!==l?l:void 0,onMaybeLater:W?void 0:eo,onFreeSignup:ea,blurbs:B,hideBlurbs:J,overrideSubtitle:j});if(en)switch(D("welcome_page_update_desktop_visuals_limited")){case"treatment_social_proof":es=(0,a.tZ)(Y,{email:_,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:f,onMaybeLater:eo,onFreeSignup:ea,blurbs:B,topThreeSubscribers:I});break;case"treatment_large_fonts":es=(0,a.tZ)(G,{email:_,pub:o,user:null!=c?c:null,freeSignup:m,freeSignupEmail:f,onMaybeLater:eo,onFreeSignup:ea,blurbs:B})}return(0,a.tZ)(h.s,{children:(0,a.tZ)("div",{className:"intro-popup",children:(0,a.tZ)("div",{className:"intro-popup-page",children:es})})})}),V=e=>(0,a.tZ)("div",{className:"intro-inline",children:(0,a.tZ)(K,(0,r._)({},e))}),Y=e=>{var t,i,l,o,c;let{pub:u,user:p,email:m,freeSignup:h,freeSignupEmail:Z,onMaybeLater:N,onFreeSignup:w,blurbs:S,topThreeSubscribers:k}=e,L="cover_page",A=(0,s.qp)(x.vz),{iString:T,language:M}=(0,y.M1)(),{title:H,subtitle:O,logoUrl:z,coverPhotoUrl:q,hideTitle:J,hideSubtitle:U}=Q(u),D=q&&(0,X.zJH)(q),V=D&&D.width/D.height,Y=!!(V&&V<2),G=!J||q&&Y,K=!U||q&&Y;(0,s.d4)(()=>{(0,C.j)(C.FP.FULL_EMAIL_FORM_SHOWN,{source:L,functional_version:!0,version:"social-proof"})},[L]);let $=S?S.filter(e=>""!=e.description):[],et=j(u,{includePrice:!1,includeBadge:!0,includeRankingDetail:!1,language:M});return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:N}),q?Y?null:(0,a.tZ)(B.xu,{paddingBottom:48,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoCenter,src:q,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},D&&D.width&&{height:"min(168px, ".concat(840*D.height/D.width,"px)")}),imageIsFixedWidth:!0})}):z&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:z,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:Y?W.Z.column:W.Z.centeredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[G?(0,a.tZ)(P.xv.H1,{textAlign:Y?"left":"center",font:"pub-headings",className:W.Z.coverPrimary,textWrap:"balance",children:H}):null,K?(0,a.tZ)(P.xv.B3,{textAlign:Y?"left":"center",font:"display",size:15,lineHeight:20,className:W.Z.coverSecondary,textWrap:"balance",children:O}):null,et&&(null===(o=et.props)||void 0===o?void 0:null===(l=o.children)||void 0===l?void 0:null===(i=l.filter)||void 0===i?void 0:null===(t=i.call(l,Boolean))||void 0===t?void 0:t.length)?(0,a.tZ)(P.xv.B2,{textAlign:Y?"left":"center",weight:"semibold",font:"display",size:17,lineHeight:24,className:W.Z.coverSecondary,children:et}):null]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.BX)(E.hs,{alignItems:"center",alignSelf:Y?"start":"center",gap:8,children:[(0,a.tZ)(E.hs,{alignItems:"center",className:d()(W.Z.faces),children:k.map((e,t)=>{let{id:r,photo_url:i}=e,l=(0,a.tZ)(f.e,{className:d()(W.Z.face,0===t&&W.Z.first,t===k.length-1&&W.Z.last),style:{zIndex:k.length-t},maxWidth:80,src:(0,X.zF4)(i||(0,R.I4)(r),64),imageIsFixedWidth:!0});return(0,a.tZ)(F.cr,{module:"@/frontend/components/ProfileHoverCard",resolve:e=>e.ProfileHoverCard,onRequest:()=>Promise.all([n.e("5924"),n.e("8915"),n.e("1262"),n.e("2044"),n.e("8960"),n.e("2548")]).then(n.bind(n,85685)),whileLoading:l,subject:e,dontStopPropagation:!1,disabled:!1,placement:"top-start",children:l})})}),u.freeSubscriberCount?(0,a.BX)(P.xv.H3,{font:"display",weight:"semibold",size:20,lineHeight:24,className:W.Z.coverPrimary,translated:!0,children:["Join over ",I18N.p(u.freeSubscriberCount)," subscribers"]}):null]}),(0,a.tZ)(g.Z,{email:m,isWelcomePageColor:!0,freeSignup:h,freeSignupEmail:Z,pub:u,source:L,user:p,onConfirmationRequired:"enabled"===u.payments_state?()=>null:void 0,onSuccess:w||(()=>document.location.href="/"),autoFocus:!0,className:W.Z.containerClassName,promptClassName:W.Z.promptClassName,inputClassName:W.Z.inputClassName,subscribeButtonClassName:W.Z.subscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:Y?"start":"center",inline:!0,onClick:N,children:[(0,a.tZ)(P.xv.B3,{style:{color:"var(--cover_print_secondary)"},children:"No thanks"===A.getSettingFor("welcome_page_opt_out_text")?T("No thanks"):null!==(c=A.getSettingFor("welcome_page_opt_out_text"))&&void 0!==c?c:T("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),q&&Y?(0,a.tZ)(E.tu,{className:d()(W.Z.column,W.Z.hideColumnSmallScreens),gap:32,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoRight,src:q,imageProps:{quality:"auto:best"},maxWidth:476,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==$?void 0:$.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==$?void 0:$.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:$.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(_.fJ,{publication:u})]})},G=e=>{var t;let{pub:n,user:i,email:l,freeSignup:o,freeSignupEmail:c,onMaybeLater:u,onFreeSignup:p,blurbs:m}=e,h="cover_page",Z=(0,s.qp)(x.vz),{getSettingFor:N}=(0,x.So)(),{iString:w,language:S}=(0,y.M1)(),{title:k,subtitle:L,logoUrl:F,coverPhotoUrl:A,hideTitle:T,hideSubtitle:M}=Q(n),H=A&&(0,X.zJH)(A),O=H&&H.width/H.height,R=!!(O&&O<2),z=!T||A&&R,q=!M||A&&R;(0,s.d4)(()=>{(0,C.j)(C.FP.FULL_EMAIL_FORM_SHOWN,{source:h,functional_version:!0,version:"large-fonts"})},[h]);let J=m?m.filter(e=>""!=e.description):[],U=N("display_welcome_page_details");return(0,a.BX)("div",{className:"full-email-form",children:[(0,a.BX)("div",{className:"vertically-centered",children:[(0,a.tZ)(ee,{onClick:u}),A?R?null:(0,a.tZ)(B.xu,{paddingBottom:48,children:(0,a.tZ)(f.e,{className:W.Z.publicationCoverPhotoCenter,src:A,imageProps:{quality:"auto:best"},maxWidth:840,loading:"eager",style:(0,r._)({},H&&H.width&&{height:"min(168px, ".concat(840*H.height/H.width,"px)")}),imageIsFixedWidth:!0})}):F&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:F,size:88})}),(0,a.BX)(E.hs,{gap:48,children:[(0,a.BX)(E.tu,{className:R?W.Z.largeColumn:W.Z.largeCenteredColumn,gap:32,children:[(0,a.BX)(E.tu,{gap:16,children:[z?(0,a.tZ)(P.xv.H1,{textAlign:R?"left":"center",font:"pub-headings",className:d()(W.Z.coverPrimary,W.Z.largeHeading),textWrap:"balance",children:k}):null,q?(0,a.tZ)(P.xv.B3,{textAlign:R?"left":"center",font:"display",size:15,lineHeight:20,className:d()(W.Z.coverSecondary,W.Z.largeSubHeading),textWrap:"balance",children:L}):null,(0,a.tZ)(P.xv.B2,{textAlign:"left",weight:"semibold",font:"display",size:17,lineHeight:24,className:W.Z.coverSecondary,alignSelf:R?"start":"center",children:j(n,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:n.rankingDetailFreeSubscriberCount,includeRankingDetail:!!U,language:S})})]}),(0,a.BX)(E.tu,{gap:16,children:[(0,a.tZ)(g.Z,{email:l,isWelcomePageColor:!0,freeSignup:o,freeSignupEmail:c,pub:n,source:h,user:i,onConfirmationRequired:"enabled"===n.payments_state?()=>null:void 0,onSuccess:p||(()=>document.location.href="/"),autoFocus:!0,className:W.Z.containerClassName,promptClassName:W.Z.largePromptClassName,inputClassName:W.Z.largeInputClassName,inputWrapperClassName:W.Z.largeInputWrapperClassName,subscribeButtonClassName:W.Z.largeSubscribeButtonClassName}),(0,a.BX)(E.hs,{gap:4,cursor:"pointer",alignItems:"center",alignSelf:"center",inline:!0,onClick:u,children:[(0,a.tZ)(P.xv.B1,{size:20,lineHeight:30,weight:"semibold",style:{color:"var(--cover_print_secondary)"},children:"No thanks"===Z.getSettingFor("welcome_page_opt_out_text")?w("No thanks"):null!==(t=Z.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:w("No thanks")}),(0,a.tZ)(b.Z,{height:18,stroke:"var(--cover_print_secondary)",strokeWidth:2})]})]})]}),A&&R?(0,a.tZ)(E.tu,{className:d()(W.Z.largeColumn,W.Z.hideLargeColumnSmallScreens),gap:32,children:(0,a.tZ)(f.e,{className:W.Z.largePublicationCoverPhotoRight,src:A,imageProps:{quality:"auto:best"},maxWidth:568,loading:"eager",imageIsFixedWidth:!0})}):null]}),!!(null==J?void 0:J.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==J?void 0:J.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:J.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:"blurb-text",children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:"blurb-text",children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),(0,a.tZ)(_.fJ,{publication:n})]})},K=e=>{var t;let{autoFocus:i=!0,pub:l,user:o,email:c,freeSignup:u,freeSignupEmail:m,referralCode:h,source:b,forceSignup:f,submitButtonText:_,onMaybeLater:Z,onFreeSignup:N,blurbs:w,hideBlurbs:S,overrideSubtitle:B}=e,I=(0,s.qp)(x.vz),{iString:L}=(0,y.M1)(),A=(0,H.x)("referralCode"),T=(0,H.x)("refSource"),M=L("Learn More"),R=(0,X.d6h)(l,{params:(0,r._)({utm_source:q.b3.subscribeEmail,utm_content:q.fZ.learnMore},A&&{referralCode:A},T&&{refSource:T})});(0,s.d4)(()=>{"subscribe_page"===b&&(0,C.j)(C.FP.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,C.j)(C.FP.FULL_EMAIL_FORM_SHOWN,{source:b,functional_version:!0})},[b]);let z=w&&!S?w.filter(e=>""!=e.description):[];return(0,a.tZ)("div",{className:"full-email-form",children:(0,a.BX)("div",{className:"vertically-centered",children:[Z&&!l.invite_only&&(0,a.tZ)(ee,{onClick:Z}),(0,a.tZ)($,{pub:l,overrideSubtitle:B}),!l.invite_only||o&&o.is_free_subscribed?(0,a.BX)(a.HY,{children:[(0,a.tZ)(E.gq,{justifyContent:"center",style:{width:"100%"},children:(0,a.BX)(E.tu,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,a.tZ)(g.Z,{email:c,isWelcomePageColor:!0,freeSignup:u,freeSignupEmail:m,pub:l,referralCode:h,source:b,submitButtonText:_,user:o,onConfirmationRequired:"enabled"===l.payments_state?()=>null:void 0,onSuccess:N||(()=>document.location.href="/"),autoFocus:i}),(0,a.BX)(P.xv.B4,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:W.Z.tosText,translated:!0,children:["By subscribing, I agree to Substack’s"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,O._Q)(),target:"_blank",rel:"noopener noreferrer",children:"Terms of Use"})," ","and acknowledge its"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,O.WF)(),target:"_blank",rel:"noopener noreferrer",children:"Information Collection Notice"})," ","and"," ",(0,a.tZ)("a",{className:W.Z.tosLink,href:(0,O.Zz)(),target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]})}),!f&&(Z?(0,a.tZ)("a",{onClick:e=>e.preventDefault(),className:"no-styles",children:(0,a.BX)(k.zx,{priority:"quaternary",className:W.Z.maybeLater,onClick:Z,"data-testid":"maybeLater",children:["No thanks"===I.getSettingFor("welcome_page_opt_out_text")?L("No thanks"):null!==(t=I.getSettingFor("welcome_page_opt_out_text"))&&void 0!==t?t:L("No thanks"),(0,a.tZ)(p.Z,{size:20})]})}):(0,a.BX)(k.zx,{priority:"quaternary",className:W.Z.maybeLater,href:R,localNavigation:!1,children:[M,(0,a.tZ)(p.Z,{size:20})]}))]}):(0,a.tZ)(F.cr,{onRequest:()=>n.e("2457").then(n.bind(n,51323)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:l,user:o,freeSignupEmail:m}),!!(null==z?void 0:z.length)&&(0,a.tZ)("div",{className:"blurb-buffer"}),!!(null==z?void 0:z.length)&&(0,a.tZ)(E.gq,{className:"blurbs",gap:20,children:z.map(e=>(0,a.BX)(E.tu,{gap:8,className:"blurb",children:[(0,a.tZ)(P.xv.B4,{className:d()("blurb-text",W.Z.blurbText),children:(0,a.tZ)(v.Z,{maxLines:4,ellipsesText:"...”",text:"“".concat(e.description,"”")})}),(0,a.BX)(P.xv.B4,{weight:"semibold",className:d()("blurb-text",W.Z.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.tZ)("a",{href:(0,X.SVA)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]})})},Q=(e,t)=>{let n,r,i,l,a,o;let{getConfigFor:s}=(0,N.xR)();if(s("section_specific_welcome_pages")&&e.section){var c;n=e.section.name,r=e.section.description,i=null!==(c=e.section.logo_url)&&void 0!==c?c:e.logo_url,a=!!((l=e.section.cover_photo_url)&&e.section.hide_intro_title),o=!!(l&&e.section.hide_intro_subtitle)}else n=e.name,r=e.hero_text,i=e.logo_url,a=!!((l=e.cover_photo_url)&&e.hide_intro_title),o=!!(l&&e.hide_intro_subtitle);return t&&(r=t),{title:n,subtitle:r,logoUrl:i,coverPhotoUrl:l,hideTitle:a,hideSubtitle:o}},$=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:i}=(0,x.So)(),{language:l}=(0,y.M1)(),{title:o,subtitle:s,logoUrl:c,coverPhotoUrl:u,hideTitle:p,hideSubtitle:m}=Q(t,n),h=i("display_welcome_page_details"),g=u&&(0,X.zJH)(u);return(0,a.BX)(a.HY,{children:[u?(0,a.tZ)(f.e,{className:"publication-cover-photo",src:u,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,r._)({},g&&g.width&&{height:"min(35vh, ".concat(680*g.height/g.width,"px)")})}):c&&(0,a.tZ)(B.xu,{paddingBottom:32,children:(0,a.tZ)(I.wk,{logoUrl:c,size:88})}),!p&&(0,a.tZ)("h1",{className:d()("publication-name",{"no-logo":!c,"with-cover":u},W.Z.balancedText),children:o}),!m&&s&&(0,a.tZ)("p",{className:d()("publication-tagline with-cover",{verbose:!0,"with-cover":u},W.Z.balancedText),children:s}),(0,a.tZ)("div",{className:"publication-meta",children:j(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!h,language:l})})]})},ee=e=>{let{onClick:t}=e;return(0,a.tZ)(k.hU,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:W.Z.closeWelcomeModal,children:(0,a.tZ)(m.Z,{size:20})})}},72392:function(e,t,n){n.d(t,{o:()=>Z});var r=n(16584),i=n(30396),l=n(94184),a=n.n(l),o=n(95441),s=n(98914),c=n(15771),d=n(19081),u=n(84747),p=n(63474),m=n(58175),h=n(81821),g=n(98550);let b=e=>{let[t,n]=(0,i.eJ)(null);return(0,i.d4)(()=>{let t=[];return e.forEach(e=>{let r=(0,s.VA)(e.text.toLowerCase(),!0),i=document.getElementById("\xa7".concat(r));if(i){let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.8&&n(r)})},{threshold:.5,rootMargin:"0px 0px -90% 0px"});e.observe(i),t.push(e)}}),()=>t.forEach(e=>e.disconnect())},[e]),t},v=e=>e?/^H[1-5]$/i.test(e.tagName)?e:v(e.parentElement):null,f=e=>{let{toc:t,minLevel:n,activeItem:i}=e;return(0,r.tZ)(d.tu,{gap:12,paddingY:12,paddingX:8,alignItems:"end",children:t.map((e,t)=>{let l=e.level-n,o="indent-".concat(Math.min(l,3)),c=(0,s.VA)(e.text.toLowerCase(),!0);return(0,r.tZ)("div",{className:a()(g.Z.line,g.Z[o],i===c&&g.Z.active)},t)})})},_=e=>{let{toc:t,minLevel:n,activeItem:i,onItemClick:l}=e,{iString:c}=(0,o.M1)();return(0,r.BX)(d.tu,{gap:4,flex:"grow",children:[(0,r.tZ)(m.xv.Meta,{padding:4,color:"primary",children:c("Contents")}),t.map((e,t)=>{let o=(0,s.VA)(e.text.toLowerCase(),!0),c=e.level-n,u="indent-".concat(Math.min(c,3));return(0,r.tZ)(p.A0,{href:"#\xa7".concat(o),onClick:e=>{e.preventDefault(),l(o)},children:(0,r.tZ)(d.gq,{padding:4,className:a()(g.Z.row),children:(0,r.tZ)(m.xv.B3,{className:a()(g.Z.label,g.Z[u],i===o&&g.Z.active),ellipsis:!0,children:e.text})})},t)})]})},Z=e=>{let{toc:t,position:n="fixed"}=e,{iString:l}=(0,o.M1)(),s=Math.min(...t.map(e=>e.level)),[d,p]=(0,i.eJ)(null),m=b(t);return t.length<2||(0,h.tq)()?null:(0,r.tZ)(u.M,{trigger:e=>{let{ref:i,onClick:o}=e;return(0,r.tZ)(c.kG,{ref:i,onClick:o,className:a()(g.Z.trigger,g.Z[n]),"aria-label":l("Table of Contents"),position:n,children:(0,r.tZ)(f,{toc:t,minLevel:s,activeItem:m})})},customShowClass:g.Z.show,customHideClass:g.Z.hide,layerClassName:g.Z.menu,layerOptions:{placement:"right-center",triggerOffset:8},children:(0,r.tZ)(_,{toc:t,minLevel:s,activeItem:m,onItemClick:e=>{let t=document.getElementById("\xa7".concat(e));if(t){let n=v(t);if(n){if(d){let e=document.getElementById("\xa7".concat(d)),t=e?v(e):null;null==t||t.classList.remove("highlight")}n.classList.add("highlight"),p(e),t.scrollIntoView({behavior:"smooth",block:"start"})}}}})})}},59708:function(e,t,n){let r;n.d(t,{Kd:()=>V,N1:()=>Y});var i,l=n(7409),a=n(99282),o=n(16584),s=n(6400),c=n(70109),d=n(94184),u=n.n(d),p=n(4373),m=n(45528),h=n(84892),g=n(17117),b=n(36441),v=n(78435),f=n(80836),_=n(3258),Z=n(33665),y=n(95441),x=n(57796),N=n(26989),w=n(98914),C=n(55706),S=n(19081),B=n(32700),k=n(93903),E=n(40894),I=n(60308),P=n(26111),L=n(81821),F=n(64314);let A=(e,t)=>{var n,r,i,a;return(0,o.tZ)("div",{className:"subscription-widget-wrap",children:(0,o.BX)("div",{className:"subscription-widget show-subscribe",children:[(0,o.tZ)("div",{className:"preamble",children:(0,o.tZ)("p",{dangerouslySetInnerHTML:{__html:null!==(a=null===(i=e.children[0])||void 0===i?void 0:null===(r=i.children[0])||void 0===r?void 0:null===(n=r.children[0])||void 0===n?void 0:n.innerHTML)&&void 0!==a?a:""}})}),(0,o.tZ)(Z.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:null,source:"subscribe-widget-preamble"},t.props))]})})},T=(e,t)=>{try{let n=JSON.parse((0,k.Z)(e.getAttribute("data-attrs")));if(["".concat(t.pub.base_url,"/subscribe?"),"".concat(t.pub.base_url,"/subscribe?plan=founding"),E.W.CHECKOUT_URL,E.W.FOUNDING_CHECKOUT_URL].includes(n.url)){let n=JSON.parse((0,k.Z)(e.getAttribute("data-attrs")));return(0,o.tZ)(Z.Z,(0,l._)({pub:t.pub,subscribeButtonAttrs:n},t.props))}}catch(e){console.error("Failed to parse button:",e)}return null},M=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,k.Z)(t));return r?(0,o.tZ)(h.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(h.cM,{label:e.label,pub:n,post:i,src:"/api/v1/audio/upload/".concat(e.mediaUploadId,"/src"),duration:e.duration,autoPlay:!1,mediaUpload:{id:e.mediaUploadId}})}}catch(e){console.error("Failed to parse audio:",e)}return null},X=(e,t)=>{let{pub:n,props:{isStatic:r,post:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,k.Z)(t));return r?(0,o.tZ)(h.nO,{label:e.label,pub:n,post:i,duration:e.duration}):(0,o.tZ)(h.cM,{label:e.label,pub:n,post:i,src:e.url,duration:e.duration,autoPlay:!1})}}catch(e){console.error("Failed to parse audio:",e)}return null},H=(e,t)=>{let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{name:e,avatarUrl:r,url:i}=JSON.parse((0,k.Z)(t));return n?(0,o.tZ)(C.W,{name:e,avatarUrl:r,url:i}):(0,o.tZ)(C.R,{name:e,avatarUrl:r,url:i})}}catch(e){console.error("Failed to parse audio:",e)}return null},O=e=>{try{let t=JSON.parse(e.dataset.attrs).symbol;if(t)return(0,o.tZ)(g.Z,{symbol:t,prependSymbol:JSON.parse(e.dataset.attrs).prependSymbol,isStatic:JSON.parse(e.dataset.attrs).isStatic});return(0,o.tZ)(o.HY,{})}catch(e){return console.error("failed to parse cashtag"),(0,o.tZ)(o.HY,{})}},R=(e,t)=>{let{pub:n,props:{isStatic:r}}=t,{iString:i}=I18N.i({pub:n});try{if(r){let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,k.Z)(t)),n=null==e?void 0:e.persistentExpression;return n?(0,o.tZ)("img",{src:(0,I.iJV)(n),style:{transform:"scale(0.5)"},"data-component-name":"LatexImg"}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found in email")})}return(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — data attributes not found")})}let t=e.getAttribute("data-attrs"),n=JSON.parse((0,k.Z)(t)),l=null==n?void 0:n.persistentExpression;return l?(0,o.tZ)(S.gq,{className:"latex-rendered",justifyContent:"center",flex:"grow",paddingBottom:"4px",paddingTop:"4px","data-component-name":"Latex",children:(0,o.tZ)(S.tu,{justifyContent:"center",children:(0,o.tZ)(c.Z,{inline:!1,children:"\\(".concat(l,"\\)")})})}):(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — no expression found")})}catch(e){return console.error("failed to render mathjax",e),(0,o.tZ)("p",{children:i("Failed to render LaTeX expression — error")})}},z=e=>{try{let{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s}=JSON.parse(e.dataset.attrs);if(t)return(0,o.tZ)(_.ZP,{name:t,id:n,type:r,url:i,photo_url:l,uuid:a,isStatic:s});return(0,o.tZ)(o.HY,{})}catch(e){return(0,o.tZ)(o.HY,{})}},q=(e,t)=>{try{let i=JSON.parse((0,k.Z)(e.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail){var n,r;return(0,o.tZ)("table",{className:"poll-embed poll-email",cellSpacing:"16px",width:"100%",children:(0,o.tZ)("tbody",{children:(0,o.tZ)("tr",{children:(0,o.tZ)("td",{align:"center",children:(0,o.tZ)(v.kq,{id:i.id,embeddedPolls:null!==(r=null===(n=t.props.dataForEmailRender)||void 0===n?void 0:n.embeddedPolls)&&void 0!==r?r:[],pub:t.pub})})})})})}return(0,o.tZ)("div",{className:"poll-embed",dataAttrs:e.getAttribute("data-attrs"),children:(0,o.tZ)(v.n_,{id:i.id,isEditor:!1,post:t.props.post,isVersionView:!!t.props.isVersionView})})}catch(e){return console.error("Failed to parse poll:",e),(0,o.tZ)(o.HY,{})}},W=(e,t,n)=>{var r;let[i,,l]=e.id.split("-"),a=null===(r=n.wrapper.querySelector("#".concat(i,"-").concat(l)))||void 0===r?void 0:r.nextElementSibling;return a?((0,L.tq)()&&(e.href="#_"),(0,o.tZ)(B.z,{content:(0,o.tZ)("div",{className:"markup",children:D(a,t,n)}),className:"footnote-hovercard-target",dontStopPropagation:!0,layerClassName:"typography footnote-hovercard",as:"span",children:D(e,t,n)})):D(e,t,n)},J=(e,t)=>(0,o.tZ)(y._7,{language:t,children:e}),U=function(e,t){var n,r,i;let{shallow:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("A"!==e.nodeName||e.getAttribute("rel")||e.setAttribute("rel","pub"in t&&(null===(i=t.pub)||void 0===i?void 0:i.no_follow)?"nofollow ugc noopener":""),(0,w.pv)(e,"image2")&&(null===(n=t.props)||void 0===n?void 0:n.canRestackImage)&&e.classList.add("can-restack"),"pub"in t&&t.pub&&"P"===e.nodeName&&(0,w.pv)(e,"button-wrapper")){let n=T(e,t);if(n)return n;let r=(0,b.TW)(e,t);if(r)return r}let c="pub"in t&&(null===(r=t.pub)||void 0===r?void 0:r.language)||"en";return(0,w.pv)(e,"subscription-widget-wrap-editor")||(0,w.pv)(e,"subscription-widget-wrap")?J(A(e,t),c):(0,w.pv)(e,"cashtag-wrap")?J(O(e),c):(0,w.pv)(e,"mention-wrap")?J(z(e),c):"pub"in t&&t.pub&&(0,w.pv)(e,"native-audio-url-embed")?J(X(e,t),c):"pub"in t&&t.pub&&(0,w.pv)(e,"native-audio-embed")?J(M(e,t),c):"pub"in t&&t.pub&&(0,w.pv)(e,"native-video-embed")?J((0,b.tj)(e,t),c):"pub"in t&&t.pub&&(0,w.pv)(e,"meeting-embed")?J(H(e,t),c):(0,w.pv)(e,"poll-embed")?J(q(e,t),c):(0,w.pv)(e,"recipe-embed")?J((0,b.G3)(e,t),c):(0,w.pv)(e,"pinterest-embed")?J((0,b.EK)(e),c):(0,w.pv)(e,"sponsorship-campaign-embed")?J((0,b.b3)(e,t),c):(0,w.pv)(e,"fp-recirc-block")?J((0,b.Em)(e,t),c):(0,w.pv)(e,"image-gallery-embed")?J((0,b.W5)(e,t),c):(0,w.pv)(e,"image3")?J((0,b.L0)(e,t),c):(0,w.pv)(e,"directMessage")?J((0,b.Gz)(e,t),c):(0,w.pv)(e,"latex-rendered")?J(R(e,t),c):(0,w.pv)(e,"community-chat")?J(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,k.Z)(t));if(!r.pub||!r.subdomain)return console.error("could not deepPrepare communityChat, subdomain or pub missing from node"),(0,o.tZ)(s.Fragment,{});return(0,o.tZ)("div",{className:"community-chat",dataAttrs:t,children:n?(0,o.tZ)(p.C,(0,l._)({},r)):(0,o.tZ)(p.a,{pub:r.pub,subdomain:r.subdomain})})}catch(e){return console.error("Failed to parse chat embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,w.pv)(e,"community-post")?J(function(e,t){let{props:{isStatic:n,is_freemail:r}}=t;try{let t=e.getAttribute("data-attrs"),i=JSON.parse((0,k.Z)(t));return n?(0,o.tZ)(m.s,(0,l._)({is_freemail:r},i)):(0,o.tZ)(m.V,(0,l._)({},i))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,w.pv)(e,"digest-post-embed")?J((0,b.Do)(e,t),c):(0,w.pv)(e,"comment")&&!(0,w.pv)(e,"template-comment")?J(function(e,t){let{props:{isStatic:n}}=t;try{let t=e.getAttribute("data-attrs"),r=JSON.parse((0,k.Z)(t));return n?(0,o.tZ)(N.Eo,(0,l._)({},r)):(0,o.tZ)(x.d,(0,l._)({},r))}catch(e){return console.error("Failed to parse chat post embed:",e),(0,o.tZ)(s.Fragment,{})}}(e,t),c):(0,w.pv)(e,"referrals-tier-card")?J((0,b.mx)(e,t),c):("undefined"!=typeof window&&(0,w.pv)(e,"file-embed-button")&&"href"in e&&e.href&&!(0,P.x)(e.href,"token")&&(e.href=(0,I.n1t)(e.href,{token:(0,P.x)(window._preloads.original_url,"token")})),"props"in t&&t.props&&"post"in t.props&&t.props.post&&"object"==typeof t.props.post&&"id"in t.props.post&&t.props.post.id&&(0,w.pv)(e,"footnote")&&(e.id&&(e.id+="-".concat(t.props.post.id)),"href"in e&&e.href&&(e.href+="-".concat(t.props.post.id))),(0,w.pv)(e,"footnote-anchor"))?J(W(e,U,t),c):a?null:D(e,U,t)},j=function(e){let t={};for(let{name:n,value:r}of Array.prototype.slice.call(e))t[n]=r;return t},D=(i=(e,t,n,r)=>{var i;if(!e)throw Error("Empty node, cannot preactify!");let c=3===e.nodeType?"span":8===e.nodeType?"x_preact_compatible_html_comment_x":e.tagName.toLowerCase(),d=1!==e.nodeType?{}:j(e.attributes),p=e.children&&e.children.length>0?null:e.textContent;if(r||"script"===c&&e.innerHTML===F.N)return(0,s.h)(c,(0,a._)((0,l._)({},d),{dangerouslySetInnerHTML:{__html:e.innerHTML}}));let m=!!(null===(i=e.parentElement)||void 0===i?void 0:i.getAttribute("data-prose-mirror-wrapper"));if(n&&"pub"in n&&m&&["h1","h2","h3","h4"].includes(c)&&!e.className)return function(e,t,n,r){var i,c,d,p;let m=u()("header-anchor-post",t.className),h=n.children.length?Array.prototype.map.call(n.childNodes,e=>U(e,r)):[n.textContent];return(0,s.h)(e,(0,a._)((0,l._)({},t),{className:m}),...h,(0,o.tZ)(f.Z,{text:null!==(d=n.textContent)&&void 0!==d?d:"",pub:null==r?void 0:r.pub,post:null==r?void 0:null===(i=r.props)||void 0===i?void 0:i.post,offsetTop:!0,isAboutPage:null!==(p=null==r?void 0:null===(c=r.props)||void 0===c?void 0:c.isAboutPage)&&void 0!==p&&p}))}(c,d,e,n);if(p)return(0,s.h)(c,d,p);let h=t(e,n,{shallow:!0});return h||(0,s.h)(c,d,...Array.prototype.map.call(e.childNodes,e=>t(e,n)))},r=0,function(){let e=[].slice.call(arguments,0),t=++r>2500;if(t){var n,l,a;console.error("Too many post nodes to recurse",{postId:null===(a=e[2])||void 0===a?void 0:null===(l=a.props)||void 0===l?void 0:null===(n=l.post)||void 0===n?void 0:n.id,depth:r})}let o=i.apply(null,[...e,...t?[!0]:[]]);return r--,o});function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement("div");return r.setAttribute("data-prose-mirror-wrapper","1"),r.innerHTML=e,Array.prototype.map.call(r.childNodes,e=>D(e,U,{wrapper:r,pub:t,props:n}))}function Y(e,t){if("undefined"==typeof window)return[];let n=document.createElement("div");n.innerHTML=e;let r=[];for(let e of n.querySelectorAll(null!=t?t:"h1, h2, h3, h4")){var i,l;let t=e.tagName[1],n=t?parseInt(t):NaN;r.push({level:null!=n?n:0,text:null!==(i=e.textContent)&&void 0!==i?i:"",id:null!==(l=e.id)&&void 0!==l?l:""})}return r}},37117:function(e,t,n){n.d(t,{a:()=>l});var r=n(16584),i=n(93283);function l(){return(0,r.tZ)(i.Z,{size:12,color:"var(--color-fg-secondary)"})}},68380:function(e,t,n){n.d(t,{$Z:()=>S,FZ:()=>I,Yl:()=>k,Yr:()=>B,dR:()=>C});var r=n(7409),i=n(99282),l=n(16584),a=n(30396),o=n(94184),s=n.n(o),c=n(56953),d=n(9404),u=n(42695),p=n(68833);n(80878);var m=n(7882),h=n(63018),g=n(80026),b=n(86075),v=n(99916),f=n(67899),_=n(45031),Z=n(97842),y=n(54584),x=n(31541),N=n(60308),w=n(44854);function C(e){var t;let{onClick:n}=e,r=(0,Z.RN)();return r.inbox.pendingInviteCount?(0,l.tZ)(g.sg,{className:s()(w.Z.invitesRow),children:(0,l.BX)(_.c_,{onClick:n,children:[(null!==(t=r.inbox.pendingInviteUnreadCount)&&void 0!==t?t:0)>0&&(0,l.tZ)(x.in,{className:w.Z.unreadDot}),(0,l.tZ)(g.X2,{width:56,justifyContent:"center",alignItems:"center",children:(0,l.tZ)(c.Z,{size:20})}),(0,l.tZ)(_.Ty,{children:(0,l.BX)(g.X2,{justifyContent:"space-between",alignItems:"center",children:[(0,l.tZ)(g.xv.B3,{weight:"semibold",translated:!0,children:"Requests"}),(0,l.tZ)(g.xv.B4,{color:"secondary",flex:"auto"})]})})]})}):null}function S(){return(0,l.tZ)(v.v2,{trigger:(0,l.tZ)(g.hU,{"aria-label":"View more",priority:"tertiary",children:(0,l.tZ)(d.Z,{size:20})}),children:(0,l.tZ)(v.sN,{href:(0,N.v3t)({section:"privacy"}),target:"_blank",leading:(0,l.tZ)(u.Z,{}),children:(0,l.tZ)(g.xv.B3,{weight:"semibold",children:"Messaging settings"})})})}function B(e){let t=[],n=[...(null==e?void 0:e.threads)||[],...(null==e?void 0:e.spamThreads)||[]];for(let e of null!=n?n:[])if("direct-message"===e.type){var l,a;t.push((0,i._)((0,r._)({},e),{members:e.messageThread.members.map(e=>{let{user:t}=e;return t}),messageThreadId:e.messageThread.id,recentMessageId:null!==(a=null===(l=e.recentMessage)||void 0===l?void 0:l.id)&&void 0!==a?a:null,recentMessage:e.recentMessage?{comment:e.recentMessage,userId:e.recentMessage.user_id}:null}))}return t}function k(e){let{error:t,items:n,isLoading:r,selectedConversationId:i,onSelect:o}=e,s=(0,y.y)(),{refetch:c}=(0,m.ib)({pathname:"/api/v1/messages/inbox/invites/seen",method:"POST",auto:!1});return(0,a.d4)(()=>{r||(c(),(0,p.j)(p.FP.DIRECT_MESSAGE_REQUESTS_VIEWED,{pending_conversation_requests:n.length,surface:s}))},[r]),(0,l.tZ)(l.HY,{children:t?(0,l.tZ)(l.HY,{children:"'Error'"}):r?(0,l.tZ)(_.No,{}):(0,l.tZ)(g.sg,{paddingY:12,gap:8,flex:"grow",children:n.length?n.map(e=>(0,l.tZ)(f.w,{item:e,onSelect:(t,n)=>o(e.messageThread.id,n),isUnread:!e.lastViewedAt,isSelected:i===e.messageThread.id,tab:"requests"},e.id)):(0,l.tZ)(E,{})})})}function E(e){let{spam:t}=e;return(0,l.tZ)(g.sg,{flex:"grow",justifyContent:"center",alignItems:"center",sizing:"border-box",children:(0,l.tZ)(b.u,{title:t?"No spam requests yet":"No requests yet",description:t?"Message requests that may be low-quality or unwanted will appear here.":"Control whose messages arrive as requests in your Settings.",button:t?void 0:(0,l.tZ)(g.zx,{priority:"primary-mono",href:(0,N.v3t)({section:"privacy"}),newTab:!0,size:"sm",children:"Go to Settings"})})})}function I(){return(0,h._I)("/api/v1/messages/dm/invites")}},78446:function(e,t,n){n.d(t,{N4:()=>o,sm:()=>s});var r=n(16584),i=n(30396),l=n(15771),a=n(15562);function o(){let[e,t]=(0,i.eJ)(null);return{confirm:()=>new Promise((n,r)=>{e&&r(Error("Already confirming.")),t({resolve:n,reject:r})}),isConfirming:!!e,handleConfirm:n=>{t(null),null==e||e.resolve(n)},handleCancel:n=>{t(null),null==e||e.resolve(n)}}}function s(e){let{title:t,body:n,cancelLabel:i="Cancel",confirmLabel:o="Confirm",modal:s}=e;return(0,r.tZ)(a.W,{isOpen:s.isConfirming,onClose:()=>s.handleCancel(!1),title:t,description:n,primaryButton:(0,r.tZ)(l.zx,{priority:"destructive",onClick:()=>s.handleConfirm(!0),children:o}),secondaryButton:(0,r.tZ)(l.zx,{priority:"secondary",onClick:()=>s.handleCancel(!1),children:i})})}},4953:function(e,t,n){function*r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let r=e;r<t;r+=n)yield r}function*i(e){let t=Array.from(e);for(let e=t.length-1;e>=0;e--)yield t[e]}n.d(t,{GY:()=>i,w6:()=>r})}}]);