"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6364"],{6651:function(e,t,i){i.d(t,{Z:()=>r});let r={popover:"popover-kjVHbn",floatingContainer:"floatingContainer-qSTpXA"}},49391:function(e,t,i){i.d(t,{Z:()=>r});let r={spinner:"spinner-q_nGBK",thinker:"thinker-EMr_ky",radialProgress:"radialProgress-WMgO9h",linearProgress:"linearProgress-mKShnL",segmentedProgress:"segmentedProgress-nX6QlM",theme_default:"theme_default-qMdqgV",themeDefault:"theme_default-qMdqgV",theme_media:"theme_media-rlxg52",themeMedia:"theme_media-rlxg52",theme_accent:"theme_accent-G2_5gC",themeAccent:"theme_accent-G2_5gC",theme_success:"theme_success-CEeMXY",themeSuccess:"theme_success-CEeMXY",bg:"bg-UXIMqb",fg:"fg-MeJce5",spin:"spin-C_7zWX",linearProgressFill:"linearProgressFill-HZS3R2",segment:"segment-dbrb2q",active:"active-WElPWD"}},21963:function(e,t,i){i.d(t,{Z:()=>r});let r={text:"text-D8GloI",badge:"badge-dwcqRz",static:"static-XUAQjT","frame-accent-fg-purple":"frame-accent-fg-purple-DS2Dz6",frameAccentFgPurple:"frame-accent-fg-purple-DS2Dz6"}},28657:function(e,t,i){i.d(t,{Z:()=>r});let r={track:"track-e0UsGc",sm:"sm-NTA_dM",md:"md-t9_OLv",theme_error:"theme_error-iKFnqH",themeError:"theme_error-iKFnqH",enabled:"enabled-z80ktY",checked:"checked-shaJTW",unchecked:"unchecked-xbnGJz",disabled:"disabled-HU7KbB",nub:"nub-sJTvJy",animate:"animate-HqAcLR",theme_accent:"theme_accent-jLc1V8",themeAccent:"theme_accent-jLc1V8",theme_success:"theme_success-OT7UOf",themeSuccess:"theme_success-OT7UOf",theme_select:"theme_select-ZrBXM7",themeSelect:"theme_select-ZrBXM7"}},18738:function(e,t,i){i.d(t,{Z:()=>r});let r={inlineContainer:"inlineContainer-FbhgTi",container:"container-ORd8N2"}},64515:function(e,t,i){i.d(t,{l:()=>d});var r=i(7409),n=i(99282),a=i(98848),o=i(16584),s=i(82621),l=i(14773),c=i(17043);let d=e=>{var{name:t,svgParams:i,isStatic:d,height:u,fill:h,stroke:p,version:g=4,strokeWidth:m=1.8,strokeLinecap:b,strokeLinejoin:f,alt:v,additionalStaticParams:C={},children:Z}=e,y=(0,a._)(e,["name","svgParams","isStatic","height","fill","stroke","version","strokeWidth","strokeLinecap","strokeLinejoin","alt","additionalStaticParams","children"]);let _=u?(i.width||1)*u/(i.height||1):i.width||1,B=u||i.height||1;return d?(0,o.tZ)(s.Z,(0,r._)({src:(0,c.zF)((0,l.n1)("/icon/".concat(t),{v:g||4,height:2*B,fill:h,stroke:p,strokeWidth:2*m,strokeLinecap:b,strokeLinejoin:f}),2*_,{format:"png",crop:"scale"}),width:_,height:B,style:{maxWidth:"".concat(_,"px")},alt:v||""},C,y)):(0,o.tZ)("svg",(0,n._)((0,r._)({role:"img",style:u?{height:"".concat(B,"px"),width:"".concat(_,"px")}:void 0,width:_,height:B,viewBox:i.viewBox||"0 0 ".concat(i.width," ").concat(i.height),fill:h||i.fill||"none",strokeWidth:m||"number"==typeof m?Number(m):"number"==typeof i.strokeWidth?i.strokeWidth:1,stroke:p||i.stroke||"#000",strokeLinecap:b,strokeLinejoin:f,xmlns:"http://www.w3.org/2000/svg"},y),{children:(0,o.BX)("g",{children:[(0,o.tZ)("title",{children:v||""}),Z]})}))}},93252:function(e,t,i){i.d(t,{P:()=>r});function r(){return"undefined"!=typeof document&&document.location.pathname.startsWith("/embed/")}},84747:function(e,t,i){i.d(t,{M:()=>v,u:()=>y});var r=i(7409),n=i(99282);if(!/^(1588|1691|4457)$/.test(i.j))var a=i(98848);var o=i(16584);if(!/^(1588|1691|4457)$/.test(i.j))var s=i(19425);var l=i(94184),c=i.n(l),d=i(98661),u=i(60684),h=i(10903),p=i(50368),g=i(14775),m=i(14651),b=i(91400),f=i(6114);let v=/^(1588|1691|4457)$/.test(i.j)?null:(0,d.forwardRef)((e,t)=>{var{trigger:i,children:l,ariaLabel:c="View more",hideOnScroll:m,layerOptions:v,layerClassName:y,onOpen:B,onClose:w,useMobileBottomSheet:x=!0,stopPropagation:k=!1,padding:S=4,disableMenu:M=!1,title:X,Theme:N,customShowClass:I,customHideClass:P}=e,L=(0,a._)(e,["trigger","children","ariaLabel","hideOnScroll","layerOptions","layerClassName","onOpen","onClose","useMobileBottomSheet","stopPropagation","padding","disableMenu","title","Theme","customShowClass","customHideClass"]);"function"!=typeof i&&"string"!=typeof i.type&&i.type.$$typeof!==Symbol.for("react.forward_ref")&&console.error("Menu trigger must be a valid component that forwards a ref that react-laag uses, or a native dom element. See Button/IconButton for example, and preferably use those.");let F=(0,b.XA)(),{triggerProps:z,layerProps:j,renderLayer:E,isOpen:T,setOpen:A}=(0,h.x)({layerOptions:(0,r._)({auto:!0,possiblePlacements:["bottom-start","bottom-center","bottom-end","top-start","top-center","top-end"],preferY:"bottom"},v),hideOnScroll:m&&!(x&&F),onClose:w}),[O,V]=(0,d.useState)(!1),W=()=>{A(!1),w&&w()},U=d.Children.map(l,e=>(0,d.cloneElement)(e,{useMobileBottomSheet:x,closeMenu:W})),H=(0,d.useMemo)(()=>({useMobileBottomSheet:x,close:W}),[w,x]),R=(0,n._)((0,r._)({},z),{ariaLabel:c,onClick:e=>{e.preventDefault(),k&&e.stopPropagation(),M||A(!T),T?null==w||w():null==B||B()}});return(0,o.BX)(p.p.Provider,{value:H,children:["function"==typeof i?i(R):(0,d.cloneElement)(i,R),(T||O)&&E(x&&F?(0,o.tZ)(s.u,{appear:!0,show:T,beforeEnter:()=>V(!0),afterLeave:()=>V(!1),className:f.Z.actionSheetTransition,enterFrom:f.Z.actionSheetHide,enterTo:f.Z.actionSheetShow,leaveFrom:f.Z.actionSheetShow,leaveTo:f.Z.actionSheetHide,children:(0,o.tZ)(_,{Theme:N,children:(0,o.tZ)("div",(0,n._)((0,r._)({},j,L),{children:(0,o.tZ)(u.V,{title:X,onClose:W,ref:t,className:y,children:U})}))})}):(0,o.tZ)(Z,{isOpen:T,setAnimating:V,children:(0,o.tZ)(_,{Theme:N,children:(0,o.tZ)("div",(0,n._)((0,r._)({},j,L),{children:(0,o.tZ)(C,{isOpen:T,customHideClass:P,customShowClass:I,children:(0,o.tZ)(g.F,(0,n._)((0,r._)({className:y,ref:t,padding:S},!m&&{style:{overflowY:"auto"}}),{children:U}))})}))})}))]})});function C(e){let{isOpen:t,customHideClass:i,customShowClass:r,children:n}=e;return(0,o.tZ)(s.u,{appear:!0,unmount:!1,show:t,className:f.Z.transition,enterFrom:null!=i?i:f.Z.hide,enterTo:null!=r?r:f.Z.show,leaveFrom:null!=r?r:f.Z.show,leaveTo:null!=i?i:f.Z.hide,children:n})}function Z(e){let{children:t,isOpen:i,setAnimating:r}=e;return(0,o.tZ)(s.u,{appear:!0,unmount:!1,show:i,beforeEnter:()=>r(!0),afterLeave:()=>r(!1),className:f.Z.transition,children:t})}let y=(0,d.forwardRef)((e,t)=>{var i;return(0,o.tZ)(m.tV,(0,n._)((0,r._)({},e),{className:c()(f.Z.menuItem,f.Z["priority_".concat(null!==(i=e.priority)&&void 0!==i?i:"primary")],e.className,{[f.Z.disabled]:!!e.disabled,[f.Z.relative]:!!e.hiddenInput}),children:e.children,ref:t}))});function _(e){let{Theme:t,children:i}=e;return t?(0,o.tZ)(t,{children:i}):i}},82658:function(e,t,i){i.d(t,{v:()=>a});var r=i(95441),n=i(76641);function a(e){let{value:t,format:i,currency:a,currencyIsMinorUnits:o}=e,{userLocale:s}=(0,r.M1)();return(0,n.L)(t,i,a,o,s)}},15220:function(e,t,i){i.d(t,{I:()=>C});var r=i(7409),n=i(99282),a=i(16584),o=i(94184),s=i.n(o),l=i(57407),c=i(40116),d=i(98848),u=i(64515);let h=e=>{var{fill:t="#FF6719"}=e,i=(0,d._)(e,["fill"]);return(0,a.BX)(u.l,(0,n._)((0,r._)({},i),{fill:t,name:"BestsellerBadgeIcon",svgParams:{viewBox:"0 0 40 40",height:40,width:40},children:[(0,a.tZ)("path",{d:"M17.4385 1.2681C19.3988 0.456149 21.6012 0.45615 23.5615 1.2681L31.5807 4.58976C33.5409 5.40172 35.0983 6.95911 35.9102 8.91933L39.2319 16.9385C40.0439 18.8988 40.0439 21.1012 39.2319 23.0615L35.9102 31.0807C35.0983 33.0409 33.5409 34.5983 31.5807 35.4102L23.5615 38.7319C21.6012 39.5439 19.3988 39.5439 17.4385 38.7319L9.41933 35.4102C7.45911 34.5983 5.90171 33.0409 5.08976 31.0807L1.7681 23.0615C0.956149 21.1012 0.95615 18.8988 1.7681 16.9385L5.08976 8.91933C5.90172 6.95911 7.45911 5.40171 9.41933 4.58976L17.4385 1.2681Z",fill:t,stroke:"transparent"}),(0,a.tZ)("path",{d:"M27.1666 15L17.9999 24.1667L13.8333 20",stroke:"white",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}))},p=e=>(0,a.BX)(u.l,(0,n._)((0,r._)({},e),{name:"BestsellerBadgeOutlineIcon",svgParams:{viewBox:"0 0 40 40",height:40,width:40},children:[(0,a.tZ)("path",{d:"M17.8212 2.19198C19.5364 1.48152 21.4636 1.48152 23.1788 2.19198L31.198 5.51364C32.9132 6.2241 34.2759 7.58682 34.9864 9.30201L38.308 17.3212C39.0185 19.0364 39.0185 20.9636 38.308 22.6788L34.9864 30.698C34.2759 32.4132 32.9132 33.7759 31.198 34.4864L23.1788 37.808C21.4636 38.5185 19.5364 38.5185 17.8212 37.808L9.80201 34.4864C8.08682 33.7759 6.7241 32.4132 6.01364 30.698L2.69198 22.6788C1.98152 20.9636 1.98152 19.0364 2.69198 17.3212L6.01364 9.30201C6.7241 7.58682 8.08682 6.2241 9.80202 5.51364L17.8212 2.19198Z",stroke:"#FF6719",strokeWidth:"4",fill:"transparent"}),(0,a.tZ)("path",{d:"M27.1666 15L17.9999 24.1667L13.8333 20",stroke:"#FF6719",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})]}));function g(e){var{colorFg:t="var(--color-fg)",colorBg:i="var(--color-bg)"}=e,o=(0,d._)(e,["colorFg","colorBg"]);return(0,a.BX)("svg",(0,n._)((0,r._)({width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("circle",{cx:"8.8418",cy:"8.5",r:"8",fill:i}),(0,a.tZ)("path",{d:"M9.15327 8.77241C8.4744 8.90028 7.50425 8.8961 6.64812 8.49009M8.50799 8.77241C8.37602 8.07176 8.3847 7.06085 8.83063 6.18523M8.50799 8.19695C9.18987 8.06851 10.1656 8.07329 11.0245 8.48468M9.16954 8.2C9.30224 8.90448 9.29274 9.92262 8.83956 10.8015M8.83063 6.18523C8.97538 5.90101 9.1662 5.63104 9.41323 5.39056C10.3945 4.38248 11.867 4.31051 12.7951 4.48532C12.9699 5.4134 12.8979 6.88585 11.8898 7.86716C11.6295 8.13459 11.3346 8.33614 11.0245 8.48468M8.83063 6.18523C8.68588 5.90101 8.49506 5.63104 8.24803 5.39056C7.26671 4.38248 5.79426 4.31051 4.86618 4.48532C4.69137 5.4134 4.76335 6.88585 5.77142 7.86716C6.03493 8.13785 6.33384 8.34105 6.64812 8.49009M11.0245 8.48468C11.3346 8.63322 11.6295 8.83476 11.8898 9.10219C12.8979 10.0835 12.9699 11.556 12.7951 12.484C11.867 12.6588 10.3945 12.5869 9.41323 11.5788C9.17124 11.3432 8.9832 11.0794 8.83956 10.8015M8.83956 10.8015C8.69572 11.0805 8.50718 11.3454 8.26431 11.5819C7.28299 12.5899 5.81054 12.6619 4.88246 12.4871C4.70765 11.559 4.77962 10.0866 5.7877 9.10525C6.04665 8.83923 6.3398 8.6384 6.64812 8.49009",stroke:t,strokeLinejoin:"round"})]}))}function m(e){var{colorFg:t="var(--color-fg)",colorBg:i="var(--color-bg)"}=e,o=(0,d._)(e,["colorFg","colorBg"]);return(0,a.BX)("svg",(0,n._)((0,r._)({width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("circle",{cx:"8.51367",cy:"8.5",r:"8",fill:i}),(0,a.tZ)("path",{d:"M8.5454 8.87921C8.43567 8.80426 8.3217 8.71805 8.20701 8.6213M8.37817 8.22773C9.25249 8.20229 10.5619 8.4636 11.3786 9.43751M8.71955 8.22773C8.77083 8.3712 8.81791 8.52992 8.85714 8.69991M6.83312 6.18777C6.75744 6.15699 6.67957 6.12905 6.5995 6.10422C5.28896 5.65882 3.96599 6.25343 3.23047 6.82123C3.49177 7.71291 4.21258 8.97158 5.53463 9.38156C5.59614 9.40246 5.65767 9.42107 5.71917 9.43751M6.83312 6.18777C6.8248 6.09236 6.82108 5.99528 6.82241 5.89663C6.80379 4.51259 7.77811 3.43812 8.5454 2.91406C9.3127 3.43812 10.287 4.51259 10.2684 5.89663C10.2697 5.99629 10.2659 6.09434 10.2574 6.1907M6.83312 6.18777C6.92492 7.23959 7.5769 8.08971 8.20701 8.6213M10.2574 6.1907C10.3354 6.15876 10.4156 6.12983 10.4982 6.10422C11.8088 5.65882 13.1317 6.25343 13.8672 6.82123C13.6059 7.71291 12.8851 8.97158 11.5631 9.38156C11.5016 9.40246 11.4401 9.42107 11.3786 9.43751M10.2574 6.1907C9.10793 6.66182 8.46143 7.78907 8.20701 8.6213M11.3786 9.43751C11.4294 9.49818 11.4784 9.56162 11.5252 9.62793C12.3538 10.7367 12.1971 12.1787 11.8844 13.0536C10.9556 13.0807 9.5358 12.7841 8.73735 11.6534C8.66773 11.5603 8.60506 11.4648 8.54886 11.3674M8.54886 11.3674C8.49266 11.4648 8.43 11.5603 8.36038 11.6534C7.56192 12.7841 6.14212 13.0807 5.21333 13.0536C4.90061 12.1787 4.74392 10.7367 5.5725 9.62793C5.61933 9.56162 5.66829 9.49818 5.71917 9.43751M8.54886 11.3674C9.05185 10.4963 9.03706 9.47952 8.85714 8.69991M5.71917 9.43751C6.28236 9.58799 6.84264 9.55561 7.35239 9.42507C7.94844 9.27243 8.4754 8.98558 8.85714 8.69991",stroke:t,strokeLinejoin:"round"})]}))}function b(e){var{colorFg:t="var(--color-fg)",colorBg:i="var(--color-bg)"}=e,o=(0,d._)(e,["colorFg","colorBg"]);return(0,a.BX)("svg",(0,n._)((0,r._)({width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,a.tZ)("circle",{cx:"8.18555",cy:"8.5",r:"8",fill:i}),(0,a.tZ)("path",{d:"M8.1905 8.4583C7.46837 7.96723 6.56521 6.96031 6.58274 5.66339C6.58071 5.51364 6.59097 5.36775 6.6118 5.22609M8.22273 8.53879C8.22506 8.5428 8.22738 8.54683 8.2297 8.55088M8.1905 8.49987C8.12573 7.63157 8.34442 6.28998 9.37361 5.49485C9.50801 5.38512 9.64874 5.29156 9.79369 5.21242M8.19051 8.49645C7.3549 8.75316 5.99265 8.84043 4.98445 8.01907C4.85511 7.91936 4.73853 7.81102 4.63369 7.69606M9.79369 5.21242C10.7351 4.69838 11.8548 4.79243 12.5792 5.01413C12.6358 5.77292 12.4759 6.89317 11.7478 7.6943M9.79369 5.21242C9.62449 4.13382 8.82655 3.30119 8.1905 2.86865C7.55175 3.30302 6.77137 4.14085 6.6118 5.22609M11.7478 7.6943C12.7639 8.09698 13.4026 9.04417 13.6843 9.75651C13.1137 10.2831 12.109 10.8687 11.0027 10.7765M11.7478 7.6943C11.6083 7.63901 11.4617 7.59399 11.3079 7.56125C10.0418 7.25602 8.84412 7.90798 8.20277 8.49987C7.88322 9.31034 7.10224 10.425 5.82863 10.6975C5.67789 10.7341 5.52821 10.7568 5.38041 10.7675M11.0027 10.7765C11.3222 11.8197 10.9765 12.9094 10.5924 13.5737C9.85186 13.4623 8.81763 13.072 8.19048 12.2236M11.0027 10.7765C10.9592 10.6348 10.9035 10.4939 10.834 10.3551C10.2999 9.213 9.09099 8.69867 8.2297 8.55088M8.19048 12.2236C7.56423 13.0727 6.53036 13.4642 5.78994 13.5763C5.40367 12.9099 5.05558 11.8147 5.38041 10.7675M8.19048 12.2236C8.29545 12.0813 8.38897 11.9261 8.46774 11.7572C9.0449 10.6021 8.6639 9.30679 8.2297 8.55088M5.38041 10.7675C4.2871 10.8467 3.29599 10.2685 2.73048 9.7477C3.00856 9.04238 3.63612 8.10663 4.63369 7.69606M4.63369 7.69606C3.90363 6.8956 3.74235 5.77461 3.79818 5.01529C4.52947 4.79063 5.66411 4.69574 6.6118 5.22609",stroke:t,strokeLinejoin:"round"})]}))}let f={subscriberBadge:"subscriberBadge-Lpjxjx",isSubscriber:"isSubscriber-JdH2KX"},v={xs:12,sm:16,md:18,lg:24,xl:40,"2xl":132};function C(e){let{size:t,isStatic:i,badge:o}=e,d=v[t];if("bestseller"===o.type){if(!o.tier)return null;let e={height:d,isStatic:i};if(100===o.tier)return(0,a.tZ)(p,(0,r._)({},e));let t=1e4===o.tier?"var(--color-accent-fg-purple)":void 0;return(0,a.tZ)(h,(0,n._)((0,r._)({},e),{fill:t}))}if("subscriber"===o.type){if(!o.tier)return null;let e={width:d,height:d,className:s()(f.subscriberBadge,o.accent_colors&&f.isSubscriber)};return 1===o.tier?(0,a.tZ)(g,(0,r._)({},e)):5===o.tier?(0,a.tZ)(m,(0,r._)({},e)):(0,a.tZ)(b,(0,r._)({},e))}return"vip"===o.type?(0,a.tZ)(l.Z,{size:d,stroke:"var(--color-fg-primary)"}):(0,a.tZ)(c.Z,{size:d,stroke:"var(--color-fg-primary)"})}},85525:function(e,t,i){i.d(t,{i:()=>r});function r(e){if(e&&"object"==typeof e&&"type"in e&&"function"==typeof e.type){let t=e.type.displayName||e.type.name;if(t)return t.replace(/Icon$/,"").replace(/(?!^)([A-Z])/g," $1").trim()}}},63042:function(e,t,i){i.d(t,{u:()=>d});var r=i(16584),n=i(80026),a=i(10510),o=i(63474),s=i(96302),l=i(14773),c=i(47929);function d(e){let{subscription:t={},publicationUser:i={},publication:d,type:p,onVisibilityChange:g,visibility:m}=e,b=m?"public"===m:"writes"===p?i.public:"public"===t.visibility;return(0,r.BX)(u,{children:[(0,r.tZ)(o.A0,{href:(0,l.n1)((0,l.SV)(d),{utm_source:c.b3.editProfileVisibility}),target:"_blank",rel:"noopener noreferrer",children:(0,r.BX)(h,{children:[(0,r.tZ)(a.wk,{size:32,pub:d}),d&&(0,r.tZ)(n.xv.B4,{weight:"semibold",ellipsis:!0,children:d.name})]})}),(0,r.tZ)(s.rs,{checked:b,onChange:e=>{g({type:p,publicationUser:i,subscription:t,visibility:e?"public":"private"})}})]})}let u=(0,o.zo)({display:"flex",gap:12,padding:8,justifyContent:"start",alignItems:"center",minWidth:0}),h=(0,o.zo)({display:"flex",gap:12,justifyContent:"start",alignItems:"center",flex:"grow",minWidth:0})},80802:function(e,t,i){i.d(t,{_:()=>f});var r=i(7409),n=i(99282),a=i(16584),o=i(43174),s=i.n(o),l=i(98661),c=i(68833),d=i(48980),u=i(98914),h=i(80026),p=i(61254),g=i(82658),m=i(63042),b=i(64172);function f(e){let{result:t}=(0,b.Th)();return t?(0,a.tZ)(v,(0,n._)((0,r._)({},e),{result:t})):null}function v(e){let{result:t,onChange:i}=e,{refetchPublication:o,updateSubscriptions:f}=(0,b.Th)(),[v,C]=(0,l.useState)(()=>{let{publicationMap:e,publicationUserMap:i}=t;return null==t?void 0:t.subscriptions.filter(e=>!i.get(e.publication_id)).map(t=>(0,n._)((0,r._)({},t),{pub:e.get(t.publication_id),publication:e.get(t.publication_id)})).sort((e,t)=>{var i,r,n,a;return(null!==(n=null===(i=e.publication)||void 0===i?void 0:i.name)&&void 0!==n?n:"").localeCompare(null!==(a=null===(r=t.publication)||void 0===r?void 0:r.name)&&void 0!==a?a:"")})}),[Z,y]=(0,l.useMemo)(()=>s()(v,e=>"subscribed"===e.membership_state),[v]),_=v.some(e=>"private"===e.visibility),B=v.some(e=>"public"===e.visibility),[w,x]=(0,l.useState)(6);(0,l.useEffect)(()=>{x(null)},[]);let k=async e=>{let t=v.map(t=>(0,n._)((0,r._)({},t),{visibility:e}));null==i||i(t);let a=v.map(t=>({id:t.id,visibility:e}));(0,c.j)(c.FP.PROFILE_EDITED,{type:"visibility_toggled_all",for:"reads",count:a.length}),C(t);try{await (0,d.rd)("/api/v1/subscription/visibilities/all",{method:"POST",json:{visibility:e}})}catch(e){}let o=await caches.open("api-cache");await o.delete("/api/v1/subscriptions"),f(t)},S=async e=>{let{subscription:t,visibility:a}=e,s=v.map(e=>e.id===t.id?(0,n._)((0,r._)({},e),{visibility:a}):e);null==i||i(s),C(s),(0,c.j)(c.FP.PROFILE_EDITED,{type:"read_visibility_toggled",visibility:a});try{await (0,d.rd)("/api/v1/subscription/".concat(t.id,"/visibility"),{method:"POST",json:{visibility:a}})}catch(e){alert((0,u.zx)(e))}let l=await caches.open("api-cache");await l.delete("/api/v1/subscriptions"),t.publication_id&&await o(t.publication_id)};return(0,a.BX)(h.sg,{gap:16,children:[v.length>1&&(0,a.BX)(h.X2,{gap:4,children:[(0,a.tZ)(h.zx,{priority:"secondary",onClick:()=>k("private"),disabled:!B,flex:"grow",children:"Hide all"}),(0,a.tZ)(h.zx,{priority:"secondary",onClick:()=>k("public"),disabled:!_,flex:"grow",children:"Make all public"})]}),(0,a.BX)(h.sg,{className:"subscriptionsStack-jFJ6XC",overflowY:"auto",border:"detail",radius:"md",padding:8,gap:16,children:[Z.length>0&&(0,a.BX)(h.sg,{gap:8,paddingTop:4,children:[(0,a.BX)(h.xv.Meta,{color:"secondary",paddingX:8,children:[(0,a.tZ)(g.v,{format:"number",value:Z.length})," paid subscriptions"]}),(null!=w?Z.slice(0,w):Z).map(e=>(0,a.tZ)(m.u,{type:"reads",subscription:e,publication:e.publication,onVisibilityChange:S},e.id))]}),Z.length>0&&y.length>0&&(0,a.tZ)(p.iz,{}),y.length>0&&(0,a.BX)(h.sg,{gap:8,paddingTop:4,children:[(0,a.tZ)(h.xv.Meta,{color:"secondary",paddingX:8,children:"Free subscriptions"}),(null!=w?y.slice(0,w):y).map(e=>(0,a.tZ)(m.u,{type:"reads",subscription:e,publication:e.publication,onVisibilityChange:S},e.id))]})]})]})}},38202:function(e,t,i){i.d(t,{t:()=>o});var r=i(98848),n=i(16584),a=i(20888);function o(e){let t,i;var{className:o,src:s,noStyle:l=!1,loading:c,onError:d,alt:u,draggable:h=!0}=e,p=(0,r._)(e,["className","src","noStyle","loading","onError","alt","draggable"]);return"size"in p?(t=p.size,i=p.size):(t=p.width,i=p.height),(0,n.tZ)(a.e,{src:s,maxWidth:2*t,className:o,imageProps:{height:2*i,crop:"fill",gravity:"auto"},style:l?void 0:{width:t,height:i},objectFit:"cover",loading:c,onError:d,alt:u,draggable:h})}i(71068),i(63651)},91313:function(e,t,i){i.d(t,{H:()=>r});let r="#FF6719"},47505:function(e,t,i){i.d(t,{$:()=>q});var r=i(7409),n=i(99282),a=i(58865),o=i(16584),s=i(27506),l=i(78493),c=i(94184),d=i.n(c),u=i(98814),h=i(9404),p=i(64998),g=i(98661),m=i(95441),b=i(60807),f=i(68833),v=i(93252),C=i(64576),Z=i(7882),y=i(80026),_=i(99916),B=i(82658),w=i(21685),x=i(10510),k=i(15220),S=i(76641),M=i(6490),X=i(80802);function N(e){let{isOpen:t,onClose:i}=e,{iString:r}=(0,m.M1)();return(0,o.BX)(M.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(M.xB,{title:r("Subscription visibility"),description:r("Control which of your subscriptions appear on your profile"),showClose:!0,onClose:i}),(0,o.tZ)(M.fe,{children:(0,o.tZ)(X._,{})})]})}var I=i(63018);let P=e=>{let{userId:t,shouldFetch:i}=e,r=(0,I._I)("/api/v1/user_status/".concat(t),{auto:!!(i&&t),deps:[i,t]});return t?{userStatus:r.data,isLoading:r.isLoading}:{userStatus:null,isLoading:!1}};function L(e){return"color(display-p3 ".concat((e.r/255).toPrecision(5)," ").concat((e.g/255).toPrecision(5)," ").concat((e.b/255).toPrecision(5)," / ").concat(e.a,")")}var F=i(51231),z=i(14773),j=i(36186),E=i(63651),T=i(81821);let A={userStatusPopoverContent:"userStatusPopoverContent-Dq9jUa",subscriptionItem:"subscriptionItem-Fianmj",subscriptionContext:"subscriptionContext-TxZ2tf",secondaryBadgeButton:"secondaryBadgeButton-ZKuuU3",currentPublicationBar:"currentPublicationBar-xMtV6t",moreButton:"moreButton-T3omhQ",badgeAnimation:"badgeAnimation-K_JAim",backButton:"backButton-B6X90Z"};function O(){let e=(0,a._)([""," has hundreds of paid subscriptions"]);return O=function(){return e},e}function V(){let e=(0,a._)([""," has thousands of paid subscriptions"]);return V=function(){return e},e}function W(){let e=(0,a._)([""," has tens of thousands of paid subscriptions"]);return W=function(){return e},e}function U(){let e=(0,a._)(["#"," Rising in ",""]);return U=function(){return e},e}function H(){let e=(0,a._)(["#"," in ",""]);return H=function(){return e},e}function R(){let e=(0,a._)([""," is a Substack Bestseller"]);return R=function(){return e},e}function D(){let e=(0,a._)([""," paid subscriptions"]);return D=function(){return e},e}function q(e){let{userId:t,badge:i,hideViewProfileButton:a=!1,children:c}=e,d=function(){let[e,t]=(0,g.useState)(!1);return{open:()=>t(!0),element:(0,o.tZ)(N,{isOpen:e,onClose:()=>t(!1)})}}(),[u,h]=(0,g.useState)(()=>"subscriber"===i.type?(0,n._)((0,r._)({},i),{color:null}):i),[p,m]=(0,g.useState)(!1),{refs:b,floatingStyles:C,context:Z,update:_}=(0,s.YF)({open:p,onOpenChange:m,middleware:[(0,l.X5)(),(0,l.uY)()]}),B=(0,s.XI)(Z,{mouseOnly:!0,delay:{open:500,close:250}}),{getReferenceProps:x,getFloatingProps:k}=(0,s.NI)([B,(0,s.bQ)(Z,{ancestorScroll:!0})]),{isMounted:S,styles:M}=(0,w.cV)(Z),{userStatus:X}=P({shouldFetch:!!(t&&p),userId:t});return((0,g.useEffect)(()=>{p&&X&&(0,f.j)(f.FP.USER_CREDENTIAL_DRAWER_OPENED,{userId:t})},[p,X]),(0,T.tq)()||(0,v.P)())?(0,o.tZ)(o.HY,{children:c}):(0,o.BX)(y.xu,(0,n._)((0,r._)({ref:b.setReference,onClick:e=>{e.stopPropagation()}},x()),{children:[c,d.element,X&&S&&(0,o.tZ)(s.ll,{children:(0,o.tZ)(y.xu,(0,n._)((0,r._)({style:C,ref:b.setFloating},k()),{zIndex:1,children:(0,o.tZ)(w.OI,{style:M,children:(0,o.tZ)(Y,{userId:t,badge:u,onChangeBadge:e=>{h(e),_()},hideViewProfileButton:a,userStatus:X,onEditSubscriptions:d.open})})}))})]}))}function Y(e){let{userId:t,badge:i,hideViewProfileButton:r=!1,userStatus:n,onChangeBadge:a,onEditSubscriptions:s}=e;switch(i.type){case"bestseller":return(0,o.tZ)(G,{badge:i,userId:t,hideViewProfileButton:r,userStatus:n,onChangeBadge:a});case"subscriber":return(0,o.tZ)(K,{badge:i,userId:t,hideViewProfileButton:r,userStatus:n,onChangeBadge:a,onEditSubscriptions:s});case"unverified":return(0,o.tZ)($,{badge:i,userId:t,hideViewProfileButton:r,userStatus:n});case"vip":return(0,o.tZ)(Q,{badge:i,userId:t,hideViewProfileButton:r,userStatus:n,onChangeBadge:a});default:return(0,o.tZ)(o.HY,{})}}function G(e){let{badge:t,userId:i,hideViewProfileButton:r=!1,userStatus:n,onChangeBadge:a}=e,{iString:s,iTemplate:l}=(0,m.M1)(),c=!!(null==n?void 0:n.leaderboardStatus),d=t.tier,u=n.leaderboardStatus?"trending"===n.leaderboardStatus.ranking?l(U(),null==n?void 0:n.leaderboardStatus.rank,null==n?void 0:n.leaderboardStatus.label):l(H(),null==n?void 0:n.leaderboardStatus.rank,null==n?void 0:n.leaderboardStatus.label):"",h=(()=>{switch(d){case 100:return c?s("with hundreds of paid subscribers"):n.userName?l(O(),n.userName):s("Hundreds of paid subscriptions");case 1e3:return c?s("with thousands of paid subscribers"):n.userName?l(V(),n.userName):s("Thousands of paid subscriptions");case 1e4:return c?s("with tens of thousands of paid subscribers"):n.userName?l(W(),n.userName):s("Tens of thousands of paid subscriptions");default:return""}})(),{subscriptionCount:p}=J(n),{userName:g}=n,b=g?l(R(),g):s("Substack Bestseller");return(0,o.BX)(ee,{children:[(0,o.BX)(y.sg,{gap:4,children:[(0,o.tZ)(et,{badge:t,title:b}),(null==n?void 0:n.leaderboardStatus)?(0,o.BX)(y.xv.B4,{color:"secondary",textAlign:"center",translated:!0,children:[I18N.p(null==n?void 0:n.leaderboardStatus.publicationName)," is"," ",(0,o.tZ)(y.hh,{href:(0,E.k5c)({categoryId:null==n?void 0:n.leaderboardStatus.categoryId,ranking:null==n?void 0:n.leaderboardStatus.ranking}),color:"accent",children:I18N.p(u)})," ",I18N.p(h)]}):(0,o.tZ)(y.xv.B4,{color:"secondary",textAlign:"center",children:h})]}),(null==n?void 0:n.secondaryBadge)&&(0,o.tZ)(er,{badge:n.secondaryBadge,count:p,onChangeBadge:a}),i&&!r&&(0,o.tZ)(ei,{userId:i,userName:null==n?void 0:n.userName})]})}function J(e){var t,i;let{currentPublicationSubscription:r}=e,n=(null==e?void 0:e.subscriptions.length)+ +!!r;return{subscriptionCount:n,hiddenSubscriptionsCount:null!==(t=null==e?void 0:e.subscriptions.filter(e=>"hidden"===e.visibility).length)&&void 0!==t?t:0,subscriptions:null!==(i=null==e?void 0:e.subscriptions.filter(e=>"public"===e.visibility))&&void 0!==i?i:[]}}function K(e){var t;let{badge:i,userId:r,hideViewProfileButton:n=!1,userStatus:a,onChangeBadge:s,onEditSubscriptions:l}=e,{primaryBadge:c,secondaryBadge:p,currentPublicationSubscription:g,userName:f}=a,{iString:v,iTemplate:C}=(0,m.M1)(),Z=(0,b.aF)(),{subscriptionCount:w,hiddenSubscriptionsCount:k,subscriptions:M}=J(a),X=function(e){let t=4,i=72,r=14,n="sm";for(let a=0;a<1e3;a++){let a=Math.ceil(e/t);if(a*i+r*(a-1)<300)return{columns:t,size:i,gap:r,radius:n};r>4&&(r-=2),(i=Math.floor((343-r*((t+=1)-1))/t))<=30&&(n="xs")}throw Error("No possible size")}((null!=w?w:0)-k+ +(k>0));return(0,o.BX)(ee,{children:[(0,o.BX)(y.sg,{alignItems:"center",gap:20,children:[(0,o.BX)(y.X2,{className:d()(a.secondaryBadge&&A.headerRowWithButtons),children:[(0,o.tZ)(y.X2,{justifyContent:"center",children:(0,o.tZ)(ea,{badge:i})}),p&&c&&(0,o.tZ)(y.hU,{className:A.backButton,position:"absolute","aria-label":"back",priority:"secondary",onClick:()=>s(c),rounded:!0,size:"sm",children:(0,o.tZ)(u.Z,{})}),r===(null==Z?void 0:Z.id)&&(0,o.tZ)(_.v2,{trigger:(0,o.tZ)(y.hU,{priority:"secondary",rounded:!0,size:"sm",position:"absolute",className:A.moreButton,children:(0,o.tZ)(h.Z,{})}),strategy:"absolute",children:(0,o.tZ)(_.sN,{onClick:l,children:v("Edit subscription visibility")})})]}),(0,o.BX)(y.xv.H4,{textAlign:"center",children:[null!=f?f:"User"," ",(0,o.tZ)(y.xu,{as:"span",fontStyle:"italic",children:"subscribes"}),"."]})]}),(0,o.BX)(y.sg,{gap:8,children:[(0,o.BX)(y.sg,{gap:12,paddingY:8,children:[(0,o.tZ)(y.xv.Meta,{alignSelf:"start",children:w?1===w?v("1 paid subscription"):C(D(),(0,S.L)(w,"number")):v("Paid subscriptions")}),g&&(0,o.tZ)(en,{subscription:g}),(0,o.tZ)(y.X2,{display:"grid",justifyContent:"space-between",style:{gridTemplateColumns:"repeat(".concat(X.columns,", ").concat(X.size,"px)"),rowGap:X.gap},children:(0,o.BX)(o.HY,{children:[M.map(e=>(0,o.BX)(y.sg,{className:A.subscriptionItem,alignItems:"center",gap:4,style:{width:X.size},children:[(0,o.tZ)(x.jM,{size:X.size,logoUrl:e.logoUrl,publicationName:e.publicationName,radius:X.radius,href:e.primaryUserId?(0,j.EO)(e.primaryUserId):(0,z.SV)({subdomain:e.subdomain}),frame:e.isFounding&&X.size>40?"accent-fg-purple":void 0}),(0,o.tZ)(y.xv.B4,{className:A.subscriptionContext,children:e.timeFrameString})]},e.publicationId)),k>0&&(0,o.BX)(y.sg,{className:A.subscriptionItem,alignItems:"center",gap:4,children:[(0,o.tZ)(y.sg,{className:A.subscriptionItemPubAvatar,bg:"elevated-secondary",justifyContent:"center",alignItems:"center",sizing:"border-box",radius:X.radius,style:{width:X.size,height:X.size},children:(0,o.tZ)(y.xv.B2,{weight:"semibold",color:"secondary",children:(0,o.tZ)(B.v,{value:k,format:"number"})})}),(0,o.tZ)(y.xv.B4,{className:A.subscriptionContext,children:v("Private")})]})]})})]}),r&&!n&&(0,o.tZ)(y.zx,{href:(0,j.GR)(r,null!==(t=null==a?void 0:a.userName)&&void 0!==t?t:null),priority:"secondary",children:v("View profile")})]})]})}function $(e){let{badge:t,userId:i,hideViewProfileButton:r=!1,userStatus:n}=e,{iString:a}=(0,m.M1)(),s=(0,b.aF)(),l=(null==s?void 0:s.id)===i,{userName:c}=n,d=c?"".concat(c,"*"):a("Unverified user");return(0,o.BX)(ee,{children:[(0,o.BX)(y.sg,{gap:4,children:[(0,o.tZ)(et,{badge:t,title:d}),(0,o.tZ)(y.xv.B4,{textAlign:"center",children:a("*This account has no verified phone number or paid subscriptions")})]}),(0,o.BX)(y.sg,{gap:8,children:[l&&(0,o.tZ)(y.zx,{priority:"secondary",href:(0,F.D4)(),children:a("Verify in the Substack app")}),!r&&(0,o.tZ)(ei,{userId:i,userName:null==n?void 0:n.userName,priority:l?"tertiary":"secondary"})]})]})}function Q(e){let{badge:t,userId:i,hideViewProfileButton:r=!1,userStatus:n,onChangeBadge:a}=e,{iString:s}=(0,m.M1)(),{userName:l}=n,c=null!=l?l:s("Verified creator"),{subscriptionCount:d}=J(n);return(0,o.BX)(ee,{children:[(0,o.BX)(y.sg,{gap:4,children:[(0,o.tZ)(et,{badge:t,title:c}),(0,o.BX)(y.xv.B4,{textAlign:"center",translated:!0,children:[(0,o.tZ)(y.hh,{href:t.url,color:"accent",target:"_blank",rel:"noopener noreferrer",children:I18N.p(t.handle)})," ","on ",I18N.p(t.service)]})]}),n.secondaryBadge&&(0,o.tZ)(er,{badge:n.secondaryBadge,count:d,onChangeBadge:a}),i&&!r&&(0,o.tZ)(ei,{userId:i,userName:null==n?void 0:n.userName})]})}function ee(e){let{children:t}=e;return(0,o.tZ)(y.sg,{padding:16,gap:20,className:A.userStatusPopoverContent,children:t})}function et(e){let{badge:t,title:i}=e;return(0,o.BX)(y.sg,{alignItems:"center",gap:20,children:[(0,o.tZ)(ea,{badge:t}),(0,o.tZ)(y.xv.H4,{textAlign:"center",children:i})]})}function ei(e){let{userId:t,userName:i,priority:r="secondary"}=e,{iString:n}=(0,m.M1)();return(0,o.tZ)(y.zx,{href:(0,j.GR)(t,i),priority:r,children:n("View profile")})}function er(e){let{badge:t,count:i,onChangeBadge:r}=e;return(0,o.BX)(o.HY,{children:[(0,o.tZ)(y.iz,{}),(0,o.BX)(y.kG,{resetCss:!0,className:A.secondaryBadgeButton,display:"flex",alignItems:"center",justifyContent:"space-between",onClick:()=>r(t),bg:"primary-hover",padding:8,pullX:8,pullY:8,radius:"md",children:[(0,o.BX)(y.X2,{gap:8,alignItems:"center",children:[(0,o.tZ)(k.I,{size:"xl",badge:t}),(0,o.BX)(y.xv.B4,{weight:"semibold",textAlign:"center",translated:!0,children:[(0,o.tZ)(B.v,{format:"number",value:i})," paid subscriptions"]})]}),(0,o.tZ)(p.Z,{size:24})]})]})}function en(e){let{subscription:t}=e,i=t.accentColors;return(0,o.BX)(y.X2,{className:A.currentPublicationBar,gap:12,padding:16,radius:"md",style:i?{"--bg":L(i.primary),"--bg-hover":L(i.primary_hover),"--fg":L(i.contrast)}:void 0,alignItems:"start",children:[(0,o.tZ)(x.jM,{className:(0,y.oB)({shadow:"md"}),size:48,logoUrl:t.logoUrl,publicationName:t.publicationName,radius:"md",href:t.primaryUserId?(0,j.EO)(t.primaryUserId):(0,z.SV)({subdomain:t.subdomain})}),(0,o.BX)(y.sg,{gap:4,children:[t.isFounding?(0,o.BX)(y.xv.B2,{weight:"semibold",translated:!0,children:["Founding subscriber to ",I18N.p(t.publicationName)]}):(0,o.BX)(y.xv.B2,{weight:"semibold",translated:!0,children:["Paid subscriber to ",I18N.p(t.publicationName)]}),(0,o.tZ)(y.xv.B3,{children:t.timeFrameString})]})]})}function ea(e){var t;let{badge:r}=e,n=(0,C.tv)(),a=function(){let{result:e}=(0,Z.Wf)(()=>i.e("2995").then(i.bind(i,44444)).then(e=>e.DotLottieReact),[],{auto:!0});return e}();if(!a)return null;let s=function(e){switch(e.type){case"vip":return"/vip";case"bestseller":return"/".concat(e.type,"/").concat(e.tier);case"subscriber":{let t;switch(e.tier){case 1:t=1;break;case 5:t=2;break;case 10:t=3}return"/".concat(e.type,"/").concat(t)}default:return null}}(r);if(!s)return null;let l=(t="/static/lottie/user_status_animation".concat(s,"/").concat(n,".lottie")).startsWith("//")||!t.startsWith("/")?(console.warn("cdnify called on non-path string ".concat(t)),t):"".concat(z.L4).concat(t);return(0,o.tZ)(a,{className:A.badgeAnimation,src:l,autoplay:!0,width:343,height:150,renderConfig:{devicePixelRatio:2}})}},24430:function(e,t,i){i.d(t,{A:()=>r});let r={postAuthor:"custom-css-email-post-author",avatar:"custom-css-email-avatar",digestPostEmbed:"custom-css-email-digest-post-embed"}}}]);