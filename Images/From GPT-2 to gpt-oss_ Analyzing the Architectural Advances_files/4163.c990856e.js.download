"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["4163"],{83034:function(e,t,n){n.r(t),n.d(t,{AppInstallContent:()=>T,AppInstallModal:()=>O,AppInstallUpsells:()=>P,AppStoreQrCode:()=>z,EmailCodeCTA:()=>M,useAppModal:()=>D});var l=n(7409),i=n(99282),r=n(58865),o=n(16584),a=n(30396),c=n(21793),d=n(20888),u=n(95441),p=n(60807),s=n(68833),g=n(48980),h=n(64576),m=n(7882),v=n(24547),f=n(15771),y=n(61254),_=n(19081),b=n(1844),Z=n(6490),C=n(58175),k=n(14518),w=n(91400),I=n(60308),A=n(84864),S=n(8525);function B(){let e=(0,r._)(["Accept ","'s gift in the Substack app"]);return B=function(){return e},e}function x(){let e=(0,r._)(["We sent a link to download the Substack app to ","."]);return x=function(){return e},e}function D(){let{utm_campaign:e,utm_source:t,utm_content:n,abTestingId:l,overrideCTA:i,overrideTitle:r,subTitle:c,openUrl:d,giftCard:u,pub:p,facepileUsers:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[h,m]=(0,a.eJ)(!1),v=(0,a.I4)(()=>{m(!0),(0,s.j)(s.FP.APP_INSTALL_MODAL_OPENED,{utm_campaign:e,utm_source:t,utm_content:n})},[e,t,n]),f=(0,a.I4)(()=>{m(!1)},[]);return{open:v,modal:(0,o.tZ)(O,{isOpen:h,onClose:f,utm_campaign:e,utm_source:t,utm_content:n,abTestingId:l,overrideCTA:i,overrideTitle:r,subTitle:c,openUrl:d,width:u?450:void 0,giftCard:u,pub:p,facepileUsers:g})}}function T(e){let{utm_campaign:t,utm_source:n,utm_content:l,hideEmailPrompt:i=!1,abTestingId:r,suggestedEmail:a,size:c,padding:d=32,openUrl:p,overrideCTA:s,onSend:g}=e,{iString:h}=(0,u.M1)(),m=(0,w.XA)();return(0,o.BX)(_.tu,{gap:20,padding:d,children:[!m&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(_.hs,{className:S.Z.qrCode,padding:20,alignSelf:"center",children:(0,o.tZ)(z,{size:c,utm_campaign:t,utm_source:n,utm_content:l,abTestingId:r,openUrl:p})}),!m&&!i&&(0,o.tZ)(y.ZC,{})]}),!m&&!i&&(0,o.tZ)(M,{suggestedEmail:a,onSend:g}),m&&(0,o.tZ)(f.zx,{href:p||(0,I.D4e)({utm_campaign:t,utm_source:n}),children:s||h("Install the app")})]})}function P(e){let{utm_campaign:t,utm_source:n,darkMode:l=!1}=e;return(0,o.BX)(_.hs,{gap:16,justifyContent:"center",children:[(0,o.tZ)("a",{className:S.Z.appBadge,href:(0,I.RMm)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,s.j)(s.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"ios",utm_campaign:t,utm_source:n})},children:(0,o.tZ)("img",{src:(0,I.zF4)(l?"/img/app_page/app-store-white.png":"/img/app_page/app-store.png",320),height:48})}),(0,o.tZ)("a",{className:S.Z.appBadge,href:(0,I.AaB)({utm_campaign:t,utm_source:n}),onClick:()=>{(0,s.j)(s.FP.APP_STORE_LINK_CLICKED,{source:"app_install_upsell",app_store:"android",utm_campaign:t,utm_source:n})},children:(0,o.tZ)("img",{src:(0,I.zF4)(l?"/img/app_page/google-play-white.png":"/img/app_page/google-play.png",320),height:48})})]})}function O(e){var t;let{isOpen:n,onClose:r,utm_campaign:d,utm_content:p,utm_source:s,abTestingId:g,overrideCTA:h,overrideTitle:m,subTitle:f,openUrl:y,width:b,facepileUsers:C,showMobileClose:k,giftCard:S,pub:x}=e,{iString:D,iTemplate:P}=(0,u.M1)(),O=(0,w.XA)(),[z,M]=(0,a.eJ)(""),j=(0,a.I4)(e=>{M(e)},[]),E=(0,a.I4)(()=>{M(""),r()},[r]),L=!!S&&!!x,F=(null==S?void 0:null===(t=S.gifter)||void 0===t?void 0:t.name)?"Split Zone Duo"===S.gifter.name?"SZD":(0,A.guessFirstName)(S.gifter.name):"",N=m||(L?F?P(B(),F):D("Accept this gift in the Substack app"):D("Download the Substack app"));return(0,o.BX)(Z.u_,{isOpen:n,onClose:r,width:b||360,position:O?"bottom":"default",children:[(0,o.tZ)(Z.xB,{title:N,description:f,onClose:r,showClose:!O||k,showDivider:!0}),z?(0,o.tZ)(X,{sentEmail:z,closeModal:E}):(0,o.BX)(_.tu,{alignItems:"stretch",paddingTop:32*!!O,children:[L?(0,o.tZ)(_.hs,{justifyContent:"center",alignItems:"center",paddingTop:{desktop:20,mobile:0},children:(0,o.tZ)(c.h,(0,i._)((0,l._)({},S),{pub:x}))}):(null==C?void 0:C.length)?(0,o.tZ)(_.hs,{justifyContent:"center",alignItems:"center",padding:{mobile:8},children:(0,o.tZ)(v.H,{users:C,max:3,size:48})}):O?(0,o.tZ)(_.hs,{justifyContent:"center",alignItems:"center",children:(0,o.tZ)("img",{src:(0,I.zF4)("/img/substack-app-icon.png"),height:64,width:64})}):null,(0,o.tZ)(T,{utm_campaign:d,utm_source:s,utm_content:p,abTestingId:g,openUrl:y,overrideCTA:h,size:142,onSend:j})]})]})}function z(e){let{utm_campaign:t,utm_source:l,utm_content:i,abTestingId:r,size:c=240,width:d,height:u,openUrl:p}=e,s=(0,a.sO)(null),g=(0,I.D4e)({utm_campaign:t,utm_source:l,utm_content:i,abti:r}),{darkMode:v}=(0,h.vs)(),f=function(e,t){let{result:l}=(0,m.Wf)(()=>n.e("9327").then(n.t.bind(n,91915,23)),[],{auto:!0}),i=null==l?void 0:l.default;return(0,a.Ye)(()=>i&&"undefined"!=typeof window?new i(e(window)):null,[i,...t])}(e=>{let t=e.devicePixelRatio,n=getComputedStyle(document.body),l=n.getPropertyValue("--color-fg-primary-themed");return{width:(null!=d?d:c)*t,height:(null!=u?u:c)*t,type:"canvas",data:p||g,dotsOptions:{color:l,type:"dots"},backgroundOptions:{color:n.getPropertyValue("--color-bg-elevated")},cornersSquareOptions:{color:l,type:"extra-rounded"},cornersDotOptions:{color:l,type:"dot"},qrOptions:{errorCorrectionLevel:"L"}}},[d,u,p,v]);return(0,a.d4)(()=>{let{current:e}=s;if(!e||!f||!f._canvas)return;let t=f._canvas;return t.style.width="".concat(null!=d?d:c,"px"),t.style.height="".concat(null!=u?u:c,"px"),e.style.width="".concat(null!=d?d:c,"px"),e.style.height="".concat(null!=u?u:c,"px"),e.appendChild(t),()=>{e.removeChild(t)}},[f,d,u]),(0,o.tZ)("div",{ref:s})}function M(e){let{suggestedEmail:t,onSend:n}=e,{iString:l}=(0,u.M1)(),i=(0,p.aF)(),[r,c]=(0,a.eJ)((null==i?void 0:i.email)||t||""),[d,s]=(0,a.eJ)(!1),[h,m]=(0,a.eJ)(null);return(0,o.tZ)(o.HY,{children:(0,o.BX)(_.tu,{gap:8,children:[(0,o.tZ)(k.H,{placeholder:l("Your email"),placement:"end",priority:"primary",type:"email",value:r,onChange:e=>c(e.currentTarget.value),button:(0,o.tZ)(f.zx,{priority:"primary",loading:d,onClick:async()=>{s(!0);try{await (0,g.rd)("/api/v1/send_app_download_link",{method:"POST",json:{email:r}}),m(null),s(!1),n&&n(r)}catch(e){m("Something went wrong")}},children:l("Send link")})}),h&&(0,o.tZ)(b.y,{align:"center",children:h})]})})}let X=e=>{let{sentEmail:t,closeModal:n}=e,{iString:l,iTemplate:i}=(0,u.M1)();return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Z.fe,{children:(0,o.BX)(_.tu,{gap:20,justifyContent:"center",alignItems:"center",children:[(0,o.tZ)(d.e,{src:"/img/cohorts/local_news/plane.png",maxWidth:64}),(0,o.BX)(_.tu,{gap:4,justifyContent:"center",alignItems:"center",children:[(0,o.tZ)(C.xv.B2,{weight:"semibold",textAlign:"center",children:l("Check your email")}),(0,o.tZ)(C.xv.B3,{color:"secondary",align:"center",children:i(x(),t||"your email")})]})]})}),(0,o.tZ)(Z.mz,{alignButtons:"stretch",primaryButton:(0,o.tZ)(f.zx,{priority:"secondary",onClick:n,children:l("Done")})})]})}},66054:function(e,t,n){n(30396)},62956:function(e,t,n){n(16584),n(94184),n(63718),n(15771),n(60308)},3411:function(e,t,n){function l(e,t){return e&&"rgba(".concat(e.join(","),",").concat(t,")")}n.d(t,{LE:()=>r,mX:()=>i,zn:()=>l});let i=e=>{var t,n;let{palette:i,colorKey:r="DarkMuted",defaultColor:o="var(--color-dark-bg-secondary)",bgColor:a="var(--color-dark-bg-secondary)"}=e;if(!i&&!o)return null;let c=null!==(n=l(null==i?void 0:null===(t=i[r])||void 0===t?void 0:t.rgb,.75))&&void 0!==n?n:o;return{background:"linear-gradient(180deg, ".concat(c,", ").concat(c,"), ").concat(a)}},r=e=>{var t,n,i,r,o,a;let{palette:c,defaultColor:d="var(--color-dark-bg-primary)",bgColor:u="var(--color-dark-bg-primary)"}=e;if(!c&&!d)return null;let p=null!==(r=l(null==c?void 0:null===(t=c.Muted)||void 0===t?void 0:t.rgb,.75))&&void 0!==r?r:d,s=null!==(o=l(null==c?void 0:null===(n=c.DarkMuted)||void 0===n?void 0:n.rgb,.75))&&void 0!==o?o:d,g=null!==(a=l(null==c?void 0:null===(i=c.DarkVibrant)||void 0===i?void 0:i.rgb,.75))&&void 0!==a?a:d;return{background:"linear-gradient(135deg, ".concat(p,", ").concat(s,", ").concat(g,"), ").concat(u),backgroundSize:"400% 400%"}}}}]);