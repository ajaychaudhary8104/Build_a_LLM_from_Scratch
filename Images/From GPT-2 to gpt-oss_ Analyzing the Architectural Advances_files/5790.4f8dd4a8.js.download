"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5790"],{15181:function(e,t,n){n.d(t,{Z:()=>i});let i={mobileContainer:"mobileContainer-C4grL6",imageContainer:"imageContainer-bBRPE5",hRule:"hRule-jmAdPr",assetButtons:"assetButtons-_T5QZI",aspectRatioButton:"aspectRatioButton-AXavRA",aspectRatioSelected:"aspectRatioSelected-cmPz3Z",aspectRatioSelectedIcon:"aspectRatioSelectedIcon-knGAQN"}},96855:function(e,t,n){n.d(t,{Z:()=>i});let i={container:"container-WYWNQ7",enabled:"enabled-FrokEl",checked:"checked-qUvq71",unchecked:"unchecked-YpAQwg",disabled:"disabled-w7hZI3",nub:"nub-XpaYD_",theme_accent:"theme_accent-eoXELK",themeAccent:"theme_accent-eoXELK",theme_success:"theme_success-my5UzI",themeSuccess:"theme_success-my5UzI",theme_error:"theme_error-Uoe9a5",themeError:"theme_error-Uoe9a5",theme_select:"theme_select-TR6faD",themeSelect:"theme_select-TR6faD",theme_highlight:"theme_highlight-sw2S4n",themeHighlight:"theme_highlight-sw2S4n",theme_dark:"theme_dark-m15H85",themeDark:"theme_dark-m15H85",input:"input-b61VGF"}},28775:function(e,t,n){n.d(t,{C:()=>g});var i=n(16584),o=n(30396),r=n(94184),a=n.n(r),l=n(7409),s=n(99282),c=n(64515);let d=e=>(0,i.BX)(c.l,(0,s._)((0,l._)({},e),{name:"DownloadIconNoBorder",svgParams:{height:32,width:32},children:[(0,i.tZ)("path",{d:"M23.5 18.5V21.8333C23.5 22.2754 23.3244 22.6993 23.0118 23.0118C22.6993 23.3244 22.2754 23.5 21.8333 23.5H10.1667C9.72464 23.5 9.30072 23.3244 8.98816 23.0118C8.67559 22.6993 8.5 22.2754 8.5 21.8333V18.5",stroke:e.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"}),(0,i.tZ)("path",{d:"M11.8333 14.3335L16 18.5002L20.1667 14.3335",stroke:e.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"}),(0,i.tZ)("path",{d:"M16 18.5V8.5",stroke:e.stroke||"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"rgba(255,255,255,0)"})]}));var u=n(95441),m=n(98248),h=n(81821);let p={root:"root-gpHBEU",fullSize:"fullSize-W6Pwju",link:"link-HgTAJz",linkHovered:"linkHovered-rnE2Gn",image:"image-ZSouY2",download:"download-aYXb5J",imageLoading:"imageLoading-BULJ5E"},g=e=>{let{img:t,imgDownload:n,shareData:r,useNativeShare:l,onClick:s}=e,{iString:c}=(0,u.M1)(),g=(0,o.sO)(null),v=(0,o.sO)(null),[f,b]=(0,o.eJ)(!1),[_,Z]=(0,o.eJ)({right:0,bottom:0});(0,o.d4)(()=>{var e,t;let n=null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect(),i=null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect();n&&i&&Z({right:i.right-n.right,bottom:i.bottom-n.bottom})},[g,v,t]);let w=(0,o.I4)(async e=>{if(null==s||s(),l&&r)try{await navigator.share(r)}catch(e){}else{var t;let n=null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect();if(n){let t=e.clientX,i=e.clientY;(t<n.left||t>n.right||i<n.top||i>n.bottom)&&e.preventDefault()}}},[s,l,r]);return(0,i.tZ)("a",{onClick:w,href:l?void 0:n,download:!0,className:a()(p.link,f&&p.linkHovered,p.fullSize),target:"_blank",children:(0,i.BX)("div",{ref:v,className:a()(p.root,p.fullSize),children:[!(0,h.tq)()&&t&&(0,i.tZ)("div",{className:p.download,style:_,children:(0,i.tZ)(d,{stroke:"#404040",fill:"white"})}),!t&&(0,i.tZ)("div",{className:a()(p.image,p.imageLoading),children:(0,i.tZ)(m.$j,{"aria-label":c("Loading")})}),t&&(0,i.tZ)("img",{ref:g,src:t,alt:c("Download Image"),className:a()(p.fullSize,p.image),onMouseEnter:()=>{b(!0)},onMouseLeave:()=>{b(!1)}})]})})}},57061:function(e,t,n){n.d(t,{d:()=>v});var i=n(58865),o=n(16584),r=n(28775),a=n(64719),l=n(95441),s=n(4038),c=n(68833),d=n(73943),u=n(60308);function m(){let e=(0,i._)([""," has reached $10,000 in annual revenue"]);return m=function(){return e},e}function h(){let e=(0,i._)([""," has reached $1,000 in annual revenue"]);return h=function(){return e},e}function p(){let e=(0,i._)([""," has reached 100 subscribers"]);return p=function(){return e},e}function g(){let e=(0,i._)([""," has reached 1,000 subscribers"]);return g=function(){return e},e}n(67844);let v=e=>{let t,{pub:n,style:i,milestone:v}=e,{iString:f,iTemplate:b}=(0,l.M1)(),_=(0,a.Cq)();switch(v){case d.dD.ARR10K:t=b(m(),n.name);break;case d.dD.ARR1K:t=b(h(),n.name);break;case d.bq.List100:t=b(p(),n.name);break;case d.bq.List1K:t=b(g(),n.name)}let{img:Z,imgDownload:w,shareData:k,useNativeShare:C}=(0,s.Q)({shareTitle:f("Share this milestone"),shareText:t,shareUrl:(0,u.SVA)(n),imageDownloadUrl:(0,u.iNT)(n,v,i,"".concat(v).concat(i.aspectRatio?" - ".concat(i.aspectRatio):"")),imageUrl:(0,u.iNT)(n,v,i,void 0),imageUrlSameOrigin:(0,u.RwZ)(n,v,i,{useRootDomain:null==_?void 0:_.isSubstack})});return(0,o.tZ)(r.C,{img:Z,imgDownload:w,shareData:k,useNativeShare:C,onClick:()=>{(0,c.j)(c.FP.MILESTONE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{milestone:v,aspectRatio:i.aspectRatio,source:"image"})}})}},36781:function(e,t,n){n.d(t,{Z:()=>s});var i=n(16584),o=n(30396),r=n(2236),a=n(4038),l=n(81821);let s=e=>{let{pub:t,post:n,style:s,source:c,size:d,hoverOverlay:u=!0}=e,{img:m,imgDownload:h,shareData:p,useNativeShare:g}=(0,a.Q)((0,r.lx)({pub:t,post:n,style:s})),v=(0,o.I4)(async()=>{await (0,r.mT)({post_id:n.id,type:"post_asset",aspect_ratio:s.aspectRatio,source:c,shareData:g?p:void 0,eventName:"WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED"})},[n.id,s.aspectRatio,c,g,p]);return(0,i.tZ)(r.kA,{onClick:v,href:g?void 0:h,children:(0,i.BX)(r.A4,{size:d,children:[!(0,l.tq)()&&m&&u&&(0,i.tZ)(r.rA,{onClick:v}),(0,i.tZ)(r.M$,{img:m})]})})}},63049:function(e,t,n){n.d(t,{H:()=>d});var i=n(16584),o=n(28775),r=n(64719),a=n(95441),l=n(4038),s=n(68833),c=n(60308);n(76511);let d=e=>{let{pub:t,style:n}=e,{iString:d}=(0,a.M1)(),u=(0,r.Cq)(),{img:m,imgDownload:h,shareData:p,useNativeShare:g}=(0,l.Q)({shareTitle:d("Share this publication"),shareText:t.hero_text,shareUrl:(0,c.SVA)(t),imageDownloadUrl:(0,c.p5u)(t,null,n,{fileToDownload:"Message".concat(n.aspectRatio?" - ".concat(n.aspectRatio):"")}),imageUrl:(0,c.p5u)(t,null,n),imageUrlSameOrigin:(0,c.eq9)(t,n,{useRootDomain:null==u?void 0:u.isSubstack})});return(0,i.tZ)(o.C,{img:m,imgDownload:h,shareData:p,useNativeShare:g,onClick:()=>{(0,s.j)(s.FP.PUBLICATION_MEDIA_ASSETS_IMAGE_DOWNLOADED,{aspectRatio:n.aspectRatio,source:"image"})}})}},53687:function(e,t,n){n.d(t,{$I:()=>v,ar:()=>g,rn:()=>p,sl:()=>h});var i=n(16584),o=n(94184),r=n.n(o),a=n(13742),l=n(2922),s=n(30890),c=n(95441),d=n(15771),u=n(81821),m=n(66782);let h=["stories","instagram","square"],p=e=>{let{isSelected:t,value:n,onClick:o,coverImageUrl:l,themeVariables:s}=e,c=s.web_bg_color||s.cover_bg_color,u=s.print_on_web_bg_color||s.cover_print_primary||"#1a1a1a";return"accent"===n?(c=s.background_pop_color||s.background_pop,u=s.print_on_pop):"image"===n?(u="#ffffff",c="rgba(0,0,0,0.5)"):"black&white"===n&&(u="#404040",c="#ffffff"),(0,i.BX)(d.kG,{width:28,height:28,style:{backgroundColor:c},flex:"auto",radius:"sm",overflow:"hidden",alignItems:"center",justifyContent:"center",sizing:"border-box",className:r()(m.Z.customizeAssetButton,m.Z.themeButton,t&&m.Z.selected,"image"===n&&m.Z.image),onClick:e=>{e.preventDefault(),o()},tabIndex:0,children:["image"===n&&(0,i.tZ)("div",{className:m.Z.imageBg,style:{backgroundImage:"url(".concat(l,")")}}),(0,i.tZ)("div",{className:r()(m.Z.inner,"image"===n&&m.Z.image),children:t&&(0,i.tZ)(a.Z,{stroke:u,size:16,strokeWidth:2.5})})]})},g=e=>{let{isSelected:t,value:n,onClick:o}=e,r=function(e){let{iString:t}=(0,c.M1)(),n=(0,u.tq)({checkFirst4:!0}),i={instagram:t("Instagram"),square:t("Square"),stories:t("Vertical")};return(n?{square:"1:1",instagram:"4:5",stories:"9:16"}:i)[e]}(n);return(0,i.tZ)(d.zx,{size:"sm",priority:t?"primary-mono":"secondary",onClick:o,leading:"square"===n?(0,i.tZ)(l.Z,{size:20}):(0,i.tZ)(s.Z,{size:20}),children:r})},v=e=>{let{isSelected:t,label:n,onClick:o}=e;return(0,i.tZ)(d.zx,{size:"sm",priority:t?"primary-mono":"secondary",onClick:o,children:n})}},2236:function(e,t,n){n.d(t,{A4:()=>C,M$:()=>_,kA:()=>w,lx:()=>S,mT:()=>y,rA:()=>k});var i=n(7409),o=n(99282),r=n(16584),a=n(98661),l=n(94184),s=n.n(l),c=n(13025),d=n(95441),u=n(68833),m=n(15771),h=n(19081),p=n(98248),g=n(63474),v=n(60308),f=n(63651),b=n(97522);let _=(0,a.forwardRef)((e,t)=>{let{img:n}=e,[i,o]=(0,a.useState)(!1);return n?(0,r.BX)(r.HY,{children:[!i&&(0,r.tZ)(Z,{}),(0,r.tZ)("img",{src:n,className:s()(b.Z.image,i&&b.Z.loaded),ref:t,onLoad:()=>o(!0),style:{display:i?"block":"none"}})]}):(0,r.tZ)(Z,{})});function Z(){return(0,r.tZ)(h.sg,{alignItems:"center",justifyContent:"center",bg:"secondary",className:s()(b.Z.image,b.Z.loading),children:(0,r.tZ)(p.$j,{})})}function w(e){let{children:t,onClick:n,href:i}=e,{iString:o}=(0,d.M1)();return(0,r.tZ)(g.A0,{onClick:n,href:i,"aria-label":o("Download image"),download:!0,className:s()(b.Z.link),target:"_blank",rel:"noreferrer",children:t})}function k(e){let{onClick:t}=e,{iString:n}=(0,d.M1)();return(0,r.tZ)(h.sg,{className:b.Z.overlay,animate:!0,position:"absolute",inset:0,alignItems:"center",justifyContent:"end",padding:12,children:(0,r.tZ)(m.zx,{className:b.Z.downloadButton,priority:"primary-mono",size:"sm",leading:(0,r.tZ)(c.Z,{size:20}),onClick:t,children:n("Download")})})}function C(e){let{children:t,size:n=300}=e;return(0,r.tZ)(h.sg,{className:b.Z.imageContainer,flex:"auto",position:"relative",cursor:"grab",style:{"--image-max-size":"".concat(n,"px")},children:t})}async function y(e){let{post_id:t,type:n,aspect_ratio:r,selection_id:a,source:l,auto_selected:s,shareData:c,eventName:d,additionalTrackingData:m={}}=e;if((0,u.j)(u.FP[d],(0,o._)((0,i._)({post_id:t,type:n},r&&{aspect_ratio:r},a&&{selection_id:a},l&&{source:l},s&&{auto_selected:s},m),{interaction:"click"})),c)try{await navigator.share(c)}catch(e){}}function S(e){let{pub:t,post:n,selectionId:i,style:o}=e;return i?{shareTitle:"Share this post",shareText:n.title,shareUrl:(0,f.uRy)(t,n),imageDownloadUrl:(0,v.BPe)(t,n,i,o),imageUrl:(0,v.BPe)(t,n,i,o),imageUrlSameOrigin:(0,v.MWO)(t,n,i,o)}:{shareTitle:"Share this post",shareText:n.title,shareUrl:(0,f.uRy)(t,n),imageDownloadUrl:(0,v.ChS)(t,n,o),imageUrl:(0,v.ChS)(t,n,o),imageUrlSameOrigin:(0,v.FEI)(t,n,o)}}},44404:function(e,t,n){n.d(t,{hi:()=>u,uP:()=>d});var i=n(16584),o=n(28775),r=n(64719),a=n(95441),l=n(4038),s=n(68833),c=n(60308);n(30279);let d=e=>{let{pub:t,user:n,note:d,style:u}=e,{iString:m}=(0,a.M1)(),h=(0,r.Cq)(),{img:p,imgDownload:g,shareData:v,useNativeShare:f}=(0,l.Q)({shareTitle:m("Share this message"),shareText:(null==d?void 0:d.note)||"",shareUrl:(0,c.SVA)(t),imageDownloadUrl:(0,c.gGz)(t,n,u,{fileToDownload:"Message".concat(u.aspectRatio?" - ".concat(u.aspectRatio):"")}),imageUrl:(0,c.gGz)(t,n,u),imageUrlSameOrigin:(0,c.MBd)(t,n,u,{useRootDomain:null==h?void 0:h.isSubstack})});return(0,i.tZ)(o.C,{img:p,imgDownload:g,shareData:v,useNativeShare:f,onClick:()=>{(0,s.j)(s.FP.SUBSCRIPTION_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:n.id,aspectRatio:u.aspectRatio,source:"image"})}})},u=e=>{let{pub:t,user:n,note:d,style:u}=e,{iString:m}=(0,a.M1)(),h=(0,r.Cq)(),{img:p,imgDownload:g,shareData:v,useNativeShare:f}=(0,l.Q)({shareTitle:m("Share this message"),shareText:(null==d?void 0:d.note)||"",shareUrl:(0,c.SVA)(t),imageDownloadUrl:(0,c.uQO)(t,n,u,{fileToDownload:"Message".concat(u.aspectRatio?" - ".concat(u.aspectRatio):"")}),imageUrl:(0,c.uQO)(t,n,u),imageUrlSameOrigin:(0,c.BtY)(t,n,u,{useRootDomain:null==h?void 0:h.isSubstack})});return(0,i.tZ)(o.C,{img:p,imgDownload:g,shareData:v,useNativeShare:f,onClick:()=>{(0,s.j)(s.FP.PLEDGE_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:n.id,aspectRatio:u.aspectRatio,source:"image"})}})}},94442:function(e,t,n){n.d(t,{Cz:()=>e7,Er:()=>e5,F6:()=>te,Hg:()=>eV,L9:()=>to,Mp:()=>tr,Ng:()=>e9,PA:()=>eM,RY:()=>ti,RZ:()=>eX,Su:()=>eP,TJ:()=>eK,_2:()=>eD,c1:()=>eJ,fh:()=>tt,mt:()=>eB,nA:()=>eY,pD:()=>e4,sV:()=>eU,vk:()=>eq,yT:()=>ta,z5:()=>e3,zX:()=>eQ});var i=n(7409),o=n(99282),r=n(58865),a=n(16584),l=n(98661),s=n(30396),c=n(94184),d=n.n(c),u=n(12297),m=n.n(u),h=n(23493),p=n.n(h),g=n(9404),v=n(97770),f=n(22704),b=n(63058),_=n(13766),Z=n(18814),w=n(20816),k=n(89038),C=n(2032),y=n(57420),S=n(25256),N=n(56953),T=n(67884),E=n(80569),I=n.n(E),R=n(7703),P=n(23254),M=n(86790),O=n(39900),D=n(43389),L=n(21286),B=n(25265),U=n(666),A=n(76157),x=n(95398),z=n(91355),F=n(50137),X=n(39929),H=n(16808),j=n(48917),W=n(67203),V=n(3261),q=n(85685),Y=n(30329),K=n(2995),J=n(9721),G=n(75778),Q=n(95441),$=n(56629),ee=n(40647),et=n(45261),en=n(60807),ei=n(90099),eo=n(68833),er=n(48980),ea=n(7882),el=n(27036),es=n(98914),ec=n(97505),ed=n(15771),eu=n(19081),em=n(99916),eh=n(84747),ep=n(6490),eg=n(98248),ev=n(58175),ef=n(70379),eb=n(27744),e_=n(39493),eZ=n(91400),ew=n(98012),ek=n(40894),eC=n(31377),ey=n(79582),eS=n(60308),eN=n(63651),eT=n(84864),eE=n(67836),eI=n(47929);function eR(){let e=(0,r._)(["Published on ",""]);return eR=function(){return e},e}function eP(e,t){if("button"===e&&"verbose"===t)return 16;if("button"===e)return 20;if("tabs"===e)return 24;if("compressed"===e)return 14;if("large-on-dark"===e)return 20;return 0}let eM=2,eO=e=>{let{isFullWidth:t,children:n}=e;return t?(0,a.tZ)(eu.gq,{className:"post-ufi-button-wrapper",gap:8,children:n}):n};function eD(e){let{post:t,pub:n,user:i,style:o,justified:r,isStatic:l,hideReactions:s,hideComments:c,hideShare:u,hideSavePost:h,useShareLabel:p,allowEdit:v,editButtonIsLast:f,onChange:b,hidePinning:_,showEmailSent:Z,allowSendEmail:w,footerHidden:k,onCommentsClick:C,labelStyle:y,showPreamble:S,preambleConfig:N={},position:T,hideByDisabling:E,showRestackButton:I,showRestackModal:R,showClipping:M,hideFeedRestackButton:O,onToggleMenu:D,postReactionToken:L,initialShareTimestamp:B}=e,U=(0,et.Tf)(),{showPins:A,showAudience:x,showDate:z,showDatetime:F,showAuthor:X,showPublicationName:H,showCrossPostedPublicationName:j}=N;s=s||!n.community_enabled||!t.slug||t.is_draft;let V=m()(Object.values((null==t?void 0:t.reactions)||{})),q=Z?!!t.email_sent_at:null,Y=(0,G.LC)(),{iString:K}=(0,Q.M1)(),J=v&&(null==i?void 0:i.is_contributor)&&!Y,$=eL({post:t,pub:n,user:i,defaultOpen:I&&R&&"post-footer"!==T&&"post-footer-full-width"!==T}),{getConfigFor:en}=(0,ee.xR)(),ei=i&&(0,a.tZ)(e6,{style:o,pub:n,post:t,user:i,hidePinning:_,emailSent:null!=q?q:void 0,allowSendEmail:w,footerHidden:k,canBeCrossPosted:I,onToggleMenu:D}),eo=!O&&n.community_enabled&&t.slug&&!t.is_draft,er=I&&!S&&(E||s&&c&&u&&!J),ea="counts-or-none"===y&&t.comment_count?"count":"labels"===y?"cta":"none",el=i&&t.videoUpload&&(0,eE.a)(i,t,t.videoUpload),es="post-footer-full-width"===T;return(0,a.BX)("div",{className:d()("post-ufi","style-".concat(o),{justified:r,themed:U,"single-full-width-button":er,"vertically-stacked":"shows-episode-player"===T}),children:[(0,a.BX)(eO,{isFullWidth:es,children:[S&&N&&(0,a.tZ)(tn,{pub:n,post:t,showPins:A,showAudience:x,showDate:z,showDatetime:F,showEmailSent:Z,showAuthor:X,showPublicationName:H,showCrossPostedPublicationName:j}),J&&!f&&ei,M&&t.videoUpload&&!en("disable_clipping_for_readers")&&(0,a.tZ)(P.OZ,{post:t,mediaUpload:t.videoUpload,disabled:!el,style:o,surface:"post"}),(E||!s)&&(0,a.tZ)(eA,{post:t,pub:n,user:i,labelStyle:E&&s?"none":"counts-or-none"===y&&V?"count":"labels"===y?"cta":"none",style:o,onChange:b,isStatic:!!l,isDisabled:E&&s||"shows-episode-player"===T&&!i,postReactionToken:L}),(E||!c)&&(0,a.tZ)(e1,{post:t,pub:n,isStatic:l,labelStyle:E&&c?"none":ea,style:o,count:t.comment_count,onClick:C,isDisabled:E&&c}),eo&&(0,a.tZ)(ez,{pub:n,post:t,onChange:b,style:o,onToggleMenu:D,isStatic:l}),!u&&(0,a.tZ)(W.sp,{post:t,pub:n,user:i,trigger:{style:o,labelStyle:p?"cta":"none",isStatic:l},position:T,initialShareTimestamp:B,showClipping:M&&!!t.videoUpload,disableClipping:!el})]}),(0,a.BX)(eO,{isFullWidth:es,children:[!h&&!I&&i&&(0,a.tZ)(e$,{post:t,labelStyle:ea,position:T,style:o,onChange:b}),J&&f&&ei,I&&!J&&"post-header"===T&&(0,a.tZ)(a.HY,{children:(0,a.BX)(eh.M,{trigger:(0,a.tZ)(ed.hU,{"aria-label":K("View repost options"),priority:"secondary-outline",children:(0,a.tZ)(g.Z,{size:20})}),children:[i&&(0,a.tZ)(e2,{onClick:$.open,post:t,pub:n,user:i}),(0,a.tZ)(e0,{post:t,onChange:b})]})}),I&&!J&&es&&(0,a.BX)(a.HY,{children:[!h&&(0,a.tZ)(e$,{post:t,labelStyle:"verbose",position:T,style:"button",onChange:b}),i&&(0,a.tZ)(e8,{onClick:$.open,post:t,pub:n,user:i,style:"button"})]})]}),$.modal]})}function eL(e){let{pub:t,user:n,post:i,defaultOpen:o=!1}=e,[r,l]=(0,s.eJ)(o);return(0,s.d4)(()=>{o&&n&&(0,eo.j)(eo.FP.RESTACK_POST_CLICKED,{restacked_publication_id:t.id,restacked_post_id:i.id,restacking_user_id:n.id,is_from_email:!0})},[o,t,i,n]),{open:()=>l(!0),modal:(0,a.tZ)(K.J,{pub:t,user:n,post:i,open:r,setOpen:l}),isOpen:r}}function eB(e){let{post:t,pub:n,user:i,isStatic:o,onChange:r,allowEdit:l,hidePinning:c,showEmailSent:u,allowSendEmail:m,hideComments:h,onCommentsClick:g,showRestackButton:v,showRestackModal:f,setFooterShown:b,postReactionToken:_}=e,Z=function(){let e="undefined"==typeof window,[t,n]=(0,s.eJ)(e?0:window.pageYOffset),[i,o]=(0,s.eJ)(!1),r=(0,s.Ye)(()=>Date.now()+1e3,[]),a=(0,s.sO)(0);return(0,s.d4)(()=>{if(e)return;let i=p()(()=>{let e=Date.now(),i=(e-a.current)/1e3,l=(t-window.pageYOffset)/i;a.current=e,!(window.pageYOffset<0)&&(e<r?o(!1):-l>100?o(!0):l>100&&o(!1),n(window.pageYOffset))},250);return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[e,t,n,o,r,a,!1]),i}(),w=(0,ef.pm)();return(0,s.d4)(()=>{w.addOffset(64*(Z?1:-1)),b&&b(!Z)},[Z,b]),(0,a.tZ)(eu.hs,{alignItems:"center",padding:8,className:d()("mobile-footer-ufi",{hidden:Z}),children:(0,a.tZ)(eD,{post:t,pub:n,user:i,isStatic:o,justified:!0,style:"tabs",onChange:r,allowEdit:l,editButtonIsLast:!0,hidePinning:c,showEmailSent:u,allowSendEmail:m,footerHidden:Z,labelStyle:"counts-or-none",hideComments:h,onCommentsClick:g,position:"mobile-toolbar",hideByDisabling:!0,showRestackModal:f,showRestackButton:v,postReactionToken:_})})}function eU(){let e=function(){let e=(0,ef.pm)(),{iString:t}=(0,Q.M1)();return n=>{n?e.popToast(e=>(0,a.tZ)(ef.FN,(0,o._)((0,i._)({},e),{text:t("Post liked"),Icon:y.Z}))):e.popToast(e=>(0,a.tZ)(ef.FN,(0,o._)((0,i._)({},e),{text:t("Post unliked"),Icon:y.Z})))}}();return async function(t,n){let{tabId:i,restacking_user_id:o,media_clip_id:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};await (0,er.rd)("/api/v1/post/".concat(t,"/reaction"),n?{method:"POST",json:{reaction:"❤",surface:"reader",tabId:i,restacking_user_id:o,media_clip_id:r}}:{method:"DELETE",json:{tabId:i,media_clip_id:r}}),e(n)}}function eA(e){let{post:t,pub:n,user:i,style:o,labelStyle:r,onChange:l,isStatic:s,isDisabled:c,postReactionToken:d}=e,{iString:u}=(0,Q.M1)(),h=m()(Object.values((null==t?void 0:t.reactions)||{})),p="count"===r?(0,eT.numberToString)(h||0):"cta"===r?"Like":null;return(0,a.tZ)(eV,{post:t,pub:n,user:i,onChange:l,isStatic:s,style:o,postReactionToken:d,children:e=>{let{isLiked:t,handleLike:n}=e;return(0,a.tZ)(e9,{style:o,state:t?"liked":void 0,icon:(0,a.tZ)(U.Z,{className:"icon",height:eP(o),strokeWidth:eM}),onClick:c?()=>{}:n,noLabel:"none"===r,isDisabled:c,ariaLabel:u("Like")+("count"===r?" (".concat((0,eT.numberToString)(h||0),")"):""),ariaPressed:t,children:p})}})}function ex(e){let{style:t,onClick:n}=e;return(0,a.tZ)(e9,{style:t,state:void 0,icon:(0,a.tZ)(v.Z,{className:"icon",height:eP(t),strokeWidth:eM}),"aria-label":"menu",onClick:n})}function ez(e){let{pub:t,post:n,style:r,onChange:l,onToggleMenu:c,isStatic:d}=e,[u,m]=(0,s.eJ)(!1),{iString:h}=(0,Q.M1)(),{canRestack:p,isRestacked:g,restacks:v,menuItems:f,nuxModal:b,loggedOutRestackAttempt:_}=(0,e_.K)({pub:t,post:n,onRestack:e=>{null==l||l({post:(0,o._)((0,i._)({},n),{restacked:e,restacks:v+(e?1:-1)})})},renderWithoutUser:!0});if((0,s.d4)(()=>{_&&m(!0)},[_]),!p)return null;let Z=!t.community_enabled,w=(0,a.tZ)(e9,{style:r,state:g?"restacked":void 0,icon:(0,a.tZ)(F.Z,{className:"icon",height:eP(r),strokeWidth:eM}),noLabel:0===v,"aria-label":"menu",isDisabled:Z,children:v.toLocaleString(void 0,{maximumSignificantDigits:4})});return(0,a.BX)(a.HY,{children:[b,Z?w:(0,a.tZ)(em.v2,(0,o._)((0,i._)({trigger:w},c&&{onOpen:()=>{c({active:!0})},onClose:()=>{c({active:!1})}}),{"aria-label":h("View repost options"),children:f})),(0,a.tZ)(ec.Z,{displaySignInModal:u,onCloseSignInModal:()=>m(!1),isStatic:!!d,entry:"post-preview-like"})]})}function eF(e){let{postId:t,isOpen:n,onClose:i}=e,o=(0,ee.xR)(),{iString:r}=(0,Q.M1)(),[l,c]=(0,s.eJ)(),d=!0==o.getConfigFor("enable_post_summarization"),u=(0,s.sO)(!1),m=(0,s.I4)(()=>{u.current=!0,I().post("/api/v1/posts/".concat(t,"/summary")).then(e=>{var t;(null===(t=e.body)||void 0===t?void 0:t.summary)&&c(e.body.summary)}).finally(()=>{u.current=!1})},[t]);return((0,s.d4)(()=>{n&&d&&!l&&!u.current&&m()},[n,m,d,l]),d)?(0,a.BX)(ep.u_,{isOpen:n,onClose:i,width:750,children:[(0,a.tZ)(ep.xB,{showClose:!0,title:r("Reader guide"),onClose:i}),(0,a.tZ)(eu.tu,{padding:16,paddingBottom:32,children:l?(0,a.tZ)("div",{dangerouslySetInnerHTML:{__html:l}}):(0,a.tZ)(eu.tu,{alignItems:"center",justifyContent:"center",style:{flex:1,minHeight:300},children:(0,a.tZ)("div",{className:"embed-loader"})})})]}):null}let eX=e=>{let{isOpen:t,setIsOpen:n}=e;return(0,s.d4)(()=>{let e=setTimeout(()=>{t&&n(!1)},1e4);return()=>clearTimeout(e)},[t]),(0,a.tZ)(ep.u_,{isOpen:t,onClose:()=>n(!1),width:300,children:(0,a.BX)(eu.tu,{padding:16,gap:16,children:[(0,a.tZ)(ev.xv.H4,{translated:!0,children:"Generating PDF..."}),(0,a.tZ)(eu.tu,{alignItems:"center",children:(0,a.tZ)(eg.$j,{})})]})})};function eH(e){let{post:t,pub:n,user:i,onChange:o,showRestackModal:r,canBeCrossPosted:l,onSummaryOpen:c,onToggleRestackModal:d}=e,u="button",m=(0,ee.xR)(),h=!0==m.getConfigFor("enable_post_summarization"),[p,v]=(0,s.eJ)(!1),w=eL({pub:n,user:i,post:t,defaultOpen:r&&l});return(0,s.d4)(()=>{null==d||d(w.isOpen)},[d,w.isOpen]),(0,a.BX)(a.HY,{children:[(0,a.tZ)(eX,{isOpen:p,setIsOpen:v}),(0,a.BX)(eh.M,{trigger:(0,a.tZ)(e9,{style:u,icon:(0,a.tZ)(g.Z,{className:"icon edit-icon",size:eP(u),strokeWidth:2}),noLabel:!0,"aria-label":"More"}),children:[i&&(0,a.tZ)(e0,{post:t,onChange:o,showIcon:!0}),h&&(0,a.tZ)(eh.u,{leading:(0,a.tZ)(f.Z,{}),onClick:c,children:"Reader guide"}),l&&(0,a.tZ)(eh.u,{leading:(0,a.tZ)(b.Z,{}),onClick:()=>{w.open(),(0,eo.j)(eo.FP.RESTACK_POST_CLICKED,{restacked_publication_id:n.id,restacked_post_id:t.id,restacking_user_id:i.id,is_from_email:!1})},children:"Cross post"}),m.getConfigFor("show_open_post_as_pdf_button")&&(0,a.tZ)(eh.u,{leading:(0,a.tZ)(_.Z,{}),onClick:()=>{v(!0),(0,es.uX)((0,eN.SUl)(n,t.id),{local_navigation:!1})},children:"Open as PDF"}),i&&(0,a.tZ)(eh.u,{leading:(0,a.tZ)(Z.Z,{}),href:(0,eN.qUD)(t.id),children:"Substack Reader"})]}),w.modal]})}function ej(e){var t;let n=m()(Object.values((null===(t=e.post)||void 0===t?void 0:t.reactions)||{}));return(0,a.tZ)(eA,(0,o._)((0,i._)({},e),{labelStyle:n>0?"count":"none"}))}let eW=e=>{let{pub:t,user:n}=e,[i,o]=(0,s.eJ)(null==n?void 0:n.email),[r,l]=(0,s.eJ)(!1),{iString:c}=(0,Q.M1)();return(0,a.BX)(eu.tu,{gap:20,children:[(0,a.BX)(eu.tu,{gap:4,children:[(0,a.BX)(ev.xv.H4,{translated:!0,weight:"semibold",children:["Support ",I18N.p(t.name)]}),(0,a.tZ)(ev.xv.B4,{translated:!0,color:"secondary",children:"Since you liked this post, why not subscribe?"})]}),(0,a.BX)(eu.tu,{gap:12,children:[(0,a.tZ)("input",{disabled:!!(null==n?void 0:n.email),value:i,onChange:e=>o(e.currentTarget.value)}),(0,a.tZ)(ed.zx,{onClick:async()=>{(0,eo.j)(eo.FP.LIKE_UPSELL_FREE_SUBSCRIBED,{email:i}),l(!0);try{let{referral_token:e}=(await I().post("/api/v1/free").send({email:i,source:"like-button-upsell"})).body;(0,eo.IU)(),(0,es.uX)((0,eN.W1P)(t,{params:{utm_source:eI.b3.likeButtonUpsell,just_signed_up:!0,referral_token:e}}),{local_navigation:!1})}catch(e){alert((0,es.zx)(e))}},flex:"grow",disabled:r,priority:"primary",role:"button","aria-label":c("Subscribe"),children:c(r?"Please wait...":"Subscribe")})]})]})};function eV(e){let{post:t,pub:n,user:i,onChange:o,isStatic:r,children:l,style:c,postReactionToken:u}=e,m=(0,s.sO)(),[h,p]=(0,s.eJ)(!1),{isLiked:g,toggle:v}=function(e){let{post:t,user:n,surface:i,onChange:o,postReactionToken:r}=e,a=!!(null==t?void 0:t.reaction),l=(0,G.LC)(),s=(0,ea.ib)({pathname:(0,eN.n1t)(l?"/api/v1/cross-post/".concat(null==t?void 0:t.id,"/reaction"):"/api/v1/post/".concat(null==t?void 0:t.id,"/reaction"),{token:r}),method:"POST",deps:[null==t?void 0:t.id]});return{isLiked:a,toggle:async()=>{var e;if(s.isLoading)return"error";let{reaction:r,reactions:a,reactor_names:l}=(0,Y.fS)(null!=n?n:void 0,t);t.reaction=null!=r&&r,t.reactions=a,t.reactor_names=null!=l?l:[],null==o||o({post:t});let c=await s.refetch(r?{method:"POST",json:{reaction:"❤",surface:i}}:{method:"DELETE"}),d=null==c?void 0:null===(e=c.response)||void 0===e?void 0:e.status;if(d){let{reaction:e,reactions:i,reactor_names:r}=(0,Y.fS)(null!=n?n:void 0,t);t.reaction=null!=e&&e,t.reactions=i,t.reactor_names=null!=r?r:[],null==o||o({post:t})}return 401===d?"unauthorized":d?"error":r?"liked":"unliked"}}}({post:t,user:i,subscribePromptRef:m,onChange:o,postReactionToken:u}),[f,b]=(0,s.eJ)(!1),_=(0,s.I4)(async e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),"unauthorized"===await v()&&b(!0)},[v]);return(0,a.BX)("div",{className:d()("like-button-container","post-ufi-button","style-".concat(c),g&&"state-liked"),children:[l({isLiked:g,handleLike:_}),(0,a.tZ)(ec.Z,{isStatic:r,displaySignInModal:f,onCloseSignInModal:()=>b(!1),entry:"post-preview-restack"}),i&&!i.is_admin&&!i.is_contributor&&("button"===c||"tabs"===c)&&(0,a.tZ)(M.Fx,{ref:m,className:d()("subscribe-prompt-dropdown",!(null==i?void 0:i.is_free_subscribed)&&"free"),hideMenuTail:!0,children:(null==i?void 0:i.is_free_subscribed)?(0,el.P)(i,n)?(0,a.tZ)(H.xt,{pub:n,onClose:()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.close()},onShareClick:()=>p(!0)}):(0,a.tZ)(H._q,{pub:n}):(0,a.tZ)(eW,{pub:n,user:i})}),!r&&(0,a.tZ)(J.V,{isOpen:h,medium:"web",pub:n,user:i,post:t,onClose:()=>p(!1)})]})}function eq(e){var t;let{post:n,defaultSaved:i,isSaved:o,trackSurface:r}=e;return eY({postId:n.id,defaultSaved:null!==(t=null!=i?i:n.is_saved)&&void 0!==t&&t,isSaved:o,trackSurface:r})}function eY(e){let{postId:t,defaultSaved:n,isSaved:i,trackSurface:o}=e,[r,a]=(0,s.eJ)(n),l=null!=i?i:r,{refetch:c}=(0,ea.ib)({pathname:"/api/v1/posts/saved",method:"POST",json:{post_id:t,surface:o},deps:[t]}),d=eJ();return{isSaved:l,onSave:()=>(c({method:l?"DELETE":"POST"}),a(!l),d(!l),!l)}}async function eK(e,t,n){let{surface:i}=n;await (0,er.rd)("/api/v1/posts/saved",{method:t?"POST":"DELETE",json:{post_id:e}}),(0,eo.j)(eo.FP.POST_SAVED,{post_id:e,surface:i,is_saved:t})}function eJ(){let e=(0,ef.pm)(),{iString:t}=(0,Q.M1)();return n=>{n?e.popToast(e=>(0,a.tZ)(ef.FN,(0,o._)((0,i._)({},e),{text:t("Post saved"),Icon:w.Z,cta:t("View"),href:(0,eS.qQN)()}))):e.popToast(e=>(0,a.tZ)(ef.FN,(0,o._)((0,i._)({},e),{text:t("Post unsaved"),Icon:k.Z})))}}let eG=(e,t)=>async n=>{t?(0,eo.j)(eo.FP.POST_ARCHIVED):(0,eo.j)(eo.FP.POST_UNARCHIVED),n({type:"inbox_item_archive",payload:{contentKey:e,isArchived:t}});try{await (0,er.rd)("/api/v1/inbox/archive",{method:t?"POST":"DELETE",json:{contentKey:e}})}catch(e){console.error(e)}};function eQ(){let e=(0,eb.I0)(),t=t=>{e(eG(t,!1))},n=function(e){let{iString:t}=(0,Q.M1)(),n=(0,ef.pm)();return r=>{n.popToast(n=>(0,a.tZ)(ef.FN,(0,o._)((0,i._)({},n),{text:t("Post archived"),Icon:C.Z,cta:t("Undo"),onAccept:()=>{e(r)}})))}}(t);return{handleArchive:t=>{e(eG(t,!0)),n(t)},handleUnarchive:t}}function e$(e){let{style:t,post:n,isSaved:r,labelStyle:l,position:s,onChange:c}=e,{isSaved:d,onSave:u}=eq({defaultSaved:r,post:n,isSaved:n.is_saved,trackSurface:s}),{iString:m}=(0,Q.M1)();return(0,a.tZ)(e9,{state:d?"saved":void 0,style:t,icon:(0,a.tZ)(L.Z,{className:"icon",height:eP(t,"verbose"===l?"verbose":null),strokeWidth:eM}),noLabel:"none"===l,verboseLabel:"verbose"===l,onClick:()=>{let e=u();null==c||c({post:(0,o._)((0,i._)({},n),{is_saved:e})})},ariaPressed:d,ariaLabel:m("Save"),children:"cta"===l||"verbose"===l?m("Save"):null})}function e0(e){let{post:t,isSaved:n,onChange:r,showIcon:l}=e,{onSave:s}=eq({defaultSaved:n,post:t,isSaved:t.is_saved}),{iString:c}=(0,Q.M1)(),d=t.is_saved?"var(--color-accent-fg-orange)":void 0;return(0,a.tZ)(eh.u,{leading:l?(0,a.tZ)(w.Z,{style:{stroke:d,fill:d}}):void 0,onClick:()=>{let e=s();null==r||r({post:(0,o._)((0,i._)({},t),{is_saved:e})})},children:c(t.is_saved?"Unsave":"Save")})}function e1(e){let t,{style:n,count:i,labelStyle:o,post:r,pub:l,isStatic:s,onClick:c,isDisabled:d}=e,{iString:u}=(0,Q.M1)(),m=(0,eZ.XA)(),h=(0,en.aF)();return t=(null==r?void 0:r.comment_url_override)?r.comment_url_override:s?"".concat(ek.W.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(eI.b3.substack,"&utm_medium=").concat(eI.lP.email):!m||(null==h?void 0:h.is_contributor)?(0,eS.uRy)(l,r,{comments:!0}):(0,eS.K8_)(l.subdomain,r.slug,{params:{comments:!0,utm_source:eI.b3.post,utm_medium:eI.lP.web}}),(0,a.BX)(e9,{style:n,icon:(0,a.tZ)(B.Z,{className:"icon",height:eP(n),strokeWidth:eM}),href:d?void 0:t,onClick:d?()=>{}:e=>{c?c(e):(null==e||e.preventDefault(),window.location.href=t)},noLabel:"none"===o,className:"post-ufi-comment-button",isDisabled:d,ariaLabel:u("cta"===o?"Comment":"View comments"+" (".concat((0,eT.numberToString)(i||0),")")),children:["cta"===o&&u("Comment"),"count"===o&&(0,eT.numberToString)(i||0)]})}function e4(e){let t,{post:n,user:i,pub:o,style:r,labelStyle:l,isStatic:c,onChange:u,position:m}=e,[h,p]=(0,s.eJ)(!1),g=(0,s.I4)(()=>{(0,eo.j)(eo.FP.POST_SHARE_BUTTON_CLICKED,{position:m,post_id:n.id}),p(!0)},[]),{iString:v}=(0,Q.M1)();t=n.share_url_override?n.share_url_override:c?n?ek.W.SHARE_URL:ek.W.SHARE_PUB_URL:"javascript:void(0)";let f="none"===l;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(e9,{style:r,icon:f?(0,a.tZ)(S.Z,{className:"icon",height:eP(r),strokeWidth:eM}):null,onClick:g,href:t,noLabel:"none"===l,className:d()(!f&&"no-icon"),children:"cta"===l&&v("Share")}),!c&&(0,a.tZ)(J.V,{isOpen:h,medium:"web",pub:o,user:i,post:n,onChange:u,onClose:()=>p(!1)})]})}function e8(e){let{post:t,user:n,pub:i,onClick:o,style:r}=e,{iString:l}=(0,Q.M1)();return(0,a.tZ)(a.HY,{children:(0,a.tZ)(e9,{style:r,icon:(0,a.tZ)(A.Z,{className:"icon",height:eP(r,"verbose"),strokeWidth:eM}),onClick:()=>{(0,eo.j)(eo.FP.RESTACK_POST_CLICKED,{restacked_publication_id:i.id,restacked_post_id:t.id,restacking_user_id:n.id,is_from_email:!1}),o()},noLabel:!1,verboseLabel:!0,title:l("Cross-Post"),children:l("Cross-post")})})}function e2(e){let{post:t,user:n,pub:i,onClick:o}=e,{iString:r}=(0,Q.M1)();return(0,a.tZ)(a.HY,{children:(0,a.tZ)(eh.u,{onClick:()=>{(0,eo.j)(eo.FP.RESTACK_POST_CLICKED,{restacked_publication_id:i.id,restacked_post_id:t.id,restacking_user_id:n.id,is_from_email:!1}),o()},children:r("Cross-post")})})}function e6(e){let{style:t,pub:n,post:i,user:o,hidePinning:r,emailSent:l,allowSendEmail:c,footerHidden:u,showRestackModal:m,canBeCrossPosted:h,onSummaryOpen:p,onToggleMenu:v,onToggleRestackModal:f}=e,b=(0,s.sO)();u&&b.current&&b.current.close();let _=eL({post:i,pub:n,user:o,defaultOpen:m&&h});return(0,s.d4)(()=>{null==f||f(_.isOpen)},[f,_.isOpen]),(0,a.BX)("div",{className:d()("edit-button-container","post-ufi-button","style-".concat(t)),children:[(0,a.tZ)(e9,{onClick:()=>b.current.open(),style:t,icon:(0,a.tZ)(g.Z,{className:"icon edit-icon",size:eP(t),strokeWidth:2}),noLabel:!0}),(0,a.tZ)(j.y,{ref:b,pub:n,post:i,user:o,className:"post-ufi-edit-menu",useDrawerOnMobile:!0,hidePinning:r,emailSent:l,allowSendEmail:c,handleCrossPost:h?()=>{_.open(),(0,eo.j)(eo.FP.RESTACK_POST_CLICKED,{restacked_publication_id:n.id,restacked_post_id:i.id,restacking_user_id:o.id,is_from_email:!1})}:void 0,onSummaryOpen:p,onToggleMenu:v}),_.modal]})}let e9=(0,l.forwardRef)((e,t)=>{let{icon:n,children:i,state:o,style:r,onClick:l,href:s,noLabel:c,verboseLabel:u,noBorder:m,className:h,isDisabled:p,iconPosition:g="left",title:v,ariaLabel:f,ariaPressed:b}=e;return(0,a.BX)("a",{role:"button",className:d()("post-ufi-button","style-".concat(r),h,o?"state-".concat(o):void 0,p?"state-disabled":void 0,i&&!c?"has-label":"no-label",m?"no-border":"with-border",u?"verbose-label":""),title:v,href:s,onClick:e=>{l&&(e.stopPropagation(),l(e))},ref:t,"aria-label":null!=f?f:v,"aria-pressed":b,children:["left"===g&&n,!c&&i&&(0,a.tZ)("div",{className:"label",children:i}),"right"===g&&n]})}),e3=e=>{let{pub:t,post:n,showAuthor:i}=e;return!!(i&&t.bylines_enabled&&(0,eT.getPrintedByline)(t,n))},e5=e=>{let{pub:t,post:n,showAuthor:i,showPhoto:o,isMobileWidth:r}=e;return e3({pub:t,post:n,showAuthor:i})&&!e7({pub:t,post:n,showAuthor:i})&&!te({pub:t,post:n,showAuthor:i,showPhoto:o})&&!r},e7=e=>{let{pub:t,post:n,showAuthor:i}=e;return e3({pub:t,post:n,showAuthor:i})&&(0,eT.getBylineUsers)(n).length>1},te=e=>{var t;let{pub:n,post:i,showAuthor:o,showPhoto:r}=e;return!!(e3({pub:n,post:i,showAuthor:o})&&r&&(null===(t=(0,eT.getBylineUsers)(i)[0])||void 0===t?void 0:t.photo_url)&&n.byline_images_enabled)};function tt(e){let{post:t,showDatetime:n,isStatic:i,fromPostPage:o,showReactions:r,language:a="en"}=e,l=t.reactions?Object.values(t.reactions).reduce((e,t)=>e+t,0):0,s=o&&!i&&r&&l>=70&&l<100;return n&&s?(0,ew.Z)(t.post_date).locale(a).standardDatetimeWithYear():n&&!s?(0,ew.Z)(t.post_date).locale(a).standardDatetime():i?(0,ew.Z)(t.post_date).locale(a).standardDate():s?(0,ew.Z)(t.post_date).locale(a).standardDate({full:s}):(0,ew.Z)(t.post_date).locale(a).standardDateOrTime()}function tn(e){let{pub:t,post:n,showPins:i,showAudience:o,showDate:r,showDatetime:l,showEmailSent:s,showAuthor:c,showPublicationName:u,showCrossPostedPublicationName:m}=e,h=(0,et.Tf)(),p=!!(c&&t.bylines_enabled&&(0,eT.getPrintedByline)(t,n)),g=r&&n.post_date&&!n.is_draft,v=s?!!n.email_sent_at:null,{iString:f,iTemplate:b,language:_}=(0,Q.M1)();return(0,a.BX)("div",{className:d()("ufi-preamble",{themed:h}),children:[m&&n.restacked_pub_name?(0,a.tZ)("div",{className:"ufi-preamble-label cross-posted-pub-name",children:b(eR(),n.restacked_pub_name)}):null,s&&v&&(0,a.tZ)("div",{className:"email-sent",title:f("This post was sent as an email"),children:(0,a.tZ)(N.Z,{className:"post-ufi-preamble-icon",size:16})}),i&&n.is_section_pinned&&(0,a.tZ)("div",{className:"pinned",children:(0,a.tZ)(X.Z,{className:"post-ufi-preamble-icon"})}),"adhoc_email"===n.type?(0,a.tZ)("div",{className:"audience-adhoc",children:(0,a.tZ)(O.Z,{className:"post-ufi-preamble-icon"})}):o&&(0,eC.isPaidAudience)(n.audience)&&(0,a.tZ)("div",{className:"audience-lock",children:(0,a.tZ)(R.Z,{audience:n.audience,className:"lock-icon post-ufi-preamble-icon",size:16})}),e5({pub:t,post:n,showAuthor:p,isMobileWidth:!1})&&(0,a.tZ)("div",{className:"ufi-preamble-label author",children:(0,eT.getBylineUsers)(n).length>0?(0,eT.oxfordComma)((0,eT.getBylineUsers)(n).map(e=>(0,a.tZ)(a.HY,{children:(0,a.tZ)(q.ProfileHoverCard,{subject:e,utmSource:"byline",children:(0,a.tZ)("a",{href:(0,eS.LwU)(e,t,{base:!0}),onClick:e=>e.stopPropagation(),children:e.name})})}))):(0,eT.getPrintedByline)(t,n)}),u&&(0,a.tZ)("div",{className:"post-publication-name",children:t.name}),g&&(0,a.tZ)("div",{className:"ufi-preamble-label post-date",title:(0,ew.Z)(n.post_date).toISOString(),children:(0,a.tZ)("time",{dateTime:(0,ew.Z)(n.post_date).toISOString(),children:tt({post:n,showDatetime:l,language:_})})})]})}let ti=e=>{let{pub:t,post:n,user:i,onChange:o,postReactionToken:r}=e;return(0,ee.xR)().getConfigFor("like_posts_enabled")&&t.community_enabled?(0,a.tZ)(ej,{style:"button",post:n,pub:t,user:i,onChange:o,postReactionToken:r}):null},to=e=>{let{pub:t,post:n,onClick:i}=e,o=(0,eT.showCommentsOnPost)({publication:t,post:n}),{comment_count:r}=n;return o?(0,a.tZ)(e1,{post:n,pub:t,labelStyle:r>0?"count":"none",style:"button",count:r,onClick:i}):null};function tr(e){let{hideBottomBorder:t,post:n,pub:i,user:o,onChange:r,onCommentsClick:l,showRestackModal:c=!1,showTranscriptionButton:d,onTranscriptionClick:u,postReactionToken:m,onToggleRestackModal:h,onTranscriptClick:p}=e,{iString:g}=(0,Q.M1)(),v=(0,G.LC)(),f=(0,ee.xR)(),b=(null==o?void 0:o.is_contributor)&&!v,{getSettingFor:_}=(0,$.So)(),Z=!n.is_draft&&(0,ey.x)(o,{enable_restacking:!!_("enable_restacking")},n,i,!1),[w,k]=(0,s.eJ)(!1),[C,y]=(0,s.eJ)(!1),S=f.getConfigFor("enable_press_kit_preview_modal"),N=o&&n.videoUpload&&(0,eE.a)(o,n,n.videoUpload);return(0,a.BX)(eu.hs,{className:"post-ufi",alignItems:"center",borderTop:"detail-themed",borderBottom:t?void 0:"detail-themed",justifyContent:"space-between",gap:16,flex:"grow",paddingY:16,children:[(0,a.BX)(eu.hs,{gap:8,children:[(0,a.tZ)(ti,{post:n,pub:i,user:o,onChange:r,postReactionToken:m}),(0,a.tZ)(to,{pub:i,post:n,onClick:l}),(0,a.tZ)(ez,{pub:i,post:n,onChange:r,style:"button"}),d&&(0,a.tZ)(ex,{style:"button",onClick:u})]}),(0,a.BX)(eu.hs,{gap:8,children:[S&&(0,a.tZ)(ed.zx,{priority:"secondary-outline",onClick:()=>y(!0),children:g("Assets")}),(0,a.tZ)(W.sp,{post:n,pub:i,user:o,trigger:{style:"button",labelStyle:"cta"},showClipping:!!n.videoUpload,disableClipping:!N}),p&&(0,a.tZ)(e9,{onClick:p,style:"button",icon:(0,a.tZ)(T.Z,{stroke:"var(--color-fg-secondary-themed)",size:16}),children:g("Transcript")}),b?(0,a.tZ)(e6,{style:"button",pub:i,post:n,user:o,showRestackModal:c,canBeCrossPosted:Z,onSummaryOpen:()=>k(!0),onToggleRestackModal:h}):(o||Z)&&(0,a.tZ)(eH,{post:n,pub:i,user:o,onChange:r,showRestackModal:c,canBeCrossPosted:Z,onSummaryOpen:()=>k(!0),onToggleRestackModal:h})]}),(0,a.tZ)(eF,{postId:n.id,isOpen:w,onClose:()=>k(!1)}),S&&(0,a.tZ)(V.m,{isOpen:C,onClose:()=>y(!1),post:n})]})}function ta(e){let{isFooter:t,readInAppText:n,customization:{showAppUpsell:r,showShare:l,showComments:s,showReactions:c,showListen:u,showSave:m,showRestack:h,showCommentRestack:p}}=e,g=!t&&(h||u||m),{iString:v}=(0,Q.M1)(),f=null!=n?n:v("READ IN APP");return t||l||s||c||u||m||!h?(0,a.BX)(ei.YF,{className:t?"email-ufi-2-bottom":"email-ufi-2-top",width:"100%",children:[h&&t&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(tl,{}),(0,a.tZ)("tr",{children:(0,a.tZ)("td",{children:(0,a.BX)(ei.YF,{width:"100%",className:"email-ufi-2-row",children:[(0,a.tZ)("tr",{children:(0,a.tZ)("td",{width:"95%",children:l&&(0,a.BX)(ei._i,{tableClassName:"email-button-outline-wrapper-full-width",aClassName:"email-button-outline full-width",href:ek.W.SHARE_URL,children:[(0,a.tZ)(x.Z,(0,i._)({},ts)),(0,a.tZ)("span",{className:"email-button-text",children:v("Share")})]})})}),(0,a.tZ)(tl,{})]})})})]}),(0,a.tZ)(tl,{}),(0,a.tZ)("tr",{children:(0,a.tZ)("td",{children:(0,a.tZ)(ei.YF,{width:"100%",children:(0,a.BX)("tr",{children:[(0,a.tZ)("td",{children:(0,a.BX)(ei.zK,{gap:8,style:g?void 0:{margin:"0 auto"},children:[c?t?(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:ek.W.REACTION_URL,children:[(0,a.tZ)(U.Z,(0,i._)({},ts)),(0,a.tZ)("span",{className:"email-button-text",children:v("Like")})]}):(0,a.tZ)(tc,{href:ek.W.REACTION_URL,children:(0,a.tZ)(U.Z,(0,i._)({},ts))}):null,s?t?(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:"".concat(ek.W.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(eI.b3.substack,"&utm_medium=").concat(eI.lP.email),children:[(0,a.tZ)(B.Z,(0,i._)({},ts)),(0,a.tZ)("span",{className:"email-button-text",children:v("Comment")})]}):(0,a.tZ)(tc,{href:"".concat(ek.W.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(eI.b3.substack,"&utm_medium=").concat(eI.lP.email),children:(0,a.tZ)(B.Z,(0,i._)({},ts))}):null,l&&r&&(t?(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:ek.W.SHARE_URL,children:[(0,a.tZ)(z.Z,(0,i._)({},ts)),(0,a.tZ)("span",{className:"email-button-text",children:v("Share")})]}):(0,a.tZ)(tc,{href:ek.W.SHARE_URL,children:(0,a.tZ)(z.Z,(0,i._)({},ts))})),p&&(t?(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:"".concat(ek.W.RESTACK_COMMENT_URL,"&utm_source=").concat(eI.b3.substack,"&utm_medium=").concat(eI.lP.email),children:[(0,a.tZ)(F.Z,(0,i._)({},ts)),(0,a.tZ)("span",{className:"email-button-text",children:v("Restack")})]}):(0,a.tZ)(tc,{href:"".concat(ek.W.RESTACK_COMMENT_URL,"&utm_source=").concat(eI.b3.substack,"&utm_medium=").concat(eI.lP.email),children:(0,a.tZ)(F.Z,(0,i._)({},ts))}))]})}),(0,a.tZ)("td",{align:"right",children:(0,a.BX)(ei.zK,{gap:8,children:[l&&!r&&!t&&(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:ek.W.SHARE_URL,children:[(0,a.tZ)("div",{className:"email-button-spacer"}),(0,a.tZ)("span",{className:"email-button-text",children:v("Share")})]}),r&&!t&&(0,a.BX)(ei._i,{aClassName:"email-button-outline",href:"".concat(ek.W.POST_APP_LINK_URL,"&utm_campaign=email-read-in-app"),children:[(0,a.tZ)("div",{className:"email-button-spacer"}),(0,a.tZ)("span",{className:"email-button-text",style:{marginRight:4},children:f}),(0,a.tZ)(D.Z,(0,o._)((0,i._)({},ts),{className:d()("icon","text-icon")}))]})]})})]})})})}),(0,a.tZ)(tl,{})]}):(0,a.tZ)(ei.YF,{className:"email-ufi-2-empty",width:"100%",children:(0,a.tZ)("tr",{height:1,children:(0,a.tZ)("td",{height:1,style:{fontSize:0,lineHeight:0},children:"\xa0"})})})}function tl(){return(0,a.tZ)("tr",{height:16,children:(0,a.tZ)("td",{height:16,style:{fontSize:0,lineHeight:0},children:"\xa0"})})}let ts={className:"icon",height:18,strokeWidth:1,isStatic:!0,stroke:"#808080",fill:"none"};function tc(e){let{size:t=38,href:n,children:i}=e;return(0,a.tZ)(ei.YF,{width:t,children:(0,a.tZ)("tr",{children:(0,a.tZ)("td",{align:"center",children:(0,a.tZ)("a",{className:"email-icon-button",href:n,style:{width:t},children:i})})})})}},64719:function(e,t,n){n.d(t,{Cq:()=>l,UN:()=>s,_j:()=>a});var i=n(16584),o=n(6400),r=n(30396);let a=(0,o.createContext)({isSubstack:!1,customDomain:null});function l(){return(0,r.qp)(a)}function s(e){let{value:t,children:n}=e,o=(0,r.Ye)(()=>t,Object.values(t));return(0,i.tZ)(a.Provider,{value:o,children:n})}a.displayName="DomainInfoContext"},30372:function(e,t,n){n.d(t,{PS:()=>g,Pi:()=>p,UO:()=>f,aG:()=>v});var i=n(7409),o=n(99282),r=n(16584),a=n(6400),l=n(98661),s=n(30396),c=n(68833),d=n(21159),u=n(98914);let m={1:30,2:20,3:10},h=(0,a.createContext)({startInterval:()=>void 0,stopInterval:()=>void 0,trackInterval:()=>void 0,getCurrentUuid:()=>""});function p(e){let{children:t}=e,n=(0,s.sO)(null),i=(0,s.sO)(null),o=(0,s.sO)({top:0,bottom:0}),a=(0,s.sO)(null),l=(0,s.I4)(()=>{if(a.current){let{uuid:e,postId:t,containerElementRef:n,elementIsStatic:r,phase:l,count:s}=a.current;if(l&&l>3){p();return}if(s&&s>=m[l]){v();return}a.current.count=s+1;let u=(null==n?void 0:n.current)?(0,d.X)(n.current,null!=r&&r):o.current,h=u.top.toFixed(2),g=u.bottom.toFixed(2);(0,c.j)(c.FP.POST_PINGBACK_SEEN,{tracker_uuid:e,post_id:t,top_scroll_percentage:h,bottom_scroll_percentage:g,phase:l,count:s+1}),i.current!==h&&(i.current=h,t&&f(t,"read",u.top/100))}},[]),p=(0,s.I4)(()=>{n.current&&(clearInterval(n.current),n.current=null)},[]),g=()=>{var e,t;return 10**(null!==(t=null===(e=a.current)||void 0===e?void 0:e.phase)&&void 0!==t?t:1)*1e3},v=()=>{p(),a.current&&(a.current.phase+=1,a.current.count=0),n.current=setInterval(l,g())},b=(0,s.I4)(e=>{var t;let{postId:i,containerElementRef:o,elementIsStatic:r,phase:s=1,count:c=0}=e;"undefined"!=typeof window&&i&&o&&((null===(t=a.current)||void 0===t?void 0:t.postId)!==i&&(a.current={uuid:(0,u.EH)(),postId:i,containerElementRef:o,elementIsStatic:r,phase:s,count:c}),p(),n.current=setInterval(l,g()))},[l,p]),_=(0,s.I4)(()=>{var e;return(null===(e=a.current)||void 0===e?void 0:e.uuid)||""},[]);return(0,s.d4)(()=>{let e=()=>{var e,t,n,i,o,r,s;document.hidden?(l(),p()):(null===(e=a.current)||void 0===e?void 0:e.postId)&&(null===(t=a.current)||void 0===t?void 0:t.containerElementRef)&&b({postId:null===(n=a.current)||void 0===n?void 0:n.postId,containerElementRef:null===(i=a.current)||void 0===i?void 0:i.containerElementRef,elementIsStatic:null===(o=a.current)||void 0===o?void 0:o.elementIsStatic,phase:null===(r=a.current)||void 0===r?void 0:r.phase,count:null===(s=a.current)||void 0===s?void 0:s.count})};return document.addEventListener("visibilitychange",e),()=>{l(),a.current=null,p(),document.removeEventListener("visibilitychange",e)}},[b,p]),(0,s.d4)(()=>{let e=e=>{var t,n,i,r,l;let s=null===(n=a.current)||void 0===n?void 0:null===(t=n.containerElementRef)||void 0===t?void 0:t.current,c=null===(i=a.current)||void 0===i?void 0:i.elementIsStatic;s&&e.target===s&&(null===(l=a.current)||void 0===l?void 0:null===(r=l.containerElementRef)||void 0===r?void 0:r.current)&&(o.current=(0,d.X)(s,null!=c&&c))};return window.addEventListener("scroll",e,!0),()=>{window.removeEventListener("scroll",e,!0)}},[b,p]),(0,r.tZ)(h.Provider,{value:{startInterval:b,stopInterval:p,trackInterval:l,getCurrentUuid:_},children:t})}function g(){return(0,s.qp)(h)}function v(e){let t=(0,l.forwardRef)((t,n)=>{let a=g();return(0,r.tZ)(e,(0,o._)((0,i._)({},a,t),{ref:n}))});return t.displayName="withPostPingbackTrackerContext(".concat(e.displayName||e.name||"Anonymous",")"),t}function f(e,t,n){var i;"undefined"!=typeof window&&(null===(i=window._preloads)||void 0===i?void 0:i.user)&&!window._preloads.user.is_magic&&fetch("/api/v1/posts/".concat(e,"/progress?type=").concat(t,"&progress=").concat(n),{method:"POST"}).catch(e=>{console.error("Failed to mark video progress:",e)})}h.displayName="PostPingbackTrackerContext"},6910:function(e,t,n){n.d(t,{m:()=>l});var i=n(7409),o=n(99282),r=n(98848),a=n(16584);function l(e){var{size:t=20,stroke:n="var(--color-light-fg-secondary)"}=e,l=(0,r._)(e,["size","stroke"]);return(0,a.tZ)("svg",(0,o._)((0,i._)({},l),{width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:n,xmlns:"http://www.w3.org/2000/svg",children:(0,a.tZ)("path",{id:"Vector",d:"M3 22C3 17.7044 6.69722 14.2222 11.258 14.2222C11.5081 14.2222 11.7556 14.2326 12 14.2531M21.0039 16.3098L18.6469 18.6668M18.6469 18.6668L16.2899 21.0239M18.6469 18.6668L21.0178 21.0377M18.6469 18.6668L16.276 16.2959M16.4118 6.44444C16.4118 8.89904 14.4102 10.8889 11.9412 10.8889C9.47214 10.8889 7.47059 8.89904 7.47059 6.44444C7.47059 3.98985 9.47214 2 11.9412 2C14.4102 2 16.4118 3.98985 16.4118 6.44444Z",strokeWidth:"2",strokeLinecap:"round","stroke-linejoin":"round"})}))}},16451:function(e,t,n){n.d(t,{Fb:()=>E,Ku:()=>S,Zb:()=>N,oM:()=>w,sP:()=>T});var i=n(7409),o=n(99282),r=n(98848),a=n(16584),l=n(94184),s=n.n(l),c=n(85685),d=n(80143),u=n(94874),m=n(19081),h=n(63474),p=n(58175),g=n(2009),v=n(50312),f=n(98012),b=n(63651),_=n(47929),Z=n(5749);function w(e){let t;var{showGutter:n=!1,hasAvatar:o=!0,hasContext:l=!1,onClick:c,className:u,entityKey:m}=e,h=(0,r._)(e,["showGutter","hasAvatar","hasContext","onClick","className","entityKey"]);let p=c?e=>{let n=window.getSelection();if(n&&!n.isCollapsed&&(null==n?void 0:n.toString())!==t)return;let{target:i}=e;!(i instanceof Element&&i.closest("button, a"))&&!e.defaultPrevented&&c(e)}:void 0;return(0,a.tZ)(d.Q,{entityKey:m,children:(0,a.tZ)("div",(0,i._)({className:s()(k,Z.Z.feedUnit,n?Z.Z.showThreadGutter:void 0,l?Z.Z.hasContext:void 0,o?Z.Z.hasAvatar:void 0,u),onPointerDown:()=>{var e;t=null===(e=window.getSelection())||void 0===e?void 0:e.toString()},onClick:p,onAuxClick:p},h))})}let k=s()((0,h.oB)({gap:12}),h.sg.styles),C=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),y=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric",year:"numeric"});function S(e){let t,{timestamp:n}=e,i=(0,f.Z)(),o=(0,f.Z)(n),r=i.diff(o,"day"),l=i.diff(o,"month");return t=!i.isSame(o,"year")&&l>6?y.format(o.toDate()):r>7?C.format(o.toDate()):o.fromNowShort(),(0,a.tZ)(p.xv.B4,{as:"span",color:"secondary",children:n&&t})}function N(e){let{user:t,className:n,size:i=36}=e;return(0,a.tZ)(u.qE,{size:i,user:t,className:n})}function T(e){let{children:t}=e;return(0,a.tZ)(p.xv.B3,{className:Z.Z.feedCommentBodyInner,color:"primary",children:t})}function E(e){let{user:t,onClick:n,utm_content:r}=e,l=(0,v.F)({href:(0,b.NNq)(t,{noBase:g.L,utm_source:_.b3.substackFeedItem}),state:{showBack:!0},onClick:n,campaign:{content:r}});return(0,a.tZ)(m.hs,(0,o._)((0,i._)({as:"a",flex:"auto",alignSelf:"start",radius:"full",showFocus:!0,animate:!0,draggable:!1},l),{children:(0,a.tZ)(c.ProfileHoverCard,{subject:t,dontStopPropagation:!0,utmSource:"feed",children:(0,a.tZ)(N,{user:t})})}))}},4038:function(e,t,n){n.d(t,{Q:()=>l});var i=n(30396),o=n(52384),r=n(98914),a=n(81821);function l(e){let[t,n]=(0,i.eJ)(""),[l,s]=(0,i.eJ)(""),[c,d]=(0,i.eJ)({}),[u,m]=(0,i.eJ)(!1);(0,i.d4)(()=>{(0,a.tq)()&&navigator.share&&navigator.canShare(c)&&m(!0)},[c]),(0,i.d4)(()=>{(async function(){n("");let t=e.imageUrl;if((0,r.pt)(e.imageUrl,()=>{n(t),s(e.imageDownloadUrl)}),(0,a.tq)()){var i,o;let n=await fetch(e.imageUrlSameOrigin||t),r=["instagram","instagram-stories"].includes(null!==(i=e.shareApp)&&void 0!==i?i:"");d({title:r?void 0:e.shareTitle,text:r?void 0:null!==(o=e.shareText)&&void 0!==o?o:void 0,files:[new File([await n.blob()],"image.png",{type:"image/png"})],url:r?void 0:e.shareUrl})}})()},[e.imageDownloadUrl,e.imageUrl,e.shareApp,e.shareText,e.shareTitle,e.shareUrl]);let{refetch:h}=(0,o.Q)({method:"post",pathname:"/api/v1/press_kit/notification",body:{title:e.shareText,imageUrl:e.imageUrl,shareApp:e.shareApp},deps:[e.shareText,e.imageUrl,e.shareApp]});return{img:t,imgDownload:l,sendPushNotification:(0,i.I4)(async()=>{let e=await h();return!(e instanceof Error)&&e.success},[h]),shareData:c,useNativeShare:u}}},21159:function(e,t,n){n.d(t,{X:()=>o,m:()=>i});let i=(e,t)=>{if(!e)return 0;let{scrollHeight:n,clientHeight:i}=e;return Math.min(t/100*(n-i),Math.max(0,n-i))},o=(e,t)=>{var n,i,o,r;let{scrollTop:a,scrollHeight:l,clientHeight:s}=t?{scrollTop:document.documentElement.scrollTop||document.body.scrollTop,scrollHeight:null!==(n=null==e?void 0:e.scrollHeight)&&void 0!==n?n:0,clientHeight:window.innerHeight}:{scrollTop:null!==(i=null==e?void 0:e.scrollTop)&&void 0!==i?i:0,scrollHeight:null!==(o=null==e?void 0:e.scrollHeight)&&void 0!==o?o:0,clientHeight:null!==(r=null==e?void 0:e.clientHeight)&&void 0!==r?r:0};return l&&s?l===s?{top:0,bottom:100}:{top:Math.min(100,a/(l-s)*100),bottom:Math.min(100,(a+s)/l*100)}:{top:0,bottom:0}}},98750:function(e,t,n){n.d(t,{MW:()=>s,UM:()=>l,th:()=>c});var i=n(30396),o=n(46914),r=n(98914);function a(e,t){let{root:n,threshold:r=0,rootMargin:a,disabled:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,o.z)(e=>{t(e.some(e=>e.isIntersecting),e)});(0,i.d4)(()=>{if("undefined"==typeof IntersectionObserver||!e.current||l)return;let t=new IntersectionObserver(s,{root:n,threshold:r,rootMargin:a});return t.observe(e.current),function(){t.disconnect()}},[n,r,a,l])}function l(e,t){let{root:n,threshold:o=0,rootMargin:r,disabled:l=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=(0,i.sO)(!1);a(e,e=>{e&&!s.current&&(s.current=!0,t())},{root:n,threshold:o,rootMargin:r,disabled:l||s.current})}function s(e,t,n){let{root:r,rootMargin:l,disabled:s=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=(0,i.sO)({firstVisibleTime:null,lastVisibleTime:null}),d=()=>{let{current:e}=c;if(null!==e.firstVisibleTime){let t=e.lastVisibleTime?Date.now()-e.lastVisibleTime:0;null!=e.lastVisibleTime&&(n(t),e.lastVisibleTime=null)}},u=(0,o.z)(()=>{let{current:e}=c;null==e.firstVisibleTime&&(e.firstVisibleTime=Date.now(),t()),e.lastVisibleTime=Date.now()});return a(e,(0,o.z)((e,t)=>{var n;let i=null===(n=window)||void 0===n?void 0:n.innerHeight,o=t.some(e=>{let t=e.intersectionRatio>=.9&&e.isIntersecting,n=i&&e.boundingClientRect.height*e.intersectionRatio>=.5*i;return t||n}),r=t.some(e=>e.intersectionRatio<.3&&!e.isIntersecting);o?u():r&&d()}),{root:r,threshold:[.3,.5,.7,.9],rootMargin:l,disabled:s}),(0,i.d4)(()=>{let{current:e}=c;return"undefined"==typeof IntersectionObserver&&u(),()=>{null!==e.lastVisibleTime&&d()}},[]),u}function c(e){let[t,n]=(0,i.eJ)(!1);return(0,i.d4)(()=>{let t=()=>{let t=(0,r.dr)();n(t),null==e||e(t)};return(0,r.ut)(t),()=>{(0,r.kE)(t)}},[e]),t}},57640:function(e,t,n){n.d(t,{Y:()=>m});var i=n(7409),o=n(99282),r=n(98848),a=n(16584),l=n(94184),s=n.n(l),c=n(71068),d=n(19081),u=n(96855);let m=e=>{var{checked:t,disabled:n,theme:l="accent",id:m}=e,h=(0,r._)(e,["checked","disabled","theme","id"]);return(0,a.BX)(d.hs,{height:20,width:20,position:"relative",radius:"full",sizing:"border-box",className:s()(u.Z.container,t?u.Z.checked:u.Z.unchecked,n?u.Z.disabled:u.Z.enabled,u.Z["theme_".concat(l)]),justifyContent:"center",alignItems:"center",flex:"auto",children:[(0,a.tZ)("input",(0,o._)((0,i._)({},h),{id:m,checked:t,disabled:n,type:"radio",className:s()(u.Z.input,n?u.Z.disabled:u.Z.enabled,u.Z["theme_".concat(l)])})),(0,a.tZ)(c.xu,{as:"span",radius:"full","aria-hidden":"true",className:s()(u.Z.nub,t?u.Z.checked:u.Z.unchecked,n?u.Z.disabled:u.Z.enabled,u.Z["theme_".concat(l)])})]})}},27661:function(e,t,n){n.d(t,{Dx:()=>g,HD:()=>Z,MN:()=>w,OD:()=>S,Oz:()=>_,QC:()=>k,Z9:()=>b,mn:()=>y,nr:()=>C,pW:()=>p,uf:()=>f,ws:()=>v});var i=n(16584),o=n(47737),r=n(59719),a=n(57420),l=n(40792),s=n(23218),c=n(42297),d=n(56841),u=n(87966),m=n(5097),h=n(5264);function p(e){let{size:t,className:n}=e;return(0,i.tZ)(o.Z,{size:t,className:n})}function g(e){let{size:t,className:n}=e;return(0,i.tZ)(r.Z,{size:t,className:n})}function v(e){let{size:t,className:n}=e;return(0,i.tZ)(a.Z,{size:t,className:n})}function f(e){let{size:t,className:n}=e;return(0,i.tZ)(l.Z,{size:t,className:n})}function b(e){let{size:t,className:n}=e;return(0,i.tZ)(s.Z,{size:t,className:n})}function _(e){let{size:t,className:n}=e;return(0,i.tZ)(c.Z,{size:t,className:n})}function Z(e){let{size:t,className:n}=e;return(0,i.tZ)(r.Z,{size:t,className:n})}function w(e){let{size:t,className:n}=e;return(0,i.tZ)(d.Z,{size:t,className:n})}function k(e){let{size:t,className:n}=e;return(0,i.tZ)(u.Z,{size:t,className:n})}function C(e){let{size:t,className:n}=e;return(0,i.tZ)(m.Z,{size:t,className:n})}function y(e){let{size:t,className:n}=e;return(0,i.tZ)(r.Z,{size:t,className:n})}function S(e){let{size:t,className:n}=e;return(0,i.tZ)(h.Z,{size:t,className:n})}},54584:function(e,t,n){n.d(t,{o:()=>o,y:()=>r});var i=n(98661);let o=(0,i.createContext)("unknown");function r(){return(0,i.useContext)(o)}},78308:function(e,t,n){n.d(t,{A:()=>i});function i(e){return"direct-message"===e?"people":"all"}},97842:function(e,t,n){n.d(t,{I0:()=>s,RN:()=>d,UX:()=>a,WG:()=>u,ge:()=>l,ky:()=>c});var i=n(6400),o=n(30396),r=n(63018);let a={user:null,inbox:{threadList:[],threads:new Map,filter:"all",resources:{all:{isLoading:!0,hasMore:!1},people:{isLoading:!0,hasMore:!1}}},users:new Map,profiles:new Map,communityPosts:new Map,communityComments:new Map,chats:new Map,comments:new Map,replies:new Map,conversations:new Map,publications:new Map,notes:new Map,editingPost:null},l=(0,i.createContext)(()=>Promise.resolve());function s(){return(0,o.qp)(l)}let c=(0,i.createContext)(a);function d(){return(0,o.qp)(c)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,r._I)("/api/v1/messages/unread-count",e,t)}},46603:function(e,t,n){n.d(t,{_:()=>r});var i=n(10928),o=n.n(i);function r(e,t){var n;let i;let r=e.conversations.get(t.messageThreadId),a=t.recentMessageId?e.communityComments.get(t.recentMessageId):null,l=o()(null!==(n=null==r?void 0:r.replyIds)&&void 0!==n?n:[]),s=l?e.communityComments.get(l):null;return a?s?a.comment.created_at>s.comment.created_at?a:s:a:s}},75822:function(e,t,n){n.d(t,{KS:()=>d,qS:()=>c});var i=n(16584),o=n(6400),r=n(30396),a=n(60807);let l=(0,o.createContext)({registerVideo:()=>void 0,unregisterVideo:()=>void 0,updatePaywallState:()=>void 0}),s=()=>(0,r.qp)(l),c=e=>{let{children:t}=e,[n,o]=(0,r.eJ)(0),s=(0,r.sO)([]),c=(0,r.sO)(new Map),d=(0,a.Fl)().autoPlayVideo;(0,r.d4)(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{let t=e.target;if(!e.isIntersecting){t.pause();return}!c.current.get(t)&&d&&t.play().catch(e=>{console.log("Unable to autoplay prior to user interaction with the dom.",e),t.muted=!0,t.play().catch(e=>{console.error("Unable to autoplay prior to user interaction with the dom when muted.",e)})})})},{threshold:1});return s.current.forEach(t=>{var n;(null===(n=t.current)||void 0===n?void 0:n.player)&&e.observe(t.current.player)}),()=>{s.current.forEach(t=>{var n;(null===(n=t.current)||void 0===n?void 0:n.player)&&e.unobserve(t.current.player)})}},[n]);let u=(0,r.I4)(e=>{e&&!s.current.includes(e)&&(s.current.push(e),o(e=>e+1))},[]),m=(0,r.I4)(e=>{s.current=s.current.filter(t=>t!==e),o(e=>e+1)},[]),h=(0,r.I4)(e=>{var t;let{videoPlayerRef:n,showPaywall:i}=e;(null===(t=n.current)||void 0===t?void 0:t.player)&&c.current.set(n.current.player,i)},[]);return(0,i.tZ)(l.Provider,{value:{registerVideo:u,unregisterVideo:m,updatePaywallState:h},children:t})},d=e=>{let{disable:t,showPaywall:n,videoPlayerRef:i}=e,{registerVideo:o,unregisterVideo:a,updatePaywallState:l}=s();(0,r.d4)(()=>{if(i.current&&!t)return o(i),()=>{a(i)}},[t,o,a,i]),(0,r.d4)(()=>{l({showPaywall:n,videoPlayerRef:i})},[n,l,i])}},16889:function(e,t,n){n.d(t,{n:()=>i});function i(e){let t=0,n=()=>{let{visibilityState:n="visible"}=document,i=Date.now();"hidden"!==n&&i-t>2e3&&(e(),t=i)};return window.addEventListener("online",n),document.addEventListener("visibilitychange",n),window.addEventListener("focus",n),()=>{window.removeEventListener("online",n),document.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}},46464:function(e,t,n){n.d(t,{Z:()=>i});function i(e){var t;return"twitter"===e.source?"From Twitter":"facebook"===e.source?"From Facebook":"contacts_email"===e.source||"contacts_phone"===e.source?"From your contacts":e.publication?"".concat(e.publication.name):null!==(t=e.user.handle)&&void 0!==t?t:"Suggested"}}}]);