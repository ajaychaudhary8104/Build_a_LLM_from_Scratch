"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["2768"],{3258:function(t,e,n){n.d(e,{ZP:()=>v,wg:()=>Z});var i=n(7409),r=n(99282),o=n(16584),l=n(94184),a=n.n(l),c=n(80569),s=n.n(c),u=n(85685),d=n(85095),m=n(33017),h=n(63651),p=n(51885);let v=t=>{let{id:e,type:n,name:i,url:r,photo_url:l,uuid:c,mentionText:s,isStatic:v=!1,isEditorContext:f=!1}=t;return v?(0,o.tZ)("span",{className:a()(p.Z.mention,p.Z.mentionStatic),"data-component-name":"MentionStatic",children:(0,o.tZ)("a",{href:(0,h.gpq)(n,e,i,r),children:i||"Substack user"})}):"user"===n?(0,o.tZ)(d.am,{children:(0,o.tZ)(u.ProfileHoverCard,{subject:{id:e,name:i||"Substack user",photo_url:l},utmSource:"mention",children:(0,o.tZ)("a",{className:p.Z.mention,href:f?void 0:(0,h.gpq)(n,e,i,r),target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:i,id:e,type:n,url:r,photo_url:l,uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionUser",children:null!=s?s:i})})}):"pub"===n?(0,o.tZ)(m.Sm,{publication_id:e,utmSource:"mention",children:(0,o.tZ)("a",{className:p.Z.mention,href:r,target:"_blank",rel:"noopener","data-attrs":JSON.stringify({name:i,id:e,type:n,url:f?void 0:(0,h.gpq)(n,e,i,r),uuid:c}),onClick:t=>t.stopPropagation(),"data-component-name":"MentionPub",children:null!=s?s:i})}):(0,o.tZ)("a",{className:p.Z.mention,target:"_blank",rel:"noopener",href:(0,h.gpq)(n,e,i,r),"data-attrs":JSON.stringify({name:i,id:e,type:n,url:r,photo_url:l,uuid:c}),"data-component-name":"Mention",children:null!=s?s:i})},f={},Z=async function(t){let{pathname:e="/api/v1/posts/mention"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f[t])return f[t];let{profiles:n,publications:o}=(await s().get(e).query({query:t})).body,l=new Map;return n&&n.length&&l.set("Writers",n.map(t=>(0,r._)((0,i._)({},t),{type:"user"}))),o&&o.length&&l.set("Publications",null==o?void 0:o.map(t=>(0,r._)((0,i._)({},t),{type:"pub",url:(0,h.HQ5)({subdomain:t.subdomain}),photo_url:t.logo_url}))),f[t]=l,l}},77906:function(t,e,n){n.d(e,{UK:()=>S});var i=n(7409),r=n(99282),o=n(58865),l=n(16584),a=n(20160),c=n(95441),s=n(92291),u=n(77338),d=n(5952),m=n(79251),h=n(25991),p=n(53678),v=n(76721),f=n(93252),Z=n(94874),g=n(19081),b=n(58175),_=n(2009),y=n(50312),k=n(33555),B=n(63651),C=n(47929),x=n(5749);function w(){let t=(0,o._)(["This content is only visible to paid subscribers of ",""]);return w=function(){return t},t}function S(t){let{parent:e,comment:n,publication:i,readOnly:r,onAttachmentClick:o,utm_content:c,isDm:s,isPermalink:u}=t,d=(0,y.F)({onClick:()=>null==o?void 0:o({commentId:String(n.id)}),href:r?void 0:(0,B.Sgq)(n,{noBase:_.L}),state:{showBack:!0}});return(0,l.tZ)(a.W,{children:(0,l.tZ)(P,{readOnly:r,linkProps:d,isEmbed:f.P,children:(0,l.tZ)(N,{parent:e,comment:n,publication:i,readOnly:r,onAttachmentClick:o,utm_content:c,isDm:s,isPermalink:u})})})}function P(t){let{children:e,readOnly:n,linkProps:o,isEmbed:a}=t;return(0,l.tZ)(g.tu,(0,r._)((0,i._)({as:n?"div":"a",bg:"primary",border:"detail",radius:"md",padding:12,gap:8,target:a()?"_blank":void 0,draggable:!1},o),{showFocus:!0,animate:!0,className:x.Z.commentContainer,children:e}))}function N(t){var e,n,i,r;let{parent:o,comment:a,publication:c,readOnly:s,onAttachmentClick:u,utm_content:d,isDm:m,isPermalink:h}=t,{truncatedBodyJson:p}=(0,v.Z)(a,{truncationProfile:"small"}),f=null!==(r=a.user)&&void 0!==r?r:a.user_id?{id:a.user_id,name:null!==(e=a.name)&&void 0!==e?e:"",photo_url:a.photo_url,bestseller_tier:null!==(n=a.user_bestseller_tier)&&void 0!==n?n:void 0,status:null!==(i=a.userStatus)&&void 0!==i?i:null}:null;return(0,l.BX)(l.HY,{children:[f&&(0,l.tZ)(M,{commentUser:f,comment:a,readOnly:s,utm_content:d}),(0,l.tZ)(O,{parent:o,comment:a,publication:c,truncatedBodyJson:p,isDm:m,onAttachmentClick:u,utm_content:d,readOnly:s,isPermalink:h})]})}function M(t){let{commentUser:e,comment:n,readOnly:i,utm_content:r}=t;return e?(0,l.BX)(g.hs,{gap:6,alignItems:"center",justifyContent:"start",children:[(0,l.tZ)(y.r,{href:(0,B.NNq)(e,{noBase:_.L,utm_content:C.fZ.substackFeedItem,utm_source:null!=r?r:void 0}),target:(0,f.P)()?"_blank":void 0,showBack:!0,radius:"full",showFocus:!0,animate:!0,children:(0,l.tZ)(Z.qE,{size:20,user:e})}),(0,l.tZ)(b.xv.B4,{weight:"medium",color:"primary",children:i?e.name:(0,l.BX)(g.hs,{gap:8,direction:"row",justifyContent:"space-between",children:[(0,l.tZ)(p.xG,{user:e,utm_source:C.b3.substackFeedItem,utm_content:r,children:e.name}),(null==e?void 0:e.bestseller_tier)!=null&&(0,l.tZ)(k.UserBadge,{tier:e.bestseller_tier,userId:e.id,size:"sm"})]})}),(0,l.tZ)(b.xv.B4,{as:"span",color:"secondary",children:(0,l.tZ)(h.mn,{timestamp:n.date,comment:n})})]}):null}function O(t){var e,n,i,r,o;let{parent:a,comment:s,publication:u,truncatedBodyJson:d,isDm:m,isPermalink:h,readOnly:p,onAttachmentClick:v,utm_content:f}=t,{iString:Z,iTemplate:g}=(0,c.M1)(),b=null!==(o=null==u?void 0:u.name)&&void 0!==o?o:Z("this publication"),_=g(w(),b),y=null==a?void 0:null===(e=a.attachments)||void 0===e?void 0:e.some(t=>"image"===t.type||"video"===t.type),k=null===(n=s.attachments)||void 0===n?void 0:n.some(t=>"image"===t.type||"video"===t.type),B=null===(i=s.attachments)||void 0===i?void 0:i.some(t=>"image"!==t.type&&"video"!==t.type&&"live_stream"!==t.type),C=null===(r=s.attachments)||void 0===r?void 0:r.some(t=>"post"===t.type&&t.postSelection),x=!1;return y||k&&B||B&&!C?(0,l.tZ)(H,{comment:s,truncatedBodyJson:d,hiddenText:_,onAttachmentClick:v,utm_content:f}):(0,l.tZ)(q,{comment:s,truncatedBodyJson:d,hiddenText:_,onAttachmentClick:v,utm_content:f,readOnly:p,isDm:m,isPermalink:h})}function H(t){var e,n;let{comment:i,truncatedBodyJson:r,hiddenText:o,onAttachmentClick:a,utm_content:c}=t;return(0,l.tZ)(l.HY,{children:(0,l.BX)(g.hs,{gap:8,direction:"row",flex:"grow",justifyContent:"space-between",children:[(0,l.BX)(g.tu,{gap:4,children:[(0,l.tZ)(u.h,{content:r,isHidden:i.hidden,hiddenText:o,attachedLinks:(0,d.Bk)(i)}),(0,l.tZ)(m.Mi,{attachments:null!==(e=i.attachments)&&void 0!==e?e:[],onAttachmentClick:a,utm_content:c})]}),(0,l.tZ)(s.Gn,{attachments:null!==(n=i.attachments)&&void 0!==n?n:[]})]})})}function q(t){var e;let{comment:n,truncatedBodyJson:i,hiddenText:r,onAttachmentClick:o,utm_content:a,readOnly:c,isDm:m,isPermalink:h}=t;return(0,l.BX)(l.HY,{children:[(0,l.tZ)(u.h,{content:i,isHidden:n.hidden,hiddenText:r,attachedLinks:(0,d.Bk)(n)}),(0,l.tZ)(s.yd,{attachments:null!==(e=n.attachments)&&void 0!==e?e:[],onAttachmentClick:o,utm_content:a,isRestack:!0,readOnly:c,isDm:m,isPermalink:h})]})}},9682:function(t,e,n){n.d(e,{js:()=>o,tv:()=>l});var i=n(30396),r=n(20042);function o(t,e){(0,i.d4)(()=>{let e=e=>{t(e)};return r.subscribers.push(e),()=>{r.subscribers.splice(r.subscribers.indexOf(e)>>>0,1)}},e)}function l(){let{path:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[e,n]=(0,i.eJ)({}),l=(0,i.sO)(null);o(t=>{l.current=t,n({})},[]);let a=l.current||(0,r.getCurrentUrl)(),c=a.replace(/\?.+$/,""),s=document.location.hash;return l.current=null,[{url:a,path:c,matches:t&&(0,r.exec)(c,t,{})||null,hash:s},r.route]}n(73410)},86075:function(t,e,n){n.d(e,{u:()=>p});var i=n(7409),r=n(99282),o=n(98848),l=n(16584),a=n(98661),c=n(71068),s=n(15771);n(17352);var u=n(19081),d=n(58175);let m={size:20,color:"var(--color-fg-secondary)"},h={size:"sm",priority:"secondary-outline"};function p(t){var e,n,{icon:c,title:u,description:d,button:p}=t,b=(0,o._)(t,["icon","title","description","button"]);return(0,l.BX)(v,(0,r._)((0,i._)({},b),{children:[c?(e=c)&&(0,a.isValidElement)(e)?(0,a.cloneElement)(e,(0,i._)({},m,e.props)):e:null,(0,l.BX)(g,{children:[(0,l.tZ)(f,{children:u}),d&&(0,l.tZ)(Z,{children:d})]}),p?(n=p)&&(0,a.isValidElement)(n)&&n.type===s.zx?(0,a.cloneElement)(n,(0,i._)({},h,n.props)):n:null]}))}function v(t){var{children:e}=t,n=(0,o._)(t,["children"]);return(0,l.tZ)(u.sg,(0,r._)((0,i._)({flex:"grow",alignItems:"center",justifyContent:"center",gap:12,padding:20,textAlign:"center"},n),{children:e}))}function f(t){let{children:e}=t;return(0,l.tZ)(d.xv.B4,{weight:"medium",color:"primary",children:e})}function Z(t){let{children:e}=t;return(0,l.tZ)(d.xv.B4,{color:"secondary",children:e})}let g=(0,c.zo)({display:"flex",direction:"column",gap:2,maxWidth:400})},46585:function(t,e,n){n.d(e,{KV:()=>u,WS:()=>d});var i=n(16584);n(30396);var r=n(96490),o=n(76789),l=n(95441);n(48980),n(15771),n(99916);var a=n(84747),c=n(73857);n(70379),n(8113),n(97842),n(98012);var s=n(44854);function u(t){let{onMute:e,customLabel:n}=t,{iString:o}=(0,l.M1)();return(0,i.tZ)(c.L,{leading:(0,i.tZ)(r.Z,{className:s.Z.muteIcon}),content:n||o("Mute"),children:(0,i.tZ)(m,{onMute:e})})}function d(t){let{onClick:e,customLabel:n}=t,{iString:r}=(0,l.M1)();return(0,i.tZ)(a.u,{leading:(0,i.tZ)(o.Z,{className:s.Z.muteIcon}),onClick:t=>{t.preventDefault(),e()},children:n||r("Unmute")})}function m(t){let{onMute:e}=t,{iString:n}=(0,l.M1)(),r=t=>n=>{n.preventDefault(),e(t)};return(0,i.tZ)(i.HY,{children:[["1hour",n("For 1 hour")],["8hours",n("For 8 hours")],["24hours",n("For 24 hours")],["indefinitely",n("Until I change it")]].map(t=>{let[e,n]=t;return(0,i.tZ)(a.u,{onClick:r(e),children:n},e)})})}},69304:function(t,e,n){n(16584),n(19081),n(58175),n(44854)},32223:function(t,e,n){n.d(e,{c:()=>s});var i=n(7409),r=n(98848),o=n(16584),l=n(77747),a=n(80026),c=n(23710);function s(t){var{children:e,setReactions:n=!0,alignSelf:a}=t,c=(0,r._)(t,["children","setReactions","alignSelf"]);return n?(0,o.BX)(u,{position:"relative",alignSelf:a,children:[e,(0,o.tZ)(l.Jg,(0,i._)({},c))]}):(0,o.tZ)(o.HY,{children:e})}let u=(0,a.E7)({display:"flex",className:c.Z.reactionsHoverZone})},93502:function(t,e,n){n(48980)},70125:function(t,e,n){n(63018)}}]);