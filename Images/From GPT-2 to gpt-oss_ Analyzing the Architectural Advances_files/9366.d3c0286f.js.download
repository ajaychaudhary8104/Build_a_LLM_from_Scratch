"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9366"],{65530:function(e,t,r){r.d(t,{U:()=>_});var l=r(7409),a=r(99282),i=r(16584),n=r(30396),s=r(14293),o=r.n(s),c=r(87756),u=r(95441),f=r(39556);async function d(e){return(0,f.O)(e,{imageCropAspectRatio:1,cropSelectPresetOptions:void 0,willRenderCanvas:(e,t)=>{let{utilVisibility:r,selectionRect:i,lineColor:n,backgroundColor:s}=t;if(r.crop<=0)return e;let{x:o,y:c,width:u,height:f}=i;return(0,a._)((0,l._)({},e),{interfaceShapes:[{x:o+.5*u,y:c+.5*f,rx:.5*u,ry:.5*f,opacity:r.crop,inverted:!0,backgroundColor:[...s,.5],strokeWidth:1,strokeColor:[...n]},...e.interfaceShapes]})}})}var h=r(98914),g=r(94874),p=r(71068),b=r(15771),m=r(19081),k=r(89635),C=r(70408);function _(e){let{user:t,onChangePhoto:r}=e,{iString:s}=(0,u.M1)(),[f,_]=(0,n.eJ)(null),[v,x]=(0,n.eJ)(null),[{isDragging:y},{openFileDialog:B,getInputProps:F,getDragProps:w}]=(0,k.F)({accept:"image/*",multiple:!1,onFilesAdded:async e=>{let t=e[0];if(t)try{let e=t.file instanceof File?t.file:null;if(!e)return;let l=await (0,h.GL)(e);if(!l||o()(l.url))return;let a=await d(l.url),i=await (0,h.GL)(a);if(!i)return;let{url:n,orientation:s}=i;_(null!=s?s:null),n&&(x(n),r({photo_url:n}))}catch(e){console.error("Error processing image:",e)}}}),D=(0,n.Ye)(()=>({transform:(0,h.P_)(f)}),[f]),E=v||(0,C.SM)(t);return(0,i.tZ)(p.xu,(0,a._)((0,l._)({alignSelf:"start"},w()),{children:(0,i.BX)(b.kG,{resetCss:!0,onClick:B,"aria-label":s("Edit profile photo"),children:[(0,i.BX)(m.M5,{style:D,position:"relative",width:120,height:120,border:"detail",radius:"full",bg:y?"secondary":"primary",overflow:"hidden",children:[E?(0,i.tZ)(g.qE,{photoUrl:E,size:120}):(0,i.tZ)(c.Z,{size:24}),y&&(0,i.tZ)(m.M5,{position:"absolute",inset:0,style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,i.tZ)(c.Z,{size:24})})]}),(0,i.tZ)("input",(0,l._)({},F()))]})}))}},89635:function(e,t,r){r.d(t,{F:()=>s});var l=r(7409),a=r(99282),i=r(98661),n=r(95441);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxFiles:t=1/0,maxSize:r=1/0,accept:s="*",multiple:c=!1,initialFiles:u=[],onFilesChange:f,onFilesAdded:d}=e,{iString:h}=(0,n.M1)(),[g,p]=(0,i.useState)({files:u.map(e=>({file:e,id:e.id,preview:e.url})),isDragging:!1,errors:[]}),b=(0,i.useRef)(null),m=(0,i.useCallback)(e=>{if(e instanceof File){if(e.size>r)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(r),".")}else if(e.size>r)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(r),".");if("*"!==s){let t=s.split(",").map(e=>e.trim()),r=e instanceof File?e.type||"":e.type,l=(File,e.name),a=l.lastIndexOf("."),i=a>0?l.substring(a):"";if(!t.some(e=>{if(e.startsWith("."))return i.toLowerCase()===e.toLowerCase();if(e.endsWith("/*")){let t=e.split("/")[0];return r.startsWith("".concat(t,"/"))}return r===e}))return'File "'.concat((File,e.name),'" is not an accepted file type.')}return null},[s,r]),k=(0,i.useCallback)(e=>e instanceof File?URL.createObjectURL(e):e.url,[]),C=(0,i.useCallback)(e=>e instanceof File?"".concat(e.name,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)):e.id,[]),_=(0,i.useCallback)(()=>{p(e=>{e.files.forEach(e=>{e.preview&&e.file instanceof File&&e.file.type.startsWith("image/")&&URL.revokeObjectURL(e.preview)}),b.current&&(b.current.value="");let t=(0,a._)((0,l._)({},e),{files:[],errors:[]});return null==f||f(t.files),t})},[f]),v=(0,i.useCallback)(e=>{if(!e||0===e.length)return;let i=Array.from(e),n=[];if(p(e=>(0,a._)((0,l._)({},e),{errors:[]})),c||_(),c&&t!==1/0&&g.files.length+i.length>t){n.push("You can only upload a maximum of ".concat(t," files.")),p(e=>(0,a._)((0,l._)({},e),{errors:n}));return}let s=[];i.forEach(e=>{if(c&&g.files.some(t=>t.file.name===e.name&&t.file.size===e.size))return;if(e.size>r){n.push(c?"Some files exceed the maximum size of ".concat(o(r),"."):"File exceeds the maximum size of ".concat(o(r),"."));return}let t=m(e);t?n.push(t):s.push({file:e,id:C(e),preview:k(e)})}),s.length>0?(null==d||d(s),p(e=>{let t=c?[...e.files,...s]:s;return null==f||f(t),(0,a._)((0,l._)({},e),{files:t,errors:n})})):n.length>0&&p(e=>(0,a._)((0,l._)({},e),{errors:n})),b.current&&(b.current.value="")},[g.files.length,t,c,r,m,k,C,_,f,d]),x=(0,i.useCallback)(e=>{void 0!==e&&p(t=>{let r=t.files.find(t=>t.id===e);r&&r.preview&&r.file instanceof File&&r.file.type.startsWith("image/")&&URL.revokeObjectURL(r.preview);let i=t.files.filter(t=>t.id!==e);return null==f||f(i),(0,a._)((0,l._)({},t),{files:i,errors:[]})})},[f]),y=(0,i.useCallback)(()=>{p(e=>(0,a._)((0,l._)({},e),{errors:[]}))},[]),B=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),p(e=>(0,a._)((0,l._)({},e),{isDragging:!0}))},[]),F=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),!(e.relatedTarget&&e.relatedTarget instanceof Node&&e.currentTarget.contains(e.relatedTarget))&&p(e=>(0,a._)((0,l._)({},e),{isDragging:!1}))},[]),w=(0,i.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),D=(0,i.useCallback)(e=>{var t,r;if(e.preventDefault(),e.stopPropagation(),p(e=>(0,a._)((0,l._)({},e),{isDragging:!1})),(null===(t=b.current)||void 0===t||!t.disabled)&&(null===(r=e.dataTransfer)||void 0===r?void 0:r.files)&&e.dataTransfer.files.length>0){if(c)v(e.dataTransfer.files);else{let t=e.dataTransfer.files[0];t&&v([t])}}},[v,c]),E=(0,i.useCallback)(e=>{e.currentTarget.files&&e.currentTarget.files.length>0&&v(e.currentTarget.files)},[v]),Z=(0,i.useCallback)(()=>{b.current&&b.current.click()},[]),T=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a._)((0,l._)({},e),{type:"file",onChange:E,accept:e.accept||s,multiple:void 0!==e.multiple?e.multiple:c,ref:b,className:"sr-only","aria-label":h("Upload file"),tabIndex:-1})},[s,c,E]),z=(0,i.useCallback)(()=>({onDragEnter:B,onDragLeave:F,onDragOver:w,onDrop:D}),[B,F,w,D]);return[g,{addFiles:v,removeFile:x,clearFiles:_,clearErrors:y,handleDragEnter:B,handleDragLeave:F,handleDragOver:w,handleDrop:D,handleFileChange:E,openFileDialog:Z,getInputProps:T,getDragProps:z}]},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let r=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,r)).toFixed(t<0?0:t))+(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]||"Bytes")}},57641:function(e,t,r){r.d(t,{O:()=>g});var l=r(7409),a=r(99282),i=r(16584),n=r(58319),s=r(68833),o=r(82402),c=r(19081),u=r(58175),f=r(37313),d=r(6911);let h={tosCheckbox:"tosCheckbox-XbLWCT",tosCheckboxBox:"tosCheckboxBox-KXqPaU"},g=e=>{let{includeCheckbox:t=!0,onCheckboxChange:r=()=>{},checked:g=!1,addSubscribePreamble:p=!1,addSignupPreamble:b=!1,fontWeight:m="regular",size:k="regular",color:C="primary",textAlign:_="left",style:v}=e;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(n.Z,{onVisible:()=>{(0,s.j)(f.F.TERMS_OF_SERVICE_SEEN,{withCheckbox:t,initialCheckboxValue:g})}}),(0,i.BX)(c.gq,{as:"label",alignItems:"center",justifyContent:"center",gap:8,style:v,className:h.tosCheckbox,children:[t&&(0,i.tZ)("div",{className:h.tosCheckboxBox,children:(0,i.tZ)(o.X,{checked:g,onChange:e=>{(0,s.j)(f.F.TERMS_OF_SERVICE_CHECKBOX_CLICKED,{checkboxValue:e}),r(e)},size:"sm"})}),(0,i.BX)(u.xv.B4,(0,a._)((0,l._)({color:C,textAlign:_,fontWeight:m},"small"===k?{size:11,lineHeight:16}:{}),{children:[p?"By subscribing, ":b?"By creating an account, ":""," I agree to Substack's"," ",(0,i.tZ)(u.xv,{as:"a",href:(0,d._Q)(),target:"_blank",style:{textDecoration:"underline"},children:"Terms of Use"}),", and acknowledge its"," ",(0,i.tZ)(u.xv,{as:"a",href:(0,d.WF)(),target:"_blank",style:{textDecoration:"underline"},children:"Information Collection Notice"})," ","and"," ",(0,i.tZ)(u.xv,{as:"a",href:(0,d.Zz)(),target:"_blank",style:{textDecoration:"underline"},children:"Privacy Policy"}),"."]}))]})]})}}}]);