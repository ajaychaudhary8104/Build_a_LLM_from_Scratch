"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6371"],{87815:function(e,t,o){o.d(t,{Z:()=>r});let r={group:"group-JuxKi2",segment:"segment-XiSgAE",outlined:"outlined-kJWSK2"}},58474:function(e,t,o){o.d(t,{Qe:()=>Z,iL:()=>E,k2:()=>x,zw:()=>A});var r=o(7409),a=o(16584),n=o(30396),l=o(57061),i=o(36781),s=o(63049),c=o(53687),d=o(44404),u=o(95441),p=o(68833),_=o(98914),g=o(15771),h=o(19081),m=o(6490),v=o(63474),b=o(96302),w=o(58175),f=o(73943),y=o(60308),T=o(15181);let k=(e,t)=>{var o;let{postCoverImageUrl:r,pubCoverImageUrl:a,pub:n,themeVariables:l}=t,i=[],s=[],c=!1,d=l||n.theme,u=null!==(o=(null==d?void 0:d.web_bg_color)||(null==d?void 0:d.cover_bg_color))&&void 0!==o?o:"";switch(e){case"post_asset":r&&i.push("image"),((null==d?void 0:d.background_pop_color)||(null==d?void 0:d.background_pop))&&i.push("accent"),i.push("primary"),"#ffffff"!==u.toLowerCase()&&i.push("black&white"),c=!0;break;case"pub_shareable_image":a&&i.push("image"),i.push("primary"),s.push({type:"logo",label:"Logo"}),n.has_posts&&s.push({type:"posts",label:"Top posts"}),n.hero_text&&s.push({type:"description",label:"Description"});break;case"paid_subscription":case"pledged_subscription":((null==d?void 0:d.background_pop_color)||(null==d?void 0:d.background_pop))&&i.push("accent"),i.push("primary")}return{assetThemes:i,assetTypes:s,includePreviewTextToggle:c}};function E(e){var t;let o,v,b,w,E,D,{pub:I,item:O,isOpen:B,setOpen:P,themeVariables:N,width:M}=e,{iString:R}=(0,u.M1)(),{type:L,target_user:W,target_user_id:X,target_pledge_note:j,target_subscription_note:G,post:q}=O,F=I.logo_url||I.cover_photo_url||I.author_photo_url||(null===(t=I.author)||void 0===t?void 0:t.photo_url),U=null==q?void 0:q.cover_image,z="post_asset"===L,{assetThemes:J,assetTypes:K,includePreviewTextToggle:H}=k(L,{postCoverImageUrl:U,pubCoverImageUrl:F,pub:I,themeVariables:N}),Q=N||I.theme,[V,$]=(0,n.eJ)(z?"instagram":"stories"),[Y,ee]=(0,n.eJ)(J.find(e=>"image"===e)&&F?"image":J.find(e=>"accent"===e)&&((null==Q?void 0:Q.background_pop_color)||(null==Q?void 0:Q.background_pop))?"accent":"primary"),[et,eo]=(0,n.eJ)("logo");(0,n.d4)(()=>{B&&(0,p.j)(p.FP.SHARE_CENTER_CUSTOMIZE_ASSETS_MODAL_OPENED)},[B]);let[er,ea]=(0,n.eJ)(!0),en=()=>{switch(Y){case"image":return(0,r._)({aspectRatio:V,bgImage:!0},K.length&&{type:et},H&&er&&{hidePreviewText:!0});case"accent":return(0,r._)({aspectRatio:V,bgColor:(null==Q?void 0:Q.background_pop_color)||(null==Q?void 0:Q.background_pop),textColor:null==Q?void 0:Q.print_on_pop},K.length&&{type:et},H&&er&&{hidePreviewText:!0});case"primary":return(0,r._)({aspectRatio:V,bgColor:(null==Q?void 0:Q.web_bg_color)||(null==Q?void 0:Q.cover_bg_color),textColor:(null==Q?void 0:Q.print_on_web_bg_color)||(null==Q?void 0:Q.cover_print_primary)},K.length&&{type:et},H&&er&&{hidePreviewText:!0});default:return(0,r._)({aspectRatio:V,bgColor:"#ffffff",textColor:"#404040"},K.length&&{type:et},H&&er&&{hidePreviewText:!0})}},el=(0,_.K1)(),ei=()=>{P(!1)};switch(L){case"arr_10k_milestone":b=f.dD.ARR10K,v=(0,a.tZ)(l.d,{pub:I,milestone:b,style:{aspectRatio:V}}),w=(0,y.iNT)(I,b,{aspectRatio:V},"".concat(b," - ").concat("stories"===V?"vertical":V));break;case"arr_1k_milestone":b=f.dD.ARR1K,v=(0,a.tZ)(l.d,{pub:I,milestone:b,style:{aspectRatio:V}}),w=(0,y.iNT)(I,b,{aspectRatio:V},"".concat(b," - ").concat("stories"===V?"vertical":V));break;case"list_100_milestone":b=f.bq.List100,v=(0,a.tZ)(l.d,{pub:I,milestone:b,style:{aspectRatio:V}}),w=(0,y.iNT)(I,b,{aspectRatio:V},"".concat(b," - ").concat("stories"===V?"vertical":V));break;case"list_1k_milestone":b=f.bq.List1K,v=(0,a.tZ)(l.d,{pub:I,milestone:b,style:{aspectRatio:V}}),w=(0,y.iNT)(I,b,{aspectRatio:V},"".concat(b," - ").concat("stories"===V?"vertical":V));break;case"paid_subscription":v=(0,a.tZ)(d.uP,{pub:I,note:G,user:W||{id:X||0},style:en()}),w=(0,y.gGz)(I,W||{id:X||0},en(),{fileToDownload:"Message - ".concat("stories"===V?"vertical":V)}),D=()=>{(0,p.j)(p.FP.SUBSCRIPTION_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==W?void 0:W.id)||X,aspectRatio:V,source:"download-button"})};break;case"pledged_subscription":v=(0,a.tZ)(d.hi,{pub:I,note:j,user:W||{id:X||0},style:en()}),w=(0,y.uQO)(I,W||{id:X||0},en(),{fileToDownload:"Message - ".concat("stories"===V?"vertical":V)}),D=()=>{(0,p.j)(p.FP.PLEDGE_NOTE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{note_from_user_id:(null==W?void 0:W.id)||X,aspectRatio:V,source:"download-button"})};break;case"pub_shareable_image":o=R("Create shareable image"),v=(0,a.tZ)(s.H,{pub:I,style:en()}),E="".concat(I.name," - ").concat("stories"===V?"vertical":V),w=(0,y.p5u)(I,null,en(),{fileToDownload:E}),D=()=>{(0,p.j)(p.FP.PUBLICATION_MEDIA_ASSETS_IMAGE_DOWNLOADED,{aspectRatio:V,source:"download-button"})};break;case"post_asset":{let e=en(),{text:t,translatedText:r}="image"===Y?{text:"Image".concat(er?" - no preview":""),translatedText:R(er?"Image - no preview":"Image")}:"accent"===Y?{text:"Accent Color".concat(er?" - no preview":""),translatedText:R(er?"Accent Color - no preview":"Accent Color")}:"primary"===Y?{text:"Background Color".concat(er?" - no preview":""),translatedText:R(er?"Background Color - no preview":"Background Color")}:{text:"Black and White".concat(er?" - no preview":""),translatedText:R(er?"Black and White - no preview":"Black and White")};o=R("Create shareable image"),v=q&&(0,a.tZ)(i.Z,{pub:I,post:q,style:e,translatedText:r,size:420,hoverOverlay:!1}),E="".concat(r," - ").concat("stories"===V?"vertical":V),w=q&&(0,y.ChS)(I,q,e,E),D=()=>{(0,p.j)(p.FP.WRITER_MEDIA_ASSETS_IMAGE_DOWNLOADED,{post_id:null==q?void 0:q.id,type:t,aspectRatio:e.aspectRatio,share_center:!0,inline:!1,source:"download-button"})}}}["arr_10k_milestone","arr_1k_milestone","list_100_milestone","list_1k_milestone"].includes(L)?(o=R("Share milestone"),E="".concat(b," - ").concat("stories"===V?"vertical":V),D=()=>{(0,p.j)(p.FP.MILESTONE_MEDIA_ASSETS_IMAGE_DOWNLOADED,{milestone:b,aspectRatio:V,source:"download-button"})}):["paid_subscription","pledged_subscription"].includes(L)&&(o=R("Share message"),E="Message - ".concat("stories"===V?"vertical":V));let es=async()=>{null==D||D();let e=document.createElement("a");e.href=w,e.download=E,e.target="_blank",e.rel="noopener noreferrer",e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},ec=J.length>1,ed=K.length>1,eu=c.sl.length>1;return(0,a.BX)(m.u_,{isOpen:B,onClose:ei,width:M||640,overflow:"hidden",renderOverReactLaagPortal:!0,fullscreenMobile:!0,children:[(0,a.tZ)(m.xB,{onClose:ei,title:o,showClose:!0,showDivider:!0}),(0,a.tZ)(m.fe,{children:(0,a.BX)(h.tu,{gap:20,children:[(0,a.tZ)(h.hs,{className:T.Z.imageContainer,alignItems:"center",justifyContent:"center",children:v}),(0,a.BX)(x,{children:[ec&&(0,a.tZ)(Z,{assetThemes:J,assetTheme:Y,setAssetTheme:ee,theme:Q,pubCoverImageUrl:F}),ed&&(0,a.tZ)(C,{assetTypes:K,assetType:et,setAssetType:eo}),eu&&(0,a.tZ)(A,{aspectRatio:V,setAspectRatio:$,includeInstagram:z}),H&&(0,a.tZ)(S,{hidePreviewText:er,setHidePreviewText:ea})]})]})}),!el&&(0,a.tZ)(m.mz,{showDivider:!0,direction:"column",primaryButton:(0,a.tZ)(g.zx,{priority:"primary",onClick:es,children:R("Download image")})})]})}function Z(e){let{assetThemes:t,assetTheme:o,setAssetTheme:r,theme:n,pubCoverImageUrl:l}=e;return(0,a.BX)(h.tu,{gap:8,children:[(0,a.tZ)(w.xv.B4,{weight:"medium",translated:!0,children:"Background"}),(0,a.tZ)(h.gq,{gap:8,children:t.map(e=>(0,a.tZ)(c.rn,{value:e,isSelected:e===o,onClick:()=>r(e),themeVariables:n,coverImageUrl:l}))})]})}function C(e){let{assetTypes:t,assetType:o,setAssetType:r}=e;return(0,a.BX)(h.tu,{gap:8,children:[(0,a.tZ)(w.xv.B4,{weight:"medium",translated:!0,children:"Type"}),(0,a.tZ)(h.gq,{gap:8,children:t.map(e=>{let{type:t,label:n}=e;return(0,a.tZ)(c.$I,{label:n,isSelected:t===o,onClick:()=>r(t)})})})]})}function A(e){let{aspectRatio:t,setAspectRatio:o,includeInstagram:r}=e,n=r?c.sl:c.sl.filter(e=>"instagram"!==e);return(0,a.BX)(h.tu,{gap:8,children:[(0,a.tZ)(w.xv.B4,{weight:"medium",translated:!0,children:"Aspect Ratio"}),(0,a.tZ)(h.gq,{gap:8,children:n.map(e=>(0,a.tZ)(c.ar,{value:e,isSelected:e===t,onClick:()=>o(e)}))})]})}function S(e){let{hidePreviewText:t,setHidePreviewText:o}=e;return(0,a.BX)(h.tu,{gap:8,children:[(0,a.tZ)(w.xv.B4,{weight:"medium",translated:!0,children:"Preview Text"}),(0,a.tZ)(h.hs,{flex:"grow",alignItems:"center",children:(0,a.tZ)(b.rs,{checked:!t,onChange:e=>{o(!e),(0,p.j)(p.FP.SHARE_CENTER_CUSTOMIZE_ASSETS_PREVIEW_TEXT_TOGGLED,{includePreviewText:e})}})})]})}let x=(0,v.zo)({display:"flex",gap:20,overflowX:"auto",flex:"auto",justifyContent:"space-between"})},38023:function(e,t,o){o.d(t,{g:()=>d});var r=o(7409),a=o(98848),n=o(16584),l=o(98661),i=o(94184),s=o.n(i),c=o(53501);let d=(0,l.forwardRef)((e,t)=>{var{className:o,error:l=!1,font:i}=e,d=(0,a._)(e,["className","error","font"]);return(0,n.tZ)("textarea",(0,r._)({ref:t,className:s()(o,c.Z.input,c.Z.textarea,{[c.Z.error]:l},i&&c.Z["font-".concat(i)])},d))})},86190:function(e,t,o){o.d(t,{U:()=>a});var r=o(48980);let a=e=>async t=>{let o="before";t({type:"conversation-request_initial",payload:{conversationId:e}});try{let a=await (0,r.rd)("/api/v1/messages/dm/".concat(e));t({type:"conversation-load_more",payload:{edge:o,cursor:null,page:a}})}catch(r){t({type:"conversation-request_error",payload:{conversationId:e,edge:o,cursor:null,error:r}})}}}}]);