(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3985"],{18446:function(e,n,i){var t=i(90939);e.exports=function(e,n){return t(e,n)}},57824:function(e){function n(e,n,i,t){return Math.round(e/i)+" "+t+(n>=1.5*i?"s":"")}e.exports=function(e,i){i=i||{};var t,o,s,a,d=typeof e;if("string"===d&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var n=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(n){var i=parseFloat(n[1]);switch((n[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return 864e5*i;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*i;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*i;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===d&&isFinite(e)){return i.long?(o=Math.abs(t=e))>=864e5?n(t,o,864e5,"day"):o>=36e5?n(t,o,36e5,"hour"):o>=6e4?n(t,o,6e4,"minute"):o>=1e3?n(t,o,1e3,"second"):t+" ms":(a=Math.abs(s=e))>=864e5?Math.round(s/864e5)+"d":a>=36e5?Math.round(s/36e5)+"h":a>=6e4?Math.round(s/6e4)+"m":a>=1e3?Math.round(s/1e3)+"s":s+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},79546:function(e,n,i){var t=i(62195),o=[i(39627),i(58855),i(45580),i(8728)];e.exports=t.createStore(o,[])},68833:function(e,n,i){"use strict";i.d(n,{uF:()=>t.S}),i(47102),i(55229),i(8090);var t=i(53516)},8090:function(e,n,i){"use strict";i.d(n,{Kl:()=>y,Md:()=>P});var t,o,s=i(21811),a=i(15872),d=i(55229),r=i(43300),l=i(49762),u=i(96708),c=i(98914);i(31406),i(98012);var w=i(37313),p=i(60308),v=i(26111),h=i(41935);i(84864);let m=w.F,f="undefined"!=typeof window,g=!!(f&&window.navigator&&window.navigator.sendBeacon),b=!(0,c.w1)()&&g,_=new r.T({batchOptions:b?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,n){f&&(b&&n&&e.push(M(e,n)),new Image().src=(0,p.n1t)(b?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,n){if(!f)return;e.push(M(e,"beacon",n));let i=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",i)}}),y=()=>{f&&b&&(window.addEventListener("beforeunload",e=>{_.sendBeacon(e)}),window.addEventListener("pagehide",e=>{_.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&_.sendBeacon(e)}),setInterval(()=>{_.intervalFlush()},6e4))},S=f&&window!=window.top&&(0,h.l)(c.EH),E="browser";f&&(navigator.standalone||(null===(t=(o=window).matchMedia)||void 0===t?void 0:t.call(o,"(display-mode: standalone)").matches))&&(E="standalone");let k=()=>document.location.pathname.startsWith("/p/"),x=()=>{var e,n,i;let t=window._preloads,o=(null==t?void 0:null===(e=t.post)||void 0===e?void 0:e.id)&&(null==t?void 0:t.pub),s=!!(null==t?void 0:null===(n=t.post)||void 0===n?void 0:n.slug)&&(null==t?void 0:null===(i=t.post)||void 0===i?void 0:i.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1];return!!(o&&k()&&s)},L=e=>e?e.is_subscribed?"Paid subs":e.is_free_subscribed?"Free subs":"Anonymous":"Anonymous";function P(){var e,n,i;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(document.location.pathname.startsWith("/embed")&&f&&(null===(i=window)||void 0===i?void 0:null===(n=i._preloads)||void 0===n?void 0:null===(e=n.pub)||void 0===e?void 0:e.embed_tracking_disabled))return;!function(e){var n,i,t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let s=B(e,o);_.add(s),(null===(t=window)||void 0===t?void 0:null===(i=t._preloads)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.is_global_admin)&&console.log("EVENT: ".concat(e),o)}(m.PAGES,Object.assign(function(){let e={};if(f){let n=window._preloads&&"post"in window._preloads&&window._preloads.post,i=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname);i&&n&&i[1]===n.slug&&(e.post_id=n.id,e.post_audience=n.audience,e.post_type=n.type)}return e}(),t));let o=(0,d.xL)();if(o&&(new Image().src="https://www.facebook.com/tr?id=".concat(o,"&ev=PageView")),(0,u.g)("pageview"),(0,d.XY)("pageview"),(0,d.Hx)("page_view"),f&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,l.ZP)("add_section_and_tag_metadata")){if(k()&&!x())return;if(k()){let n=window._preloads;e.data={audience:L(null==n?void 0:n.user)}}}window.PARSELY.beacon.trackPageView(e)}}function B(e){var n,i,t,o,d,r,l,u,w;let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=null;try{h=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let m={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:a.W,iframeVisitId:S,r:(0,v.x)("r"),magicUserId:"undefined"!=typeof window&&(null===(t=window)||void 0===t?void 0:null===(i=t._preloads)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.is_magic)?window._preloads.user.id:void 0},p),context:{client_type:"web",displayMode:E,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!==(r="undefined"!=typeof window&&window.innerHeight)&&void 0!==r?r:0,width:null!==(l="undefined"!=typeof window&&window.innerWidth)&&void 0!==l?l:0},campaign:(0,s.l)(),timezone:h,screen:{height:null!==(u="undefined"!=typeof window&&(null===(o=window.screen)||void 0===o?void 0:o.height))&&void 0!==u?u:0,width:null!==(w="undefined"!=typeof window&&(null===(d=window.screen)||void 0===d?void 0:d.width))&&void 0!==w?w:0}}};return(0,c.m)(JSON.stringify(m))}function M(e,n,i){let t=e.length,o=e.map(e=>e.length).reduce((e,n)=>e+n,0);return B(m.FIREHOSE_BATCH_SENT,{dataSize:o,batchSize:t,batchType:n,eventType:null==i?void 0:i.type})}},23854:function(e,n,i){"use strict";i.d(n,{us:()=>o});var t,o=((t={}).comments_disabled="comments_disabled",t.free_subscription_required="free_subscription_required",t.paid_subscription_required="paid_subscription_required",t.founding_subscription_required="founding_subscription_required",t)},35934:function(e,n,i){"use strict";i.d(n,{gz:()=>o});var t=i(27412);class o extends Error{constructor(e,n={},i=!1,o=null){let s,a;super(e),(0,t._)(this,"status",void 0),(0,t._)(this,"userVisible",void 0),(0,t._)(this,"messageHtml",void 0),(0,t._)(this,"response",void 0),(0,t._)(this,"type",void 0),(0,t._)(this,"metadata",void 0),this.name=this.constructor.name;let d=null,r=null,l=null;if("object"==typeof n){var u,c,w,p,v,h;s=null!==(u=n.status)&&void 0!==u?u:500,i=null!==(c=n.userVisible)&&void 0!==c&&c,o=null!==(w=n.messageHtml)&&void 0!==w?w:null,d=null!==(p=n.responseBody)&&void 0!==p?p:null,r=null!==(v=n.type)&&void 0!==v?v:null,l=null!==(h=n.metadata)&&void 0!==h?h:null}else s=n;this.status=s,this.userVisible=!!d||i,this.messageHtml=o,this.type=r,this.metadata=l,d?a=d:this.userVisible?o?a={errors:[{msg:e,msgHTML:o}],type:"list"}:(a={error:e,type:"single"},this.type&&(a.type=this.type),this.metadata&&(a.metadata=this.metadata)):a={error:""},this.response={body:a},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}}]);