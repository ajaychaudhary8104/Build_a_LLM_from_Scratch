"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["9075"],{7149:function(){},64729:function(e,t,n){n.d(t,{i:()=>a});var r=n(16584),o=n(4615);let a=e=>{let{children:t,disable:n}=e;return n?(0,r.tZ)(r.HY,{children:t}):(0,r.tZ)(o.f6,{theme:"light-theme",children:t})}},73410:function(e,t,n){n(98661)},68709:function(e,t,n){n.d(t,{OV:()=>p,Y5:()=>h,__:()=>f});var r=n(7409),o=n(99282),a=n(98848),c=n(16584),u=n(94184),s=n.n(u),i=n(98661),l=n(19081),d=n(58175);let f=(0,i.forwardRef)((e,t)=>{var{className:n}=e,o=(0,a._)(e,["className"]);return(0,c.tZ)(d.xv.B4,(0,r._)({as:"label",weight:"medium",color:"primary",ref:t,cursor:"inherit",className:s()("pencraft",n)},o))}),h=(0,i.forwardRef)((e,t)=>{var{className:n,children:u}=e,i=(0,a._)(e,["className","children"]);return(0,c.tZ)(f,(0,o._)((0,r._)({ref:t,className:s()("pencraft",n)},i),{children:(0,c.BX)(l.gq,{gap:4,alignItems:"center",children:[u,(0,c.tZ)(b,{})]})}))}),p=(0,i.forwardRef)((e,t)=>{var{className:n,children:u,hint:i}=e,d=(0,a._)(e,["className","children","hint"]);return(0,c.tZ)(f,(0,o._)((0,r._)({ref:t,className:s()("pencraft",n)},d),{children:(0,c.BX)(l.gq,{gap:4,justifyContent:"space-between",children:[u,(0,c.tZ)(m,{text:i})]})}))}),m=e=>{let{text:t}=e;return(0,c.tZ)(d.xv,{color:"secondary",weight:"regular",children:t})},b=()=>(0,c.tZ)(d.xv,{as:"span",color:"error",children:"*"})},17688:function(e,t,n){n.d(t,{d:()=>m,i:()=>p});var r=n(7409),o=n(99282),a=n(98848),c=n(16584),u=n(94184),s=n.n(u),i=n(98661),l=n(86374),d=n(19081),f=n(51776),h=n(63584);let p=(0,i.forwardRef)((e,t)=>{var{className:n,error:u=!1,leading:i,trailing:p=(0,c.tZ)(l.Z,{}),children:m,flex:b="auto"}=e,g=(0,a._)(e,["className","error","leading","trailing","children","flex"]);return(0,c.BX)(d.hs,{position:"relative",flex:b,children:[(0,c.tZ)("select",(0,o._)((0,r._)({},g),{className:s()(n,h.Z.select,u&&h.Z.error,g.disabled&&h.Z.disabled,i?h.Z.leading:null,p?h.Z.trailing:null),ref:t,children:m})),i&&(0,c.tZ)(f.b9,{position:"leading",className:s()(u&&h.Z.error,g.disabled&&h.Z.disabled),children:i}),p&&(0,c.tZ)(f.b9,{position:"trailing",className:s()(u&&h.Z.error,g.disabled&&h.Z.disabled),children:p})]})});p.displayName="SelectNative";let m=e=>{let{children:t}=e;return(0,c.tZ)("option",{value:"",disabled:!0,selected:!0,children:t},"placeholder")}},64300:function(e,t,n){n.d(t,{g:()=>d,y:()=>f});var r=n(7409),o=n(99282),a=n(98848),c=n(16584),u=n(94184),s=n.n(u),i=n(98661),l=n(68686);let d=(0,i.forwardRef)((e,t)=>{var{className:n,error:u=!1,rows:i=4,maxlength:d}=e,f=(0,a._)(e,["className","error","rows","maxlength"]);return(0,c.tZ)("textarea",(0,o._)((0,r._)((0,o._)((0,r._)({},f),{rows:i}),void 0!==d?{maxlength:d}:{}),{className:s()("pencraft",n,l.Z.textarea,l.Z.inputText,u&&l.Z.error,f.disabled&&l.Z.disabled,f.readOnly&&l.Z.readOnly),ref:t}))});function f(e){let{value:t,onChange:n}=e,[r,o]=(0,i.useState)(t||"");return(0,i.useEffect)(()=>{t!==r&&o(null!=t?t:"")},[t]),{value:r,setValue:o,handleChange:e=>{o(e.currentTarget.value),null==n||n(e)}}}},6630:function(e,t,n){n.d(t,{Z:()=>l});var r=n(16584),o=n(94184),a=n.n(o),c=n(15771),u=n(19081),s=n(58175),i=n(87089);let l=e=>{let{options:t,value:n,onChange:o}=e;return(0,r.tZ)(u.gq,{gap:4,children:t.map(e=>{let t="string"==typeof e?e:e.value;return(0,r.tZ)(d,{onClick:()=>{o(t)},selected:t===n,children:"string"==typeof e?e:(0,r.BX)(u.gq,{alignItems:"center",gap:8,paddingY:4,children:[e.icon?e.icon:null,e.label]})},t)})})},d=e=>{let{children:t,selected:n,onClick:o}=e;return(0,r.tZ)(c.kG,{resetCss:!0,onClick:o,children:(0,r.tZ)(s.xv.B4,{className:a()(i.Z.pill,{[i.Z.pillSelected]:n}),children:t})})}},95551:function(e,t,n){n.d(t,{d:()=>s});var r=n(7409),o=n(99282),a=n(16584),c=n(48980),u=n(70379);function s(){let e=(0,u.pm)();return(t,n)=>{e.popToast(e=>(0,a.tZ)(u.FN,(0,o._)((0,r._)({},e),{text:(0,c.i)(t,n)})))}}},86551:function(e,t,n){n.d(t,{BN:()=>x,F2:()=>C,Fp:()=>U,HQ:()=>S,Lb:()=>w,S_:()=>N,T6:()=>W,U0:()=>y,Ui:()=>L,aZ:()=>T,op:()=>B,pw:()=>R,sj:()=>Z,tX:()=>k});var r=n(58865),o=n(68833),a=n(40894),c=n(60308),u=n(63651),s=n(84864),i=n(47929),l=n(68303),d=n(39947);function f(){let e=(0,r._)(["Start writing today. Use the button below to create a Substack of your own"]);return f=function(){return e},e}function h(){let e=(0,r._)(["Share ",""]);return h=function(){return e},e}function p(){let e=(0,r._)(["Get ","% off a group subscription"]);return p=function(){return e},e}function m(){let e=(0,r._)(["Get a group subscription"]);return m=function(){return e},e}function b(){let e=(0,r._)(["Give a gift subscription"]);return b=function(){return e},e}function g(){let e=(0,r._)(["","! Subscribe for free to receive new posts and support my work."]);return g=function(){return e},e}function _(){let e=(0,r._)(["",". To receive new posts and support my work, consider becoming a free or paid subscriber."]);return _=function(){return e},e}function v(){let e=(0,r._)(["","! This post is public so feel free to share it."]);return v=function(){return e},e}let y=e=>(t,n)=>{let{iString:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:"".concat(a.W.CHECKOUT_URL,"&donate=true"),text:r("Donate Subscriptions")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},w=e=>(t,n)=>{let{iString:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:"".concat(a.W.LEADERBOARD_URL,"&utm_source=").concat(i.b3.post),text:r("Refer a friend")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},S=e=>{let{writerReferralCode:t,publication:n,postId:r}=e;return(e,o)=>{let{iString:a,iTemplate:u}=I18N.i({pub:n});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!e.schema.nodes.captionedWriterReferralButton)return console.error("captionedWriterReferralButton node type not found in schema"),!1;if(!e.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let s=u(f()),h={url:"".concat((0,c.Fnz)(t||""),"?utm_source=").concat(i.b3.substack,"&utm_context=").concat(i.gD.post,"&utm_content=").concat(r,"&utm_campaign=").concat(i.VX.writerReferralButton),text:a("Start a Substack")},p=e.schema.nodes.captionedWriterReferralButton.create(h,e.schema.nodes.ctaCaption.create(null,[e.schema.text(s)]));return o&&o((0,l.o4)(e,p)),!0}},Z=e=>(t,n)=>{let{iString:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:a.W.HALF_MAGIC_COMMENTS_URL,text:r("Leave a comment")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},C=(e,t,n)=>(r,a)=>{if((0,o.j)(o.FP.READER_SURVEY_LINKED_IN_POST,{editorVersion:"1",surveyId:t.id}),!r.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(r,r.schema.nodes.button))return!1;let c={url:"".concat((0,u.h8g)(e,t.id)),text:n};return a&&a((0,l.o4)(r,r.schema.nodes.button.create(c))),!0},x=e=>(t,n)=>{let{iString:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:a.W.SHARE_URL,text:r("Share")};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},N=e=>(t,n)=>{let{iTemplate:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:a.W.SHARE_PUB_URL,text:r(h(),e.name)};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},R=e=>{let{couponPub:t,scrollParent:n,parentClass:r,get_coupons:o,insert_coupon:a,SelectField:u,openPrompt:s,closePrompt:i,getNetworkErrorMessage:l}=e;return(e,f,h)=>{let{iString:p}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let m={parentClass:r,root:n?document.querySelector(".".concat(n)):h.dom.parentNode,scrollParent:n,offsetTop:10},b=Object.assign({title:p("Loading..."),no_buttons:!0,language:t.language},m);return s(b),o().then(n=>{i(b);let r=n.map(e=>{var t;return{label:null!==(t=e.name)&&void 0!==t?t:"",value:e}}).concat([{label:p("Create new offer"),value:{create_new:!0}}]),o={coupon:new u({label:p("Select offer..."),required:!0,options:r,onChange:e=>{e&&"create_new"in e&&e.create_new&&(i(l),window.open("".concat((0,c.SVA)(t),"/publish/offers"),"_blank"))}})},l=Object.assign({title:p("Special Offer"),fields:o,language:null==t?void 0:t.language,onSubmit:t=>{let{coupon:n}=t;a({coupon:n,state:e,dispatch:h.dispatch,schema:e.schema})},onClose:()=>{h.focus()}},m);s(l)}).catch(e=>{i(b),alert(l(e))}),!1}},B=e=>{let{scrollParent:t,parentClass:n,TextField:r,openPrompt:o,publication:a}=e;return(e,c,u)=>{let{iString:s}=I18N.i({pub:a});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let i={parentClass:n,title:s("Create a button"),root:t?document.querySelector(".".concat(t)):u.dom.parentNode,scrollParent:t,offsetTop:10,language:null==a?void 0:a.language,fields:{text:new r({label:s("Enter text..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(e.length>40)return s("Too long")}}),href:new r({label:s("Enter URL..."),required:!0,clean:e=>(e||"").trim(),validate:e=>{if(!/^%%.*%%$/.test(e)){try{let t=new URL(e);if(["http:","https:","mailto:"].includes(t.protocol))return}catch(e){}return s("Invalid URL")}}})}};return i.onSubmit=t=>{let n={url:t.href,text:t.text};if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;c&&u.dispatch((0,l.o4)(e,e.schema.nodes.button.create(n)))},i.onClose=()=>{u.focus()},o(i),!0}},U=e=>{let{publication:t}=e;return(e,n)=>{let{iTemplate:r}=I18N.i({pub:t});if(!e.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(e,e.schema.nodes.button))return!1;let o=t.default_group_coupon,c={url:"".concat(a.W.CHECKOUT_URL,"group=true").concat(o?"&coupon=".concat(o):""),text:(0,s.getSubscriptionSentenceWithCustomWords)(t,()=>{var e;return o&&t.default_group_coupon_percent_off?r(p(),null!==(e=t.default_group_coupon_percent_off.split(".")[0])&&void 0!==e?e:""):r(m())},e=>o&&t.default_group_coupon_percent_off?"Get ".concat(t.default_group_coupon_percent_off.split(".")[0],"% off a group ").concat(e.subscription):"Get a group ".concat(e.subscription))};return n&&n((0,l.o4)(e,e.schema.nodes.button.create(c))),!0}},T=e=>(t,n)=>{let{iTemplate:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o={url:"".concat(a.W.CHECKOUT_URL,"&gift=true"),text:(0,s.getSubscriptionSentenceWithCustomWords)(e,()=>r(b()),e=>"Give a gift ".concat(e.subscription))};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(o))),!0},k=e=>(t,n)=>{if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let r={url:a.W.CHECKOUT_URL,text:(0,s.getSubscribeText)(e,{now:!0}),language:e.language};return n&&n((0,l.o4)(t,t.schema.nodes.button.create(r))),!0},L=e=>(t,n)=>{let{iTemplate:r}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.subscribeWidget)return console.error("subscribeWidget node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let o="enabled"!==e.payments_state?r(g(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)):r(_(),e.author_name===e.name?"This Substack is reader-supported":"".concat(e.name," is a reader-supported publication")),c={url:a.W.CHECKOUT_URL,text:(0,s.getSubscribeText)(e),language:e.language},u=t.schema.nodes.subscribeWidget.create(c,[t.schema.nodes.ctaCaption.create(null,[t.schema.text(o)])]);return n&&n((0,l.o4)(t,u)),!0},W=e=>(t,n)=>{let{iString:r,iTemplate:o}=I18N.i({pub:e});if(!t.schema.nodes.button)return console.error("Button node type not found in schema"),!1;if(!t.schema.nodes.captionedShareButton)return console.error("captionedShareButton node type not found in schema"),!1;if(!t.schema.nodes.ctaCaption)return console.error("ctaCaption node type not found in schema"),!1;if(!(0,d.o)(t,t.schema.nodes.button))return!1;let c=o(v(),e.author_name===e.name?"Thanks for reading":"Thanks for reading ".concat(e.name)),u={url:a.W.SHARE_URL,text:r("Share")},s=t.schema.nodes.captionedShareButton.create(u,t.schema.nodes.ctaCaption.create(null,[t.schema.text(c)]));return n&&n((0,l.o4)(t,s)),!0}},57208:function(e,t,n){n.d(t,{f2:()=>a});var r=n(68303);let o=e=>!(0,r.DY)(e.doc.toJSON(),e=>"paywall"===e.type),a=e=>(t,n)=>{if(!o(t))return!1;let{schema:r,tr:a}=t,u=r.nodes.paywall.create();return 1===a.selection.anchor?c(e)(t,n):(a.insert(a.selection.anchor,u),n&&(n(a),e()),!0)},c=e=>(t,n)=>{if(!o(t))return!1;let{schema:r,tr:a}=t,c=r.nodes.paywall.create(),u=0,s=0;for(;u<10&&s<3;){let e=t.doc.resolve(u).nodeAfter;if(!e)break;u+=e.nodeSize,s++}return a.insert(u,c),n&&(n(a),e()),!0}},55578:function(e,t,n){n.d(t,{u:()=>o});var r=n(84864);function o(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2];e.match(/^([a-z]+:)?\/\//i)||(e="http://".concat(e));try{t=new URL(e)}catch(t){return console.error("Failed to parse URL",e,t),e}t.hostname=t.hostname.replace(/^www\./,""),t.pathname=t.pathname.replace(/\/+$/,""),t.hash="";let a=new Set;t.hostname.includes("youtube")&&a.add("v"),t.searchParams.forEach((e,n)=>{a.has(n)||t.searchParams.delete(n)});let c=t.toString().replace(/^\w+:\/\//,"").replace(/\/+$/,"");return c?o?(0,r.truncateText)(c,n):c:e}}}]);