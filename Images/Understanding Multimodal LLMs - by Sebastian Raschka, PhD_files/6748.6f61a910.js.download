(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6748"],{18446:function(e,s,t){var i=t(90939);e.exports=function(e,s){return i(e,s)}},57824:function(e){function s(e,s,t,i){return Math.round(e/t)+" "+i+(s>=1.5*t?"s":"")}e.exports=function(e,t){t=t||{};var i,a,n,r,o=typeof e;if("string"===o&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(s){var t=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}(e);if("number"===o&&isFinite(e)){return t.long?(a=Math.abs(i=e))>=864e5?s(i,a,864e5,"day"):a>=36e5?s(i,a,36e5,"hour"):a>=6e4?s(i,a,6e4,"minute"):a>=1e3?s(i,a,1e3,"second"):i+" ms":(r=Math.abs(n=e))>=864e5?Math.round(n/864e5)+"d":r>=36e5?Math.round(n/36e5)+"h":r>=6e4?Math.round(n/6e4)+"m":r>=1e3?Math.round(n/1e3)+"s":n+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},79546:function(e,s,t){var i=t(62195),a=[t(39627),t(58855),t(45580),t(8728)];e.exports=i.createStore(a,[])},68833:function(e,s,t){"use strict";t.d(s,{uF:()=>i.S}),t(47102),t(55229),t(8090);var i=t(53516)},8090:function(e,s,t){"use strict";t.d(s,{Kl:()=>g,Md:()=>E});var i,a,n=t(21811),r=t(15872),o=t(55229),u=t(43300),c=t(49762),d=t(96708),l=t(98914);t(31406),t(98012);var p=t(37313),f=t(60308),m=t(26111),h=t(41935);t(84864);let v=p.F,b="undefined"!=typeof window,w=!!(b&&window.navigator&&window.navigator.sendBeacon),I=!(0,l.w1)()&&w,D=new u.T({batchOptions:I?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,s){b&&(I&&s&&e.push(L(e,s)),new Image().src=(0,f.n1t)(I?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,s){if(!b)return;e.push(L(e,"beacon",s));let t=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",t)}}),g=()=>{b&&I&&(window.addEventListener("beforeunload",e=>{D.sendBeacon(e)}),window.addEventListener("pagehide",e=>{D.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&D.sendBeacon(e)}),setInterval(()=>{D.intervalFlush()},6e4))},y=b&&window!=window.top&&(0,h.l)(l.EH),_="browser";b&&(navigator.standalone||(null===(i=(a=window).matchMedia)||void 0===i?void 0:i.call(a,"(display-mode: standalone)").matches))&&(_="standalone");let k=()=>document.location.pathname.startsWith("/p/"),N=()=>{var e,s,t;let i=window._preloads,a=(null==i?void 0:null===(e=i.post)||void 0===e?void 0:e.id)&&(null==i?void 0:i.pub),n=!!(null==i?void 0:null===(s=i.post)||void 0===s?void 0:s.slug)&&(null==i?void 0:null===(t=i.post)||void 0===t?void 0:t.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1];return!!(a&&k()&&n)},S=e=>e?e.is_subscribed?"Paid subs":e.is_free_subscribed?"Free subs":"Anonymous":"Anonymous";function E(){var e,s,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(document.location.pathname.startsWith("/embed")&&b&&(null===(t=window)||void 0===t?void 0:null===(s=t._preloads)||void 0===s?void 0:null===(e=s.pub)||void 0===e?void 0:e.embed_tracking_disabled))return;!function(e){var s,t,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let n=P(e,a);D.add(n),(null===(i=window)||void 0===i?void 0:null===(t=i._preloads)||void 0===t?void 0:null===(s=t.user)||void 0===s?void 0:s.is_global_admin)&&console.log("EVENT: ".concat(e),a)}(v.PAGES,Object.assign(function(){let e={};if(b){let s=window._preloads&&"post"in window._preloads&&window._preloads.post,t=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname);t&&s&&t[1]===s.slug&&(e.post_id=s.id,e.post_audience=s.audience,e.post_type=s.type)}return e}(),i));let a=(0,o.xL)();if(a&&(new Image().src="https://www.facebook.com/tr?id=".concat(a,"&ev=PageView")),(0,d.g)("pageview"),(0,o.XY)("pageview"),(0,o.Hx)("page_view"),b&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,c.ZP)("add_section_and_tag_metadata")){if(k()&&!N())return;if(k()){let s=window._preloads;e.data={audience:S(null==s?void 0:s.user)}}}window.PARSELY.beacon.trackPageView(e)}}function P(e){var s,t,i,a,o,u,c,d,p;let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=null;try{h=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let v={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:r.W,iframeVisitId:y,r:(0,m.x)("r"),magicUserId:"undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:null===(t=i._preloads)||void 0===t?void 0:null===(s=t.user)||void 0===s?void 0:s.is_magic)?window._preloads.user.id:void 0},f),context:{client_type:"web",displayMode:_,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!==(u="undefined"!=typeof window&&window.innerHeight)&&void 0!==u?u:0,width:null!==(c="undefined"!=typeof window&&window.innerWidth)&&void 0!==c?c:0},campaign:(0,n.l)(),timezone:h,screen:{height:null!==(d="undefined"!=typeof window&&(null===(a=window.screen)||void 0===a?void 0:a.height))&&void 0!==d?d:0,width:null!==(p="undefined"!=typeof window&&(null===(o=window.screen)||void 0===o?void 0:o.width))&&void 0!==p?p:0}}};return(0,l.m)(JSON.stringify(v))}function L(e,s,t){let i=e.length,a=e.map(e=>e.length).reduce((e,s)=>e+s,0);return P(v.FIREHOSE_BATCH_SENT,{dataSize:a,batchSize:i,batchType:s,eventType:null==t?void 0:t.type})}},23854:function(e,s,t){"use strict";t.d(s,{us:()=>a});var i,a=((i={}).comments_disabled="comments_disabled",i.free_subscription_required="free_subscription_required",i.paid_subscription_required="paid_subscription_required",i.founding_subscription_required="founding_subscription_required",i)},13253:function(e,s,t){"use strict";function i(e){if(null==e)return{};try{var s,t,i;let a=new URL(e);if("substack:"!==a.protocol)return{};let n={},r=a.pathname.split("/").filter(e=>e.length>0),o=new URLSearchParams(a.search),u={};o.forEach((e,s)=>{u[s]=e}),Object.keys(u).length>0&&(n.queryParams=u);let c=a.host;if(null==c&&0===Object.keys(u).length)return n;switch(c){case"users":r[0]&&"me"!==r[0]&&(n.surface="profile",n.userID=Number(r[0]),n.surfaceID=n.userID);break;case"posts":case"post":r[0]&&(n.postID=Number(r[0]),n.surface="post",n.surfaceID=n.postID),"comments"===r[1]&&(n.commentID=r[2],n.surface="post-comment",n.surfaceID=Number(r[0]),r[2]&&(n.surfaceID=Number(n.commentID)));break;case"publications":r[0]&&(n.publicationID=Number(r[0]),n.surface="publication",n.surfaceID=n.publicationID),"posts"===r[1]&&r[2]&&(n.slug=r[2],n.surface="post",n.surfaceID=n.slug),"drafts"===r[1]&&r[2]&&(n.draftID=r[2]),"chat"===r[1]&&(n.surface="publication-chat",n.surfaceID=n.publicationID),"threads"===r[1]&&(n.surface="publication-threads",n.surfaceID=n.publicationID);break;case"notes":n.surface="notes",r[0]&&(n.noteID=r[0],n.surfaceID=n.noteID,"module"===r[0]&&null!=r[1]&&(n.surface="notes-module",n.surfaceID=r[1]));break;case"communityPosts":r[0]&&(n.communityPostID=r[0],n.surface="community-post",n.surfaceID=n.communityPostID);break;case"communityComments":r[0]&&(n.replyID=r[0],n.surface="community-comments",n.surfaceID=n.replyID);break;case"messages":"dm"===r[0]&&(n.surface="dm","user"===r[1]&&r[2]?n.userID=Number(r[2]):r[1]&&(n.threadID=r[1],n.surface="dm-thread",n.surfaceID=n.threadID,"reply"===r[2]&&r[3]&&(n.messageID=r[3],n.surface="dm-reply",n.surfaceID=n.messageID)));break;case"accept-gift":r[0]&&(n.giftID=r[0],n.surfaceID=n.giftID,n.surface="accept-gift");break;case"send-reader-gifts":r[0]&&(n.giftID=r[0],n.surfaceID=n.giftID,n.surface="send-reader-gift");break;case"post-collection":r[0]&&(n.collectionID=r[0]);break;case"live-stream":r[0]&&(n.streamID=r[0],n.surface="live-stream",n.surfaceID=n.streamID,"invite"===r[1]&&r[2]&&(n.inviteID=r[2]));break;case"feed":n.surface="feed","topic"===r[0]&&r[1]?(n.topicID=r[1],n.surface="feed-topic",n.surfaceID=n.topicID):r[0]&&(n.noteID=r[0],n.surfaceID=n.noteID);break;case"post-composer":r[0]&&(n.draftID=r[0]);break;case"media-feed":r[0]&&(n.surface="media-feed",n.noteID=r[0],n.surfaceID=n.noteID);break;case"publication":r[0]&&(n.publicationID=Number(r[0]),n.surface="publication",n.surfaceID=n.publicationID,"post"===r[1]&&r[2]&&(n.postID=Number(r[2]),n.surface="post",n.surfaceID=n.postID));break;case"leaderboard":r[0]&&(n.surface="leaderboard",n.surfaceID=r[0]);break;case"user-suggestions":n.surface="user-suggestions";break;case"search":n.surface="app-search";break;case"discover":n.surface="discover"}return u.query&&(n.query=u.query,"app-search"===n.surface&&(n.surfaceID=n.query)),u.url&&(n.url=u.url),null!=u.name&&null!=u.id&&(n.categoryID=u.id,"discover"===n.surface&&(n.surfaceID=n.categoryID)),(null!=u.postId||null!=u.post_id)&&(n.postID=Number(null!==(s=u.postId)&&void 0!==s?s:u.post_id),n.surface="posts"===c?"post":c,n.surfaceID=n.postID),(null!=u.publicationId||null!=u.publication_id)&&(n.publicationID=Number(null!==(t=u.publicationId)&&void 0!==t?t:u.publication_id),n.surface="posts"===c?"post":c,n.surfaceID=null!==(i=n.postID)&&void 0!==i?i:n.publicationID),null!=n.publicationID&&isNaN(n.publicationID)&&delete n.publicationID,null!=n.userID&&isNaN(n.userID)&&delete n.userID,null!=n.postID&&isNaN(n.postID)&&delete n.postID,null!=n.surfaceID&&"string"!=typeof n.surfaceID&&isNaN(n.surfaceID)&&delete n.surfaceID,n}catch(e){return{}}}t.d(s,{Rk:()=>i}),t(14773)},35934:function(e,s,t){"use strict";t.d(s,{gz:()=>a});var i=t(27412);class a extends Error{constructor(e,s={},t=!1,a=null){let n,r;super(e),(0,i._)(this,"status",void 0),(0,i._)(this,"userVisible",void 0),(0,i._)(this,"messageHtml",void 0),(0,i._)(this,"response",void 0),(0,i._)(this,"type",void 0),(0,i._)(this,"metadata",void 0),this.name=this.constructor.name;let o=null,u=null,c=null;if("object"==typeof s){var d,l,p,f,m,h;n=null!==(d=s.status)&&void 0!==d?d:500,t=null!==(l=s.userVisible)&&void 0!==l&&l,a=null!==(p=s.messageHtml)&&void 0!==p?p:null,o=null!==(f=s.responseBody)&&void 0!==f?f:null,u=null!==(m=s.type)&&void 0!==m?m:null,c=null!==(h=s.metadata)&&void 0!==h?h:null}else n=s;this.status=n,this.userVisible=!!o||t,this.messageHtml=a,this.type=u,this.metadata=c,o?r=o:this.userVisible?a?r={errors:[{msg:e,msgHTML:a}],type:"list"}:(r={error:e,type:"single"},this.type&&(r.type=this.type),this.metadata&&(r.metadata=this.metadata)):r={error:""},this.response={body:r},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}}]);