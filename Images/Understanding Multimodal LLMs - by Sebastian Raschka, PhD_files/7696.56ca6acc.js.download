"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7696"],{85131:function(e,t,i){i.d(t,{Z:()=>n});let n={gifPreview:"gifPreview-aspqQH",visible:"visible-LWauZo",image:"image-Aqe6vn",videoPlayerWrapper:"videoPlayerWrapper-cIRA2m",videoPlayerClassName:"videoPlayerClassName-wHpwKj",videoClassName:"videoClassName-F40TTj"}},20392:function(e,t,i){i.d(t,{Z:()=>n});let n={container:"container-AejwGn",tab:"tab-FhVbMD",highlight:"highlight-rZ7aQJ"}},90311:function(e,t,i){i.d(t,{SP:()=>K,fB:()=>J,hp:()=>Q});var n=i(27412),a=i(7409),r=i(99282),o=i(16584),l=i(6400),s=i(30396),c=i(94184),d=i.n(c),u=i(39693),m=i.n(u),h=i(33112),p=i(39432),v=i(64579),g=i(21286),Z=i(25265),_=i(21206),b=i(39929),f=i(54688),y=i(37696),S=i(94922),w=i(94442),k=i(85685),B=i(30329),C=i(95441),x=i(40647),N=i(90099),I=i(68833),X=i(7882),P=i(94874),M=i(24547),z=i(19081),A=i(58175),E=i(2009),L=i(98012),R=i(24430),F=i(40894),T=i(24791),U=i(31377),D=i(60308),H=i(33884),j=i(63651),O=i(84864),W=i(47929);class q extends l.Component{componentWillUnmount(){this.unmounted=!0}render(e){let{pub:t,post:i,showAuthor:n,showPhoto:l,fromPostPage:s}=e;return(0,w.F6)({pub:t,post:i,showAuthor:n,showPhoto:l})||(0,w.Cz)({pub:t,post:i,showAuthor:n})||(0,w.z5)({pub:t,post:i,showAuthor:n})?this.withAuthorLine(this.props,this.state):(0,o.tZ)($,(0,r._)((0,a._)({},this.props),{className:"alternative-meta",isMobileWidth:this.state.isMobileWidth,actionBarStyle:s?"post-header-compact":"post-preview"}))}constructor(e,t){var i;if(super(e,t),(0,n._)(this,"unmounted",void 0),(0,n._)(this,"withAuthorLine",(e,t)=>{let{pub:i,post:n,showAuthor:a,showPhoto:r,getConfigFor:l,isAppMode:s}=e,c="adhoc_email"===n.type,u=(0,O.getBylineUsers)(n).length,m=1===u&&(0,O.getBylineUsers)(n)[0],h=m&&m.is_guest&&!l("dont_show_guest_byline")&&!c,p=e.showDate||e.showDatetime,v=!n.is_published&&!e.inThreadHead&&p&&!c,g=e.isFreePreview&&e.showAudience&&p&&!c,Z=(0,U.isFoundingAudience)(n.audience)&&e.showAudience&&!g&&p&&!c&&!(0,T.sv)({post:n}),_=(0,U.isPaidAudience)(n.audience)&&e.showAudience&&!Z&&!g&&p&&!c&&!(0,T.sv)({post:n}),b=(0,w.F6)({pub:i,post:n,showAuthor:a,showPhoto:r});return(0,o.tZ)(N.YF,{width:"100%",className:d()("post-meta"),children:(0,o.BX)("tr",{children:[(0,o.tZ)("td",{children:(0,o.BX)(N.i$,{children:[(0,o.tZ)(N.zK,{gap:4,children:(0,o.tZ)(A.xv.Meta,{color:"primary",className:R.A.postAuthor,children:u>0?(0,O.oxfordComma)((0,O.getBylineUsers)(n).map(e=>(0,o.tZ)(A.xv.Meta,{as:"a",href:s?(0,j.FA)({user_id:e.id,user_name:e.name,redirect:"app-store-no-desktop"}):(0,D.LwU)(e,i),color:"primary",style:"text-decoration: none",children:e.name}))):(0,O.getPrintedByline)(i,n)})}),(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:(e.showDate||e.showDatetime)&&n.post_date&&(0,o.tZ)("time",{dateTime:(0,L.Z)(n.post_date).toISOString(),children:(0,L.Z)(n.post_date).locale(this.context.language).standardDate()})}),_&&(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:"∙"}),(0,o.tZ)(A.xv.Meta,{color:"paid",translated:!0,children:"Paid"})]}),Z&&(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:"∙"}),(0,o.tZ)(A.xv.Meta,{color:"paid",children:this.context.iString((0,T.a_)(i,n))})]}),g&&(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:"∙"}),(0,o.tZ)(A.xv.Meta,{color:"paid",translated:!0,children:"Preview"})]}),h&&(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:"∙"}),(0,o.tZ)(A.xv.Meta,{translated:!0,children:"Guest post"})]}),v&&(0,o.BX)(N.zK,{gap:4,children:[(0,o.tZ)(A.xv.Meta,{children:"∙"}),(0,o.tZ)(A.xv.Meta,{translated:!0,children:"Draft"})]})]})]})}),b&&(0,o.tZ)("td",{align:"right",children:(0,o.tZ)(N.zK,{gap:4,children:u>0&&(0,O.getBylineUsers)(n).map((e,t)=>{var n;return t<4&&(0,o.tZ)("a",{href:s?(0,j.FA)({user_id:e.id,user_name:e.name,redirect:"app-store-no-desktop"}):(0,D.LwU)(e,i),children:(0,o.tZ)(N.NS,{src:null!==(n=e.photo_url)&&void 0!==n?n:"",size:u>1?32:40})})})})})]})})}),"undefined"!=typeof window&&(null===(i=window)||void 0===i?void 0:i.matchMedia)){let e=window.matchMedia("screen and (max-width: 650px)");this.state={isMobileWidth:e.matches};let t=e=>{this.unmounted||this.setState({isMobileWidth:e.matches})};e.addEventListener?e.addEventListener("change",t):e.addListener&&e.addListener(t)}}}(0,n._)(q,"contextType",C.wj);let K=(0,x.xY)(q);function J(e){var t,i;let{pub:n,post:r,user:c,reactors:d,secondaryFaces:u,mediaClipId:m}=e,[p,v]=(0,s.eJ)(null),[g,Z]=(0,s.eJ)(!1),_=(0,X.ib)({pathname:"primary"===p?"/api/v1/post/".concat(r.id,"/reactors"):"/api/v1/".concat(m?"media_clip":"post","/").concat(null!=m?m:r.id,"/restackers"),auto:!!p,deps:[r.id,p]}),b=V(d,c,!!r.reaction,n),f=V(u,c,!!r.restacked,n),y=b.concat(f.filter(e=>!!e.photo_url&&!b.find(t=>t.id===e.id))),S=Math.max(null!==(t=r.reactions["❤"])&&void 0!==t?t:0,(null!=b?b:[]).length),w=n.hide_post_restacks?0:null!==(i=r.restacks)&&void 0!==i?i:0,k=S>0?(0,O.pluralize)(S,"Like"):"",B="";return w>0&&(B="".concat((0,O.pluralize)(w,"Restack"))),(0,o.BX)(o.HY,{children:[(0,o.BX)(z.X2,{gap:16,alignItems:"center",color:"secondary",children:[(0,o.tZ)(M.H,{users:y,renderAvatar:e=>(0,o.tZ)(P.xV,(0,a._)({},e)),direction:"rtl",renderCount:()=>(0,o.tZ)(l.Fragment,{})}),(0,o.tZ)(A.xv.B4,{color:"secondary",children:(0,o.BX)(z.X2,{gap:4,alignItems:"center",children:[(0,o.tZ)(Y,{label:k,onClick:()=>{S&&((0,I.j)(I.FP.POST_REACTIONS_MODAL_VIEWED,{post_id:r.id}),v("primary"),Z(!0))}}),k&&B&&"∙",(0,o.tZ)(G,{post:r,label:B})]})})]}),_.result&&(0,o.tZ)(h.F,{isOpen:g,modalLabel:k,faces:_.result,totalCount:S,onClose:()=>{Z(!1),v(null)},utmSource:"post-reactions-modal"})]})}let Y=e=>{let{label:t,onClick:i}=e;return(0,o.tZ)(A.hh,{onClick:i,color:"secondary",cursor:"pointer",children:t})},G=e=>{let{label:t,post:i}=e;return(0,o.tZ)(A.xv.B4,{color:"secondary",children:(0,o.tZ)(A.hh,{href:(0,H.Oi)(i.id,{noBase:E.L,urlParams:{utm_source:W.b3.substack,utm_content:W.fZ.facepileRestacks}}),color:"secondary",children:t})})};function Q(e){var t,i;let{post:n,user:r,pub:l,mediaClipId:s}=e,c=(0,X.ib)({pathname:"/api/v1/post/".concat(n.id,"/facepile"),auto:!0,deps:[n.id,s],query:{media_clip_id:s}});return(0,o.tZ)(J,(0,a._)({reactors:V(null===(t=c.result)||void 0===t?void 0:t.reactors,r,!!n.reaction,l),secondaryFaces:V(null===(i=c.result)||void 0===i?void 0:i.restackers,r,!!n.restacked,l)},e))}function V(e,t,i,n){if(!e)return[];if(t){let a=e.findIndex(e=>e.id===t.id);i&&("private"!==t.subscription_visibility||46438===n.id)&&t.activity_likes_enabled&&a<0?e.splice(0,0,{id:t.id,name:t.name,photo_url:t.photo_url}):!i&&a>=0&&e.splice(a,1)}return e}function $(e){var t;let i,{additionalCommentCount:n=0,className:a,user:r,pub:l,post:s,showAudience:c=!1,showDate:u=!1,showEmailSent:h=!1,showDatetime:g=!1,showReactions:C=!0,showComments:x=!0,showShare:N=!1,showRestack:I=!1,showPublicationName:X=!1,hidePinning:P=!1,reaction_token:M,onClick:z,onChange:E,isStatic:R=!1,isFreePreview:T=!1,allowSendEmail:H=!1,allowEdit:j=!1,shareTooltipText:q,showPins:K,sharedShareDialog:J,onClickCommentButton:Y,showAuthor:G,showPhoto:Q,fromPostPage:V,isMobileWidth:$,actionBarStyle:et="post-header-compact"}=e,ei=l.id===s.publication_id?l:void 0,en="post-footer"===et,ea=en?20:"post-preview"===et?14:18,er="post-header-large"===et?20:"post-preview"===et?16:"thread-head"===et||en?14:18;i=s.comment_url_override?s.comment_url_override:R?"".concat(F.W.HALF_MAGIC_COMMENTS_URL,"&utm_source=").concat(W.b3.substack,"&utm_medium=").concat(W.lP.email):(0,D.uRy)(l,s,{comments:!0});let eo=n+(null!==(t=s.comment_count)&&void 0!==t?t:0),el=x&&!T&&(0,O.showCommentsOnPost)({publication:l,post:s})&&"restack"!==s.type,es=C&&!T&&!["adhoc_email","restack"].includes(s.type),ec=(u||g)&&s.post_date&&!s.is_draft,ed=h?!!s.email_sent_at:null,eu=m()([h&&ed&&{className:"email-sent",title:"This post was sent as an email",content:(0,o.tZ)(p.Z,{className:"post-meta-icon",height:ea,isStatic:R})},K&&s.is_section_pinned&&{className:"icon pinned",content:(0,o.tZ)(b.Z,{className:"post-meta-icon",isStatic:R})},"adhoc_email"===s.type?{className:"audience-adhoc",content:(0,o.tZ)(f.Z,{className:"post-meta-icon",isStatic:R})}:c&&(0,U.isPaidAudience)(s.audience)&&{className:"audience-lock",content:(0,o.tZ)(v.Z,{color:"#666666",height:ea,isStatic:R})},(0,w.Er)({pub:l,post:s,showAuthor:G,showPhoto:Q,isMobileWidth:$})&&{className:"author",content:(0,O.getBylineUsers)(s).length>0?(0,O.oxfordComma)((0,O.getBylineUsers)(s).map(e=>(0,o.tZ)(k.ProfileHoverCard,{disabled:R,subject:e,utmSource:"byline",children:(0,o.tZ)("a",{href:(0,D.LwU)(e,l),onClick:e=>e.stopPropagation(),children:e.name})}))):(0,O.getPrintedByline)(l,s)},X&&{className:"post-publication-name",content:l.name},j&&!R&&r&&r.is_contributor&&{className:"post-meta-item icon edit-icon",onClick:e=>e.stopPropagation(),content:(0,o.tZ)(y.l,{pub:l,post:s,iconHeight:ea,hidePinning:P,user:r,emailSent:ed,allowSendEmail:H})},ec&&{className:"post-date",title:(0,L.Z)(s.post_date).toISOString(),content:(0,o.tZ)(A.xv.Meta,{children:(0,o.tZ)("time",{dateTime:(0,L.Z)(s.post_date).toISOString(),children:(0,w.fh)({post:s,showDatetime:g,isStatic:R,fromPostPage:V,showReactions:es})})})},(null==ei?void 0:ei.community_enabled)&&s.slug&&es&&!s.is_draft&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,o.tZ)(B.dJ,{user:r,pub:l,post:s,token:M,onChange:e=>{null==E||E(e)},height:er,isStatic:R,buttonStyle:en,className:"post-meta-icon like-reaction-button",hideReactionCount:en&&!R})},r&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,o.tZ)(ee,{post:s,isPostFooter:en,isStatic:R,lucideIconHeight:er,onChange:E})},(null==ei?void 0:ei.community_enabled)&&s.slug&&el&&!s.is_draft&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,o.BX)("a",{className:en?"post-meta-button button":"",href:i,native:ei&&(0,D.Fdd)(document.location.pathname),onClick:Y,children:[(0,o.tZ)(Z.Z,{className:"comment-icon post-meta-icon",isStatic:R,height:er,alt:"Comment",stroke:"#757575",fill:"transparent",strokeWidth:R?1:1.5,ampProps:{layout:"fixed"}}),!eo&&en&&(0,o.tZ)("span",{className:"meta-button-label",children:"Comment"}),eo>0&&(0,o.tZ)("span",{className:"comment-count",children:(0,O.numberToString)(eo)})]})},I&&!en&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,o.BX)("a",{href:F.W.RESTACK_URL,className:en?"button post-meta-button":void 0,children:[(0,o.tZ)(_.Z,{className:"recommend-icon post-meta-icon",isStatic:R,height:er,alt:"Recommend",stroke:"#757575",fill:"transparent",strokeWidth:R?1:1.5,ampProps:{layout:"fixed"}}),en&&(0,o.tZ)("span",{className:"meta-button-label",children:"Recommend"})]})},N&&"only_free"!==s.audience&&!s.is_draft&&!T&&{className:"icon",onClick:e=>e.stopPropagation(),content:(0,o.BX)(S.v,{user:r,pub:ei,post:s,reaction_token:M,height:er,onChange:E,isStatic:R,sharedShareDialog:J,position:"post-footer"===et?"post-footer":"post-header",linkClassName:en?"button post-meta-button":void 0,children:[en&&(0,o.tZ)("span",{className:"meta-button-label",children:"Share"}),q&&(0,o.tZ)("div",{className:"share-tooltip-wrap",children:(0,o.tZ)("div",{className:"share-tooltip",children:q})})]})}]);return R?(0,o.tZ)("table",{className:d()("post-meta custom",{big:en},a),cellpadding:"0",cellspacing:"0",onClick:z,children:(0,o.tZ)("tr",{children:eu.map(e=>{let{className:t,title:i,onClick:n,content:a}=e;return(0,o.tZ)("td",{className:d()("post-meta-item",t),title:i,onClick:n,children:a})})})}):(0,o.tZ)("div",{className:d()("post-meta post-meta-actions-web custom",{big:en},a),onClick:z,children:eu.map(e=>{let{className:t,title:i,onClick:n,content:a}=e;return(0,o.tZ)("div",{className:d()("post-meta-item",t),title:i,onClick:n,children:a})})})}function ee(e){let{post:t,isPostFooter:i,isStatic:n,lucideIconHeight:l,onChange:s}=e,{onSave:c,isSaved:u}=(0,w.vk)({post:t,isSaved:t.is_saved});return(0,o.BX)("a",{className:d()("post-meta-save-button",i?"post-meta-button button":"",{isSaved:u}),href:n&&F.W.SAVE_POST_URL||void 0,onClick:()=>{let e=c();null==s||s({post:(0,r._)((0,a._)({},t),{is_saved:e})})},children:[(0,o.tZ)(g.Z,{isStatic:n,height:l,stroke:"#757575",strokeWidth:n?1:1.5}),i&&(0,o.tZ)("span",{className:"meta-button-label",children:"Save"})]})}},12337:function(e,t,i){i.d(t,{O:()=>_});var n=i(7409),a=i(16584),r=i(30396),o=i(93974),l=i(77747),s=i(42375),c=i(62903),d=i(25991),u=i(85527),m=i(16451),h=i(80878),p=i(19081),v=i(15503),g=i(91400),Z=i(63651);function _(e){let{item:t,author:i}=e,n=(0,s.rI)(),o=(0,r.qp)(u.q),l=()=>(0,v.rw)(t,n,"profile",{tabId:o}),_=(0,g.XA)(),f=_?(0,Z._5K)({postId:t.community_post.id,utm_source:n}):(0,Z.xC8)({pubId:t.community_post.publication_id,postId:t.community_post.id,noBase:!0,params:{backAction:Z.DsN}});return(0,a.BX)(p.tu,{paddingY:16,paddingX:{mobile:16,desktop:0},gap:8,cursor:"pointer",onClick:e=>{e.defaultPrevented||((0,v.rw)(t,n,"item",{tabId:o}),(0,h.Q)(e,f,{native:_}))},children:[(0,a.tZ)(c.L,{context:t.context,onClick:()=>(0,v.rw)(t,n,"context",{tabId:o}),utm_content:t.entity_key}),(0,a.BX)(p.hs,{gap:12,children:[(0,a.tZ)(m.Fb,{user:i,onClick:l,utm_content:t.entity_key}),(0,a.BX)(p.tu,{gap:8,flex:"grow",children:[(0,a.tZ)(d.Ev,{author:i,onClick:l,utm_content:t.entity_key,publication:t.publication,item:t,timestamp:t.community_post.created_at,hideSubscribeCta:!0}),(0,a.tZ)(b,{communityPost:t.community_post,pub:t.publication,author:i,feedSurface:n,userPubRole:t.user_pub_role,contextType:t.context.type,useClientSideRouting:!_})]})]})]})}function b(e){var t,i;let{communityPost:s,feedSurface:c,author:d,pub:u,userPubRole:m,contextType:h,useClientSideRouting:v}=e,[g,_]=(0,r.eJ)({reactions:null!==(t=s.reactions)&&void 0!==t?t:{},currentReaction:null!==(i=s.reaction)&&void 0!==i?i:void 0}),b=async e=>{var t,i;let{id:a,reaction:r}=e,o=r===g.currentReaction,s=(0,n._)({},g.reactions);if(s[r]=(null!==(t=g.reactions[r])&&void 0!==t?t:0)+(o?-1:1),o){let e=await (0,l.aQ)(r,a,"posts");!o&&g.currentReaction&&(s[g.currentReaction]=(null!==(i=s[g.currentReaction])&&void 0!==i?i:0)-1),e instanceof Error||_({currentReaction:void 0,reactions:s})}else await (0,l.oQ)(r,a,"posts") instanceof Error||_({reactions:s,currentReaction:r})};return(0,a.BX)(p.tu,{gap:2,alignItems:"start",children:[(0,a.tZ)(o.qp,{communityPost:s,hideReply:!1,userBlockStatus:null,isFounding:null==m?void 0:m.is_founding,isPaid:(null==m?void 0:m.membership_state)==="subscribed",isReadOnly:!0,useClientSideRouting:v,utmSource:c,pub:u,truncate:!0,surface:c,author:d,reactionsContext:{type:"chat_subscribed"===h?"feed-subscribed":"feed-recommended",id:s.id},reaction:g.currentReaction,reactions:g.reactions,handleReactionClick:b,backAction:Z.DsN,outline:"detail"}),(0,a.tZ)(o.mZ,{direction:"incoming",commenters:s.recent_commenters,count:s.comment_count,hasUnread:!!(s.most_recent_comment_created_at&&s.user_last_viewed_timestamp&&s.user_last_viewed_timestamp<s.most_recent_comment_created_at),outline:"detail"})]})}},12302:function(e,t,i){i.d(t,{Z:()=>v});var n=i(16584),a=i(35543),r=i(95441),o=i(16451),l=i(68833),s=i(80878),c=i(80026),d=i(63474),u=i(65958),m=i(15503),h=i(33555),p=i(63651);let v=e=>{let{item:t}=e,{iString:i}=(0,r.M1)();return(0,n.BX)(c.tu,{gap:8,paddingBottom:12,children:[(0,n.tZ)(c.sg,{children:t.results.map((e,i)=>(0,n.tZ)(g,{user:e,rank:i,item:t}))}),t.hasMore&&(0,n.tZ)(c.zx,{onClick:e=>(0,s.Q)(e,t.expansionUrl),priority:"secondary",children:i("See more people")})]})},g=e=>{var t,i;let{user:s,rank:v,item:g}=e,{isFollowing:Z,toggle:_}=(0,a.Sv)(s,"top-search"),b=(0,u.s)({source:"top-search"}),f=()=>{(0,m.rw)(g,"search","user-result"),(0,l.j)(l.FP.GLOBAL_SEARCH_RESULT_CLICKED,{search_key:"top-search",result_type:"user",rank:v})},{iString:y}=(0,r.M1)();return(0,n.BX)(c.X2,{padding:8,gap:12,justifyContent:"space-between",children:[(0,n.tZ)(c.X2,{gap:12,onClick:f,children:(0,n.BX)(d.A0,{href:(0,p.NNq)(s,{utm_source:"top-search"}),children:[(0,n.tZ)(o.Fb,{user:s,onClick:f}),(0,n.BX)(c.sg,{children:[(0,n.BX)(c.xv.B3,{weight:"semibold",children:[s.name,"\xa0",(0,n.tZ)(h.UserBadge,{tier:s.bestseller_tier,userBadge:null===(t=s.status)||void 0===t?void 0:t.badge,userId:s.id,inline:!0,size:"sm"})]}),(0,n.tZ)(c.xv.B4,{color:"secondary",children:"".concat(s.handle?"@".concat(s.handle,"  ∙ "):"").concat(s.primaryPublication?null===(i=s.primaryPublication)||void 0===i?void 0:i.name:"")}),s.bio?(0,n.tZ)(c.xv.B4,{clamp:1,children:s.bio}):null]})]})}),Z?s.can_dm?(0,n.tZ)(c.zx,{priority:"tertiary",onClick:()=>{b.handleStart([s.id]),f()},children:y("Message")}):null:(0,n.tZ)(c.zx,{onClick:e=>{e.preventDefault(),_(),f()},children:y("Follow")})]})}},95128:function(e,t,i){i.d(t,{w:()=>m});var n=i(16584),a=i(64998),r=i(68833),o=i(61254),l=i(19081),s=i(58175),c=i(93630),d=i(22838),u=i(63651);function m(e){let{item:t}=e,i=(0,u.k5c)({categoryId:"bestseller"===t.category.id?"bestseller":t.category.id,ranking:"trending",backAction:(0,u.mIK)({type:"bestseller"===t.category.id?d.qX.Secondary:d.qX.Category,id:t.category.id.toString()})});return 0===t.items.length?null:(0,n.BX)(l.tu,{children:[(0,n.tZ)(s.hh,{href:i,children:(0,n.BX)(l.hs,{alignItems:"center",gap:8,paddingBottom:16,paddingTop:24,children:[(0,n.BX)(s.xv.H3,{children:["Rising in ",t.category.name]}),(0,n.tZ)(a.Z,{})]})}),(0,n.tZ)(l.tu,{paddingY:8,children:(0,n.tZ)(c.l6,{items:t.items,surface:"feed",onClickItem:e=>{let{publication:t,rank:i}=e;(0,r.j)(r.FP.LEADERBOARD_ITEM_CLICKED,{publication_id:t.id,rank:i,surface:"feed"})}})}),(0,n.tZ)(o.iz,{paddingY:8})]})}},31465:function(e,t,i){i.d(t,{e:()=>p});var n=i(16584),a=i(20888),r=i(42375),o=i(87447),l=i(80878),s=i(15771),c=i(19081),d=i(58175),u=i(15503),m=i(91400),h=i(63651);function p(e){let{item:t}=e,i=(0,m.XA)(),p=(0,u.Gv)(t,{isModuleItem:!0}),v=(0,r.rI)();return(0,n.BX)(o.hr,{item:t,onFirstVisible:()=>(0,u.qG)("seen",t,v,{extraEventProps:{clicked_element:"row"}}),children:[(0,n.tZ)(d.xv.H2,{children:t.title}),(0,n.BX)(o.Mr,{cursor:"pointer",onClick:e=>{p("collection"),(0,l.Q)(e,(0,h.tsE)(t.id,{noBase:!0}))},children:[(0,n.tZ)(a.e,{src:t.image_url,maxWidth:560,imageProps:{height:i?194:260,smartCrop:!0},objectFit:"cover"}),(0,n.tZ)(c.tu,{padding:20,gap:16,children:(0,n.BX)(c.tu,{gap:6,children:[(0,n.tZ)(d.xv.H3,{children:t.card_title}),(0,n.tZ)(d.xv.B4,{color:"secondary",children:t.card_subtitle}),(0,n.tZ)(s.zx,{priority:"secondary-outline",children:t.button_title})]})})]})]})}},73730:function(e,t,i){i.d(t,{a:()=>M});var n=i(16584),a=i(13742),r=i(31012),o=i(95441),l=i(42375),s=i(87447),c=i(7409),d=i(58865),u=i(30396),m=i(24237),h=i(9404),p=i(48980),v=i(71068),g=i(15771),Z=i(19081),_=i(99916),b=i(78446);function f(){let e=(0,d._)(["We’ll no longer suggest ",""]);return f=function(){return e},e}function y(e){let{onUndo:t}=e,{iString:i}=(0,o.M1)();return(0,n.BX)(Z.tu,{padding:16,alignItems:"center",color:"secondary",children:[(0,n.tZ)(v.xu,{children:i("We’ll no longer suggest this publication.")}),(0,n.tZ)(v.xu,{children:(0,n.tZ)(g.kG,{resetCss:!0,style:{textDecoration:"underline"},onClick:e=>{e.preventDefault(),t()},children:i("Undo")})})]})}function S(e){let{iString:t}=(0,o.M1)();return(0,n.tZ)(_.v2,(0,c._)({trigger:(0,n.tZ)(g.hU,{"aria-label":t("More options"),priority:"quaternary",size:"sm",onClick:e=>{e.stopPropagation()},children:(0,n.tZ)(h.Z,{size:16})})},e))}var w=i(80878),k=i(10510),B=i(58175),C=i(15503),x=i(91400),N=i(64172),I=i(60308),X=i(63651),P=i(47929);function M(e){let{item:t}=e,{iString:i}=(0,o.M1)(),{publication:c}=t,d=c.logo_url,h={utm_source:P.b3.substack,utm_content:P.fZ.feedFeaturedPublication},v=(0,x.XA)(),{isSubscribed:M}=(0,N.Y0)(c.id),z=(0,C.Gv)(t,{isModuleItem:!0}),A=(0,l.rI)(),E=function(e){let{publication:t,onSelect:i}=e,{iString:a,iTemplate:r}=(0,o.M1)(),l=(0,b.N4)(),[s,c]=(0,u.eJ)(!1),d=async()=>{!l.isConfirming&&await l.confirm()&&(c(!0),(0,p.rd)("/api/v1/reader/interest",{method:"POST",json:{type:"publication",publication_id:t.id,sentiment:"negative"}}),i("not_interested"))};return{handleUndo:()=>{c(!1),(0,p.rd)("/api/v1/reader/interest",{method:"DELETE",json:{type:"publication",publication_id:t.id}}),i("undo_not_interested")},notInterested:s,menu:(0,n.BX)(n.HY,{children:[(0,n.tZ)(S,{children:(0,n.tZ)(_.sN,{leading:(0,n.tZ)(m.Z,{}),onClick:d,children:a("Not interested in publication")})}),(0,n.tZ)(b.sm,{modal:l,title:a("Not interested?"),body:r(f(),t.name)})]})}}({publication:c,onSelect:z});return(0,n.BX)(s.hr,{item:t,onFirstVisible:()=>(0,C.qG)("seen",t,A),children:[(0,n.BX)(Z.hs,{alignItems:"center",justifyContent:"space-between",children:[(0,n.tZ)(B.xv.H2,{children:t.title}),E.menu]}),(0,n.BX)(s.Mr,{cursor:E.notInterested?void 0:"pointer",onClick:E.notInterested?void 0:e=>{e.defaultPrevented||(z("publication"),(0,w.Q)(e,(0,I.TJI)(c,{params:h}),{newTab:!0,native:!0}))},children:[(0,n.tZ)(s.EB,{imageUrl:d,width:350,children:(0,n.tZ)(s.up,{justifyContent:"center",alignItems:"center",paddingY:32,children:(0,n.tZ)(k.wk,{pub:t.publication,size:v?72:128})})}),(0,n.BX)(Z.tu,{padding:20,gap:20,alignItems:"center",children:[(0,n.BX)(Z.tu,{gap:6,children:[(0,n.tZ)(B.xv.H3,{children:t.publication.name}),(0,n.tZ)(B.xv.B4,{children:t.card_subtitle}),(0,n.BX)(B.xv.Meta,{ellipsis:!0,children:["by ",t.publication.author_name]})]}),M?(0,n.tZ)(g.zx,{priority:"secondary-outline",leading:(0,n.tZ)(a.Z,{size:20}),children:i("Subscribed")}):(0,n.tZ)(g.zx,{leading:(0,n.tZ)(r.Z,{size:20}),priority:"secondary-accent",onClick:()=>{z("subscribe")},href:(0,X.W1P)(t.publication,{addBase:!0,params:h}),newTab:!0,children:i("Subscribe")})]}),E.notInterested&&(0,n.tZ)(Z.hs,{justifyContent:"center",alignItems:"center",bg:"primary",style:{position:"absolute",inset:0},children:(0,n.tZ)(y,{onUndo:E.handleUndo})})]})]})}},37564:function(e,t,i){i.d(t,{N:()=>S});var n=i(7409),a=i(16584),r=i(30396),o=i(94184),l=i.n(o),s=i(39693),c=i.n(s),d=i(30356),u=i(87447),m=i(68833),h=i(80878),p=i(94874),v=i(19081),g=i(58175),Z=i(45783),_=i(15503),b=i(33555),f=i(63651);let y={suggestion:"suggestion-t9mwKS",suggestionPreview:"suggestionPreview-mx_slc",suggestionLabel:"suggestionLabel-HDQ2gv",avatarContainer:"avatarContainer-jqklVk",liveAvatar:"liveAvatar-Q8uKpU",liveTag:"liveTag-g9dLki"};function S(e){let{item:t}=e,i=(0,r.sO)(null),n=new Map(c()(t.items.map(e=>"note"===e.type?[e.note.id,e.note.author]:null)));return(0,r.d4)(()=>(0,_.qG)("seen",t,"explore",{extraEventProps:{module:"videoSuggestionsExplore"}}),[]),(0,a.tZ)(u.rF,{item:t,children:(0,a.tZ)(Z.De,{scrollRef:i,paddingX:8,paddingBottom:8,gap:4,children:t.itemPreviews.map(e=>{let i=n.get(e.noteId);if(i)return(0,a.tZ)(w,{preview:e,author:i,trackingParameters:t.trackingParameters},e.gifPreviewUrl)})})})}function w(e){var t,i;let{preview:o,author:s,trackingParameters:c}=e,{noteId:u,gifPreviewUrl:Z,liveStreamId:_}=o,S=_?(0,f.UDR)({liveStreamId:_}):(0,f.gtu)(u),w=!!_,[k,B]=(0,r.eJ)(!1);return(0,a.BX)(v.tu,{as:"a",href:S,gap:12,className:y.suggestion,radius:"md",padding:4,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),onClick:e=>{(0,m.j)(m.FP.FEED_MODULE_ITEM_CLICKED,(0,n._)({module:"videoSuggestionsExplore",clicked_element:"attachment",surface:"explore"},c)),(0,h.Q)(e,S,{state:{showBack:!0}})},children:[(0,a.tZ)(d.k,{className:y.suggestionPreview,src:Z,radius:"sm",width:152,height:270,sourceFormats:[k?"webp":"png"],options:{crop:"crop"}}),s&&(0,a.BX)(v.gq,{className:y.suggestionLabel,alignItems:"center",gap:4,children:[(0,a.tZ)(v.hs,{className:l()(y.avatarContainer,{[y.liveAvatar]:w}),children:(0,a.tZ)(p.qE,{user:s,photoUrl:null!==(t=s.photo_url)&&void 0!==t?t:void 0,size:20})}),w?(0,a.BX)(a.HY,{children:[(0,a.tZ)(g.xv.B4,{weight:"semibold",className:y.liveTag,children:"Live"})," \xb7 "]}):null,(0,a.tZ)(g.xv.B4,{ellipsis:!0,children:s.name}),(null!==(i=s.bestseller_tier)&&void 0!==i?i:0)>0&&(0,a.tZ)(b.UserBadge,{size:"sm",tier:s.bestseller_tier,userId:s.id})]})]})}},87447:function(e,t,i){i.d(t,{up:()=>X,hr:()=>k,rF:()=>S,O3:()=>w,EB:()=>I,Mr:()=>N});var n=i(7409),a=i(99282),r=i(98848),o=i(16584),l=i(30396),s=i(94184),c=i.n(s),d=i(10968),u=i(60807),m=i(42375),h=i(85527);i(53678);var p=i(98750),v=i(71068),g=i(19081);i(58175);var Z=i(15503),_=i(91400),b=i(63651),f=i(85446),y=i(5749);function S(e){let{item:t,children:i,onFirstVisible:r,className:s,ariaLabel:v}=e,g=(0,l.sO)(null),b=(0,m.rI)(),S=(0,l.qp)(h.q),k=(0,_.XA)(),B=(0,u.aF)();return(0,p.MW)(g,()=>{let e;if("comment"===t.type){var i;let{isTruncated:r}=(0,f.X)(t.comment,{isMobile:k});if(e={isTruncated:r},g.current&&(null===(i=t.comment.attachments)||void 0===i?void 0:i.length)){let i=t.comment.attachments.filter(e=>"image"===e.type),r=i.length>2?(0,d.kw)(i,g.current.clientWidth):0;e=(0,a._)((0,n._)({},e),{isMediaTruncated:r>g.current.clientWidth})}}(0,Z.zi)(t,b,{tabId:S,extraEventProps:e,isLoggedIn:!!B}),r&&r()},e=>{(0,Z.Eg)(t,b,e,{tabId:S})}),(0,o.tZ)(w,{ref:g,className:c()("userSuggestions"!==t.type?y.Z.contain:void 0,s),role:"article","aria-label":v,children:i})}let w=(0,v.zo)({display:"flex",direction:"column",className:y.Z.feedItem,position:"relative"});function k(e){let{item:t,children:i,onFirstVisible:n}=e;return(0,o.tZ)(S,{item:t,onFirstVisible:n,children:(0,o.tZ)(C,{children:i})})}let B=(0,v.zo)({display:"flex",direction:"column",paddingX:{mobile:16,desktop:0}}),C=(0,v.zo)({paddingY:24,gap:16},B),x=(0,v.oB)({cursor:"pointer"}),N=(0,v.zo)({position:"relative",display:"flex",direction:"column",radius:"md",bg:"elevated",border:"detail",shadow:"md",overflow:"hidden"},e=>{var{className:t,cursor:i}=e,a=(0,r._)(e,["className","cursor"]);return(0,o.tZ)("div",(0,n._)({className:c()("pointer"===i&&x,t)},a))});function I(e){var{className:t,children:i,imageUrl:l,width:s,height:d}=e,u=(0,r._)(e,["className","children","imageUrl","width","height"]);let m=l&&(0,b.zF4)(l,s,{height:d,gravity:"auto",format:"jpg"});return(0,o.tZ)(g.hs,(0,a._)((0,n._)({},u),{className:c()("blurBg-fkm1Tn",t),style:m?{backgroundImage:"url('".concat(m,"')"),backgroundColor:"transparent"}:void 0,children:i}))}let X=(0,v.E7)({className:"blurFg-BbZZn1",display:"flex",flex:"grow"})},93029:function(e,t,i){i.d(t,{Z:()=>d});var n=i(16584),a=i(30396),r=i(94184),o=i.n(r),l=i(74571),s=i(60308),c=i(85131);let d=e=>{let{post:t,containerRef:i,aspectRatio:r,size:d="small",alwaysShow:u=!1,className:m}=e,[h]=(0,l.i5)(i),[p,v]=(0,a.eJ)(!1),g=(0,s.W$Z)({post:t,height:"large"===d?480:320});return g&&(h||u)?(0,n.tZ)("div",{className:o()(c.Z.gifPreview,{[c.Z.visible]:p},m),children:(0,n.tZ)("img",{className:c.Z.image,src:g,style:"aspect-ratio: ".concat(r),onLoad:()=>v(!0)})}):null}},2017:function(e,t,i){i.d(t,{h:()=>_});var n=i(16584),a=i(30396),r=i(29032),o=i(31122),l=i(95441),s=i(48980),c=i(98914),d=i(71068),u=i(15771),m=i(19081),h=i(58175),p=i(11879),v=i(98012),g=i(63651);let Z={countdownTimer:"countdownTimer-Hez1AS"};function _(e){var t;let{liveStream:i,post:_}=e,{iString:f}=(0,l.M1)(),{liveStream:y}=(0,p.R)({liveStream:i}),[S,w]=(0,a.eJ)((0,v.Z)(null==y?void 0:y.liveStream.scheduled_at).valueOf()-Date.now()),[k,B]=(0,a.eJ)((0,v.Z)(null==y?void 0:y.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")));if((0,a.d4)(()=>{(null==y?void 0:y.liveStream.scheduled_at)&&B((0,v.Z)(y.liveStream.scheduled_at).isAfter((0,v.Z)().add(15,"minutes")))},[y]),(0,a.d4)(()=>{(null==y?void 0:y.liveStream.scheduled_at)&&w((0,v.Z)(y.liveStream.scheduled_at).valueOf()-Date.now());let e=setInterval(()=>{w((0,v.Z)(null==y?void 0:y.liveStream.scheduled_at).valueOf()-Date.now())},1e3);return()=>clearInterval(e)},[y]),!(null==y?void 0:y.liveStream.id))return null;if((null==y?void 0:y.liveStream.status)==="active")return(0,n.tZ)(o.Y,{activeLiveStream:y,isFeedItem:!0,listenForViewerCount:!1});let C=Math.max(S/1e3,0),x=Math.floor(C/60/60/24),N=Math.floor(C/60/60%24),I=Math.floor(C/60%60),X=String(x).padStart(2,"0"),P=String(N).padStart(2,"0"),M=String(I).padStart(2,"0"),z=String(Math.floor(C%60)).padStart(2,"0");return(0,n.tZ)(r.C,{children:(0,n.BX)(d.xu,{as:"a",href:(0,g.bHR)({liveStreamId:null==y?void 0:y.liveStream.id}),radius:"md",overflow:"hidden",children:[(0,n.tZ)(m.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"black",children:k?(0,n.tZ)(m.hs,{className:Z.countdownTimer,justifyContent:"center",alignItems:"center",children:(0,n.BX)(m.hs,{children:[x>0?(0,n.BX)(n.HY,{children:[(0,n.tZ)(b,{value:X,unit:"DAYS"}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})})]}):null,(0,n.tZ)(b,{value:P,unit:"HR"}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(b,{value:M,unit:"MIN"}),0===x?(0,n.BX)(n.HY,{children:[(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(b,{value:z,unit:"SEC"})]}):null]})}):(0,n.BX)(m.tu,{className:Z.countdownTimer,justifyContent:"center",alignItems:"center",gap:4,children:[(0,n.BX)(m.hs,{children:[(0,n.tZ)(b,{value:M}),(0,n.tZ)(m.hs,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,n.tZ)(h.xv.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,n.tZ)(b,{value:z})]}),(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",transform:"uppercase",children:f("Starting soon...")})]})}),(0,n.BX)(m.hs,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"secondary",borderTop:"detail",children:[(0,n.BX)(m.tu,{gap:4,children:[(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:null==y?void 0:null===(t=y.liveStream.user)||void 0===t?void 0:t.name}),(0,n.tZ)(h.xv.B4,{weight:"bold",color:"white",children:null==y?void 0:y.liveStream.title})]}),(0,n.tZ)(u.zx,{priority:"primary",onClick:async()=>{try{await (0,s.rd)("/api/v1/live_stream/".concat(null==y?void 0:y.liveStream.id,"/rsvp"),{method:"PUT"})}catch(e){console.error(e)}(0,c.uX)((0,g.bHR)({liveStreamId:null==y?void 0:y.liveStream.id}),{local_navigation:!1})},children:k?"Interested":"Join now"})]})]})})}let b=e=>{let{value:t,unit:i}=e;return(0,n.BX)(m.tu,{alignItems:"center",gap:4,children:[(0,n.tZ)(m.tu,{justifyContent:"end",alignItems:"center",height:40,children:(0,n.tZ)(h.xv.B4,{font:"digit",fontSize:30,lineHeight:30,color:"white",children:t})}),i&&(0,n.tZ)(h.xv.B4,{color:"vibrance-secondary",children:i})]})}},11879:function(e,t,i){i.d(t,{R:()=>l});var n=i(30396),a=i(48980),r=i(92039),o=i(98012);let l=e=>{var t,i;let{liveStream:l}=e,s=(0,r.rG)(),[c,d]=(0,n.eJ)(null),[u,m]=(0,n.eJ)(l),[h,p]=(0,n.eJ)(null);return(0,n.d4)(()=>{m(l)},[l]),(0,n.d4)(()=>{if(!u||"scheduled"!==u.liveStream.status)return;let e=(0,o.Z)(u.liveStream.scheduled_at),t=(0,o.Z)();if(9e5>e.diff(t)){let e=setInterval(()=>{(0,a.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{"scheduled"!==e.activeLiveStream.liveStream.status&&(d(null),p(e.activeLiveStream))}).catch(e=>{console.error(e)})},1e3);d(e)}return null==s?void 0:s.listen({["live-stream:".concat(u.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:started"&&((0,a.rd)("/api/v1/live_stream/".concat(u.liveStream.id)).then(e=>{p(e.activeLiveStream)}).catch(e=>{console.error(e)}),c&&d(null))}})},[null==u?void 0:null===(t=u.liveStream)||void 0===t?void 0:t.id,null==u?void 0:null===(i=u.liveStream)||void 0===i?void 0:i.status,s]),(0,n.d4)(()=>{if(h){let e=h.liveStream.is_rtmp?h.liveStreamInformation.playbackUrl:h.liveStreamInformation.desktopPlaybackUrl;if(e){let t=setInterval(()=>{(0,a.rd)(e).then(()=>{d(null),m(h),p(null)})},1e3);d(t)}}},[h]),(0,n.d4)(()=>()=>{c&&clearInterval(c)},[c]),{liveStream:u,setLiveStream:m}}},22419:function(e,t,i){i.d(t,{lq:()=>n});let n=25}}]);