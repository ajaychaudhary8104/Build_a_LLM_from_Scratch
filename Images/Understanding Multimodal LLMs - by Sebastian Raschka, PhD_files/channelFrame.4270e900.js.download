(()=>{var e={18446:function(e,t,n){var s=n(90939);e.exports=function(e,t){return s(e,t)}},57824:function(e){function t(e,t,n,s){return Math.round(e/n)+" "+s+(t>=1.5*n?"s":"")}e.exports=function(e,n){n=n||{};var s,r,i,o,a=typeof e;if("string"===a&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return 864e5*n;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===a&&isFinite(e)){return n.long?(r=Math.abs(s=e))>=864e5?t(s,r,864e5,"day"):r>=36e5?t(s,r,36e5,"hour"):r>=6e4?t(s,r,6e4,"minute"):r>=1e3?t(s,r,1e3,"second"):s+" ms":(o=Math.abs(i=e))>=864e5?Math.round(i/864e5)+"d":o>=36e5?Math.round(i/36e5)+"h":o>=6e4?Math.round(i/6e4)+"m":o>=1e3?Math.round(i/1e3)+"s":i+"ms"}throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},79546:function(e,t,n){var s=n(62195),r=[n(39627),n(58855),n(45580),n(8728)];e.exports=s.createStore(r,[])},5777:function(e,t,n){"use strict";var s=n(35702),r=n(6400),i=n(68833);class o extends r.Component{componentDidMount(){let{likelyLoggedIn:e,loggedInSubscriberStat:t}=this.props.initialData;this.post({type:"frame-state",loggedInAtSubstack:!!e,subscriberState:t}),(0,i.j)(i.FP.FRAME_MESSAGE_SENT,{hasUserState:!!t})}post(e){var t,n;let{protocol:s,port:r}=window.location,i=null===(t=this.props.initialData)||void 0===t?void 0:t.targetOrigin,o=(null==i?void 0:i.startsWith("http"))?i:"".concat(s,"//").concat(i).concat(r?":".concat(r):"");null===(n=window.top)||void 0===n||n.postMessage(e,o)}render(){return""}}(0,s.Z)(o)},68833:function(e,t,n){"use strict";n.d(t,{FP:()=>s.FP,j:()=>s.j,uF:()=>r.S}),n(47102),n(55229);var s=n(8090),r=n(53516)},8090:function(e,t,n){"use strict";n.d(t,{FP:()=>h,Kl:()=>D,Md:()=>N,j:()=>k});var s,r,i=n(21811),o=n(15872),a=n(55229),u=n(43300),c=n(49762),d=n(96708),l=n(98914);n(31406),n(98012);var p=n(37313),f=n(60308),m=n(26111),v=n(41935);n(84864);let h=p.F,b="undefined"!=typeof window,w=!!(b&&window.navigator&&window.navigator.sendBeacon),g=!(0,l.w1)()&&w,I=new u.T({batchOptions:g?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,t){b&&(g&&t&&e.push(j(e,t)),new Image().src=(0,f.n1t)(g?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,t){if(!b)return;e.push(j(e,"beacon",t));let n=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",n)}}),D=()=>{b&&g&&(window.addEventListener("beforeunload",e=>{I.sendBeacon(e)}),window.addEventListener("pagehide",e=>{I.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&I.sendBeacon(e)}),setInterval(()=>{I.intervalFlush()},6e4))},y=b&&window!=window.top&&(0,v.l)(l.EH),_="browser";function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n;if(["development","test"].includes((n="production",void 0!==n)?n:"")&&!e)throw Error("`undefined` event passed to FRONTEND track call");x(e,Object.assign({},t))}catch(e){try{window.Sentry&&window.Sentry.captureException(e)}catch(t){console.error("Failed to track event",e)}}}b&&(navigator.standalone||(null===(s=(r=window).matchMedia)||void 0===s?void 0:s.call(r,"(display-mode: standalone)").matches))&&(_="standalone");let S=()=>document.location.pathname.startsWith("/p/"),E=()=>{var e,t,n;let s=window._preloads,r=(null==s?void 0:null===(e=s.post)||void 0===e?void 0:e.id)&&(null==s?void 0:s.pub),i=!!(null==s?void 0:null===(t=s.post)||void 0===t?void 0:t.slug)&&(null==s?void 0:null===(n=s.post)||void 0===n?void 0:n.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1];return!!(r&&S()&&i)},O=e=>e?e.is_subscribed?"Paid subs":e.is_free_subscribed?"Free subs":"Anonymous":"Anonymous";function N(){var e,t,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(document.location.pathname.startsWith("/embed")&&b&&(null===(n=window)||void 0===n?void 0:null===(t=n._preloads)||void 0===t?void 0:null===(e=t.pub)||void 0===e?void 0:e.embed_tracking_disabled))return;x(h.PAGES,Object.assign(function(){let e={};if(b){let t=window._preloads&&"post"in window._preloads&&window._preloads.post,n=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname);n&&t&&n[1]===t.slug&&(e.post_id=t.id,e.post_audience=t.audience,e.post_type=t.type)}return e}(),s));let r=(0,a.xL)();if(r&&(new Image().src="https://www.facebook.com/tr?id=".concat(r,"&ev=PageView")),(0,d.g)("pageview"),(0,a.XY)("pageview"),(0,a.Hx)("page_view"),b&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,c.ZP)("add_section_and_tag_metadata")){if(S()&&!E())return;if(S()){let t=window._preloads;e.data={audience:O(null==t?void 0:t.user)}}}window.PARSELY.beacon.trackPageView(e)}}function P(e){var t,n,s,r,a,u,c,d,p;let f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},v=null;try{v=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let h={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:o.W,iframeVisitId:y,r:(0,m.x)("r"),magicUserId:"undefined"!=typeof window&&(null===(s=window)||void 0===s?void 0:null===(n=s._preloads)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.is_magic)?window._preloads.user.id:void 0},f),context:{client_type:"web",displayMode:_,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!==(u="undefined"!=typeof window&&window.innerHeight)&&void 0!==u?u:0,width:null!==(c="undefined"!=typeof window&&window.innerWidth)&&void 0!==c?c:0},campaign:(0,i.l)(),timezone:v,screen:{height:null!==(d="undefined"!=typeof window&&(null===(r=window.screen)||void 0===r?void 0:r.height))&&void 0!==d?d:0,width:null!==(p="undefined"!=typeof window&&(null===(a=window.screen)||void 0===a?void 0:a.width))&&void 0!==p?p:0}}};return(0,l.m)(JSON.stringify(h))}function j(e,t,n){let s=e.length,r=e.map(e=>e.length).reduce((e,t)=>e+t,0);return P(h.FIREHOSE_BATCH_SENT,{dataSize:r,batchSize:s,batchType:t,eventType:null==n?void 0:n.type})}function x(e){var t,n,s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let i=P(e,r);I.add(i),(null===(s=window)||void 0===s?void 0:null===(n=s._preloads)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.is_global_admin)&&console.log("EVENT: ".concat(e),r)}},59176:function(e,t,n){"use strict";n(79546)},23854:function(e,t,n){"use strict";n.d(t,{us:()=>r});var s,r=((s={}).comments_disabled="comments_disabled",s.free_subscription_required="free_subscription_required",s.paid_subscription_required="paid_subscription_required",s.founding_subscription_required="founding_subscription_required",s)},13253:function(e,t,n){"use strict";function s(e){if(null==e)return{};try{var t,n,s;let r=new URL(e);if("substack:"!==r.protocol)return{};let i={},o=r.pathname.split("/").filter(e=>e.length>0),a=new URLSearchParams(r.search),u={};a.forEach((e,t)=>{u[t]=e}),Object.keys(u).length>0&&(i.queryParams=u);let c=r.host;if(null==c&&0===Object.keys(u).length)return i;switch(c){case"users":o[0]&&"me"!==o[0]&&(i.surface="profile",i.userID=Number(o[0]),i.surfaceID=i.userID);break;case"posts":case"post":o[0]&&(i.postID=Number(o[0]),i.surface="post",i.surfaceID=i.postID),"comments"===o[1]&&(i.commentID=o[2],i.surface="post-comment",i.surfaceID=Number(o[0]),o[2]&&(i.surfaceID=Number(i.commentID)));break;case"publications":o[0]&&(i.publicationID=Number(o[0]),i.surface="publication",i.surfaceID=i.publicationID),"posts"===o[1]&&o[2]&&(i.slug=o[2],i.surface="post",i.surfaceID=i.slug),"drafts"===o[1]&&o[2]&&(i.draftID=o[2]),"chat"===o[1]&&(i.surface="publication-chat",i.surfaceID=i.publicationID),"threads"===o[1]&&(i.surface="publication-threads",i.surfaceID=i.publicationID);break;case"notes":i.surface="notes",o[0]&&(i.noteID=o[0],i.surfaceID=i.noteID,"module"===o[0]&&null!=o[1]&&(i.surface="notes-module",i.surfaceID=o[1]));break;case"communityPosts":o[0]&&(i.communityPostID=o[0],i.surface="community-post",i.surfaceID=i.communityPostID);break;case"communityComments":o[0]&&(i.replyID=o[0],i.surface="community-comments",i.surfaceID=i.replyID);break;case"messages":"dm"===o[0]&&(i.surface="dm","user"===o[1]&&o[2]?i.userID=Number(o[2]):o[1]&&(i.threadID=o[1],i.surface="dm-thread",i.surfaceID=i.threadID,"reply"===o[2]&&o[3]&&(i.messageID=o[3],i.surface="dm-reply",i.surfaceID=i.messageID)));break;case"accept-gift":o[0]&&(i.giftID=o[0],i.surfaceID=i.giftID,i.surface="accept-gift");break;case"send-reader-gifts":o[0]&&(i.giftID=o[0],i.surfaceID=i.giftID,i.surface="send-reader-gift");break;case"post-collection":o[0]&&(i.collectionID=o[0]);break;case"live-stream":o[0]&&(i.streamID=o[0],i.surface="live-stream",i.surfaceID=i.streamID,"invite"===o[1]&&o[2]&&(i.inviteID=o[2]));break;case"feed":i.surface="feed","topic"===o[0]&&o[1]?(i.topicID=o[1],i.surface="feed-topic",i.surfaceID=i.topicID):o[0]&&(i.noteID=o[0],i.surfaceID=i.noteID);break;case"post-composer":o[0]&&(i.draftID=o[0]);break;case"media-feed":o[0]&&(i.surface="media-feed",i.noteID=o[0],i.surfaceID=i.noteID);break;case"publication":o[0]&&(i.publicationID=Number(o[0]),i.surface="publication",i.surfaceID=i.publicationID,"post"===o[1]&&o[2]&&(i.postID=Number(o[2]),i.surface="post",i.surfaceID=i.postID));break;case"leaderboard":o[0]&&(i.surface="leaderboard",i.surfaceID=o[0]);break;case"user-suggestions":i.surface="user-suggestions";break;case"search":i.surface="app-search";break;case"discover":i.surface="discover"}return u.query&&(i.query=u.query,"app-search"===i.surface&&(i.surfaceID=i.query)),u.url&&(i.url=u.url),null!=u.name&&null!=u.id&&(i.categoryID=u.id,"discover"===i.surface&&(i.surfaceID=i.categoryID)),(null!=u.postId||null!=u.post_id)&&(i.postID=Number(null!==(t=u.postId)&&void 0!==t?t:u.post_id),i.surface="posts"===c?"post":c,i.surfaceID=i.postID),(null!=u.publicationId||null!=u.publication_id)&&(i.publicationID=Number(null!==(n=u.publicationId)&&void 0!==n?n:u.publication_id),i.surface="posts"===c?"post":c,i.surfaceID=null!==(s=i.postID)&&void 0!==s?s:i.publicationID),null!=i.publicationID&&isNaN(i.publicationID)&&delete i.publicationID,null!=i.userID&&isNaN(i.userID)&&delete i.userID,null!=i.postID&&isNaN(i.postID)&&delete i.postID,null!=i.surfaceID&&"string"!=typeof i.surfaceID&&isNaN(i.surfaceID)&&delete i.surfaceID,i}catch(e){return{}}}n.d(t,{Rk:()=>s}),n(14773)},35934:function(e,t,n){"use strict";n.d(t,{gz:()=>r});var s=n(27412);class r extends Error{constructor(e,t={},n=!1,r=null){let i,o;super(e),(0,s._)(this,"status",void 0),(0,s._)(this,"userVisible",void 0),(0,s._)(this,"messageHtml",void 0),(0,s._)(this,"response",void 0),(0,s._)(this,"type",void 0),(0,s._)(this,"metadata",void 0),this.name=this.constructor.name;let a=null,u=null,c=null;if("object"==typeof t){var d,l,p,f,m,v;i=null!==(d=t.status)&&void 0!==d?d:500,n=null!==(l=t.userVisible)&&void 0!==l&&l,r=null!==(p=t.messageHtml)&&void 0!==p?p:null,a=null!==(f=t.responseBody)&&void 0!==f?f:null,u=null!==(m=t.type)&&void 0!==m?m:null,c=null!==(v=t.metadata)&&void 0!==v?v:null}else i=t;this.status=i,this.userVisible=!!a||n,this.messageHtml=r,this.type=u,this.metadata=c,a?o=a:this.userVisible?r?o={errors:[{msg:e,msgHTML:r}],type:"list"}:(o={error:e,type:"single"},this.type&&(o.type=this.type),this.metadata&&(o.metadata=this.metadata)):o={error:""},this.response={body:o},Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},(()=>{var e=[];n.O=function(t,s,r,i){if(s){i=i||0;for(var o=e.length;o>0&&e[o-1][2]>i;o--)e[o]=e[o-1];e[o]=[s,r,i];return}for(var a=1/0,o=0;o<e.length;o++){for(var s=e[o][0],r=e[o][1],i=e[o][2],u=!0,c=0;c<s.length;c++)(!1&i||a>=i)&&Object.keys(n.O).every(function(e){return n.O[e](s[c])})?s.splice(c--,1):(u=!1,i<a&&(a=i));if(u){e.splice(o--,1);var d=r();void 0!==d&&(t=d)}}return t}})(),n.rv=function(){return"1.2.5"},(()=>{var e={1834:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,o=s[0],a=s[1],u=s[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(u)var d=u(n)}for(t&&t(s);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(d)},s=self.webpackChunksubstack=self.webpackChunksubstack||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.ruid="bundler=rspack@1.2.5";var s=n.O(void 0,["8117","6629","1778","6722","1825","2484","3834","6839","9850","1542","7810","8783"],function(){return n(5777)});s=n.O(s)})();