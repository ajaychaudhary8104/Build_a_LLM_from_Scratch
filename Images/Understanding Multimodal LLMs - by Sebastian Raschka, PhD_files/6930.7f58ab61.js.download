(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6930"],{24271:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={popover:"popover-Q5L48i",visible:"visible-w2GbD1",mounted:"mounted-xAyTLJ",disabled:"disabled-qyVgYn",explainer:"explainer-FXmc_P",dismissExplainer:"dismissExplainer-ns56FG",mobileFooter:"mobileFooter-CGz8PV",button:"button-r00Nrm"}},98550:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={trigger:"trigger-V8d1vI",absolute:"absolute-PTY2O3",fixed:"fixed-n4RrZu",line:"line-DsYVXw",active:"active-Yh0Zwm","indent-1":"indent-1-vdeuvl",indent1:"indent-1-vdeuvl","indent-2":"indent-2-yiZ6hb",indent2:"indent-2-yiZ6hb","indent-3":"indent-3-levoo9",indent3:"indent-3-levoo9",label:"label-ZmMXKp",menu:"menu-IsOZj4",row:"row-gbMU1E"}},63523:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={transcriptionStatus:"transcriptionStatus-OyxRN5",transcriptionChunk:"transcriptionChunk-DKBYAw",hoverChunk:"hoverChunk-IPtOLw",rowIndicator:"rowIndicator-jiY8sp",hoverRow:"hoverRow-zMw3pV",activeRow:"activeRow-S2HzS9",rowText:"rowText-T4jYBi",speakerText:"speakerText-lh6QvQ",rowEditableText:"rowEditableText-PLHmec",activeWord:"activeWord-J6YmxG",loadingSilhouette:"loadingSilhouette-znOXmS",playCircle:"playCircle-Ech_eu"}},71004:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={subscribeButton:"subscribeButton-LcKYi7"}},59961:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={"byline-wrapper":"byline-wrapper-rwhTzJ",bylineWrapper:"byline-wrapper-rwhTzJ",bottomWithTos:"bottomWithTos-g5MwKO","byline-wrapper--swap-on-mobile":"byline-wrapper--swap-on-mobile-Cs2Jac",bylineWrapperSwapOnMobile:"byline-wrapper--swap-on-mobile-Cs2Jac","byline-faces--swap-on-mobile":"byline-faces--swap-on-mobile-ucRXf3",bylineFacesSwapOnMobile:"byline-faces--swap-on-mobile-ucRXf3",subscribeWidget:"subscribeWidget-sIP7pQ",title:"title-X77sOw",subtitle:"subtitle-HEEcLo"}},24407:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={customThemeHeader:"customThemeHeader-hnC_lZ",headerImageContainer:"headerImageContainer-RUy6uK",portraitImage:"portraitImage-IxD7Ka",fullWidthImageHeader:"fullWidthImageHeader-t5EqiB",fullWidthHeaderContent:"fullWidthHeaderContent-HjaASe",fullWidthHeaderSubtitle:"fullWidthHeaderSubtitle-VOunOK",titleAndImageContainer:"titleAndImageContainer-Eb9L9t",titleAndImageHeader:"titleAndImageHeader-IHm_Y5",noImage:"noImage-uj9DyC",image:"image-_uMo6d",thickRule:"thickRule-aN1kyk","portrait-image-container":"portrait-image-container-zwwsEI",portraitImageContainer:"portrait-image-container-zwwsEI","landscape-image-container":"landscape-image-container-QgDAqQ",landscapeImageContainer:"landscape-image-container-QgDAqQ",bylineWrapper:"bylineWrapper-AHoCt5",bylineContainer:"bylineContainer-TXwfpr",copy:"copy-WXqCFN",eagleStampContainer:"eagleStampContainer-UIFpMk",eagleStampImage:"eagleStampImage-EG5gS3",america250Logo:"america250Logo-Mg4J2n"}},37381:function(e,t,i){"use strict";i.d(t,{Z:()=>n});let n={inputWithIcons:"inputWithIcons-vs0rlV",error:"error-nMG79e",inputWrapper:"inputWrapper-Wvkzvn",icon:"icon-wnhO6c"}},7464:function(e,t,i){"use strict";i.d(t,{m:()=>S,p:()=>k});var n=i(58865),r=i(16584),o=i(30396),a=i(94184),l=i.n(a),s=i(12936),d=i(20888),c=i(95441),u=i(68833),p=i(62981),h=i(94874),m=i(15771),g=i(19081),_=i(6490),b=i(58175),f=i(60308),v=i(23945),Z=i(47929);let y={grow_from_bottom:"grow_from_bottom-zeI7HJ",ig_modal_logo:"ig_modal_logo-jNPKzo",logo_left:"logo_left-HHdifs",logo_right:"logo_right-_og3lw",logo_substack:"logo_substack-xHlM5o",ig_image_border:"ig_image_border-FuLDjr",ig_modal_button_container:"ig_modal_button_container-wKHKdO"};function w(){let e=(0,n._)(["Follow "," in the app"]);return w=function(){return e},e}function C(){let e=(0,n._)(["Get the Substack app to follow ","'s reading and writing."]);return C=function(){return e},e}let S=e=>{let{pub:t,slug:i}=e,{iString:n}=(0,c.M1)(),[a,l]=(0,p.Z)("app-footer-sheet",259200),[d,v]=(0,o.eJ)(!a),w=(0,s.Su)();(0,o.d4)(()=>{d&&(w(),(0,u.j)(u.FP.APP_FOOTER_SHEET_CTA_VIEWED),l())},[]);let C=(0,f.K8_)(t.subdomain,i,{redirect:"app-store",source:Z.b3.postFooter});return(0,r.tZ)(_.u_,{isOpen:d,onClose:()=>{v(!1)},position:"bottom",className:y.grow_from_bottom,children:(0,r.tZ)(_.fe,{children:(0,r.BX)(g.tu,{gap:20,alignItems:"center",paddingY:12,children:[(0,r.tZ)(h.qE,{size:80,user:{id:t.author_id,name:t.author_name,handle:t.author_handle,photo_url:t.author_photo_url}}),(0,r.BX)(g.tu,{gap:8,alignItems:"center",children:[(0,r.BX)(b.xv.H3,{translated:!0,align:"center",weight:"heavy",children:["Continue reading ",I18N.p(t.author_name)]}),(0,r.tZ)(b.xv.B2,{translated:!0,align:"center",children:"Available for iOS and Android"})]}),(0,r.BX)(g.tu,{gap:8,alignItems:"center",children:[(0,r.tZ)(m.zx,{priority:"primary",onClick:()=>{(0,u.j)(u.FP.APP_BANNER_TAPPED,{surface:"post",type:"sheet"})},href:C,style:{width:"355px",boxShadow:"none"},children:n("Read in the app")}),(0,r.tZ)(m.zx,{priority:"tertiary",onClick:()=>{(0,u.j)(u.FP.APP_FOOTER_SHEET_CTA_DISMISSED),v(!1)},style:{width:"355px"},children:n("Read in browser")})]})]})})})},k=e=>{let{pub:t,slug:i,action:n,platform:a}=e,{iString:s,iTemplate:h}=(0,c.M1)(),[S,k]=(0,p.Z)("".concat(a,"_webview_app_upsell"),259200),[x,B]=(0,o.eJ)(!S);(0,o.d4)(()=>{x&&(0,u.j)(u.FP.APP_FOOTER_SHEET_CTA_VIEWED,{surface:"post",type:"webview-sheet",platform:a})},[]);let I=(0,f.K8_)(t.subdomain,i,{redirect:"app-store",source:Z.b3.postFooter}),P="read"===n?t.logo_url:t.author_photo_url||t.logo_url;return(0,r.tZ)(_.u_,{isOpen:x,onClose:()=>{B(!1)},position:"bottom",children:(0,r.tZ)(_.fe,{children:(0,r.BX)(g.tu,{gap:32,alignItems:"center",paddingY:40,paddingX:24,children:[(0,r.tZ)(g.gq,{alignItems:"center",justifyContent:"center",style:{position:"relative"},children:P?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.hs,{justifyContent:"center",alignItems:"center",className:l()(y.ig_modal_logo,y.logo_substack,y.logo_left),children:(0,r.tZ)(d.e,{src:"/img/substack-white.svg",imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:44})}),(0,r.tZ)(g.hs,{justifyContent:"center",alignItems:"center",className:l()(y.ig_modal_logo,y.logo_right),children:(0,r.tZ)(d.e,{className:y.ig_image_border,src:P,imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:56})})]}):(0,r.tZ)(g.hs,{justifyContent:"center",alignItems:"center",className:l()(y.ig_modal_logo,y.logo_substack),children:(0,r.tZ)(d.e,{src:"/img/substack-white.svg",imageIsFixedWidth:!0,useRetinaSizing:!0,maxWidth:44})})}),(0,r.BX)(g.tu,{gap:8,alignItems:"center",children:[(0,r.tZ)(b.xv.B1,{align:"center",weight:"semibold",children:"read"===n?s("Read in the Substack app"):h(w(),t.author_name)}),(0,r.tZ)(b.xv.B4,{align:"center",fontSize:14,color:"secondary",children:"read"===n?s("Get the Substack app for the best reading experience on the go."):h(C(),(0,v.Q1)(t.author_name))})]}),(0,r.BX)(g.tu,{gap:16,paddingX:16,alignItems:"center",className:y.ig_modal_button_container,children:[(0,r.tZ)(m.zx,{priority:"primary",onClick:()=>{(0,u.j)(u.FP.APP_BANNER_TAPPED,{surface:"post",type:"webview-sheet",platform:a})},href:I,children:s("Open in app")}),(0,r.tZ)(m.zx,{priority:"tertiary",onClick:()=>{(0,u.j)(u.FP.APP_FOOTER_SHEET_CTA_DISMISSED,{surface:"post",type:"webview-sheet",platform:a}),k(),B(!1)},children:s("Maybe later")})]})]})})})}},84844:function(e,t,i){"use strict";i.d(t,{j:()=>h});var n=i(16584),r=i(30396),o=i(64998),a=i(75778),l=i(68833),s=i(61254),d=i(19081),c=i(58175),u=i(60836),p=i(47929);let h=e=>{let{user:t,isMobile:i,post:h}=e,m=(0,a.LC)(),g=(null==t?void 0:t.is_contributor)&&!m,_=!i||!g;return((0,r.d4)(()=>{_||(0,l.j)(l.FP.POST_STATS_IN_APP_UPSELL_SEEN,{post_id:h.id,source:"mobile_post_page"})}),_)?null:(0,n.BX)(d.sg,{children:[(0,n.tZ)(s.iz,{}),(0,n.BX)(d.X2,{className:"statsLink-zUlL_7",alignItems:"center",justifyContent:"space-between",children:[(0,n.tZ)(c.xv.B3,{paddingY:16,as:"a",weight:"semibold",translated:!0,href:(0,u.rN)({postId:h.id,params:{utm_source:p.b3.substack,utm_medium:p.lP.web,utm_campaign:p.VX.postStatsUpsellMobilePostPage,redirect:"app-store"}}),onClick:()=>(0,l.j)(l.FP.POST_STATS_IN_APP_UPSELL_CLICKED,{post_id:h.id,source:"mobile_post_page"}),children:"View stats in the app"}),(0,n.tZ)(o.Z,{})]}),(0,n.tZ)(s.iz,{})]})}},89074:function(e,t,i){"use strict";i.d(t,{F:()=>p});var n=i(7409),r=i(99282),o=i(16584),a=i(17103),l=i(3258),s=i(19081),d=i(58175),c=i(63651);let u={blurb:"blurb-PNfDEK"};function p(e){let{crossPostInfo:{introText:t,crossPostedPub:i,crossPostingByLine:n},postType:r}=e;return(0,o.tZ)(s.sg,{paddingTop:8,paddingBottom:24*("podcast"!==r),children:(0,o.BX)(s.sg,{paddingX:20,padding:8,className:u.blurb,gap:12,children:[(0,o.tZ)(h,{crossPostedPub:i}),(0,o.tZ)(m,{introText:t}),(0,o.tZ)(g,{byline:n})]})})}function h(e){let{crossPostedPub:t}=e;return(0,o.BX)(s.X2,{className:u.attribution,gap:8,alignItems:"center",children:[(0,o.tZ)(a.Z,{stroke:"var(--color-accent)",size:16}),(0,o.BX)(d.xv.Meta,{translated:!0,color:"accent",children:["Cross-posted by ",(0,o.tZ)(d.hh,{href:(0,c.SVA)(t),children:I18N.p(t.name)})]})]})}function m(e){let{introText:t}=e;return t?(0,o.tZ)(d.xv.B2,{fontStyle:"italic",children:'"'.concat(t,'"')}):null}function g(e){let{byline:t}=e,i=null==t?void 0:t[0];return i?(0,o.BX)(d.xv.B2,{color:"accent",children:["- ",(0,o.tZ)(l.ZP,(0,r._)((0,n._)({},i),{type:"user",uuid:""}))]}):null}},92828:function(e,t,i){"use strict";i.d(t,{yi:()=>U});var n=i(7409),r=i(99282),o=i(58865),a=i(16584),l=i(30396),s=i(83034),d=i(75744),c=i(57391),u=i(35543),p=i(95441),h=i(60807),m=i(68833),g=i(48980),_=i(59176),b=i(7882),f=i(98914),v=i(94184),Z=i.n(v),y=i(94874),w=i(19081),C=i(58175),S=i(84864);let k={faceCloudContainer:"faceCloudContainer-_kz9BO",primaryFaceContainer:"primaryFaceContainer-QzdEHY",face:"face-a11rOP",primaryFace:"primaryFace-Zu2iVg",primaryFaceAuthorContainer:"primaryFaceAuthorContainer-mPPOG3",primaryFaceAuthor:"primaryFaceAuthor-N0sPLb",secondaryFaces:"secondaryFaces-RiD4aO",secondaryFace0:"secondaryFace0-cUCgnT",secondaryFace1:"secondaryFace1-rYcX59",secondaryFace2:"secondaryFace2-AmFCpK",secondaryFace3:"secondaryFace3-twgHiS",secondaryFace4:"secondaryFace4-nKprf4",secondaryFace5:"secondaryFace5-nvsfNi",secondaryFace6:"secondaryFace6-R9pNd0",secondaryFace7:"secondaryFace7-KnD5jG",secondaryFace8:"secondaryFace8-Ozyivi"},x=e=>{let{pub:t,suggestions:i}=e,n=[82,68,68,55,54,36,36,36,36];return(0,a.BX)("div",{className:k.faceCloudContainer,children:[(0,a.BX)("div",{className:k.primaryFaceContainer,children:[(0,a.tZ)(y.qE,{className:Z()(k.face,k.primaryFace),size:100,showProfileHovercard:!0,user:{id:t.author_id,name:t.author_name,handle:t.author_handle,photo_url:t.author_photo_url}}),t.author_name&&(0,a.tZ)(w.tu,{className:k.primaryFaceAuthorContainer,alignItems:"center",justifyContent:"center",children:(0,a.tZ)(C.xv.B4,{className:k.primaryFaceAuthor,children:(0,S.guessFirstName)(t.author_name)})})]}),i.map((e,t)=>(0,a.tZ)(y.qE,{className:Z()(k.face,k.secondaryFaces,k["secondaryFace".concat(t)]),size:n[t],showProfileHovercard:!0,user:e.recommendedPublication.author}))]})};var B=i(15771),I=i(6490),P=i(51776),E=i(70379),N=i(91400),X=i(98012),F=i(60308),A=i(26111),T=i(23945),O=i(47929);let L={is_www:!0,is_personal_mode:!1,id:0,name:"Substack",subdomain:"www",copyright:"Substack Inc.",mailing_address:"548 Market Street PMB 72296\nSan Francisco, CA 94104",email_from:"no-reply@substack.com",email_from_name:"Substack",logo_url:"/img/substack.png?v=3",language:"en",theme:void 0,theme_var_color_links:void 0,theme_var_background_pop:void 0,theme_var_cover_bg_color:void 0,custom_domain:void 0,type:void 0},H={avatarContainer:"avatarContainer-Bvvbb6",avatar:"avatar-Gt1fvo",termsFooter:"termsFooter-KerNk3"};function R(){let e=(0,o._)(["Already following ",""]);return R=function(){return e},e}function M(){let e=(0,o._)(["",", a paid subscriber of ",", shared this with you."]);return M=function(){return e},e}function D(){let e=(0,o._)(["",", a subscriber of ",", shared this with you."]);return D=function(){return e},e}function z(){let e=(0,o._)([""," shared this with you."]);return z=function(){return e},e}function W(){let e=(0,o._)(["Follow "," to see what else they're reading."]);return W=function(){return e},e}function V(){let e=(0,o._)(["Follow "," and continue reading"]);return V=function(){return e},e}function j(){let e=(0,o._)(["Sign up and follow ",""]);return j=function(){return e},e}let U=e=>{var t,i;let{pub:o,post:s,referringUser:d,freeSignupEmail:v,forceFollowPrompt:Z,surface:y}=e,[C,S]=(0,l.eJ)(!1),[k,x]=(0,l.eJ)(!1),[B,P]=(0,l.eJ)(0),[O,L]=(0,l.eJ)(v),[H,M]=(0,l.eJ)(!1),{iString:D,iTemplate:z}=(0,p.M1)(),W=(0,N.XA)(),V=(0,E.pm)(),j=(0,h.aF)(),{getExperimentVariant:U}=(0,c.jc)(),G=U("app_upsell_follow_prompt"),K=!!j||!!v,Q=(0,u.Sv)(d,null!=y?y:"follow-referrer-prompt",void 0,{auto:K}),$=(0,b.ib)({pathname:"/api/v1/user/".concat(d.id,"/subscriber-lists?lists=following"),auto:!0}),ee=null!==(i=null===(t=$.result)||void 0===t?void 0:t.subscriberLists.flatMap(e=>e.groups.flatMap(e=>e.users)).slice(0,9))&&void 0!==i?i:[],et=(0,l.Ye)(()=>({free_signup_email:v,post_id:null==s?void 0:s.id,referring_user_id:d.id}),[v,null==s?void 0:s.id,d.id]);(0,l.d4)(()=>{if(!$.hasLoadedOnce||K&&!Q.isLoaded||Q.isFollowing){Z&&Q.isFollowing&&V.popToast(e=>(0,a.tZ)(E.FN,(0,r._)((0,n._)({},e),{text:z(R(),(0,T.Q1)(d.name))})));return}try{let e=new URL(document.referrer);if(/(\b|\.)google\./.test(e.hostname)||["news.ycombinator.com","hckrnews.com"].includes(e.hostname))return}catch(e){}if(j&&(0,A.x)("follow-referrer-on-load")){(0,f.iO)("follow-referrer-on-load"),(0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_REDIRECTED,et),eo({fromRedirect:!0}).then(()=>S(!0));return}let e="follow-prompt-for-post-".concat(null==s?void 0:s.id,"-and-referrer-").concat(d.id,"-shown-at"),t=(0,_.mM)(e);!(!Z&&t&&(0,X.Z)().subtract(7,"days").isBefore(t))&&((0,_.ex)(e,Date.now()),S(!0),(0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_SHOWN,et))},[j,$.hasLoadedOnce,Q.isLoaded]);let ei=(0,l.I4)(()=>{(0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_DISMISSED,(0,r._)((0,n._)({},et),{step:B})),S(!1)},[et,S,B]),en=(0,l.I4)(function(){let{email:e,reason:t="sign-in-click"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_SIGN_IN_INITIATED,(0,r._)((0,n._)({},et),{reason:t}));let i=(0,F.rhs)({"follow-referrer-on-load":d.id});(0,f.uX)((0,F.uXE)({email:e,for_pub:null==o?void 0:o.subdomain,redirect:i}))},[et,null==o?void 0:o.subdomain,d.id]),er=(0,l.I4)(async function(){let e,t,i,{email:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{({user:e,userExists:t}=await (0,g.rd)("/api/v1/reader/signup/just_email",{method:"POST",json:{email:o}}))}catch(e){e instanceof g.kp&&(i=e.getMessage())}return e?(L(o),0):t?((0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_EXISTING_EMAIL_ENTERED,(0,r._)((0,n._)({},et),{email:o})),L(o),2):((0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_SIGNUP_FAILED,(0,r._)((0,n._)({},et),{email:o,error:i})),V.popToast(e=>(0,a.tZ)(E.FN,(0,r._)((0,n._)({},e),{text:i||D("Something went wrong. Please try again later.")}))),1)},[et,V,D]),eo=(0,l.I4)(async function(){let e,{email:t,fromRedirect:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!k){if(x(!0),i||(0,m.j)(m.FP.FOLLOW_REFERRER_PROMPT_CTA_CLICKED,(0,r._)((0,n._)({},et),{email:t})),!K){if(!t){P(1),x(!1);return}if(1===(e=await er({email:t}))){x(!1);return}}Q.isFollowing||void 0!==e&&0!==e||(await Q.toggle(),M(!0)),!j||i?P(2):S(!1),x(!1)}},[j,K,Q,et,k,x,P,er]);return(0,a.tZ)(I.u_,{position:W?"bottom":"default",fullscreenMobile:0!==B,isOpen:C,onClose:ei,children:(0,a.BX)(w.tu,{style:{height:"100%"},children:[(0,a.tZ)(I.xB,{showClose:!0,onClose:ei}),(0,a.BX)(w.tu,{flex:"grow",gap:48,paddingX:32,paddingBottom:32,paddingTop:12,children:[0===B&&(0,a.tZ)(J,{pub:o,referringUser:d,referrerFollowingList:ee,loading:k,showFaceCloud:!j&&"treatment_cloud"===G,onFollowClick:eo,onDismiss:ei}),1===B&&(0,a.tZ)(q,{referringUser:d,loading:k,onFollowWithEmail:eo,onSignInClick:en}),2===B&&(0,a.tZ)(Y,{email:O,referringUser:d,followed:H,onDismiss:ei})]})]})})},J=e=>{var t,i,n,r,o,l;let s,{pub:d,referringUser:c,referrerFollowingList:u,loading:h,showFaceCloud:m,onFollowClick:g,onDismiss:_}=e,{iTemplate:b,iString:f}=(0,p.M1)(),v=null!==(o=null!==(r=null!==(n=c.photo_url)&&void 0!==n?n:null==d?void 0:d.logo_url)&&void 0!==r?r:null==d?void 0:d.author_photo_url)&&void 0!==o?o:(0,F.I4e)(c.id),Z=(0,T.Q1)(c.name),S=null===(i=c.subscriptions)||void 0===i?void 0:null===(t=i.find(e=>e.publication_id==(null==d?void 0:d.id)))||void 0===t?void 0:t.membership_state;s=d&&"subscribed"===S?b(M(),c.name,d.name):d&&"free_signup"===S?b(D(),c.name,d.name):b(z(),c.name);let k="".concat(s," ").concat(b(W(),Z));return(0,a.BX)(w.tu,{alignItems:"center",gap:8,children:[m?(0,a.BX)(a.HY,{children:[(0,a.BX)(C.xv.H2,{translated:!0,align:"center",weight:"heavy",children:["Follow ",I18N.p(c.name)]}),(0,a.tZ)(C.xv.B3,{align:"center",color:"secondary",children:k}),(0,a.tZ)(w.gq,{paddingY:24,children:(0,a.tZ)(x,{pub:{author_id:c.id,author_name:c.name,author_photo_url:null!==(l=c.photo_url)&&void 0!==l?l:""},suggestions:u.map(e=>({recommendedPublication:{author:e}}))})})]}):(0,a.BX)(w.tu,{alignItems:"center",gap:16,paddingBottom:16,children:[(0,a.tZ)("div",{className:H.avatarContainer,children:(0,a.tZ)(y.qE,{className:H.avatar,user:{photo_url:v},size:64})}),(0,a.tZ)(C.xv.H3,{align:"center",weight:"heavy",children:s})]}),(0,a.tZ)(B.zx,{priority:"primary",disabled:h,onClick:g,children:b(V(),Z)}),(0,a.tZ)(B.zx,{priority:"secondary",onClick:_,children:f("Skip")})]})},q=e=>{let{referringUser:t,loading:i,onFollowWithEmail:n,onSignInClick:r}=e,[o,s]=(0,l.eJ)(""),{iTemplate:c}=(0,p.M1)(),u=(0,l.sO)(null);(0,l.d4)(()=>{var e;null===(e=u.current)||void 0===e||e.focus()},[]);let h=(0,l.I4)(e=>{e.preventDefault(),""!==o&&n({email:o})},[n,o]),m=(0,T.Q1)(t.name);return(0,a.BX)(a.HY,{children:[(0,a.BX)(w.tu,{alignItems:"center",gap:8,children:[(0,a.BX)(C.xv.H3,{translated:!0,align:"center",weight:"heavy",children:["Sign up to follow ",I18N.p(m)]}),(0,a.tZ)(C.xv.B4,{translated:!0,align:"center",color:"secondary",children:"Discover great writing and follow your friends on Substack"})]}),(0,a.BX)(w.tu,{gap:12,children:[(0,a.tZ)(C.xv.B4,{translated:!0,weight:"semibold",children:"Your email address"}),(0,a.tZ)("form",{onSubmit:h,children:(0,a.tZ)(P.oi,{ref:u,placeholder:"bob@gmail.com",value:o,onChange:e=>s(e.currentTarget.value)})})]}),(0,a.BX)(w.tu,{alignItems:"center",gap:16,justifyContent:"center",children:[(0,a.tZ)(B.zx,{disabled:i||""===o,onClick:h,children:c(j(),m)}),(0,a.BX)(C.xv.B4,{translated:!0,align:"center",color:"secondary",children:["Already have a Substack account?"," ",(0,a.tZ)(C.xv.B4,{translated:!0,color:"secondary",decoration:"underline",as:"a",href:"#",onClick:r,children:"Sign in"})]})]}),(0,a.tZ)(w.tu,{flex:"grow",justifyContent:"end",children:(0,a.tZ)(C.xv.B4,{align:"center",children:(0,a.tZ)(d.fJ,{className:H.termsFooter,publication:L})})})]})},Y=e=>{let{onDismiss:t,email:i,referringUser:o,followed:l}=e,{iString:d}=(0,p.M1)(),u=(0,N.XA)(),{getExperimentVariant:h}=(0,c.jc)(),m=h("app_install_send_code"),g={utm_medium:O.lP.web,utm_campaign:O.VX.postFollowReferrerPrompt,utm_source:O.b3.post};return(0,a.BX)(a.HY,{children:[l?(0,a.BX)(w.tu,{alignItems:"center",gap:4,children:[(0,a.tZ)(C.xv.H3,{translated:!0,align:"center",weight:"heavy",children:"Read and follow in the app"}),(0,a.BX)(C.xv.B4,{translated:!0,align:"center",color:"secondary",children:["See who else ",I18N.p((0,T.Q1)(o.name))," reads in the Substack app"]})]}):(0,a.BX)(w.tu,{alignItems:"center",gap:4,children:[(0,a.BX)(C.xv.H3,{translated:!0,align:"center",weight:"heavy",children:["Finish following ",I18N.p((0,T.Q1)(o.name))," in the app"]}),(0,a.BX)(C.xv.B4,{translated:!0,align:"center",color:"secondary",children:["See who else ",I18N.p((0,T.Q1)(o.name))," reads on Substack"]})]}),u?(0,a.BX)(a.HY,{children:[(0,a.tZ)(w.gq,{alignSelf:"center",children:(0,a.tZ)("img",{src:(0,F.zF4)("/img/app-preview-card.png"),height:265})}),(0,a.tZ)(w.gq,{flex:"grow",children:(0,a.BX)(w.tu,{alignItems:"center",flex:"grow",gap:8,children:[(0,a.tZ)(B.zx,{href:(0,F.D4e)(g),children:d("Get the Substack app")}),(0,a.tZ)(B.zx,{priority:"tertiary",onClick:t,children:d("Skip")})]})})]}):(0,a.BX)(w.tu,{alignItems:"center",gap:24,children:[(0,a.tZ)("div",{style:{minHeight:"text"===m?355:"email"===m?325:231},children:(0,a.tZ)(s.AppInstallContent,(0,r._)((0,n._)({},g),{suggestedEmail:i,size:180,padding:0}))}),(0,a.tZ)(B.zx,{priority:"secondary",onClick:t,children:d("Continue reading")})]})]})}},75021:function(e,t,i){"use strict";i.d(t,{E:()=>F,f:()=>E});var n=i(7409),r=i(99282),o=i(58865),a=i(16584),l=i(30396),s=i(97428),d=i(80569),c=i.n(d),u=i(92002),p=i(73580),h=i(64515);let m=function(e){var t=(0,u._)({},(0,p._)(e));return(0,a.BX)(h.l,(0,r._)((0,n._)({name:"ReaderSubscriberGiftBadgeIcon",svgParams:{height:26,width:26,viewBox:"1.5 1.5 23 23",fill:"none"},fill:"none"},t),{children:[(0,a.tZ)("rect",{x:"1.5",y:"1.5",width:"23",height:"23",rx:"11.5",fill:"#fff",stroke:"none"}),(0,a.tZ)("g",{"clip-path":"url(#clip0_24306_47333)",children:(0,a.tZ)("path",{style:"fill:none;strokeWidth:2;strokeLinecap:round;strokeLinejoin:round;stroke:rgb(21.176471%,21.568627%,21.568627%);stroke-opacity:1;stroke-miterlimit:4;",d:"M 12 7.998047 L 12 21 M 12 7.998047 C 11.636719 6.509766 11.015625 5.232422 10.212891 4.341797 C 9.410156 3.451172 8.466797 2.982422 7.5 3 C 6.837891 3 6.199219 3.263672 5.730469 3.732422 C 5.261719 4.201172 4.998047 4.833984 4.998047 5.501953 C 4.998047 6.164062 5.261719 6.796875 5.730469 7.265625 C 6.199219 7.734375 6.837891 7.998047 7.5 7.998047 M 12 7.998047 C 12.363281 6.509766 12.984375 5.232422 13.787109 4.341797 C 14.589844 3.451172 15.533203 2.982422 16.5 3 C 17.162109 3 17.800781 3.263672 18.269531 3.732422 C 18.738281 4.201172 19.001953 4.833984 19.001953 5.501953 C 19.001953 6.164062 18.738281 6.796875 18.269531 7.265625 C 17.800781 7.734375 17.162109 7.998047 16.5 7.998047 M 19.001953 12 L 19.001953 19.001953 C 19.001953 19.529297 18.791016 20.039062 18.416016 20.414062 C 18.041016 20.789062 17.53125 21 16.998047 21 L 7.001953 21 C 6.46875 21 5.958984 20.789062 5.583984 20.414062 C 5.208984 20.039062 4.998047 19.529297 4.998047 19.001953 L 4.998047 12 M 4.001953 7.998047 L 19.998047 7.998047 C 20.554688 7.998047 21 8.449219 21 9 L 21 10.998047 C 21 11.554688 20.554688 12 19.998047 12 L 4.001953 12 C 3.445312 12 3 11.554688 3 10.998047 L 3 9 C 3 8.449219 3.445312 7.998047 4.001953 7.998047 Z M 4.001953 7.998047 ",transform:"matrix(0.75,0,0,0.75,0,0) translate(5 5)"})}),(0,a.tZ)("defs",{children:(0,a.tZ)("clipPath",{id:"clip0_24306_47333",children:(0,a.tZ)("rect",{width:"16",height:"16",fill:"white",transform:"translate(4 4)",stroke:"none"})})})]}))};var g=i(95441),_=i(33668),b=i(68833),f=i(94874),v=i(15771),Z=i(19081),y=i(6490),w=i(58175),C=i(51776),S=i(60308),k=i(23945),x=i(47929);function B(){let e=(0,o._)(["Accept ","gift"]);return B=function(){return e},e}function I(){let e=(0,o._)(["Decline ","gift"]);return I=function(){return e},e}function P(){let e=(0,o._)([""," gifted you this paid post. Unlock it in the free Substack app"]);return P=function(){return e},e}let E=e=>{let{post:t,pub:i,referringUser:n,freeSignupEmail:r,user:o,variant:d,startOnEmailCollection:u}=e,[p,h]=(0,l.eJ)(!0),[m,_]=(0,l.eJ)(!1),[f,w]=(0,l.eJ)(!!u),{iString:C,iTemplate:P}=(0,g.M1)(),E=(0,k.Q1)(n.name);(0,l.d4)(()=>{p&&(0,b.j)(b.FP.GIFT_POST_POPOVER_VIEWED,{post_id:t.id,pub_id:i.id,referring_user_id:n.id,user_id:null==o?void 0:o.id,start_on_email_collection:u,variant:d,source:u?"paywall":"popover"})},[p,t.id,i.id,n.id,null==o?void 0:o.id,u,d]);let F=()=>{h(!1)},A=async e=>{if((0,b.j)(e?b.FP.GIFT_POST_EMAIL_SUBMITTED:b.FP.GIFT_POST_CLAIM_CTA_CLICKED,{post_id:t.id,pub_id:i.id,referring_user_id:n.id,user_id:null==o?void 0:o.id,variant:d,source:u?"paywall":"popover"}),!o&&!e){w(!0);return}_(!0);try{await c().post("/api/v1/post_unlock_token").send({post_id:t.id,gifting_user_id:n.id,email:e}),window.location.href=(0,S.K8_)(i.subdomain,t.slug,{redirect:"app-store",source:x.b3.giftPostPrompt})}catch(e){console.error(e)}finally{_(!1)}};return(0,a.tZ)(y.u_,{position:f?"default":"bottom",isOpen:p,onClose:F,fullscreenMobile:f,className:"grow_from_bottom-xX6ELN",children:(0,a.tZ)(y.fe,{children:f?(0,a.tZ)(Z.tu,{gap:8,children:(0,a.tZ)(X,{freeSignupEmail:r,onClose:F,onSubmit:A,isLoading:m})}):(0,a.BX)(Z.tu,{gap:8,children:[(0,a.tZ)(N,{referringUser:n}),(0,a.tZ)(v.zx,{leading:(0,a.tZ)(s.Z,{}),priority:"primary",paddingY:12,disabled:m,onClick:()=>A(),children:"treatment_more_gifty"===d?P(B(),E?"".concat(E,"'s "):""):C("Claim my free post")}),(0,a.tZ)(v.zx,{priority:"secondary",onClick:F,children:"treatment_more_gifty"===d?P(I(),E?"".concat(E,"'s "):""):C("Continue reading with paywall")})]})})})},N=e=>{let{referringUser:t}=e,{iTemplate:i}=(0,g.M1)(),n=(0,k.Q1)(t.name),r=i(P(),n);return(0,a.tZ)(Z.tu,{alignItems:"stretch",gap:8,children:(0,a.BX)(Z.tu,{alignItems:"center",gap:16,paddingBottom:16,children:[(0,a.BX)("div",{className:"avatarContainer-dQGv93",children:[(0,a.tZ)(f.qE,{user:t,size:80}),(0,a.tZ)(F,{})]}),(0,a.tZ)(w.xv.H3,{textAlign:"center",children:r}),(0,a.tZ)(w.xv.B3,{color:"secondary",align:"center",paddingTop:4,paddingX:12,fontSize:15,translated:!0,children:"Available now for iOS and Android"})]})})},X=e=>{let{freeSignupEmail:t,onClose:i,onSubmit:n,isLoading:r}=e,[o,s]=(0,l.eJ)(null!=t?t:""),{iString:d}=(0,g.M1)(),c=(0,_.e)();return(0,a.BX)(Z.tu,{gap:16,children:[(0,a.tZ)(y.xB,{showClose:!0,onClose:i}),(0,a.tZ)(w.xv.H3,{translated:!0,children:"Claim your Free Post"}),(0,a.tZ)(w.xv.B3,{color:"secondary",translated:!0,children:"Enter your email to claim under your existing Substack account or to create a new one."}),(0,a.tZ)(C.oi,{type:"email",name:"email",placeholder:d("Email Address"),ref:c,value:o,onInput:e=>s(e.currentTarget.value)}),(0,a.tZ)(v.zx,{priority:"primary",onClick:()=>n(o),disabled:r,children:r?"Submitting...":"Submit"})]})},F=e=>{let{size:t=32,style:i}=e;return(0,a.tZ)("div",{className:"badge-ijM1EO",style:(0,r._)((0,n._)({},i),{height:t,width:t}),children:(0,a.tZ)(m,{height:t})})}},3862:function(e,t,i){"use strict";i.d(t,{E:()=>w});var n=i(7409),r=i(99282),o=i(16584),a=i(94184),l=i.n(a),s=i(1548),d=i(85685),c=i(95441),u=i(40647),p=i(94874),h=i(24547),m=i(19081),g=i(58175),_=i(98012),b=i(31377),f=i(60308),v=i(63651),Z=i(84864),y=i(59961);function w(e){let{variant:t,post:i,pub:a,relativeLinks:w=!1,hideMeta:C=!1,hideFaces:S=!1,showAudience:k=!1,renderBylines:x,className:B,avatarSize:I=36}=e,{getConfigFor:P}=(0,u.xR)(),E=!!P("enable_author_pages"),{publishedBylines:N=[]}=i,X=N.map(e=>{if(!E)return e;let t=a.contributors.find(t=>t.user_id===e.id);return t?(0,r._)((0,n._)({},e),{name:t.name||e.name,bio:t.bio||e.bio,photo_url:t.photo_url||e.photo_url}):e}),F=a.bylines_enabled&&(0,Z.getPrintedByline)(a,i),A=!S&&F&&a.byline_images_enabled&&X.some(e=>{let{photo_url:t}=e;return!!t});k||(k="page"!==i.type);let{iContext:T,language:O}=(0,c.M1)(),L=e=>{let t=E?(0,f.rfk)({userId:e.id,pub:a}):null;return E&&!t?{href:void 0}:t?{href:t}:{href:(0,v.NNq)(e)}};return(0,o.BX)(m.hs,{className:l()("byline-wrapper",{[y.Z["byline-wrapper--swap-on-mobile"]]:"shows"===t},B),gap:12,alignItems:"center",children:[A&&(0,o.tZ)(m.hs,{className:l()({[y.Z["byline-faces--swap-on-mobile"]]:"shows"===t}),children:(0,o.tZ)(h.H,{users:X,max:4,size:I,renderAvatar:e=>(0,o.tZ)(p.xV,(0,r._)((0,n._)({},e),{noBase:w}))})}),(0,o.BX)(m.tu,{children:[F&&(x?x({publishedBylines:X,getLinkProps:L}):(0,o.tZ)(g.xv.Meta,{color:"pub-primary-text",children:(0,o.tZ)(s.M,{array:X,formatter:e=>(0,o.tZ)(d.ProfileHoverCard,{disabled:E,subject:e,utmSource:"byline",children:(0,o.tZ)(g.xv,(0,r._)((0,n._)({as:"a"},L(e)),{decoration:"hover-underline",children:e.name}))}),limit:4})})),!C&&(0,o.BX)(m.hs,{gap:4,children:[(0,o.tZ)(g.xv.Meta,{color:"pub-secondary-text",children:(0,_.Z)(i.post_date).locale(O).format("MMM DD, YYYY")}),k&&(0,b.isPaidAudience)(i.audience)&&(0,o.BX)(g.xv.Meta,{color:"pub-secondary-text",children:["∙ ",T("postAudience","Paid")]})]})]})]})}},21316:function(e,t,i){"use strict";i.d(t,{m:()=>m});var n=i(7409),r=i(98848),o=i(16584),a=i(99282),l=i(64515);let s=e=>{var{stroke:t="black",height:i=19,width:s=19}=e,d=(0,r._)(e,["stroke","height","width"]);return(0,o.BX)(l.l,(0,a._)((0,n._)({},d),{name:"AdhocEmailIcon",svgParams:{height:i,width:s,viewBox:"0 0 19 19"},children:[(0,o.tZ)("path",{d:"M3 4C3 3.72386 3.22386 3.5 3.5 3.5H13C13.2761 3.5 13.5 3.72386 13.5 4V12.5C13.5 12.7761 13.2761 13 13 13H3.5C3.22386 13 3 12.7761 3 12.5V4Z",stroke:t}),(0,o.tZ)("path",{d:"M3.5 4L8.25 9.02499L13 4",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M5 13.5V15C5 15.2761 5.22386 15.5 5.5 15.5H15.3151C15.5913 15.5 15.8151 15.2761 15.8151 15V7C15.8151 6.72386 15.5913 6.5 15.3151 6.5H14",stroke:t})]}))};var d=i(76157),c=i(4878);let u=e=>(0,o.BX)(l.l,(0,a._)((0,n._)({},e),{name:"PodcastIcon",svgParams:{height:19,width:19},children:[(0,o.tZ)("path",{d:"M10.1505 3H8.61291C6.06527 3 4 4.9401 4 7.33333V10","stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M8.89246 3H10.4301C12.9778 3 15.043 4.9401 15.043 7.33333V10.5","stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M3 12.1429V13.3571C3 14.5406 3.81359 15.5 4.81721 15.5H6.42473V10H4.81721C3.81359 10 3 10.9594 3 12.1429Z","stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M16 12.1429V13.3571C16 14.5406 15.1864 15.5 14.1828 15.5H12.5753V10H14.1828C15.1864 10 16 10.9594 16 12.1429Z","stroke-linejoin":"round"})]}));var p=i(34293);let h=e=>{var{stroke:t="black",height:i=19,width:s=19}=e,d=(0,r._)(e,["stroke","height","width"]);return(0,o.tZ)(l.l,(0,a._)((0,n._)({},d),{name:"VideoIcon",svgParams:{height:i,width:s,viewBox:"2 2 15 15"},children:(0,o.BX)("g",{fill:"transparent",children:[(0,o.tZ)("path",{d:"M15.5 15H3.5V4H15.5V15Z",stroke:t,"stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M11.5 11L8.5 9V12.5L11.5 11Z",stroke:t,"stroke-linejoin":"round"}),(0,o.tZ)("path",{d:"M4 7H15",stroke:t}),(0,o.tZ)("path",{d:"M4.5 4L7.5 7",stroke:t}),(0,o.tZ)("path",{d:"M8 4L11 7",stroke:t}),(0,o.tZ)("path",{d:"M11.5 4L14.5 7",stroke:t})]})}))},m=e=>{var{postType:t}=e,i=(0,r._)(e,["postType"]);switch(t){case"newsletter":return(0,o.tZ)(c.Z,(0,n._)({},i));case"adhoc_email":return(0,o.tZ)(s,(0,n._)({},i));case"thread":return(0,o.tZ)(p.Z,(0,n._)({},i));case"podcast":return(0,o.tZ)(u,(0,n._)({},i));case"video":return(0,o.tZ)(h,(0,n._)({},i));case"restack":return(0,o.tZ)(d.Z,(0,n._)({},i));default:return console.warn("Unrecognized post type: [".concat(t,"]")),null}}},94594:function(e,t,i){"use strict";i.d(t,{o:()=>E});var n=i(7409),r=i(99282),o=i(58865),a=i(16584),l=i(30396),s=i(80569),d=i.n(s),c=i(41352),u=i(50515),p=i(95441),h=i(68833),m=i(98914),g=i(71068),_=i(15771),b=i(19081),f=i(10510),v=i(58175),Z=i(64300),y=i(70379),w=i(84864);function C(){let e=(0,o._)(["Why do you recommend this Substack?"]);return C=function(){return e},e}function S(){let e=(0,o._)(["Optional"]);return S=function(){return e},e}let k={CHOOSE:"choose"},x=e=>{var t;let{pubToRecommendBack:i,recommendingPub:o,recommendedPubs:s,setStep:h,close:x,setLoading:I,source:P}=e,{iString:E,iTemplate:N}=(0,p.M1)(),[X,F]=(0,l.eJ)(null),{popToast:A}=(0,y.pm)();(0,l.d4)(()=>{let e=null==s?void 0:s.find(e=>{let{id:t}=e;return t===i.id});if(null===X&&e){var t;F(null!==(t=e.blurb)&&void 0!==t?t:null)}},[X,s,i.id]);let T=async()=>{if(!o){console.warn("No recommending pub");return}await d().put("/api/v1/recommendations").send((0,n._)({recommended_publication_id:i.id,recommending_publication_id:o.id,source:P||"recommendation_notification_email",suggested:!1},X&&X.trim()?{description:X.trim()}:{})),(null==s?void 0:s.some(e=>{let{id:t}=e;return t!==i.id}))?null==x||x():null==h||h(k.CHOOSE),I?(I(!0),null==x||x()):((0,m.uX)("/publish/recommendations"),A(e=>(0,a.tZ)(y.FN,(0,r._)((0,n._)({},e),{text:E("Recommendation added")}))))},O=(0,w.getByLine)(i);return(0,a.BX)(a.HY,{children:[(0,a.BX)(b.gq,{justifyContent:"space-between",alignItems:"center",flex:"grow",paddingX:20,paddingTop:20,paddingBottom:16,borderBottom:"detail",children:[(0,a.tZ)(v.xv.H3,{weight:"heavy",flex:"grow",children:E("New recommendation")}),(0,a.tZ)(_.hU,{priority:"tertiary",role:"button",size:"sm",title:"Close",onClick:()=>{x&&x()},"aria-label":"close",children:(0,a.tZ)(c.Z,{size:20})})]}),(0,a.tZ)(b.tu,{padding:20,children:(0,a.BX)(b.tu,{gap:24,children:[(0,a.tZ)(b.tu,{padding:12,gap:12,bg:"secondary",radius:"sm",shadow:"xs",children:(0,a.BX)(b.gq,{gap:12,flex:"grow",alignItems:"center",children:[(0,a.tZ)(g.xu,{radius:"xs",border:"detail",children:(0,a.tZ)(f.wk,{pub:i,size:56,radius:"xs"})}),(0,a.BX)(b.tu,{flex:"grow",minWidth:0,children:[(0,a.tZ)(v.xv.B3,{weight:"semibold",ellipsis:!0,children:i.name}),O&&(0,a.tZ)(v.xv.B4,{color:"secondary",children:"By ".concat(O)})]})]})}),(0,a.BX)(b.tu,{gap:8,children:[(0,a.BX)(b.gq,{flex:"grow",justifyContent:"space-between",children:[(0,a.tZ)(v.xv.B4,{weight:"semibold",children:N(C())}),(0,a.tZ)(v.xv.B4,{color:"secondary",children:N(S())})]}),(0,a.tZ)(Z.g,(0,n._)({placeholder:E("Tell your subscribers why they might enjoy ".concat(i.name,"...")),onChange:e=>F(e.currentTarget.value),value:null!=X?X:"",rows:6,maxlength:500},u.J))]}),(0,a.BX)(b.tu,{gap:12,children:[(0,a.tZ)(_.zx,{disabled:(null!==(t=null==X?void 0:X.length)&&void 0!==t?t:0)>500,onClick:T,children:E("Recommend ".concat(i.name))}),(0,a.tZ)(B,{})]})]})})]})},B=()=>{let{iString:e}=(0,p.M1)();return(0,a.BX)(v.xv.B4,{color:"secondary",align:"center",children:[e("Recommendations will be shown to people after they subscribe to your Substack.")," ",(0,a.tZ)(v.hh,{href:"https://support.substack.com/hc/en-us/articles/5036794583828-How-can-I-recommend-other-publications-on-Substack-",onClick:()=>{(0,h.j)(h.FP.MANAGE_RECOMMENDATIONS_LEARN_MORE_CLICKED,{source:"modal-recommend-pub"})},decoration:"underline",children:e("Learn more")})]})};var I=i(6490);function P(){let e=(0,o._)(["Recommend "," to your readers"]);return P=function(){return e},e}let E=e=>{let{pub:t}=e,[i,n]=(0,l.eJ)(!0),[r,o]=(0,l.eJ)(null),[s,c]=(0,l.eJ)(!1),[u,m]=(0,l.eJ)(!1),{iString:g,iTemplate:Z}=(0,p.M1)();return((0,l.d4)(()=>{let e=async()=>{try{let e=(await d().get("/api/v1/publication_user/default")).body;if(o(e),!e||e.id===t.id){c(!0),n(!1);return}let i=await d().get("/api/v1/recommendations/from/".concat(e.id,"/to/").concat(t.id));c(!!i.body),n(!1)}catch(e){console.error("Failed to load recommend cta: ",e)}};!r&&i&&e()},[t,i,r]),i||s||r&&r.invite_only)?null:(0,a.BX)(a.HY,{children:[(0,a.BX)(b.tu,{alignItems:"center",padding:32,gap:20,borderTop:"detail",style:{marginTop:24},"data-testid":"recommendation-footer",children:[(0,a.tZ)(f.jM,{pub:t,size:48,openInNewTab:!0}),(0,a.BX)(b.tu,{gap:8,children:[(0,a.tZ)(v.xv.H4,{align:"center",children:Z(P(),t.name)}),t.hero_text&&(0,a.tZ)(v.xv.B3,{color:"secondary",align:"center",clamp:3,children:t.hero_text})]}),(0,a.tZ)(_.zx,{onClick:()=>{(0,h.j)(h.FP.END_OF_POST_RECOMMEND_CTA_CLICKED,{recommended_pub_id:t.id,recommending_pub_id:null==r?void 0:r.id}),m(!0)},children:g("Recommend")})]}),(0,a.tZ)(N,{isOpen:u,onClose:()=>m(!1),pubToRecommend:t,recommendingPub:r,setStep:()=>{m(!1)},setLoading:n})]})},N=e=>{let{isOpen:t,onClose:i,pubToRecommend:o,recommendingPub:l,setLoading:s,setStep:d}=e,c=(0,y.pm)(),{iString:u}=(0,p.M1)();return(0,a.tZ)(I.u_,{isOpen:t,onClose:i,children:(0,a.tZ)(x,{pubToRecommendBack:o,recommendingPub:l,setStep:d,close:i,setLoading:e=>{s(e),c.popToast(e=>(0,a.tZ)(y.FN,(0,r._)((0,n._)({},e),{text:u("Recommendation added")})))},source:"end-of-post-recommend-cta"})})}},93678:function(e,t,i){"use strict";i.d(t,{O7:()=>U,Up:()=>V});var n=i(92002),r=i(73580),o=i(7409),a=i(99282),l=i(16584),s=i(30396),d=i(94184),c=i.n(d),u=i(25256),p=i(42297),h=i(29032),m=i(13025),g=i(71787),_=i(46990),b=i(2564),f=i(20068),v=i(75697),Z=i(4038),y=i(98471),w=i(81821);let C=e=>{let{pub:t,post:i,style:n,selectionId:r,size:o,hoverOverlay:a=!0}=e,{img:d,imgDownload:c,shareData:u,useNativeShare:p}=(0,Z.Q)((0,y.lx)({pub:t,post:i,selectionId:r,style:n})),h=(0,s.I4)(async()=>{await (0,y.mT)({post_id:i.id,selection_id:r,aspect_ratio:n.aspectRatio,type:"post_selection",shareData:p?u:void 0,eventName:"SHARE_SELECTION_IMAGE_DOWNLOADED",additionalTrackingData:{interaction:"click"}})},[i.id,r,n.aspectRatio,p,u]);return(0,l.tZ)(y.kA,{onClick:h,href:p?void 0:c,children:(0,l.BX)(y.A4,{size:o,children:[!(0,w.tq)()&&d&&a&&(0,l.tZ)(y.rA,{onClick:h}),(0,l.tZ)(y.M$,{img:d})]})})};var S=i(95441),k=i(60807),x=i(68833),B=i(48980),I=i(7882),P=i(98914),E=i(15771),N=i(19081),X=i(6490),F=i(70379),A=i(78088),T=i(60308),O=i(63651),L=i(47929);let H=e=>{let{assetStyle:t,aspectRatio:i,loadingSelection:n,post:r,pub:o,themeVariables:a,setAspectRatio:s,assetTheme:d,setAssetTheme:c,selectionId:u}=e,p=[],h=(null==r?void 0:r.cover_image)||(null==o?void 0:o.cover_photo_url);return h&&p.push("image"),a.background_pop&&p.push("accent"),p.push("primary"),(0,l.tZ)(X.fe,{children:(0,l.BX)(N.tu,{gap:20,children:[(0,l.tZ)(N.hs,{className:"imageContainer-OjAkhl",alignItems:"center",justifyContent:"center",children:r&&u&&!n&&(0,l.tZ)(C,{pub:o,post:r,style:t,selectionId:u,size:400,hoverOverlay:!1})}),(0,l.BX)(A.k2,{children:[(0,l.tZ)(A.Qe,{assetThemes:p,assetTheme:d,setAssetTheme:c,theme:a,pubCoverImageUrl:h}),(0,l.tZ)(A.zw,{aspectRatio:i,setAspectRatio:s,includeInstagram:!0})]})]})})},R=e=>{let{pub:t,post:i,isOpen:n,onClose:r,selection:d,selectionId:c,setSelectionId:u,themeVariables:p}=e,{iString:h}=(0,S.M1)(),[Z,y]=(0,s.eJ)(!1),[C,A]=(0,s.eJ)("instagram"),R=(null==i?void 0:i.cover_image)||(null==t?void 0:t.cover_photo_url),[M,D]=(0,s.eJ)(R?"image":"accent"),z=(0,k.aF)(),W=(0,F.pm)(),V=(0,w.tq)({checkFirst4:!0}),{result:j}=(0,I.ib)({pathname:"/api/v1/publication/".concat(t.id,"/theme"),auto:!!d&&i&&n&&!p,cacheTtl:1/0,initialResult:p,deps:[d,i,n,p]}),U=n&&(!!c||Z)&&!!j;(0,s.d4)(()=>{U&&(null==i?void 0:i.id)&&(0,x.j)(x.FP.SHARE_SELECTION_MODAL_OPENED,{post_id:i.id})},[U,i]),(0,s.d4)(()=>{d&&i&&n&&(async()=>{y(!0);try{let e=await (0,B.rd)("/api/v1/post_selection",{method:"PUT",json:{postId:i.id,publication_id:t.id,startParagraph:d.startParagraph,endParagraph:d.endParagraph,startOffset:d.startOffset,endOffset:d.endOffset}});if(y(!1),e instanceof Error)throw e;u(e.selection.id.toString())}catch(e){alert((0,B.i)(e)),y(!1),r()}})()},[t,i,d,n,u,r]);let J=(e,n)=>{let r=$(),o=(0,v.O1)(null,{pub:t,post:i,selectionId:c,user:z||void 0,medium:"web",utm_campaign:L.VX.postShareSelection,params:{aspectRatio:C,bgColor:r.bgColor,textColor:r.textColor,bgImage:r.bgImage}});(0,v.I)(e,n,{shareUrl:o,post:i,pub:t,selectionId:c,utm_campaign:L.VX.postShareSelection})},q=async()=>{J("copy",e=>((0,P.vQ)(e),W.popToast(e=>(0,l.tZ)(F.FN,(0,a._)((0,o._)({},e),{text:h("Copied link to clipboard")}))),!1))},Y=async()=>{J("facebook",e=>(0,O.n1t)("https://www.facebook.com/sharer/sharer.php",{u:e}))},G=async()=>{i&&J("twitter",e=>(0,T.LaP)({url:e,text:i.title}))},K=async()=>{J("linkedin",e=>(0,O.n1t)("https://www.linkedin.com/sharing/share-offsite/",{url:e}))},Q=()=>j&&"string"==typeof j.print_on_web_bg_color&&j.print_on_web_bg_color.startsWith("hsl")?j.cover_print_primary||"#1a1a1a":(null==j?void 0:j.print_on_web_bg_color)||"#1a1a1a",$=()=>{if(!j)return{aspectRatio:C};switch(M){case"image":return{aspectRatio:C,textColor:"#ffffff",bgImage:!0};case"accent":return{aspectRatio:C,bgColor:j.background_pop,textColor:j.print_on_pop};default:return{aspectRatio:C,bgColor:j.web_bg_color||j.cover_bg_color,textColor:Q()}}},ee=async()=>{let e=$(),n="Share Selection - ".concat(e.aspectRatio);(0,x.j)(x.FP.SHARE_SELECTION_IMAGE_DOWNLOADED,{post_id:null==i?void 0:i.id,selection_id:c,type:n,aspect_ratio:C,interaction:"click"});let r=document.createElement("a");r.href=i&&c?(0,T.BPe)(t,i,c,e,n):"",r.download="Share Selection - ".concat(C),r.target="_blank",r.rel="noopener noreferrer",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)};return(0,l.BX)(X.u_,{isOpen:U,onClose:r,width:640,fullscreenMobile:!0,children:[(0,l.tZ)(X.xB,{title:h("Share quote"),showClose:!0,onClose:r,showDivider:!0}),(0,l.tZ)(H,{assetStyle:$(),aspectRatio:C,loadingSelection:Z,post:i,pub:t,themeVariables:j,setAspectRatio:A,assetTheme:M,setAssetTheme:D,selectionId:c,setSelectionId:u}),(0,l.tZ)(X.mz,{direction:"row",showDivider:!0,primaryButton:V?void 0:(0,l.tZ)(E.zx,{priority:"primary",flex:"grow",disabled:!c,onClick:ee,leading:(0,l.tZ)(m.Z,{size:20}),children:h("Download")}),secondaryButton:(0,l.BX)(N.gq,{gap:8,children:[(0,l.tZ)(E.hU,{priority:"secondary-outline",onClick:q,disabled:!c,children:(0,l.tZ)(g.Z,{height:20,width:20})}),(0,l.tZ)(E.hU,{priority:"secondary-outline",onClick:G,disabled:!c,children:(0,l.tZ)(f.Z,{height:20,width:20})}),(0,l.tZ)(E.hU,{priority:"secondary-outline",onClick:Y,disabled:!c,children:(0,l.tZ)(_.Z,{height:20,width:20})}),(0,l.tZ)(E.hU,{priority:"secondary-outline",onClick:K,disabled:!c,children:(0,l.tZ)(b.Z,{height:20,width:20})})]})})]})};var M=i(58175),D=i(75419),z=i(91400),W=i(24271);function V(e){var t,i,n;let{post:r,pub:o,selection:a,onClose:d,themeVariables:c,userInteractionDisabled:u}=e,[p,h]=(0,s.eJ)(!1),[m,g]=(0,s.eJ)(),_=(null==a?void 0:null===(n=a.text)||void 0===n?void 0:null===(i=n.split)||void 0===i?void 0:null===(t=i.call(n," "))||void 0===t?void 0:t.length)||0,b=!a||!(_>=3)||r.is_draft||(null==o?void 0:o.invite_only)?null:(0,l.tZ)(j,{selection:a,onClose:d,userInteractionDisabled:u,onShowSelectionModal:h,post:r,pub:o});return(0,l.BX)(l.HY,{children:[b,(0,l.tZ)(R,{selection:a,pub:o,post:r,isOpen:p,onClose:()=>h(!1),selectionId:m,setSelectionId:g,themeVariables:c})]})}function j(e){let{selection:t,onClose:i,userInteractionDisabled:n,onShowSelectionModal:r,post:d,pub:c}=e,{iString:m}=(0,S.M1)(),g=(0,z.XA)(),_=(0,k.aF)(),b=(0,D.i3)(),f=(0,F.pm)(),v=!d.is_draft&&!!_,[Z,y]=(0,s.eJ)(!1),[w,C]=(0,s.eJ)(!1);(0,s.d4)(()=>{C(!0)},[]),(0,s.d4)(()=>{let e=()=>{C(!1),i()};return window.addEventListener("scroll",e,{passive:!0,capture:!0,once:!0}),()=>{window.removeEventListener("scroll",e,{capture:!0})}},[i]),(0,s.d4)(()=>{let e=()=>{t.y-57*!!g<104?E({top:t.rect.bottom+12}):E({top:t.y-92-12})};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[t,g]);let[I,E]=(0,s.eJ)({top:-1}),X=async()=>{y(!0);try{let e=await (0,B.rd)("/api/v1/post_selection",{method:"PUT",json:{postId:d.id,publication_id:c.id,startParagraph:t.startParagraph,endParagraph:t.endParagraph,startOffset:t.startOffset,endOffset:t.endOffset}});if(y(!1),e instanceof Error)throw e;return e.selection.id}catch(e){alert((0,B.i)(e)),y(!1)}},A=async()=>{let e=await X();if((0,x.j)(x.FP.RESTACK_SELECTION_CLICKED,{post_id:d.id}),!_){let t=(0,T.rhs)(document.location.href,{action:"restack-comment",selection:e}),i=(0,T.uXE)({redirect:t});(0,P.uX)(i,{local_navigation:!1,event});return}let t=(0,T.uRy)(c,d,{urlParams:{r:_?_.id.toString(36):null,selection:e,utm_campaign:L.VX.postShareSelection,utm_medium:L.lP.web}});await b.open({restackUrl:t}) instanceof Error?f.popToast(e=>(0,l.tZ)(F.FN,(0,a._)((0,o._)({},e),{text:"Failed to post"}))):f.popToast(e=>(0,l.tZ)(F.FN,(0,a._)((0,o._)({},e),{text:"Note sent",cta:"View",href:(0,O.E2n)()})))},H=!v&&!Z&&!!_;return -1===I.top?null:(0,l.tZ)(h.C,{children:(0,l.BX)(N.tu,{style:{top:I.top,bottom:I.bottom,left:t.rect.x+t.rect.width/2},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:"".concat(W.Z.popover," ").concat(w?W.Z.visible:""," ").concat(n?W.Z.disabled:""),padding:4,gap:4,children:[(0,l.BX)(U,{onClick:()=>{r(!0)},children:[(0,l.tZ)(u.Z,{stroke:"var(--color-utility-white)",size:20}),(0,l.tZ)(M.xv.B4,{color:"vibrance-primary",weight:"medium",children:m("Share")})]}),!c.hide_post_restacks&&v&&(0,l.BX)(U,{onClick:A,disabled:H,children:[(0,l.tZ)(p.Z,{stroke:"var(--color-utility-white)",size:20}),(0,l.tZ)(M.xv.B4,{color:"vibrance-primary",weight:"medium",children:m("Restack")})]})]})})}function U(e){var t=(0,n._)({},(0,r._)(e));return(0,l.tZ)(E.kG,(0,o._)({className:c()(W.Z.button,t.disabled&&W.Z.disabled),resetCss:!0},t))}},90156:function(e,t,i){"use strict";i.d(t,{H:()=>R});var n=i(7409),r=i(58865),o=i(16584),a=i(30396),l=i(80569),s=i.n(l),d=i(7464),c=i(347),u=i(94184),p=i.n(u),h=i(13304),m=i(74626),g=i(7523),_=i(95441),b=i(68833),f=i(98914),v=i(94874),Z=i(19081),y=i(60308);let w={subscribeDialog:"subscribeDialog-ApxQJS",dismissButton:"dismissButton-gWmS4u",pictureBox:"pictureBox-yO_tQ9",childPublicationIcon:"childPublicationIcon-u5S7bv",signInLink:"signInLink-v__pXF",background:"background-qPxN3C",error:"error-ekhTFi",closeIcon:"closeIcon-pSUQVJ",fp:"fp-sXrGxn",form:"form-mUblsD",subscribeButton:"subscribeButton-GT6UQz",signInLinkWrapper:"signInLinkWrapper-WFxaK4",hed:"hed-pyKjVu",dek:"dek-YOBGIH",emailInput:"emailInput-Znhurz"},C=e=>{let{position:t,offset:i,target:n,left:r,modal:a,pub:l,setDismissed:s,subscribe:d,email:c,setEmail:u,loading:C,errors:S,post:k,opacityOfBackground:x,onBackgroundClicked:B}=e,{iString:I}=(0,_.M1)();return(0,o.BX)(o.HY,{children:[(0,o.tZ)(Z.tu,{ref:a,alignItems:"center",className:p()(w.subscribeDialog,w.fp),style:{top:"absolute"===t?"".concat(i,"px"):"".concat(n,"px"),left:"".concat(r,"px"),position:t},children:(0,o.BX)(o.HY,{children:[(0,o.BX)(Z.gq,{alignItems:"end",justifyContent:"center",paddingBottom:8,children:[(0,o.tZ)("div",{className:w.pictureBox,children:(0,o.tZ)(v.qE,{className:w.authorIcon,size:80,user:{photo_url:l.logo_url}})}),(0,o.tZ)("div",{className:w.closeIcon,onClick:()=>s(!0),children:(0,o.tZ)(h.Z,{})})]}),(0,o.BX)(g.Z,{align:"center",className:w.hed,preset:"h4-sans-condensed",children:[I("Discover more from"),(0,o.tZ)("br",{}),I18N.p(l.name)]}),(0,o.tZ)(g.Z,{align:"center",className:w.dek,preset:"body",children:l.hero_text}),(0,o.BX)("form",{className:w.form,onSubmit:e=>{e.preventDefault(),d(c)},children:[(0,o.tZ)("input",{className:w.emailInput,disabled:C,placeholder:I("Enter your email"),value:c,onChange:e=>{e.stopPropagation(),e.preventDefault(),u(e.currentTarget.value)}}),(0,o.tZ)("div",{id:"error-container",children:S&&S.map(e=>(0,o.tZ)("div",{className:w.error,children:e}))}),(0,o.tZ)(m._,{className:w.subscribeButton,disabled:C,type:"submit",children:I("Subscribe")})]}),(0,o.tZ)(m._,{className:w.dismissButton,trailingIcon:"chevron-right",variant:"tertiary",onClick:()=>s(!0),children:I("Continue reading")}),(0,o.BX)(g.Z,{align:"center",className:w.signInLinkWrapper,preset:"caption",children:[(0,o.tZ)("div",{children:I("Already have an account?")}),(0,o.BX)("div",{children:[(0,o.tZ)("a",{className:w.signInLink,style:{cursor:"pointer"},onClick:()=>{(0,b.j)(b.FP.SUBSCRIBE_PROMPT_SIGN_IN_CLICKED,{post_id:k.id}),(0,f.uX)((0,y.uXE)({for_pub:l.subdomain,redirect:(0,y.uRy)(l,k)}))},children:I("Sign in")})," "]})]})]})}),x>0&&(0,o.tZ)("div",{className:w.background,style:{opacity:"".concat(x,"%")},onClick:B})]})};var S=i(57391),k=i(59176),x=i(71068),B=i(15771),I=i(1844),P=i(65523),E=i(58175),N=i(51776),X=i(41233),F=i(91400),A=i(57641),T=i(98012),O=i(6070),L=i(47929);function H(){let e=(0,r._)(["Discover more from ",""]);return H=function(){return e},e}let R=e=>{var t;let{pub:i,post:r,appUpsellEligible:l,isTest:u}=e,[p,h]=(0,a.eJ)(!1),[m,g]=(0,a.eJ)(!1),[R,M]=(0,a.eJ)(!1),[D,z]=(0,a.eJ)(!1),[W,V]=(0,a.eJ)(""),[j,U]=(0,a.eJ)([]),[J,q]=(0,a.eJ)(200),[Y,G]=(0,a.eJ)(0),K=(0,a.sO)(null),{exposeExperiment:Q,getExperimentVariant:$}=(0,S.jc)(),ee=(0,F.XA)(),et="pub-".concat(i.id,"-subscribe-prompt-next-shown-at"),ei="pub-".concat(i.id,"-takeover-next-shown-at"),en="undefined"!=typeof window&&(null===(t=window)||void 0===t?void 0:t.innerHeight)?window.innerHeight:700,er=document.getElementsByClassName("available-content"),eo=er.length>0&&er[0]?er[0].scrollHeight:0,ea=600;ea=Math.max(Math.min(600,eo-en),600),(()=>{var e;let{height:t,width:i}=(null===(e=K.current)||void 0===e?void 0:e.getBoundingClientRect())||{height:0,width:0};q("undefined"!=typeof window&&window&&K.current?(window.innerHeight-t)/2:200),G("undefined"!=typeof window&&window&&K.current?(window.innerWidth-i)/2:0)})();let[el,es]=(0,a.eJ)(en+Math.max(J,ea)),[ed,ec]=(0,a.eJ)(Math.max(document.documentElement.scrollTop||document.body.scrollTop,0)),[eu,ep]=(0,a.eJ)("absolute"),[eh,em]=(0,a.eJ)("fixed"===eu||ed>el-en),eg="fixed"===eu?60:Math.min(Math.max((ed-el+en)/(en-J)*60,0),60),e_=(0,a.I4)(()=>{!ee&&ed>=el-300&&M(!0)},[ed,ee,el,J,M]);(0,a.d4)(()=>{var e;if(u)return;let t=!0;eo<=1.5*en&&(h(!0),t=!1);let i=null;if(null===(e=document)||void 0===e?void 0:e.referrer){try{i=new URL(document.referrer)}catch(e){}((null==i?void 0:i.hostname)==="news.ycombinator.com"||(null==i?void 0:i.hostname)==="hckrnews.com")&&(h(!0),t=!1)}(0,k.mM)(et)>Date.now()&&(h(!0),t=!1),t&&(Q("hide_subscribe_prompt_on_post_page"),"treatment"===$("hide_subscribe_prompt_on_post_page")&&h(!0))},[]),(0,a.d4)(()=>{p&&l&&(Q("app_install_prompts"),"drawer"===$("app_install_prompts")&&g(!0))},[p,l,Q,$]),(0,a.d4)(()=>{eh&&(p||((0,b.j)(b.FP.SUBSCRIBE_PROMPT_SHOWN,{post_id:r.id}),(0,k.ex)(et,(0,T.Z)().add(1,"hour").valueOf()),(0,k.ex)(ei,(0,T.Z)().add(1,"hour").valueOf())))},[eh,p]),(0,a.d4)(()=>{R&&((0,b.j)(b.FP.SUBSCRIBE_PROMPT_DISMISSED,{post_id:r.id}),(0,k.ex)(et,(0,T.Z)().add(1,"day").valueOf()),(0,k.ex)(ei,(0,T.Z)().add(1,"hour").valueOf()))},[R]);let eb=e=>{window.location.href=(0,y.uRy)(i,r,{urlParams:{subscribe_prompt:e}})},ef=(0,a.I4)(async e=>{if(!D){z(!0),U([]),(0,b.j)(b.FP.SUBSCRIBE_PROMPT_SUBMITTED,{post_id:r.id});try{let t=await s().post("/api/v1/free").send({email:e,source:"post-subscribe-prompt"});(0,b.IU)(),"enabled"===i.payments_state||i.has_recommendations?document.location.href=(0,y.W1P)(i,(0,n._)({utm_medium:L.lP.web,utm_source:L.b3.postSubscribePrompt,utm_content:r&&r.id,simple:!0,just_signed_up:!0,next:(0,y.uRy)(i,r),requires_confirmation:t.body.requires_confirmation?"true":""},t.body.subscription_id&&{subscription_id:t.body.subscription_id},t.body.referral_token&&{referral_token:t.body.referral_token})):eb("free")}catch(e){var t,o,a,l,d;(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(t=o.body)||void 0===t?void 0:t.error)&&"string"==typeof e.response.body.error?U([e.response.body.error]):(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(a=l.body)||void 0===a?void 0:a.errors)&&Array.isArray(e.response.body.errors)&&e.response.body.errors.length>0&&"string"==typeof(null===(d=e.response.body.errors[0])||void 0===d?void 0:d.msg)&&U(e.response.body.errors.map(e=>e.msg))}finally{z(!1)}}},[r,i,D,z]);(0,a.d4)(()=>{if(p||R)return;let e=()=>{let e=Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),t=e-ed;t>0&&"absolute"===eu&&e>el-J&&ep("fixed"),t<0&&"fixed"===eu&&(ep("absolute"),es(ed+J)),t<0&&"absolute"===eu&&e<el-en&&es(en+Math.max(J,ea,ed)),ec(e),("fixed"===eu||t>0&&e>el-en)&&em(!0)};return window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[eu,el,es,ed,ec,em]),(0,a.d4)(()=>{if(p||R)return;let e=e=>{"Escape"===e.key&&M(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[p,R,M]);let{iString:ev,iTemplate:eZ}=(0,_.M1)();return m?(0,o.tZ)(d.m,{pub:i,slug:r.slug}):p||R?(0,o.tZ)(o.HY,{}):(0,O.HD)({pub:i})?(0,o.tZ)(C,{position:eu,offset:el,target:J,left:Y,modal:K,pub:i,setDismissed:M,subscribe:ef,email:W,setEmail:V,loading:D,errors:j,post:r,opacityOfBackground:eg,onBackgroundClicked:e_}):(0,o.BX)(c.h,{children:[(0,o.BX)(Z.tu,{ref:K,bg:"primary",border:"detail",radius:"md",shadow:"xl",className:w.subscribeDialog,style:{top:"absolute"===eu?"".concat(el,"px"):"".concat(J,"px"),left:"".concat(Y,"px"),position:eu},role:"dialog","aria-label":ev("Subscribe modal"),children:[(0,o.BX)(Z.tu,{gap:20,position:"relative",padding:20,children:[(0,o.tZ)(P.hQ,{onClose:()=>M(!0)}),(0,o.tZ)(x.xu,{alignSelf:"center",children:(0,o.tZ)(v.qE,{size:64,photoUrl:i.author_photo_url})}),(0,o.BX)(Z.tu,{justifyContent:"center",gap:4,alignItems:"center",textAlign:"center",children:[(0,o.tZ)(E.xv.B2,{weight:"semibold",color:"primary",children:eZ(H(),i.name)}),i.hero_text&&(0,o.tZ)(E.xv.B3,{color:"secondary",clamp:3,children:i.hero_text}),i.rankingDetailFreeSubscriberCount&&(0,o.tZ)(E.xv.B4,{paddingBottom:24,align:"center",color:"pub-secondary-text",children:i.rankingDetailFreeSubscriberCount})]}),(0,o.tZ)("form",{onSubmit:e=>{e.preventDefault(),ef(W)},children:(0,o.BX)(Z.tu,{gap:8,children:[(0,o.tZ)(N.oi,{placeholder:ev("Enter your email..."),value:W,disabled:D,onChange:e=>{e.stopPropagation(),e.preventDefault(),V(e.currentTarget.value)}}),j.length>0&&(0,o.tZ)(Z.tu,{gap:4,children:j.map(e=>(0,o.tZ)(I.y,{align:"center",children:e}))}),(0,o.tZ)(B.zx,{type:"submit",disabled:D,priority:"primary",children:ev("Subscribe")}),(0,o.tZ)(Z.sg,{paddingTop:8,opacity:80,children:(0,o.tZ)(A.O,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center"})})]})})]}),(0,o.tZ)(X.et,{children:(0,o.BX)(o.HY,{children:[ev("Already have an account? "),(0,o.tZ)(E.hh,{color:"accent",decoration:"hover-underline",onClick:()=>{(0,b.j)(b.FP.SUBSCRIBE_PROMPT_SIGN_IN_CLICKED,{post_id:r.id}),(0,f.uX)((0,y.uXE)({for_pub:i.subdomain,redirect:(0,y.uRy)(i,r)}))},cursor:"pointer",children:ev("Sign in")})]})})]}),eg>0&&(0,o.tZ)("div",{className:w.background,onClick:e_,style:{opacity:"".concat(eg,"%")}})]})}},44881:function(e,t,i){"use strict";i.d(t,{O:()=>g});var n=i(7409),r=i(99282),o=i(16584),a=i(80569),l=i.n(a),s=i(72508),d=i(95441),c=i(15771),u=i(19081),p=i(68709),h=i(6490),m=i(51776);function g(e){let{isOpen:t,onClose:i,speakers:a,speakerMap:g,onChangeSpeakerMap:_,postId:b}=e,{iString:f}=(0,d.M1)();return(0,o.BX)(h.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(h.xB,{title:f("Assign Speakers"),description:f("Assign names to each identified speaker to show them on the transcript. If there are too many speakers, you may have to duplicate a name."),showClose:!0,onClose:i,showDivider:!0}),(0,o.tZ)(h.fe,{children:(0,o.tZ)(u.tu,{gap:20,children:a.map(e=>(0,o.BX)(m.fv,{children:[(0,o.tZ)(p.__,{children:(0,s.ml)(e)}),(0,o.tZ)(m.oi,{onChange:t=>{var i;return _((0,r._)((0,n._)({},g),{[e]:null===(i=t.target)||void 0===i?void 0:i.value}))},value:(null==g?void 0:g[e])||"",placeholder:f("Assign a name...")})]}))})}),(0,o.tZ)(h.mz,{direction:"column",showDivider:!0,primaryButton:(0,o.tZ)(c.zx,{priority:"primary",onClick:()=>{g&&Object.keys(g).length>0&&l().put("/api/v1/drafts/".concat(b,"/transcript")).send({speaker_map:g}).then(e=>{e.body.data&&i()})},children:f("Save changes")})})]})}},9573:function(e,t,i){"use strict";i.d(t,{v:()=>l});var n=i(16584);let r=e=>{let{children:t,href:i}=e;return(0,n.tZ)(n.HY,{children:(0,n.tZ)("table",{cellSpacing:"0",cellPadding:"8",border:"0",width:"100%",children:(0,n.tZ)("tr",{children:(0,n.tZ)("td",{align:"center",children:(0,n.tZ)("a",{href:i,className:"tw-font-sans tw-text-[13px] tw-font-semibold tw-text-error",children:t})})})})})};var o=i(40894),a=i(47929);let l=e=>{let{post:t,compAlreadyExpired:i=!1}=e,l="".concat(o.W.CHECKOUT_URL,"&utm_medium=").concat(a.lP.email,"&utm_campaign=").concat(a.VX.continueYourSupport,"&utm_content=").concat(t.id);return(0,n.BX)("table",{width:"100%",cellSpacing:"0",cellPadding:"0",border:"0",className:"tw-bg-error-wash",bgcolor:"#FFFAFA",children:[(0,n.tZ)("tr",{children:(0,n.tZ)("td",{height:"16"})}),(0,n.tZ)("tr",{children:(0,n.BX)("td",{align:"center",className:"tw-leading-5",children:[(0,n.tZ)("span",{className:"tw-font-sans tw-text-base tw-font-bold tw-text-error",children:"Continue your support"}),(0,n.tZ)("br",{}),i?(0,n.BX)("span",{className:"tw-font-sans tw-text-ssm tw-text-error",children:["Your free trial has ended!",(0,n.tZ)("br",{}),"Continue your support to access paid-only content."]}):(0,n.BX)("span",{className:"tw-font-sans tw-text-ssm tw-text-error",children:["Subscribe now to keep your paid status. You won't be",(0,n.tZ)("br",{}),"charged until your free trial ends on ",o.W.SUBSCRIPTION_EXPIRY_DATE,"."]})]})}),(0,n.tZ)("tr",{children:(0,n.tZ)("td",{height:"16"})}),(0,n.tZ)("tr",{children:(0,n.tZ)("td",{children:(0,n.tZ)(r,{href:l,children:"Subscribe now"})})}),(0,n.tZ)("tr",{children:(0,n.tZ)("td",{height:"16"})})]})}},36441:function(e,t,i){"use strict";i.d(t,{W5:()=>eI,L0:()=>eB,Do:()=>eS,G3:()=>eE,mx:()=>ek,tj:()=>eC,TW:()=>ex,EK:()=>eN,Em:()=>eF,b3:()=>eX,Gz:()=>eP});var n=i(7409),r=i(99282),o=i(16584),a=i(99973),l=i(98848),s=i(94184),d=i.n(s),c=i(26522),u=i(77116),p=i(57219),h=i(32926),m=i(90099);let g=e=>{let{post:t}=e,{title:i,canonical_url:n}=t,r=(0,h.Q)(t);return(0,o.BX)(m.i$,{gap:4,children:[(0,o.tZ)("div",{className:"heading-UGv4c2",children:r}),(0,o.tZ)("a",{className:"link-jbVsqJ",href:n,children:i})]})};var _=i(1548),b=i(63651);let f={meta:"meta-XhipYq",inheritColor:"inheritColor-eP1Bab"},v=e=>{let{bylines:t}=e;return(null==t?void 0:t.length)?(0,o.tZ)("div",{className:f.meta,children:(0,o.tZ)(_.M,{array:t||[],formatter:e=>{let{id:t,name:i}=e;return(0,o.tZ)("a",{className:f.inheritColor,href:(0,b.GR3)(t,i),children:i})},limit:3})}):null};var Z=i(64343);let y=e=>{var t,i;let{href:n,size:r,cta:a}=e;return(0,o.BX)(m.zK,{gap:8,verticalAlign:"middle",children:[(0,o.tZ)("div",{className:d()("button-fZfkQf",{[(t="buttonSm-PaaWgJ",void 0!==t)?t:""]:"sm"===r,[(i="buttonMd-Lg5kyv",void 0!==i)?i:""]:"md"===r}),children:(0,o.tZ)("a",{href:n,children:a||"Read full story"})}),(0,o.tZ)("a",{href:n,children:(0,o.tZ)(Z.Z,{className:"icon-Nb1wbo",isStatic:!0,stroke:"#f2312c"})})]})},w=e=>{let{href:t,size:i,title:n}=e;return(0,o.tZ)("a",{className:"link-AiRTNr",href:t,children:(0,o.tZ)("div",{className:"title-RKep04",style:{fontSize:i},children:n})})};var C=i(17043);let S=e=>{let{caption:t,cta:i,post:n,showBylines:r}=e,{publishedBylines:a,title:l,canonical_url:s,cover_image:d,cover_image_alt:c}=n;return(0,o.BX)(m.i$,{gap:16,style:{width:"100%"},children:[(0,o.tZ)(w,{href:s,size:24,title:l}),r&&(0,o.tZ)(v,{bylines:a}),d&&(0,o.tZ)("a",{href:s,children:(0,o.tZ)("img",{alt:null!=c?c:l,src:(0,C.zF)(d,1100,{quality:"auto:good",smartCrop:!0}),style:{width:"auto",height:"auto",maxWidth:"100%"},width:550})}),(0,o.BX)(m.i$,{gap:16,children:[(0,o.tZ)("div",{children:t}),(0,o.tZ)(y,{cta:i,href:s,size:"md"})]})]})},k=e=>{let{post:t,cta:i,showBylines:n}=e,{publishedBylines:r,title:a,canonical_url:l,cover_image:s,cover_image_alt:d}=t;return(0,o.tZ)(m.YF,{style:{width:"100%"},children:(0,o.BX)("tr",{children:[s&&(0,o.BX)(o.HY,{children:[(0,o.tZ)("td",{style:{verticalAlign:"top"},width:90,children:(0,o.tZ)("a",{href:l,children:(0,o.tZ)("img",{alt:null!=d?d:a,src:(0,C.zF)(s,180,{quality:"auto:good",smartCrop:!0,aspect:"1:1"}),style:{width:"auto",height:"auto",maxWidth:"100%"},width:90})})}),(0,o.tZ)("td",{style:"min-width: 16px",width:16})]}),(0,o.tZ)("td",{style:{verticalAlign:"top"},children:(0,o.BX)(m.i$,{gap:16,children:[(0,o.tZ)(w,{href:l,size:18,title:a}),n&&(0,o.tZ)(v,{bylines:r}),(0,o.tZ)(y,{cta:i,href:l,size:"sm"})]})})]})})},x=e=>{let{post:t,cta:i,showBylines:n}=e,{publishedBylines:r,title:a,canonical_url:l}=t;return(0,o.BX)(m.i$,{gap:16,children:[(0,o.tZ)(w,{href:l,size:18,title:a}),n&&(0,o.tZ)(v,{bylines:r}),(0,o.tZ)(y,{cta:i,href:l,size:"sm"})]})};var B=i(24430),I=i(6070),P=i(71075);let E=e=>{var{caption:t,size:i,pub:n,cta:r,showBylines:a}=e,s=(0,l._)(e,["caption","size","pub","cta","showBylines"]);if(!s)return null;let c=(0,I.HD)({pub:n});return(0,o.tZ)("div",{className:d()(P.Z.digestPostEmbed,B.A.digestPostEmbed),"data-component-name":"DigestPostEmbedStatic",children:N({size:i,post:s,caption:t,isTheFP:c,cta:r,showBylines:a})})},N=e=>{let{size:t,post:i,caption:n,isTheFP:r,cta:a,showBylines:l}=e;switch(t){case"lg":return r?(0,o.tZ)(S,{caption:n,cta:a,post:i,showBylines:l}):(0,o.tZ)(c.Y,{post:i,children:X(n)});case"md":return r?(0,o.tZ)(k,{cta:a,post:i,showBylines:l}):(0,o.tZ)(u._,{post:i,children:X(n)});case"sm":return r?(0,o.tZ)(x,{cta:a,post:i,showBylines:l}):(0,o.tZ)(p.o,{post:i});case"xs":return r?(0,o.tZ)(g,{post:i}):(0,o.tZ)(p.o,{post:i});default:return console.warn("unrecognized size",t),null}},X=e=>(0,o.tZ)("p",{className:P.Z.caption,dangerouslySetInnerHTML:{__html:e}});var F=i(58865),A=i(95441);function T(e){let{children:t,href:i,className:n}=e;return(0,o.tZ)("a",{className:d()("button primary email cta subscribe-btn",n),href:i,children:t})}var O=i(62515);function L(){let e=(0,F._)(["Message ",""]);return L=function(){return e},e}let H=e=>{let{userId:t,userName:i}=e,{iTemplate:n}=(0,A.M1)();return(0,o.tZ)("p",{className:"button-wrapper","data-component-name":"DirectMessageStatic",children:(0,o.tZ)(T,{href:(0,O.Ds)({userId:t,userName:i}),children:n(L(),i)})})};var R=i(30396),M=i(42841),D=i(45977),z=i(56989),W=i(347),V=i(14952),j=i(60807),U=i(68833),J=i(7882),q=i(15771),Y=i(19081),G=i(6490),K=i(58175),Q=i(83963),$=i(60308);function ee(){let e=(0,F._)(["Message ",""]);return ee=function(){return e},e}let et=e=>{let{userId:t,userName:i}=e,{iTemplate:n}=(0,A.M1)(),r=(0,V.Ij)(),a=(0,j.aF)(),[l,s]=(0,R.eJ)(!1),[d,c]=(0,R.eJ)([]),[u,p]=(0,R.eJ)(!1),[h,m]=(0,R.eJ)(!1),[g,_]=(0,R.eJ)(!1),f=(0,b.JlE)({userId:t,userName:i}),{result:v}=(0,J.ib)({pathname:(0,b.gKm)({userId:t,userName:i}),deps:[t],auto:!0});(0,R.d4)(()=>{if(v){var e;s(null!==(e=v.can_dm)&&void 0!==e&&e),c(v.dm_upgrade_options||[])}},[v]);let Z=n(ee(),(null==v?void 0:v.name)||i);return(0,o.tZ)(o.HY,{children:(0,o.BX)(W.h,{children:[(0,o.BX)(Y.hs,{flex:"grow",style:{marginBottom:"20px"},justifyContent:"center","data-component-name":"DirectMessageWeb",children:[!!l&&(0,o.tZ)(q.zx,{priority:"primary",onClick:()=>(0,U.j)(U.FP.DIRECT_MESSAGE_WRITER_BUTTON_CLICKED,{locked:!1}),href:(0,O.gp)({urlParams:{user:f,utm_source:"direct-message-writer"}}),newTab:!0,leading:(0,o.tZ)(M.Z,{size:20}),children:Z}),!l&&(0,o.tZ)(q.zx,{onClick:()=>{(0,U.j)(U.FP.DIRECT_MESSAGE_WRITER_BUTTON_CLICKED,{locked:!0}),a?a.id===t?_(!0):p(!0):m(!0)},priority:"secondary",leading:(0,o.tZ)(D.Z,{size:20}),children:Z})]}),(0,o.tZ)(en,{isOpen:h,onClose:()=>m(!1),profile:v,pub:r}),(0,o.tZ)(ei,{isOpen:g,onClose:()=>_(!1)}),(0,o.tZ)(Q.B,{isOpen:u,onClose:()=>p(!1),profile:v,dmUpgradeOptions:d,isEditor:!0})]})})},ei=e=>{let{isOpen:t,onClose:i}=e,{iString:n}=(0,A.M1)();return(0,o.tZ)(G.u_,{width:360,isOpen:t,onClose:i,children:(0,o.tZ)(G.fe,{children:(0,o.BX)(Y.tu,{gap:16,children:[(0,o.tZ)(Y.hs,{alignSelf:"center",flex:"auto",bg:"secondary",radius:"full",padding:16,children:(0,o.tZ)(z.Z,{size:24})}),(0,o.tZ)(Y.tu,{children:(0,o.tZ)(K.xv.B2,{weight:"semibold",align:"center",children:n("You can't message yourself, but others will be able to message you via this button.")})}),(0,o.tZ)(Y.tu,{children:(0,o.tZ)(q.zx,{justifyContent:"center",onClick:i,priority:"secondary",children:n("Okay")})})]})})})},en=e=>{let{isOpen:t,onClose:i,profile:n,pub:r}=e,{iString:a}=(0,A.M1)();return(0,o.tZ)(G.u_,{width:360,isOpen:t,onClose:i,children:(0,o.tZ)(G.fe,{children:(0,o.BX)(Y.tu,{gap:16,children:[(0,o.tZ)(Y.hs,{alignSelf:"center",flex:"auto",bg:"secondary",radius:"full",padding:16,children:(0,o.tZ)(D.Z,{size:24})}),(0,o.tZ)(Y.tu,{children:(0,o.tZ)(K.xv.B2,{weight:"semibold",align:"center",children:a("Sign in to send ".concat(null==n?void 0:n.name," a message"))})}),(0,o.BX)(Y.tu,{gap:8,children:[(0,o.tZ)(q.zx,{justifyContent:"center",href:(0,$.uXE)({for_pub:null==r?void 0:r.subdomain}),children:a("Sign in")}),(0,o.tZ)(q.zx,{justifyContent:"center",onClick:i,priority:"secondary",children:a("Maybe later")})]})]})})})};var er=i(16973);let eo=e=>{let{href:t,children:i}=e;return t?(0,o.tZ)("a",{href:t,target:"_blank",rel:"noopener",style:{textDecoration:"none"},children:i}):i};var ea=i(57747);let el=e=>{let{align:t,width:i}=e,n={};return"center"===t||"100%"===i||i>=$.bxL||(n["left"===t?"paddingRight":"paddingLeft"]=$.bxL-i),n},es=e=>{let{src:t,alt:i,title:n,width:r,height:a,align:l,href:s,captionHtml:c}=e,u="100%"===r?$.bxL:r;return(0,o.tZ)("div",{className:d()(ea.Z.staticView),"data-component-name":"Image3Static",children:(0,o.tZ)(eo,{href:s,children:(0,o.BX)("div",{style:el({align:l,width:r}),className:d()(ea.Z.staticImageWrap),children:[(0,o.tZ)("img",{width:u,height:a,src:(0,$.zF4)(t,2*$.bxL),alt:i}),!c&&n&&(0,o.tZ)("div",{className:d()(ea.Z.caption,ea.Z.static),children:n}),!!c&&(0,o.tZ)("div",{className:d()(ea.Z.caption,ea.Z.static),dangerouslySetInnerHTML:{__html:c}})]})})})};var ed=i(2563),ec=i(20888);let eu=e=>{let{src:t,alt:i,title:n,width:r,size:a,align:l,href:s,captionHtml:c}=e,u=s||null,[p,h]=(0,R.eJ)(!1),m=(0,R.sO)(null);return(0,o.BX)("figure",{className:d()(ea.Z.mediaNodeView,l&&ea.Z["align-".concat(l)||""]),"data-component-name":"Image3Dynamic",children:[(0,o.tZ)(Y.gq,{className:d()(ea.Z.imageContainer,ea.Z[a],{[ea.Z.pointer]:u,[ea.Z.zoom]:!u}),onClick:()=>{s?window.open(s,"_blank"):h(!0)},children:(0,o.BX)(Y.tu,{gap:8,children:[(0,o.tZ)(ec.e,{className:ea.Z[a],src:t,alt:i,title:n,maxWidth:(()=>{switch(a){case"large":return $.urw;case"full":if("undefined"!=typeof window)return window.innerWidth;return $.hI6;default:if("100%"===r)return $.qN9;return r}})(),imageRef:m,useRetinaSizing:!0,imageIsFixedWidth:!1}),!c&&!!n&&(0,o.tZ)("figcaption",{"data-component-name":"Image3DynamicTitle",className:ea.Z.caption,children:n}),!!c&&(0,o.tZ)("figcaption",{"data-component-name":"Image3DynamicCaption",className:ea.Z.caption,dangerouslySetInnerHTML:{__html:c}})]})}),(0,o.tZ)(ed.ImageViewerModal,{showModal:p,modalContent:[{attrs:{src:t,alt:i,title:n}}],onClose:()=>h(!1),step:0})]})};var ep=i(12277),eh=i(42224),em=i(22582);let eg=e=>{let{text:t,url:i,exposeExperiment:n,variant:r}=e;(0,R.d4)(()=>{r&&n("overwrite_share_button_on_post_pages")},[r]);let a={url:i};return(0,o.tZ)("p",{className:"button-wrapper",children:(0,o.tZ)("a",{className:"button primary",onClick:e=>{e.preventDefault(),navigator.share(a)},children:t})})};var e_=i(84881),eb=i(13693),ef=i(92314),ev=i(12281);let eZ=e=>{let{mediaUpload:t,post:i,pub:n}=e;if(!t)return(0,o.tZ)("div",{"data-component-name":"video-embed-player-static-missing-media",children:"Did not find video"});let r=(0,b.wsn)({pub:n,post:i,mediaUploadId:t.id});return(0,o.tZ)(ev.L,{mediaUpload:t,href:r})};var ey=i(93903),ew=i(81821);let eC=(e,t)=>{let{pub:i,props:{isStatic:n,post:r,dataForEmailRender:a}}=t;try{let t=e.getAttribute("data-attrs");if(t){let{mediaUploadId:e}=JSON.parse((0,ey.Z)(t));if(n){var l,s;return(0,o.tZ)(eZ,{pub:i,post:r,mediaUpload:null!==(s=null===(l=a.idToMediaUpload)||void 0===l?void 0:l[e])&&void 0!==s?s:null})}return(0,o.tZ)(ef.c,{pub:i,post:r,mediaUploadId:e})}}catch(e){console.error("Failed to parse video:",e)}return(0,o.tZ)(o.HY,{})},eS=(e,t)=>{let{pub:i,props:{isStatic:l}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse((0,ey.Z)(t));return l?(0,o.tZ)(E,(0,r._)((0,n._)({},e),{pub:i,isEditor:!1})):(0,o.tZ)(a.F,(0,r._)((0,n._)({},e),{pub:i,isEditor:!1}))}}catch(e){console.error("Failed to parse digest post embed:",e)}return(0,o.tZ)(o.HY,{})},ek=(e,t)=>{let{pub:i,props:{isStatic:a}}=t;try{let t=e.getAttribute("data-attrs"),l=JSON.parse((0,ey.Z)(t));return a?(0,o.tZ)(e_.S,(0,r._)((0,n._)({},l),{pub:i})):(0,o.tZ)(e_.y,(0,r._)((0,n._)({},l),{pub:i}))}catch(e){console.error("Failed to parse referrals card:",e)}return(0,o.tZ)(o.HY,{})},ex=(e,t)=>{try{var i;let n=JSON.parse((0,ey.Z)(e.getAttribute("data-attrs")));if((null==n?void 0:null===(i=n.url)||void 0===i?void 0:i.includes("/p/"))&&"Share"===n.text){let e=!!navigator.share&&navigator.canShare({url:(0,b.uRy)(t.props.pub,t.props.post)})&&(0,ew.tq)();if(e&&"treatment"===t.props.variant)return(0,o.tZ)(eg,{text:n.text,url:n.url,variant:t.props.variant,exposeExperiment:t.props.exposeExperiment});if(e&&"control"===t.props.variant){t.props.exposeExperiment("overwrite_share_button_on_post_pages");return}}}catch(e){console.error("Failed to parse button:",e)}},eB=(e,t)=>{let{props:{isStatic:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){var a;let l=null!==(a=JSON.parse(t))&&void 0!==a?a:{};return i?(0,o.tZ)(es,(0,r._)((0,n._)({},l),{captionHtml:e.innerHTML})):(0,o.tZ)(eu,(0,r._)((0,n._)({},l),{captionHtml:e.innerHTML}))}}catch(e){console.error("Failed to parse image3:",e)}return(0,o.tZ)(o.HY,{})},eI=(e,t)=>{let{props:{isStatic:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse(t),a={node:{attrs:(0,r._)((0,n._)({},e),{isEditor:!1})}};return i?(0,o.tZ)(em.yW,(0,n._)({},a)):(0,o.tZ)(em.hJ,(0,n._)({},a))}}catch(e){console.error("Failed to parse image gallery embed:",e)}return(0,o.tZ)(o.HY,{})},eP=(e,t)=>{let{props:{isStatic:i}}=t;try{let t=e.getAttribute("data-attrs");if(t){let e=JSON.parse(t),r=(0,n._)({},e);return i?(0,o.tZ)(H,(0,n._)({},r)):(0,o.tZ)(et,(0,n._)({},r))}}catch(e){console.error("Failed to parse direct message embed:",e)}return(0,o.tZ)(o.HY,{})},eE=(e,t)=>{try{let n=JSON.parse((0,ey.Z)(e.getAttribute("data-attrs")));if(null==n?void 0:n.isEmail){var i;return(0,o.tZ)("table",{className:"recipe-embed recipe-email",cellSpacing:"16px",width:"100%",children:(0,o.tZ)("tbody",{children:(0,o.tZ)("tr",{children:(0,o.tZ)("td",{children:(0,o.tZ)(eh.k,{node:{attrs:{id:n.id}},editable:!1,staticData:null===(i=t.props.dataForEmailRender)||void 0===i?void 0:i.recipes[n.id]})})})})})}return(0,o.tZ)("div",{className:"recipe-embed",dataAttrs:e.getAttribute("data-attrs"),children:(0,o.tZ)(eh.k,{node:{attrs:{id:n.id}},editable:!1})})}catch(e){return console.log("Failed to parse recipe:",e),(0,o.tZ)(o.HY,{})}},eN=e=>{try{let t=JSON.parse((0,ey.Z)(e.getAttribute("data-attrs")));return(0,o.tZ)(ep.M,{attrs:t})}catch(e){console.error("Failed to parse pinterest:",e)}return(0,o.tZ)(o.HY,{})},eX=(e,t)=>{var i,n,r,a,l,s,d,c,u;let p=null!==(d=null===(n=t.props)||void 0===n?void 0:null===(i=n.post)||void 0===i?void 0:i.sponsorshipCampaigns)&&void 0!==d?d:null===(a=t.props)||void 0===a?void 0:null===(r=a.dataForEmailRender)||void 0===r?void 0:r.sponsorshipCampaigns;if(!p)return(0,o.tZ)(o.HY,{});let h=e.getAttribute("data-attrs"),m=p[JSON.parse((0,ey.Z)(h)).id];if(!m||"archived"===m.status)return(0,o.tZ)(o.HY,{});let g=m.exclude_audience_minimum;if("paid"===g&&!1===t.props.is_freemail||"paid"===g&&(null===(l=t.props.user)||void 0===l?void 0:l.is_subscribed)||"founding"===g&&(null===(s=t.props.user)||void 0===s?void 0:s.is_founding))return(0,o.tZ)(o.HY,{});try{let i=JSON.parse((0,ey.Z)(e.getAttribute("data-attrs")));if(null==i?void 0:i.isEmail)return(0,o.tZ)(eb.Og,{campaign:m,pub:t.pub,post:null===(u=t.props)||void 0===u?void 0:u.post});return(0,o.tZ)(eb.VR,{dataAttrs:e.getAttribute("data-attrs"),pub:t.pub,campaign:m,post:null===(c=t.props)||void 0===c?void 0:c.post})}catch(e){return console.log("Failed to parse sponsorship campaign:",e),(0,o.tZ)(o.HY,{})}},eF=(e,t)=>{try{let i=JSON.parse((0,ey.Z)(e.getAttribute("data-attrs")));if(i.isEmail)return(0,o.tZ)(er.o,(0,n._)({pub:t.pub},i));return(0,o.tZ)(er.N,(0,n._)({pub:t.pub,isEditor:!1},i))}catch(e){return console.log("Failed to parse stories section:",e),(0,o.tZ)(o.HY,{})}}},80836:function(e,t,i){"use strict";i.d(t,{Z:()=>b});var n=i(16584),r=i(30396),o=i(94184),a=i.n(o),l=i(71787),s=i(347),d=i(75905),c=i(68833),u=i(11792),p=i(98914),h=i(71068),m=i(15771),g=i(19081),_=i(60308);function b(e){let{text:t,post:i,pub:o,offsetTop:b,isAboutPage:f}=e,{isStatic:v}=(0,r.qp)(d.E),Z=(0,p.VA)(t,!0),y=(0,p.VA)(t,!1),w=(0,u.g)(),C=(null==i?void 0:i.id)<0x3f9b46c&&Z!==y?y:Z;if(!i&&!f||!o||v)return null;let S=f?"".concat((0,_.d6h)(o,{addBase:!0}),"#\xa7").concat(Z):"".concat((0,_.SVA)(o),"/i/").concat(null==i?void 0:i.id,"/").concat(Z);return(0,n.tZ)(g.hs,{position:"absolute",alignItems:"center",className:"header-anchor-parent",children:(0,n.BX)(s.h,{children:[(0,n.tZ)(h.xu,{className:a()("header-anchor",{"offset-top":b}),id:"\xa7".concat(C)}),(0,n.tZ)(m.hU,{priority:"secondary",rounded:!1,size:"sm",onClick:e=>{var t;(null===(t=location)||void 0===t?void 0:t.href)&&(e.preventDefault(),(0,c.j)(c.FP.HEADER_ANCHOR_WIDGET_CLICKED,{destination:S}),w(S))},href:S,children:(0,n.tZ)(l.Z,{size:18})})]})})}},39432:function(e,t,i){"use strict";i.d(t,{Z:()=>l});var n=i(7409),r=i(99282),o=i(16584),a=i(64515);let l=e=>(0,o.tZ)(a.l,(0,r._)((0,n._)({},e),{name:"EmailIcon",svgParams:{height:25,width:25,strokeWidth:0,fill:"#000Z"},children:(0,o.tZ)("g",{children:(0,o.tZ)("path",{d:"M22.93,7a2.43,2.43,0,0,0-.41-.93A2.61,2.61,0,0,0,20.39,5H4.61A2.61,2.61,0,0,0,2.48,6.1,2.43,2.43,0,0,0,2.07,7h0A2.78,2.78,0,0,0,2,7.61v9.78A2.61,2.61,0,0,0,4.61,20H20.39A2.61,2.61,0,0,0,23,17.39V7.61A2.25,2.25,0,0,0,22.93,7ZM4.61,6H20.39a1.58,1.58,0,0,1,1.26.62l-8.91,5.31a.49.49,0,0,1-.47,0L3.35,6.62A1.58,1.58,0,0,1,4.61,6ZM22,17.39A1.61,1.61,0,0,1,20.39,19H4.61A1.61,1.61,0,0,1,3,17.39V7.58l8.77,5.22a1.48,1.48,0,0,0,1.47,0L22,7.58Z"})})}))},33296:function(e,t,i){"use strict";i.d(t,{Z:()=>d});var n=i(7409),r=i(99282),o=i(98848),a=i(16584),l=i(64515),s=i(24476);let d=e=>{var{isHovered:t}=e,i=(0,o._)(e,["isHovered"]);let d=t?s.t.brightOrange.hex:s.t.lightGray.hex;return(0,a.BX)(l.l,(0,r._)((0,n._)({},i),{name:"FPCommentIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",stroke:"none",fill:"none"},children:[(0,a.tZ)("path",{d:"M22.1538 1V2.83333H24V15.6667H22.1538V17.5H16.6154V19.3333H14.7692V21.1667H12.9231V23H11.0769V21.1667H9.23077V19.3333H7.38462V17.5H1.84615V15.6667H0V2.83333H1.84615V1H22.1538Z",fill:d}),(0,a.tZ)("rect",{x:"5",y:"9",width:"2",height:"2",fill:"white"}),(0,a.tZ)("rect",{x:"11",y:"9",width:"2",height:"2",fill:"white"}),(0,a.tZ)("rect",{x:"17",y:"9",width:"2",height:"2",fill:"white"})]}))}},40034:function(e,t,i){"use strict";i.d(t,{Z:()=>d});var n=i(7409),r=i(99282),o=i(98848),a=i(16584),l=i(64515),s=i(24476);let d=e=>{var{isHovered:t}=e,i=(0,o._)(e,["isHovered"]);let d=t?s.t.brightOrange.hex:s.t.lightGray.hex;return(0,a.BX)(l.l,(0,r._)((0,n._)({},i),{name:"FPShareIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"none"},children:[(0,a.tZ)("path",{d:"M5 10H1V22H3V24H21V22H23V10H19V20H5V10Z",fill:d}),(0,a.tZ)("path",{d:"M11 0H13V2H15V4H17V6H19V8H15V17H9V8H5V6H7V4H9V2H11V0Z",fill:d})]}))}},64579:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),o=i(98848),a=i(16584),l=i(64515);let s=e=>{var{color:t="#B6B6B6",height:i=18}=e,s=(0,o._)(e,["color","height"]);return(0,a.BX)(l.l,(0,r._)((0,n._)({},s),{height:i,name:"LockFullIcon",svgParams:{height:18,width:18,viewBox:"0 0 18 18"},children:[(0,a.tZ)("rect",{x:"5.5",y:"2.5",width:"7",height:"13",rx:"3.5",stroke:t,fill:"none"}),(0,a.tZ)("rect",{x:"3.5",y:"8.5",width:"11",height:"8",rx:"0.5",fill:t,stroke:t})]}))}},21206:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),o=i(16584),a=i(9560),l=i(64515);let s=e=>(0,o.tZ)(l.l,(0,r._)((0,n._)({},e),{name:"LucideRecommend",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,o.tZ)(a.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},4878:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),o=i(98848),a=i(16584),l=i(64515);let s=e=>{var{stroke:t="black",height:i=19,width:s=19}=e,d=(0,o._)(e,["stroke","height","width"]);return(0,a.BX)(l.l,(0,r._)((0,n._)({},d),{name:"NewsletterIcon",svgParams:{height:i,width:s,viewBox:"0 0 19 19"},children:[(0,a.tZ)("path",{d:"M3.5 3.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.tZ)("path",{d:"M3.5 7.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.tZ)("path",{d:"M3.5 11.5H15.5",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,a.tZ)("path",{d:"M3.5 15.5H12",stroke:t,strokeLinecap:"round","stroke-linejoin":"round"})]}))}},34293:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),o=i(98848),a=i(16584),l=i(64515);let s=e=>{var{stroke:t="black"}=e,i=(0,o._)(e,["stroke"]);return(0,a.tZ)(l.l,(0,r._)((0,n._)({},i),{name:"ThreadIcon",svgParams:{height:19,width:19},children:(0,a.tZ)("path",{d:"M10.4286 3H8.57143C5.49441 3 3 5.49441 3 8.57143C3 10.2355 4.16477 12.1934 5.32143 13.2143V16L11.3571 14.1429C14.6071 13.067 16 10.9973 16 8.57143C16 5.49441 13.5056 3 10.4286 3Z",stroke:t,"stroke-linejoin":"round"})}))}},54688:function(e,t,i){"use strict";i.d(t,{Z:()=>l});var n=i(7409),r=i(99282),o=i(16584),a=i(64515);let l=e=>(0,o.BX)(a.l,(0,r._)((0,n._)({},e),{name:"UsersIcon",svgParams:{height:14,width:15,stroke:"#B6B6B6"},children:[(0,o.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.91732 12.249V11.0824C9.91732 9.79369 8.87265 8.74902 7.58398 8.74902H2.91732C1.62865 8.74902 0.583984 9.79369 0.583984 11.0824V12.249",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.24935 6.41423C6.53801 6.41423 7.58268 5.36956 7.58268 4.08089C7.58268 2.79223 6.53801 1.74756 5.24935 1.74756C3.96068 1.74756 2.91602 2.79223 2.91602 4.08089C2.91602 5.36956 3.96068 6.41423 5.24935 6.41423Z",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.8118 12.2659H13.563C13.5622 11.2025 14.0005 8.82373 11.666 8.82373",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"}),(0,o.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33398 1.82227C10.3664 2.08661 11.0886 3.01693 11.0886 4.08268C11.0886 5.14844 10.3664 6.07875 9.33398 6.3431",fill:"#838383",stroke:"#838383",strokeLinecap:"round","stroke-linejoin":"round"})]}))},17350:function(e,t,i){"use strict";i.d(t,{i:()=>m});var n=i(16584),r=i(53219),o=i(82701),a=i(20042),l=i(347),s=i(95441),d=i(56629),c=i(68833),u=i(15771),p=i(19081),h=i(91400);let m=e=>{let{post:t}=e,i=(0,d.So)().getSettingFor("enable_prev_next_nav"),m=(0,h.XA)(),{iString:g}=(0,s.M1)();if(!i)return null;let _=t.next_post_slug,b=t.previous_post_slug;return _||b?(0,n.tZ)(l.h,{children:(0,n.BX)(p.hs,{justifyContent:_&&b?"space-between":_?"end":"start",paddingY:16,children:[b&&(0,n.tZ)(u.zx,{leading:(0,n.tZ)(r.Z,{size:20}),priority:m?"tertiary":"secondary",size:m?"sm":"md",onClick:()=>{(0,c.j)(c.FP.PREVIOUS_POST_LINK_CLICKED,{post_id:t.id}),(0,a.route)("/p/".concat(b))},children:g("Previous")}),_&&(0,n.tZ)(u.zx,{trailing:(0,n.tZ)(o.Z,{size:20}),priority:m?"tertiary":"secondary",size:m?"sm":"md",onClick:()=>{(0,c.j)(c.FP.NEXT_POST_LINK_CLICKED,{post_id:t.id}),(0,a.route)("/p/".concat(_))},children:g("Next")})]})}):null}},94922:function(e,t,i){"use strict";i.d(t,{v:()=>d});var n=i(16584),r=i(30396),o=i(95398),a=i(9721),l=i(68833),s=i(40894);function d(e){let t,{className:i,linkClassName:d,user:c,pub:u,post:p,reaction_token:h,height:m,onChange:g,isStatic:_,children:b,sharedShareDialog:f,noIcon:v,position:Z}=e,[y,w]=(0,r.eJ)(!1),C=e=>{if(Z&&(0,l.j)(l.FP.POST_SHARE_BUTTON_CLICKED,{position:Z}),!_){if(e&&e.stopPropagation(),f){var t;null===(t=e.target)||void 0===t||t.dispatchEvent(new CustomEvent("share-post",{bubbles:!0}))}else w(!0)}};return t=p.share_url_override?p.share_url_override:_?p?s.W.SHARE_URL:s.W.SHARE_PUB_URL:"javascript:void(0)",(0,n.BX)("span",{className:i,children:[(0,n.BX)("a",{href:t,onClick:e=>C(e),className:d,children:[!v&&(0,n.tZ)(o.Z,{className:"recommend-icon post-meta-icon",isStatic:_,height:m,alt:"Share",stroke:"#757575",fill:"transparent",strokeWidth:_?1:1.5}),b]}),!_&&!f&&(0,n.tZ)(a.V,{isOpen:y,onClose:()=>w(!1),user:c,pub:u,post:p,reaction_token:h,onChange:g,medium:"web"})]})}},16944:function(e,t,i){"use strict";i.d(t,{a:()=>x});var n=i(7409),r=i(16584),o=i(94184),a=i.n(o),l=i(7703),s=i(54688),d=i(94442),c=i(85685),u=i(60308);function p(e){var t;let{pub:i,post:n}=e,o=(0,u.zF4)("".concat((0,u.SVA)(i),"/p/").concat(n.slug,"/authors.svg"),800,{format:"png",crop:"scale"}),{height:a,width:l}={width:((null==n?void 0:null===(t=n.publishedBylines)||void 0===t?void 0:t.length)-1)*32+40+4,height:44};return(0,r.tZ)("img",{src:o,width:l,height:a})}var h=i(95441),m=i(56629),g=i(49762),_=i(94874),b=i(24547),f=i(19081),v=i(33555),Z=i(98012),y=i(6070),w=i(31377),C=i(79582),S=i(81821),k=i(84864);function x(e){let{post:t,pub:i,user:o,showDate:x,showDatetime:B,isStatic:I,className:P,postReactionToken:E,onChange:N,allowEdit:X,hidePinning:F,showEmailSent:A,allowSendEmail:T,allowMobileFooter:O,onCommentsClick:L,showRestackModal:H,setFooterShown:R}=e,M=(0,S.tq)({checkFirst4:!0}),D="undefined"==typeof window,z=(0,k.getBylineUsers)(t),{language:W}=(0,h.M1)(),V=B?(0,Z.Z)(t.post_date).locale(W).standardDatetime():I?(0,Z.Z)(t.post_date).locale(W).standardDate():(0,Z.Z)(t.post_date).locale(W).standardDateOrTime(),{getSettingFor:j}=(0,m.So)(),U=i.bylines_enabled&&(0,k.getPrintedByline)(i,t)&&"podcast"!==t.type,J=U&&i.byline_images_enabled&&z.some(e=>{let{photo_url:t}=e;return!!t}),q="page"!==t.type,Y=M&&J&&z.length>2,G=(null==i?void 0:i.community_enabled)&&t.slug&&!t.is_draft&&(0,k.showCommentsOnPost)({publication:i,post:t}),K=U&&1===z.length&&z[0].is_guest&&z[0].primaryPublicationSubscribeUrl&&z[0].primaryPublicationId!==i.id&&!t.is_draft&&!(0,g.ZP)("dont_show_guest_byline"),Q=(0,k.oxfordComma)(z.map(e=>I?(0,r.tZ)("a",{className:"byline-profile-link",href:(0,u.LwU)(e,i,{base:I}),onClick:e=>e.stopPropagation(),children:e.name}):(0,r.BX)(f.gq,{inline:!0,gap:4,alignItems:"center",children:[(0,r.tZ)(c.ProfileHoverCard,{subject:e,utmSource:"byline",children:(0,r.tZ)("a",{className:"byline-profile-link",href:(0,u.LwU)(e,i,{base:I}),onClick:e=>e.stopPropagation(),children:e.name})}),!I&&(0,r.tZ)(v.UserBadge,{tier:e.bestseller_tier,size:"sm",userId:e.id})]}))),$=!t.is_draft&&(0,C.x)(o,{enable_restacking:!!j("enable_restacking")},t,i,I);return(0,r.BX)("div",{className:a()("post-subheader",P),children:[(0,r.BX)("div",{className:a()("left",{vertical:Y}),children:[J&&(I?(0,r.tZ)(p,{pub:i,post:t}):(0,r.tZ)(b.H,{users:z.map(e=>{let{id:t,name:i,photo_url:n}=e;return{id:t,name:i,photo_url:n}}),max:5,size:36,renderAvatar:e=>(0,r.tZ)(_.xV,(0,n._)({},e))})),(0,r.BX)("div",{className:"label-stack",children:[U&&(0,r.tZ)("div",{className:"bylines",children:(0,r.tZ)("span",{className:"byline-names",children:Q})}),K&&(0,r.BX)("div",{className:"guest-author-publication",children:["Writes\xa0",(0,r.tZ)("a",{className:"guest-author-publication-name",href:z[0].primaryPublicationUrl,title:z[0].primaryPublicationName,children:z[0].primaryPublicationName}),"\xa0\xb7\xa0",(0,r.tZ)("a",{className:"guest-author-publication-subscribe",href:z[0].primaryPublicationSubscribeUrl,children:"Subscribe"})]}),(0,r.BX)("div",{className:"publish-context",children:["adhoc_email"===t.type?(0,r.tZ)(s.Z,{className:"audience-icon adhoc-email-icon",height:16,isStatic:I}):q&&(0,w.isPaidAudience)(t.audience)&&!(0,y.lp)({post:t})&&(0,r.tZ)(l.Z,{audience:t.audience,className:"audience-icon audience-lock-icon",size:16,isStatic:I,thin:!0}),(x||B)&&t.post_date&&!t.is_draft&&(0,r.tZ)("time",{dateTime:(0,Z.Z)(t.post_date).toISOString(),children:V}),t.is_draft&&(x||B)&&"Draft"]})]})]}),(0,r.BX)("div",{className:"right",children:[M&&!D&&O&&(0,r.tZ)(d.mt,{post:t,pub:i,user:o,isStatic:I,onChange:N,allowEdit:X,hidePinning:F,showEmailSent:A,allowSendEmail:T,hideComments:!G,onCommentsClick:L,showRestackButton:$,showRestackModal:H,setFooterShown:R,postReactionToken:E}),!M&&(0,r.tZ)(d._2,{post:t,pub:i,user:o,isStatic:I,style:"button",onChange:N,allowEdit:X,hidePinning:F,showEmailSent:A,allowSendEmail:T,labelStyle:"counts-or-none",hideComments:!G,onCommentsClick:L,position:"post-header",showRestackButton:$,showRestackModal:H,showClipping:"podcast"===t.type,editButtonIsLast:!0,postReactionToken:E})]})]})}},11712:function(e,t,i){"use strict";i.d(t,{Z:()=>U});var n=i(27412),r=i(7409),o=i(99282),a=i(98848),l=i(16584),s=i(6400),d=i(39693),c=i.n(d),u=i(23279),p=i.n(u),h=i(18446),m=i.n(h),g=i(30845),_=i(59708),b=i(30396),f=i(14293),v=i.n(f),Z=i(66960),y=i(29032),w=i(93678),C=i(60807),S=i(68833),k=i(98914),x=i(19081),B=i(58175),I=i(39493),P=i(63651),E=i(24271);function N(e){var t,i,n,o,a;let{nuxModal:s,showRestackNux:d}=(0,I.y)("post");return(0,l.BX)(l.HY,{children:[s,!v()(null===(t=e.selection)||void 0===t?void 0:t.text)&&(null===(a=e.selection)||void 0===a?void 0:null===(o=a.text)||void 0===o?void 0:null===(n=o.split)||void 0===n?void 0:null===(i=n.call(o," "))||void 0===i?void 0:i.length)>=3&&(0,l.tZ)(X,(0,r._)({onShare:d},e))]})}function X(e){let{pub:t,post:i,selection:n,onClose:r,userInteractionDisabled:o}=e,a=(0,C.aF)(),[s,d]=(0,b.eJ)(!1);(0,b.d4)(()=>{d(!0)},[]);let c=async()=>{(0,S.j)(S.FP.VIDEO_QUOTE_TEXT_SELECTED,{post_id:i.id,selection_id:n.id}),(0,k.uX)((0,P.fQy)(t,i.id,{selectionForQuote:n.text}),{local_navigation:!1})};(0,b.d4)(()=>(window.addEventListener("scroll",r,{passive:!0,capture:!0,once:!0}),()=>{window.removeEventListener("scroll",r,{capture:!0,once:!0})}),[r]);let u=n.text&&n.text.length>2048;return(0,l.tZ)(y.C,{children:(0,l.tZ)(x.tu,{style:{top:n.y-48-12,left:n.rect.x+n.rect.width/2,transform:"translateX(-50%)",pointerEvents:o?"none":"auto",maxWidth:240},justifyContent:"center",outline:"detail",shadow:"md",radius:"md",className:"".concat(E.Z.popover," ").concat(s?E.Z.visible:""," ").concat(o?E.Z.disabled:""),padding:4,gap:4,children:(0,l.BX)(w.O7,{onClick:c,disabled:!!(!a||u),children:[(0,l.tZ)(Z.Z,{size:20,stroke:"var(--color-utility-white)"}),(0,l.tZ)(B.xv.B4,{color:"vibrance-primary",weight:"medium",children:u?"Selection too long":"Use this text"})]})})})}var F=i(57391),A=i(2563),T=i(48980),O=i(75419),L=i(47929);let H=(0,s.createContext)({action:null,selectedImage:null}),R=async e=>{let{imgSrc:t,post:i,pub:n}=e,r=await (0,T.rd)("/api/v1/post_selection/image",{method:"PUT",json:{post_id:i.id,publication_id:n.id,img_src:t}});if(r instanceof Error)throw r;return r.selection.id},M=async e=>{let{imgSrc:t,pub:i,post:n}=e,r=await R({imgSrc:t,post:n,pub:i});return(0,P.uRy)(i,n,{urlParams:{utm_campaign:L.VX.postSelection,utm_medium:L.lP.web,imgSelection:r}})},D=e=>{var t;let{children:i,imageState:n,selectedImageIndex:r,selectedImageAction:o=null,onClose:a,pub:s,post:d}=e,c=(0,O.i3)(),[u,p]=(0,b.eJ)(r&&null!==(t=null==n?void 0:n[r])&&void 0!==t?t:null);(0,b.d4)(()=>{if(null!=r&&n){var e;p(null!==(e=n[r])&&void 0!==e?e:null)}},[n,r]);let h=(0,b.I4)(async()=>{(null==u?void 0:u.src)&&c.open({restackUrl:await M({imgSrc:null==u?void 0:u.src,pub:s,post:d}),onCompose(){p(null),a()},onDismiss(){p(null),a()}})},[c,a,d,s,null==u?void 0:u.src]);return(0,b.d4)(()=>{u&&"restack"===o&&!c.state.isOpen&&h()},[o,c.state.isOpen,u,h]),(0,l.BX)(H.Provider,{value:{action:o,selectedImage:u},children:[i,(0,l.tZ)(A.ImageViewerModal,{showModal:"view"===o,modalContent:n,onClose:a,step:null!=r?r:0})]})};var z=i(81355),W=i(60308),V=i(84864);let j="\n:is(\n  div.body.markup, .pullquote, blockquote, li, caption, .footnote-content\n) > :is(\n  h1, h2, h3, h4, h5, h6, p:not(.button-wrapper)\n)\n";class U extends s.Component{async componentDidMount(){if(!this.body.current)return;let e=Array.from(this.body.current.querySelectorAll(j));this.originalParagraphState=e.map(e=>({text:e.textContent}));let t=new URL(window.location.href).searchParams.get("img"),i=new URL(window.location.href).searchParams.get("cutoffElementIndex"),n=Array.from(this.body.current.querySelectorAll(".image-link.image2"));n.forEach(e=>{"A"!==e.tagName&&console.warn("while parsing prosemirror doc for images, expected an anchor tag, but got",e.tagName)});let r=c()(n.map(e=>{let t=e.querySelector("img");if(!t)return console.warn("missing img when rendering prosemirror document"),null;let i=t.getAttribute("data-attrs"),n=i?JSON.parse(i):{},r=n.width/n.height,o=n.resizeWidth?n.resizeWidth/r:n.height,a=n.resizeWidth?n.resizeWidth/o:r;return{element:e,image:t,attrs:n,extraAttrs:{imageRatio:r,resizeHeight:o,resizeRatio:a}}})),o=0;if(t){let e=r.find(e=>e.attrs.src===t);e&&(o=e.image.getBoundingClientRect().top-65)}else if(i){let e=this.body.current.querySelector("*:nth-child(".concat(i,")"));e&&e.scrollIntoView()}if(r=(r=(r=r.filter(e=>(0,W.UH4)(e.image.src)===(0,W.UH4)(e.element.href))).filter(e=>Number(e.attrs.height)>240&&e.extraAttrs.resizeHeight>240)).filter(e=>e.extraAttrs.imageRatio<4&&e.extraAttrs.resizeRatio<4),this.originalImageState=r.map(e=>{let t=e.image.src,i=null,n=e.element.parentElement;if(n&&"FIGURE"===n.tagName){var r;i=null===(r=n.querySelector(":scope > figcaption"))||void 0===r?void 0:r.textContent}return{src:t,attrs:e.attrs,caption:i}}),t&&this.originalImageState){window.scrollTo({top:o});let e=this.originalImageState.findIndex(e=>e.attrs.src===t);e>=0&&this.setState({selectedImgIndex:e})}"undefined"!=typeof window&&(document.addEventListener("selectionchange",this.onSelectionChange),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mouseup",this.onMouseUp))}componentWillUnmount(){"undefined"!=typeof window&&(document.removeEventListener("selectionchange",this.onSelectionChange),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mouseup",this.onMouseUp))}shouldComponentUpdate(e,t){return this.props.html!==e.html||this.state.selectedImgIndex!==t.selectedImgIndex||this.state.selection!==t.selection||this.state.selectionUserInteractionDisabled!==t.selectionUserInteractionDisabled||this.state.selectingTextForQuote!==t.selectingTextForQuote}onLinkClick(e){var t,i;if(!e.target||!(null===(t=e.target)||void 0===t?void 0:t.nodeName)||"A"!==e.target.nodeName&&(null===(i=e.target.parentNode)||void 0===i?void 0:i.nodeName)!=="A")return;let n="A"===e.target.nodeName?e.target:e.target.parentNode;if((0,S.j)(S.FP.POST_LINK_CLICKED,{post_id:this.props.post.id,publication_id:this.props.post.publication_id,url:n.href}),window.location.host===n.host){let t=(0,V.transformDocumentLink)(n.href);t!==n.href&&(0,k.uX)(t,{local_navigation:!1,event:e});return}e.preventDefault(),(0,V.handleDocumentLinkClick)(n.href)}getSelectionState(){if(this.props.trackSelection&&window.getSelection)try{let e=window.getSelection();if(!e||e.isCollapsed||e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset)return;let t=this.findParentParagraph(e.anchorNode);if(!t)return;let i=this.findParentParagraph(e.focusNode);if(!i||!this.body.current)return;let n=Array.from(this.body.current.querySelectorAll(j)),r=n.findIndex(e=>e.isSameNode(t));if(-1===r)return;let o=n.findIndex(e=>e.isSameNode(i));if(-1===o)return;let a=this.getCharacterOffsetParagraph(t,e.anchorNode,e.anchorOffset);if(null===a)return;let l=this.getCharacterOffsetParagraph(i,e.focusNode,e.focusOffset);if(null===l)return;let s=r>o||r===o&&a>l,d=e.getRangeAt(0).getBoundingClientRect();return{startParagraph:s?o:r,endParagraph:s?r:o,startOffset:s?l:a,endOffset:s?a:l,y:d.y,height:d.height,rect:d,text:e.toString()}}catch(e){console.error("Failed to parse selection:",e)}}findParentParagraph(e){return e?["P","H1","H2","H3","H4","H5","H6"].includes(e.nodeName)?e:this.findParentParagraph(e.parentNode):null}isAncestorOf(e,t){return null!==e&&(!!e.isSameNode(t)||this.isAncestorOf(e.parentNode,t))}getCharacterOffsetParagraph(e,t,i){let n=i;for(let i=0;i<e.childNodes.length;i++){let o=e.childNodes[i];if(o){if(this.isAncestorOf(t,o))break;if(o instanceof HTMLElement){if("BR"===o.tagName)n+=1;else if("footnote-anchor"!==o.className){var r;n+=(null===(r=o.textContent)||void 0===r?void 0:r.length)||0}}}}return n}shouldShowImageViewerModal(){let{selectedImgIndex:e}=this.state;return null!=e}render(e){var{children:t,html:i,pub:n,isAboutPage:s,canRestackImage:d}=e,c=(0,a._)(e,["children","html","pub","isAboutPage","canRestackImage"]);let{selection:u,selectedImgIndex:p,shouldUseSelectionV2Popover:h,selectingTextForQuote:m,imgAction:g}=this.state;if("undefined"==typeof window||m||"true"!==new URLSearchParams(window.location.search).get("selectQuote")||this.setState({selectingTextForQuote:!0}),i){let e=this.context.getExperimentVariant("overwrite_share_button_on_post_pages");c.variant=e,c.exposeExperiment=this.context.exposeExperiment,(t=this.memoizedDeepPrepareDocumentBody(i,n,(0,o._)((0,r._)({},c),{isAboutPage:s,canRestackImage:d})))&&(i=null)}let _=!!t&&Array.from(t).some(e=>{var t,i,n,r;return(null===(t=e.props)||void 0===t?void 0:t.className)==="latex-rendered"||(null===(r=e.props)||void 0===r?void 0:null===(n=r.children)||void 0===n?void 0:null===(i=n.props)||void 0===i?void 0:i.className)==="latex-rendered"}),b=(0,l.tZ)(l.HY,{children:(0,l.BX)(D,{imageState:this.originalImageState,selectedImageIndex:p,selectedImageAction:g,onClose:this.onCloseViewer,pub:n,post:this.props.post,children:[(0,l.tZ)("div",{className:"body markup",dangerouslySetInnerHTML:i?{__html:i}:null,ref:this.body,onClick:this.onDocumentClick,onMouseDown:this.onBodyMouseDown,onMouseUp:this.onMouseUp,dir:"auto",children:t}),h&&!m?(0,l.tZ)(w.Up,{pub:n,post:this.props.post,selection:u,onClose:this.clearActiveSelection,userInteractionDisabled:this.state.selectionUserInteractionDisabled,themeVariables:this.props.themeVariables}):u&&(0,l.tZ)(N,{pub:n,post:this.props.post,selection:u,onClose:this.clearActiveSelection,userInteractionDisabled:this.state.selectionUserInteractionDisabled})]})});return _&&!c.isStatic?(0,l.tZ)(z.e,{children:b}):b}constructor(e,t){super(e,t),(0,n._)(this,"body",void 0),(0,n._)(this,"originalParagraphState",void 0),(0,n._)(this,"originalImageState",void 0),(0,n._)(this,"state",{selection:null,urlSelection:null,selectedImgIndex:null,selectionUserInteractionDisabled:!1,shouldUseSelectionV2Popover:!1,imgAction:null}),(0,n._)(this,"onBodyMouseDown",()=>{this.setState({selectionUserInteractionDisabled:!0})}),(0,n._)(this,"onMouseUp",()=>{this.setState((e,t)=>e.selectionUserInteractionDisabled?(e.selection&&t.trackSelection&&(0,S.j)(S.FP.POST_TEXT_SELECTED,{post_id:t.post.id,post_audience:t.post.audience,post_type:t.post.type}),{selectionUserInteractionDisabled:!1}):null)}),(0,n._)(this,"onSelectionChange",p()(()=>{let e=this.getSelectionState();if(e){let t=this.shouldShowShareSelectionPopover();this.setState({selection:e,shouldUseSelectionV2Popover:t})}else this.state.selection&&this.setState({selection:null})},10)),(0,n._)(this,"onDocumentClick",e=>{if(!e.target)return;let t=e.target.closest(".image-link.image2");if(t&&this.originalImageState){var i;let n=t.querySelector("img"),r=this.originalImageState.findIndex(e=>e.src===(null==n?void 0:n.src)),o=e.target,a=this.props.canRestackImage&&(null==o?void 0:o.classList.contains("restack-image"))||(null==o?void 0:null===(i=o.parentElement)||void 0===i?void 0:i.classList.contains("restack-image"));if(r>=0){e.preventDefault(),this.setState({selectedImgIndex:r,imgAction:a?"restack":"view"});return}}if(this.props.skipTrackClick)return null;this.onLinkClick(e)}),(0,n._)(this,"onCloseViewer",()=>{this.setState({selectedImgIndex:null,imgAction:null})}),(0,n._)(this,"clearActiveSelection",()=>{this.setState({selection:null})}),(0,n._)(this,"closeImageViewerModal",()=>{this.setState({selectedImgIndex:null})}),(0,n._)(this,"shouldShowShareSelectionPopover",()=>{let e;return"undefined"!=typeof window&&(e="true"===new URLSearchParams(window.location.search).get("selectQuote")),!e}),(0,n._)(this,"memoizedDeepPrepareDocumentBody",(0,g.Z)(_.Kd,m())),this.body=(0,s.createRef)()}}(0,n._)(U,"contextType",F.kx)},33665:function(e,t,i){"use strict";i.d(t,{n:()=>P,Z:()=>E});var n=i(27412),r=i(7409),o=i(99282),a=i(16584),l=i(6400),s=i(94184),d=i.n(s),c=i(13742),u=i(12620),p=i(64515);let h=e=>(0,a.tZ)(p.l,(0,o._)((0,r._)({},e),{name:"LucideCheck",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,a.tZ)(c.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}));var m=i(64719),g=i(95441),_=i(56629),b=i(75905),f=i(90406),v=i(71068),Z=i(15771),y=i(19081),w=i(40894),C=i(60308),S=i(26111),k=i(84864),x=i(47929);let B=["Subscribe","Subscribe now","Sign up","Sign up now"];function I(e){let{isStatic:t,pub:i,user:n,freeSignup:r,children:o,pledgesEnabled:l}=e;if(t)return(0,a.tZ)(b.E.Consumer,{children:e=>{let{isFreemail:t,isFreeSubscribed:n,isPledged:r}=e;return o({isFreeSubscribed:n,isSubscribed:!t,isFullySubscribed:i.plans?!t:!l||r,isForPaidSubscription:!!i.plans&&t,isPledged:r})}});let s=r||(null==n?void 0:n.is_free_subscribed),d=null==n?void 0:n.is_subscribed,c=(null==n?void 0:n.is_subscribed)&&(null==n?void 0:n.is_founding),u=null==n?void 0:n.is_pledged;return o({isFreeSubscribed:s,isSubscribed:d,isFullySubscribed:i.plans?d:s&&(!l||u),isForPaidSubscription:!!i.plans&&s&&!d,isPledged:u,isFoundingSubscribed:c})}function P(e){let{pub:t,user:i,now:n,isStatic:r}=e,{language:o}=(0,g.M1)();return(0,a.tZ)(_.vz.Consumer,{children:e=>{let{getSettingFor:l}=e,s="disabled"===t.payments_state&&!t.invite_only&&!!l("payment_pledges_enabled");return(0,a.tZ)(I,{isStatic:r,user:i,pub:t,pledgesEnabled:s,children:e=>{let{isFreeSubscribed:i,isPledged:r}=e;return(0,a.tZ)(a.HY,{children:(0,k.getSubscribeText)(t,{now:n,isFreeSubscribed:i,isPledged:r,pledgesEnabled:s,language:o})})}})}})}class E extends l.Component{onSignup(e,t){let{pledgesEnabled:i}=t;this.setState({loading:!0}),this.props.onSignup?this.props.onSignup(e):!this.props.forceEmailInput&&(this.props.pub.plans||this.props.pub.has_recommendations||i)?document.location.href=(0,C.W1P)(this.props.pub,(0,r._)((0,o._)((0,r._)({addBase:!0,utm_medium:x.lP.web,utm_source:this.props.source||x.b3.subscribeWidget,utm_content:this.props.post&&this.props.post.id,just_signed_up:!0,requires_confirmation:e.body.requires_confirmation?"true":""},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{next:this.props.next||document.location.href}),this.props.foundingUpsell&&{plan:"founding"})):(window.history.replaceState({},"",(0,C.n1t)(document.location.href,{just_subscribed:!0})),document.location.reload())}getHref(e,t){let{pub:i,subscribeButtonAttrs:n,isStatic:o,source:a,post:l,next:s,foundingUpsell:d}=this.props,c=(0,r._)({utm_medium:o?x.lP.email:x.lP.web,utm_source:a||x.b3.subscribeWidget,utm_content:l&&l.id,next:o?s:s||document.location.href,referring_pub_ids:o?void 0:(0,S.x)("referring_pub_ids")},d&&{plan:"founding"});return e?o?w.W.ACCOUNT_URL:(0,C.mGw)(i,{params:c,addBase:t.isSubstack}):(0,C.W1P)(i,(0,r._)({addBase:!0,root:n?n.url:o?w.W.CHECKOUT_URL:void 0},c))}getButtonLabel(e,t,i){let{isPledged:n,pledgesEnabled:r,foundingUpsell:o,isFoundingSubscribed:a}=i,{pub:l,subscribeButtonAttrs:s}=this.props,{iString:d}=I18N.i({pub:l});if(e||n)return d("Subscribed");let c=s&&s.text;return c&&!B.includes(c)?c:(0,k.getSubscribeText)(l,{now:!t,isFreeSubscribed:t,isPledged:n,pledgesEnabled:r,language:this.context.language,foundingUpsell:o,isFoundingSubscribed:a})}render(e,t){let{align:i,pub:n,additionalPubIds:r,user:o,freeSignup:l,freeSignupEmail:s,source:p,isStatic:g,forceEmailInput:b,expectTruncation:w,onPrepareData:C,onError:S,foundingUpsell:B,onConfirmationRequired:P,className:E}=e,{loading:N}=t;return(0,a.tZ)(_.vz.Consumer,{children:e=>{let{getSettingFor:t}=e;return(0,a.tZ)(m._j.Consumer,{children:e=>{let m=!e.isSubstack&&"undefined"!=typeof window&&n.hostname!==window.location.hostname.replace(/[.]localhost$/,"");return(0,a.tZ)(I,{pub:n,user:o,isStatic:g,freeSignup:l,pledgesEnabled:"disabled"===n.payments_state&&!n.invite_only&&!!t("payment_pledges_enabled"),children:_=>{var I;let{isFreeSubscribed:X,isSubscribed:F,isFullySubscribed:A,isPledged:T,isFoundingSubscribed:O}=_,L=this.getButtonLabel(A,X,{isPledged:T,pledgesEnabled:"disabled"===n.payments_state&&!n.invite_only&&!!t("payment_pledges_enabled"),isFoundingSubscribed:O,foundingUpsell:B}),H=X||F;return(0,a.tZ)("div",{className:d()("subscribe-widget",{"is-signed-up":H,"is-fully-subscribed":A},E),"data-component-name":"SubscribeWidget",children:!b&&(H||g)?(0,a.tZ)(v.xu,{className:"button-wrapper",children:g?(0,a.BX)("a",{className:d()("button subscribe-btn",A?"outline":"primary"),href:this.getHref(A,e),native:!g,children:[A&&(0,a.tZ)(h,{stroke:(null==n?void 0:null===(I=n.theme)||void 0===I?void 0:I.background_pop_color)||(null==n?void 0:n.theme_var_background_pop)||f.Hu,fill:"transparent",isStatic:!0,className:"check-icon static",height:20}),(0,a.tZ)("span",{children:L})]}):(0,a.tZ)(y.gq,{justifyContent:"left"===i?"start":"center",children:(0,a.tZ)(Z.zx,{href:this.getHref(A,e),localNavigation:!1,priority:A&&(O||!B)?"secondary-accent":"primary",leading:A&&(O||!B)?(0,a.tZ)(c.Z,{size:20}):null,children:(0,a.tZ)("span",{children:L})})})}):(0,a.tZ)(y.gq,{justifyContent:"center",children:(0,a.tZ)(u.Z,{disabled:H||N,freeSignup:l,freeSignupEmail:s,expectTruncation:w,next:m?window.location.href:null,pub:n,source:p||"subscribe-widget",submitButtonText:H?"✓":(0,k.getSubscribeText)(n,{language:this.context.language}),useSubscribeLink:m,useGenericEndpoint:null==e?void 0:e.isSubstack,additionalPubIds:r,user:o,utm_campaign:(null==e?void 0:e.isSubstack)?x.VX.reader2:m?x.VX.crossPost:null,onConfirmationRequired:P||((null==n?void 0:n.payments_state)==="enabled"?()=>null:void 0),onError:S,onPrepareData:C,onSuccess:e=>this.onSignup(e,{pledgesEnabled:"disabled"===n.payments_state&&!n.invite_only&&!!t("payment_pledges_enabled")})})})})}})}})}})}}(0,n._)(E,"contextType",g.wj)},84722:function(e,t,i){"use strict";i.d(t,{Z:()=>s});var n=i(16584),r=i(12620),o=i(98914),a=i(60308);let l={emailContainer:"emailContainer-JfVhvU",emailInput:"emailInput-VN3GpJ",subscribeButton:"subscribeButton-fDC87J",prompt:"prompt-j7JgJU",subscribeButtonAccent:"subscribeButtonAccent-pwy2Eg",emailInputAccent:"emailInputAccent-tTlqVa"};function s(e){let{pub:t,user:i,post:s,utmSource:d,submitButtonText:c,preset:u="primary",allowEmptyInput:p,onSuccess:h}=e,m="accent"===u?"".concat(l.emailInput," ").concat(l.emailInputAccent," fp-email-input-accent"):"".concat(l.emailInput," fp-email-input"),g="accent"===u?"".concat(l.subscribeButtonAccent," fp-subscribe-button-accent"):"".concat(l.subscribeButton," fp-subscribe-button");return(0,n.tZ)(r.Z,{allowEmptyInput:p,className:l.emailContainer,inputClassName:m,placeholder:"ENTER YOUR EMAIL",promptClassName:l.prompt,pub:t,source:d,submitButtonText:null!=c?c:"SIGN UP",subscribeButtonClassName:g,user:i,onAccentBackground:!0,onSuccess:e=>{if(h)return h(e);(0,o.uX)((0,a.Zs0)(t,{just_signed_up:!0,autoSubmit:!!e.body.prompt_to_login||void 0,email:e.body.email,next:(0,a.uRy)(t,s)}),{replace:!0,local_navigation:!1})}})}},4124:function(e,t,i){"use strict";i.d(t,{w:()=>h});var n=i(16584),r=i(30396),o=i(41352),a=i(7523),l=i(60807),s=i(98422),d=i(15771),c=i(60308),u=i(47929);let p={container:"container-fkyH3f",content:"content-UDY69G",link:"link-R3vXCZ",dismissButton:"dismissButton-z1E0Nw"},h=e=>{let{pub:t,onDismiss:i}=e,[h,m]=(0,r.eJ)(!1),{isMobile:g}=(0,s.v9)(),_=(0,l.aF)(),b=(0,r.I4)(()=>"undefined"==typeof window?"#":(0,c.W1P)(t,{addBase:!0,next:(0,c.n1t)(window.location.href,{follow:!0}),utm_source:u.b3.fixedFooterPaywall,utm_medium:u.lP.web}),[t]);return h?null:(0,n.BX)("div",{className:"".concat(p.container," ").concat(p.text),children:[(0,n.BX)(a.Z,{preset:"detail-large",children:[g?"To read ":"To read this article, ",_?null:(0,n.BX)(n.HY,{children:[(0,n.tZ)("a",{className:p.link,href:b(),native:!0,children:"sign in"})," ","or"," "]}),(0,n.tZ)("a",{className:p.link,href:b(),native:!0,children:"subscribe"})]}),(0,n.tZ)(d.kG,{"aria-label":"Dismiss",className:p.dismissButton,onClick:()=>{m(!0),null==i||i()},children:(0,n.tZ)(o.Z,{size:20})})]})}},96689:function(e,t,i){"use strict";i.d(t,{Z:()=>C});var n=i(7409),r=i(99282),o=i(16584),a=i(30396),l=i(8971),s=i(76789),d=i(98661),c=i(89810),u=i(74626),p=i(7523),h=i(87810),m=i(14952),g=i(60807),_=i(49688),b=i(7882),f=i(19081),v=i(60308),Z=i(47929);let y={container:"container-Z8NWXZ",description:"description-RcyL9U",isCollapsed:"isCollapsed-VgTQX_",chevron:"chevron-EHp9xB",bellIcon:"bellIcon-Q6Vwqc",topicTitle:"topicTitle-qCRICs",header:"header-ih4JRy"},w=e=>!!(null==e?void 0:e.subscription_id)||!!(null==e?void 0:e.is_free_subscribed),C=e=>{var t,i;let{post:C}=e,S=C.publishedBylines,{sectionId:k}=(0,h.l)(null!==(i=null===(t=S[0])||void 0===t?void 0:t.id)&&void 0!==i?i:-1),x=(0,m.Ij)(),B=(0,g.aF)(),{newsletters:I}=(0,c.i)(),P=I.topic.newsletters.map(e=>e.sectionId).includes(C.section_id),[E,N]=(0,d.useState)(!1),X=k||(P?C.section_id:null),[F,A]=(0,d.useState)(null),[T,O]=(0,d.useState)(null),{markdownProps:L}=(0,_.V)(F),{result:H,refetch:R}=(0,b.ib)({pathname:"/api/v1/subscription",auto:!1}),{refetch:M}=(0,b.ib)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),D=async(e,t)=>{await M({json:{[e]:{setting:t?"individual":"disabled"}}})};if((0,a.d4)(()=>{if(X&&x){let e=x.sections.find(e=>e.id===X);A((null==e?void 0:e.description)||null),O((null==e?void 0:e.name)||null)}},[X,x]),(0,a.d4)(()=>{R()},[]),!X)return null;let z=!!k,W=(null==H?void 0:H.email_settings[X])==="individual",V=w(B),j=async()=>{if(X){if(!V&&x){var e;let t=null===(e=x.sections.find(e=>e.id===X))||void 0===e?void 0:e.slug;if(!t)return;let i=(0,v.W1P)(x,{addBase:!0,sectionSlug:t,next:(0,v.n1t)(window.location.href,{follow:!0}),utm_source:Z.b3.followAuthorCta,utm_medium:Z.lP.web});window.location.href=i;return}await D(X,!W)}};return(0,o.BX)("div",{className:y.container,children:[(0,o.BX)(f.gq,{alignItems:"start",className:y.header,justifyContent:"space-between",children:[z?(0,o.tZ)(p.Z,(0,r._)((0,n._)({},L),{className:"".concat(y.description," ").concat(E?"":y.isCollapsed),preset:"d4-serif"})):(0,o.tZ)(p.Z,{className:y.topicTitle,preset:"d4-serif-bold",children:T||"No description available."}),(0,o.tZ)(u._,{style:{padding:"0 4px"},variant:"tertiary",onClick:()=>N(!E),children:(0,o.tZ)(l.Z,{className:y.chevron,stroke:"red",style:{transform:E?"rotate(180deg)":"rotate(0deg)"}})})]}),!z&&(0,o.tZ)(p.Z,(0,r._)((0,n._)({},L),{className:"".concat(y.description," ").concat(E?"":y.isCollapsed),preset:"d4-serif"})),(0,o.tZ)(u._,{size:"sm",variant:"tertiary",onClick:async()=>{await j(),await R()},children:(0,o.BX)(f.gq,{alignItems:"center",gap:8,children:[W?"FOLLOWED":"FOLLOW ".concat(z?"COLUMN":"TOPIC")," ",(0,o.tZ)(s.Z,{className:y.bellIcon})]})})]})}},16506:function(e,t,i){"use strict";i.d(t,{Z:()=>S});var n=i(7409),r=i(16584),o=i(30396),a=i(94184),l=i.n(a),s=i(347),d=i(84722),c=i(7523),u=i(37168),p=i(40647),h=i(98914),m=i(98422),g=i(15771),_=i(19081),b=i(60308),f=i(21292),v=i(47929);let Z={wrapper:"wrapper-TFWk0w",fade:"fade-vBsC3Z",signInLink:"signInLink-TZ6ND4",subscribeButtonLarge:"subscribeButtonLarge-lAytbH",freeWeekWrapper:"freeWeekWrapper-ItWTeB",whiteSignInLink:"whiteSignInLink-daUsik",subPlanContainer:"subPlanContainer-nTA_GR",selected:"selected-_2BPlx",banner:"banner-PABwyI",planRadio:"planRadio-wVgJ5P"},y=[{name:"Annual",price:"$8.33/month",billedAs:"$100 yearly",save:"17%!"},{name:"Monthly",price:"$10/month",billedAs:"$10 monthly"}],w=(0,b.zF4)("".concat((0,b.ZJn)(),"/img/thefp/save-ribbon.svg"),200),C=e=>{let{onPlanChange:t}=e,[i,n]=(0,o.eJ)("Annual"),a=e=>{n(e),null==t||t(e)},{isMobile:s}=(0,m.v9)();return(0,r.tZ)(_.hs,{direction:s?"column":"row",gap:16*!!s,style:{width:"100%"},children:y.map(e=>(0,r.BX)("div",{className:l()(Z.subPlanContainer,i===e.name&&Z.selected),onClick:()=>a(e.name),children:[(0,r.tZ)("input",{checked:i===e.name,className:Z.planRadio,name:"plan",type:"radio",value:e.name,onChange:()=>a(e.name)}),(0,r.BX)(_.tu,{alignItems:"start",gap:8,children:[(0,r.tZ)(c.Z,{preset:"lg-preview-byline",children:e.name}),(0,r.tZ)(c.Z,{color:"blue",preset:"d2-serif-bold",style:{paddingBottom:"8px"},children:e.price}),(0,r.tZ)(c.Z,{preset:"caption",children:e.billedAs}),e.save&&(0,r.BX)("div",{className:Z.banner,style:{backgroundImage:'url("'.concat(w,'")'),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"right center",display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"8px 8px 8px 32px"},children:[" ",(0,r.BX)(c.Z,{color:"white",preset:"caption",children:["Save ",e.save]})]})]})]},e.name))})},S=e=>{let{post:t,user:i,pub:a,freeSignupEmail:y}=e,w="newsletter"===t.type,S=!!(y||(null==i?void 0:i.is_free_subscribed)||!t.current_user_post_meter),x=(0,p.xR)(),B=(0,u.Mw)(),{isMobile:I}=(0,m.v9)(),P=I?7:13,[E,N]=(0,o.eJ)("Annual"),X="treatment"===B.getExperimentVariant("thefp_paywall_with_plans");return(B.exposeExperiment("thefp_paywall_with_plans"),S)?(0,r.tZ)(s.h,{children:(0,r.BX)(_.tu,{alignItems:"center",className:l()(Z.wrapper,{[Z.fade]:w}),gap:24,justifyContent:"center",textAlign:"center",children:[(0,r.BX)(_.tu,{gap:16,children:[(0,r.tZ)(c.Z,{preset:"h5-sans",children:"Continue Reading The Free Press"}),!!t.current_user_post_meter&&(0,r.tZ)(c.Z,{preset:"d2-serif",children:"You’ve reached your monthly article limit"}),(0,r.tZ)(c.Z,{preset:"d3-serif",children:"To support our journalism, and unlock all of our investigative stories and provocative commentary about the world as it actually is, subscribe below."}),X&&(0,r.tZ)(C,{onPlanChange:N})]}),(0,r.tZ)(g.kG,{className:Z.subscribeButtonLarge,href:(0,b.Zs0)(a,(0,n._)({utm_source:v.b3.meteredPostPaywall,next:(0,b.uRy)(a,t)},X&&E&&{plan:E.toLowerCase()})),localNavigation:!1,children:(0,r.tZ)(c.Z,{color:"white",preset:"detail-large",children:"Subscribe Now"})}),(0,r.BX)(_.gq,{gap:16,children:[(0,r.tZ)(c.Z,{preset:"caption",children:"Already have an account?"}),(0,r.tZ)("a",{className:Z.signInLink,href:(0,b.Zs0)(a,{isSignInAttempt:!0}),children:(0,r.tZ)(c.Z,{color:"accent",preset:"caption",children:"Sign In"})})]})]})}):x.getConfigFor("tfp_free_week_reg_wall")?(0,r.tZ)(s.h,{children:(0,r.BX)(_.tu,{alignItems:"center",className:l()(Z.wrapper,Z.freeWeekWrapper,{[Z.fade]:w}),gap:24,justifyContent:"center",textAlign:"center",children:[(0,r.tZ)(k,{count:P}),(0,r.BX)(_.tu,{gap:16,children:[(0,r.tZ)(c.Z,{color:"white",preset:"h5-sans-compressed",children:"THE FREE PRESS FREE WEEK"}),(0,r.tZ)(c.Z,{color:"white",preset:"d2-serif",children:"We've thrown open the gates. Every story. Every livestream. No paywall. Just enter your email to join the party."})]}),(0,r.tZ)(d.Z,{allowEmptyInput:!0,post:t,preset:"accent",pub:a,submitButtonText:"start free week",user:i,utmSource:v.b3.meteredPostRegistrationWall,onSuccess:e=>{var t,i;(null==e?void 0:null===(t=e.body)||void 0===t?void 0:t.prompt_to_login)||(null==e?void 0:null===(i=e.body)||void 0===i?void 0:i.requires_confirmation)?(0,h.uX)((0,f.e)(a,{isSignInAttempt:!0,next:document.location.href,email:e.body.email})):window.location.reload()}}),I?(0,r.BX)(_.tu,{gap:16,children:[(0,r.tZ)(c.Z,{color:"white",preset:"detail-small",children:"Already have an account?"}),(0,r.tZ)("a",{className:Z.whiteSignInLink,href:(0,b.Zs0)(a,{isSignInAttempt:!0}),children:(0,r.tZ)(c.Z,{color:"white",preset:"detail-small",children:"Sign In"})})]}):(0,r.BX)(_.gq,{gap:16,children:[(0,r.tZ)(c.Z,{color:"white",preset:"detail-small",children:"Already have an account?"}),(0,r.tZ)("a",{className:Z.whiteSignInLink,href:(0,b.Zs0)(a,{isSignInAttempt:!0}),children:(0,r.tZ)(c.Z,{color:"white",preset:"detail-small",children:"Sign In"})})]}),(0,r.tZ)(c.Z,{color:"white",preset:"detail-small",children:"Free Week ends 10/12/2025."}),(0,r.tZ)(k,{count:P})]})}):(0,r.tZ)(s.h,{children:(0,r.BX)(_.tu,{alignItems:"center",className:l()(Z.wrapper,{[Z.fade]:w}),gap:24,justifyContent:"center",textAlign:"center",children:[(0,r.BX)(_.tu,{gap:16,children:[(0,r.tZ)(c.Z,{preset:"h5-sans",children:"Enjoying the story?"}),(0,r.tZ)(c.Z,{preset:"d2-serif",children:"Enter your email to read this article and receive our daily newsletter."})]}),(0,r.tZ)(d.Z,{post:t,pub:a,user:i,utmSource:v.b3.meteredPostRegistrationWall}),(0,r.BX)(_.gq,{gap:16,children:[(0,r.tZ)(c.Z,{preset:"caption",children:"Already have an account?"}),(0,r.tZ)("a",{className:Z.signInLink,href:(0,b.Zs0)(a,{isSignInAttempt:!0}),children:(0,r.tZ)(c.Z,{color:"accent",preset:"caption",children:"Sign In"})})]})]})})},k=e=>{let{count:t}=e;return(0,r.tZ)(_.gq,{gap:16,children:Array.from({length:t}).map((e,t)=>(0,r.tZ)("img",{alt:"Star",height:"24",src:t%2==0?"/img/thefp/thefp-star.svg":"/img/thefp/thefp-star-white.svg",width:"25"},"star-".concat(t)))})}},24658:function(e,t,i){"use strict";i.d(t,{R:()=>R});var n=i(16584),r=i(94184),o=i.n(r),a=i(7409),l=i(99282),s=i(30396),d=i(62372),c=i(88216),u=i(74626),p=i(98848),h=i(347);let m={popoverContainer:"popoverContainer-EjJsJc"},g=e=>{let{children:t,closeOnOutsideClick:i,content:r,isOpen:s,onClose:c,onToggle:u}=e,{arrowProps:g,layerProps:_,renderLayer:b,triggerProps:f}=(0,d.sJ)({auto:!0,containerOffset:28,isOpen:s,overflowContainer:!0,placement:"bottom-center",possiblePlacements:["bottom-center"],triggerOffset:16,onOutsideClick:i?c:void 0}),v=_.style,{style:Z}=_,y=(0,p._)(_,["style"]),w="undefined"==typeof window;return(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",(0,l._)((0,a._)({},f),{onClick:()=>{null==u||u(!s)},children:t})),s&&!w&&b((0,n.BX)("div",(0,l._)((0,a._)({style:v},y),{className:o()(m.popoverContainer,"the-free-press-theme"),children:[(0,n.tZ)(h.h,{children:r}),(0,n.tZ)(d.Eh,(0,l._)((0,a._)({},g),{borderColor:"var(--color-fg-primary-themed)",borderWidth:2,size:10}))]})))]})};var _=i(7523),b=i(19081),f=i(60308),v=i(47929);let Z=e=>{let{children:t,isFreeSubscribed:i,isOpen:r,isSubscribed:o,pub:a,onClose:l}=e,s=(0,f.W1P)(a,{utm_source:v.b3.downloadPdfButton,simple:!0,next:(0,f.n1t)(document.location.href,{triggerPDF:!0}),addBase:!0});return(0,n.tZ)(g,{closeOnOutsideClick:!0,content:(0,n.BX)(b.tu,{gap:4,position:"relative",children:[(0,n.tZ)(_.Z,{preset:"d4-serif",children:o?"Paid subscribers can now save articles as PDFs, formatted for printing out and enjoying offline.":"Saving articles as PDFs, formatted for printing and reading offline, is a benefit we're proud to offer our\n              paid subscribers. ".concat(i?"Upgrade":"Sign up"," today to unlock this feature.")}),!o&&(0,n.tZ)(b.gq,{children:(0,n.tZ)(u._,{href:s,localNavigation:!1,size:"sm",trailingIcon:"chevron-right",variant:"tertiary",children:i?"Upgrade now":"Subscribe now"})})]}),isOpen:r,onClose:l,children:t})};var y=i(68833),w=i(98914),C=i(63651);let S=e=>{let{post:t,pub:i,user:r}=e,[o,u]=(0,d.XI)(),[p,h]=(0,s.eJ)(!1),m=!!(null==r?void 0:r.is_subscribed),g=!!(null==r?void 0:r.is_free_subscribed);return(0,s.d4)(()=>{let e=new URL(document.location.href);if(e.searchParams.get("triggerPDF")){if(m){var n;(0,w.uX)((0,C.SUl)(i,t.id,{token:"token"in window._preloads&&null!==(n=window._preloads.token)&&void 0!==n?n:void 0}),{local_navigation:!1,newTab:!0})}e.searchParams.delete("triggerPDF"),window.history.replaceState({},"",e)}},[m,t.id,i]),(0,n.tZ)(Z,{isFreeSubscribed:g,isOpen:p,isSubscribed:m,pub:i,onClose:()=>{h(!1)},children:(0,n.tZ)(b.hs,(0,l._)((0,a._)({},u),{cursor:"pointer",onClick:()=>{if((0,y.j)(y.FP.POST_PDF_BUTTON_CLICKED,{post_id:t.id}),!m){h(!p);return}(0,w.uX)((0,C.SUl)(i,t.id),{local_navigation:!1,newTab:!0})},children:(0,n.tZ)(c.Z,{height:24,isHovered:o,width:24})}))})};var k=i(42312),x=i(84892),B=i(86657),I=i(92002),P=i(73580),E=i(64515);let N=e=>{var t=(0,I._)({},(0,P._)(e));return(0,n.tZ)(E.l,(0,l._)((0,a._)({},t),{name:"FPPauseIcon",svgParams:{width:25,height:25,viewBox:"0 0 25 24",fill:"none",stroke:"none"},children:(0,n.BX)("g",{id:"play-circle",children:[(0,n.tZ)("path",{id:"Icon",d:"M12.5 22C18.0228 22 22.5 17.5228 22.5 12C22.5 6.47715 18.0228 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5228 6.97715 22 12.5 22Z",stroke:"#F2312C",strokeWidth:"2",strokeLinecap:"round"}),(0,n.tZ)("rect",{id:"Rectangle 2398",x:"8.5",y:"7.08496",width:"3",height:"10",fill:"#F2312C"}),(0,n.tZ)("rect",{id:"Rectangle 2399",x:"13.5",y:"7.08496",width:"3",height:"10",fill:"#F2312C"})]})}))};var X=i(41193),F=i(84864);let A="ctaMode-zO5a9a",T=e=>{let{containerRef:t,currentTime:i,remainingTime:r,progress:o,onMouseDown:a,className:l}=e;return(0,n.BX)(b.gq,{alignItems:"center",className:l,gap:4,children:[(0,n.tZ)(_.Z,{preset:"caption",style:{flexShrink:0,minWidth:"28px"},children:i}),(0,n.BX)("div",{ref:t,className:"progressBar-yUZk3A",onMouseDown:a,children:[(0,n.tZ)("div",{className:"progressBarBackground-rOIsbW"}),(0,n.tZ)("div",{className:"progressBarProgress-EiVcPg",style:{width:"".concat(100*o,"%")}}),(0,n.tZ)("div",{className:"progressBarPlayhead-KWfdzC",style:{left:"".concat(100*o,"%")}})]}),(0,n.tZ)(_.Z,{preset:"caption",style:{flexShrink:0,paddingLeft:"4px",minWidth:"36px"},children:r})]})},O=e=>{var{mediaUploadId:t,user:i,post:r,pub:d}=e,c=(0,p._)(e,["mediaUploadId","user","post","pub"]);let[h,m]=(0,s.eJ)(!0),[Z,w]=(0,s.eJ)(!1),C=!!(null==i?void 0:i.is_subscribed),S=!!(null==i?void 0:i.is_free_subscribed);return(0,s.d4)(()=>{Z&&(0,y.j)(y.FP.TTS_UPGRADE_TO_LISTEN_CLICKED,{post_id:r.id})},[Z,r.id]),(0,n.tZ)(B.Z,(0,l._)((0,a._)({},c),{feature:x.MR.Voiceover,metricsPost:r,post:r,pub:d,render:e=>{let{isPaywalled:t,currentTime:i,isPlaying:a,progress:l,progressBarRef:s,progressBarOnMouseDown:c,remainingTime:p,duration:y,togglePlayback:k}=e,x=()=>{if(t){w(!0);return}h&&m(!1),k()},B=(0,n.BX)(b.gq,{alignItems:"center",className:o()("wrapper-LdgflB",{[A||""]:h}),gap:16,justifyContent:"space-between",children:[(0,n.BX)(b.gq,{alignItems:"center",className:o()("innerWrapper-ersGfZ",{[A||""]:h}),gap:16,onClick:h?x:void 0,children:[(0,n.tZ)(b.tu,{className:o()("playButton-vLW5qd",{[A||""]:h,"static-tP398S":t}),style:{flexShrink:0},onClick:()=>{x()},children:a?(0,n.tZ)(N,{}):(0,n.tZ)(X.Z,{})}),(0,n.tZ)(T,{className:o()("progressBarWrap-vpoiUw",{[A||""]:h}),containerRef:s,currentTime:i,progress:l,remainingTime:p,onMouseDown:c}),(0,n.BX)(b.gq,{alignItems:"center",className:o()("cta-GdLXe1",{[A||""]:h}),gap:16,children:[(0,n.tZ)(_.Z,{preset:"detail-small",children:t?"Upgrade to Listen":"Listen to Article"}),(0,n.tZ)(_.Z,{color:"tertiary",preset:"caption",style:{flexShrink:0},children:(0,F.secondsToLargestUnit)(y||300)})]})]}),(0,n.tZ)(_.Z,{className:o()("disclaimer-i3yYG0",{[A||""]:h}),color:"tertiary",preset:"caption",children:"Produced by ElevenLabs using AI narration"})]});return t?(0,n.tZ)(g,{closeOnOutsideClick:!0,content:(0,n.BX)(b.tu,{gap:4,position:"relative",children:[(0,n.tZ)(_.Z,{preset:"d4-serif",children:"Listening to articles, is a benefit we're proud to offer our paid subscribers. Sign up today to unlock this feature."}),!C&&(0,n.tZ)(b.gq,{children:(0,n.tZ)(u._,{href:(0,f.Zs0)(d,{UTM_SOURCE:v.b3.voiceoverPlayer,next:(0,f.uRy)(d,r)}),localNavigation:!1,size:"sm",trailingIcon:"chevron-right",variant:"tertiary",children:S?"Upgrade now":"Subscribe now"})})]}),isOpen:Z,onClose:()=>{w(!1)},children:B}):B},src:t?"/api/v1/audio/upload/".concat(t,"/src"):null,trackingProps:{}}))};var L=i(40647);let H={postUFI:"postUFI-Oh86n4",hasVoiceover:"hasVoiceover-rbvr3u",editButtonContainer:"editButtonContainer-hWwvUO"},R=e=>{var t;let{post:i,pub:r,user:a,autoPlayVoiceOver:l,variant:s}=e,{getConfigFor:d}=(0,L.xR)(),c=i.has_voiceover||!!i.voiceoverUpload,u="newsletter-post"===s&&(0,F.showCommentsOnPost)({publication:r,post:i}),p="newsletter-post"===s&&r.community_enabled,h="newsletter-post"===s,m=!!(null==a?void 0:a.is_contributor),g="newsletter-post"===s&&!!d("show_open_post_as_pdf_button");return u||p||h||m?(0,n.BX)(b.hs,{className:o()(H.postUFI,{[H.hasVoiceover||""]:c}),gap:24,justifyContent:"end",children:[c&&(0,n.tZ)(O,{autoPlay:l,duration:null===(t=i.voiceoverUpload)||void 0===t?void 0:t.duration,href:i.canonical_url,isPaywalled:!(null==a?void 0:a.is_subscribed),mediaUploadId:i.voiceover_upload_id,post:i,pub:r,user:a}),(0,n.BX)(b.gq,{alignItems:"center",gap:16,children:[u&&(0,n.tZ)(k.Ck,{post:i,pub:r,size:"large"}),p&&(0,n.tZ)(k.gV,{post:i,pub:r,size:"large",user:a}),h&&(0,n.tZ)(k.fA,{post:i,pub:r,user:a}),g&&(0,n.tZ)(S,{post:i,pub:r,user:a}),m&&(0,n.tZ)(k.ND,{className:H.editButtonContainer,context:"post-page",post:i,pub:r,user:a})]})]}):null}},85721:function(e,t,i){"use strict";i.d(t,{T:()=>v});var n=i(16584),r=i(30396),o=i(94184),a=i.n(o),l=i(23279),s=i.n(l),d=i(1852),c=i(33296),u=i(7523),p=i(98914),h=i(19081),m=i(63474),g=i(84864);let _={container:"container-NR9v7N",fixed:"fixed-gIIqpc",header:"header-ggAXv9",title:"title-3Yeuyx",commentContainer:"commentContainer-dmiFCB",label:"label-gHN5_J","active-label":"active-label-ndUdOP"},b=e=>{let[t,i]=(0,r.eJ)("header"),n=[{text:"header",id:"header",selector:".markup > p:first-of-type"},...e,{text:"discussion",id:"discussion",selector:"#discussion > div"}];return(0,r.d4)(()=>{let e=[];return n.forEach(t=>{let n=(0,p.VA)(t.text,!0),r=document.getElementById("\xa7".concat(n))||t.selector&&document.querySelector(t.selector);if(r){let t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.intersectionRatio>=.5&&i(n)})},{threshold:.5,rootMargin:"-10% 0px -55% 0px"});t.observe(r),e.push(t)}}),()=>e.forEach(e=>e.disconnect())},[e]),t},f=e=>{let{toc:t,title:i,activeItem:o,wordCount:l,commentCount:d,onItemClick:b}=e,f=(0,r.sO)(null),[v,Z]=(0,r.eJ)(!1),[y,w]=(0,r.eJ)("0"),C=(0,r.I4)(()=>{if(f.current){var e,t,i;let n=f.current.getBoundingClientRect(),r=null===(e=f.current.parentElement)||void 0===e?void 0:e.getBoundingClientRect(),o=window.innerHeight/2;if(n&&r){if(o+2>r.top+n.height/2){let e=Number(null===(i=document.getElementById("discussion"))||void 0===i?void 0:null===(t=i.getBoundingClientRect())||void 0===t?void 0:t.top)+n.height/2+20;e<=o?(Z(!0),w(e.toString())):(Z(!0),w("50%"))}else Z(!1),w("0")}}},[v,f,y]),S=(0,r.Ye)(()=>s()(C,25,{trailing:!0,leading:!0,maxWait:60}),[C]);return(0,r.d4)(()=>(window.addEventListener("scroll",S,{passive:!0}),()=>{window.removeEventListener("scroll",S)}),[v,S]),(0,n.tZ)("div",{id:"toc",style:{position:"relative"},children:(0,n.tZ)("div",{ref:f,className:a()(_.container,v&&_.fixed),style:{top:"50%"===y?"50%":Number(y)},children:(0,n.BX)(h.tu,{flex:"grow",gap:4,children:[(0,n.BX)("div",{className:a()(_.header,_.label),id:"header"===o?_["active-label"]:void 0,onClick:()=>b(document.querySelector(".markup")),children:[(0,n.tZ)(u.Z,{className:_.title,color:"header"===o?"primary":"disabled",preset:"detail-large",children:i}),l&&(0,n.BX)(u.Z,{color:"header"===o?"primary":"disabled",preset:"caption",children:[Math.round(l/g.READ_WORDS_PER_MINUTE)," min read"]})]}),t.map((e,t)=>{let i=(0,p.VA)(e.text,!0),r=o===i;return(0,n.tZ)(m.A0,{href:"#\xa7".concat(i),onClick:e=>{e.preventDefault(),b(document.getElementById("\xa7".concat(i)))},children:(0,n.tZ)(h.gq,{children:(0,n.tZ)(u.Z,{className:_.label,color:r?"primary":"disabled",id:r?_["active-label"]:void 0,preset:"body",children:e.text})})},t)}),(0,n.BX)("div",{className:a()(_.commentContainer,_.label),onClick:()=>b(document.getElementById("discussion")),children:[(0,n.tZ)(c.Z,{isHovered:"discussion"===o}),d]})]})})})},v=e=>{let{toc:t,title:i,wordCount:r,commentCount:o}=e,a=b(t),l=(0,d.useMediaQuery)({maxWidth:1100});return t.length<2||l?null:(0,n.tZ)(f,{activeItem:a,commentCount:o,title:i,toc:t,wordCount:r,onItemClick:e=>{e&&e.scrollIntoView({behavior:"smooth",block:"start"})}})}},89276:function(e,t,i){"use strict";i.d(t,{j:()=>p});var n=i(16584),r=i(94184),o=i.n(r),a=i(347),l=i(25956),s=i(98422),d=i(71068),c=i(63651);let u={thefpPostBodyWrapper:"thefpPostBodyWrapper-Sk9SUV",withEagleWatermark:"withEagleWatermark-SQ7w6N",eagleWatermark:"eagleWatermark-QuTSZR",noPaddingOnMobile:"noPaddingOnMobile-SkPaHP",withDropCap:"withDropCap-izNtyr",withSpaceForMissingDropCap:"withSpaceForMissingDropCap-MMwASG",threadHeadBody:"threadHeadBody-gHFj3E"},p=e=>{var t,i;let{children:r,disabled:p,inThreadHead:h,isCustomPage:m,isShowsPost:g,post:_}=e,b=!!(null==_?void 0:null===(t=_.postTheme)||void 0===t?void 0:t.disable_drop_cap),{isMobile:f}=(0,s.v9)(),v=!!_&&(0,l.NX)(_)&&f;return p?(0,n.tZ)(n.HY,{children:r}):(0,n.tZ)(a.h,{children:(0,n.BX)(d.xu,{className:o()(u.thefpPostBodyWrapper,u[null==_?void 0:null===(i=_.postTheme)||void 0===i?void 0:i.header_variant],{[u.withDropCap]:!(h||m||b),[u.withSpaceForMissingDropCap]:b,[u.threadHeadBody]:h,[u.noPaddingOnMobile]:g||h||m,[u.withEagleWatermark]:v}),children:[v&&(0,n.tZ)("div",{className:u.eagleWatermark,style:{backgroundImage:"url(".concat((0,c.zF4)("".concat((0,c.ZJn)(),"/img/thefp/eagle_stamp.png"),500,{quality:"auto:good",crop:"limit"}),")")}}),r]})})}},42312:function(e,t,i){"use strict";i.d(t,{Ck:()=>k,ND:()=>B,gV:()=>S,fA:()=>x});var n=i(7409),r=i(99282),o=i(16584),a=i(12297),l=i.n(a),s=i(9404),d=i(62372),c=i(33296),u=i(98848),p=i(64515),h=i(24476);let m=e=>{var{isHovered:t,isLiked:i}=e,a=(0,u._)(e,["isHovered","isLiked"]);let l=i?h.t.mediumRed.hex:t?h.t.brightOrange.hex:h.t.lightGray.hex;return(0,o.BX)(p.l,(0,r._)((0,n._)({},a),{name:"FPLikeIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",stroke:"none",fill:"none"},children:[(0,o.tZ)("path",{d:"M3.69231 1H9.23077V2.83333H11.0769V4.66667H12.9231V2.83333H14.7692V1H20.3077V2.83333H22.1538V4.66667H24V12H22.1538V13.8333H20.3077V15.6667H18.4615V17.5H16.6154V19.3333H14.7692V21.1667H12.9231V23H11.0769V21.1667H9.23077V19.3333H7.38462V17.5H5.53846V15.6667H3.69231V13.8333H1.84615V12H0V4.66667H1.84615V2.83333H3.69231V1Z",fill:l}),(0,o.tZ)("rect",{x:"5",y:"4",width:"2",height:"2",fill:"white"}),(0,o.tZ)("rect",{x:"3",y:"6",width:"2",height:"4",fill:"white"})]}))};var g=i(40034),_=i(37696),b=i(94442),f=i(67203),v=i(7523),Z=i(15771),y=i(19081),w=i(63651),C=i(84864);let S=e=>{let{cta:t,post:i,pub:a,showCounts:s=!0,size:c,user:u,onChange:p}=e,[h,g]=(0,d.XI)(),_=l()(Object.values((null==i?void 0:i.reactions)||{})),f=(0,C.numberToString)(_||0),Z="small"===c?16:24,w="small"===c?"sm-preview-byline":"detail-large";return(0,o.tZ)(b.Hg,{isStatic:!1,post:i,pub:a,style:"button",user:u,onChange:p,children:e=>{let{isLiked:i,handleLike:a}=e;return(0,o.BX)(y.gq,(0,r._)((0,n._)({},g),{alignItems:"center",cursor:"pointer",gap:8,role:"button",onClick:a,children:[(0,o.BX)(y.gq,{alignItems:"center",gap:"small"===c?4:6,children:[(0,o.tZ)(m,{height:Z,isHovered:h,isLiked:i,width:Z}),s&&_>0&&(0,o.tZ)(v.Z,{preset:w,children:f})]}),t&&(0,o.tZ)(v.Z,{preset:"detail-large",children:t})]}))}})},k=e=>{let t,{post:i,pub:a,showCounts:l=!0,size:s,cta:u}=e,[p,h]=(0,d.XI)(),m=(0,C.numberToString)(i.comment_count),g="small"===s?16:24;return t=(null==i?void 0:i.comment_url_override)?i.comment_url_override:(0,w.uRy)(a,i,{comments:!0}),(0,o.BX)(y.gq,(0,r._)((0,n._)({},h),{alignItems:"center",cursor:"pointer",gap:8,role:"button",onClick:e=>{e.stopPropagation(),window.location.href=t},children:[(0,o.BX)(y.gq,{alignItems:"center",gap:"small"===s?4:6,children:[(0,o.tZ)(c.Z,{height:g,isHovered:p,width:g}),i.comment_count>0&&l&&(0,o.tZ)(v.Z,{preset:"small"===s?"sm-preview-byline":"detail-large",children:m})]}),u&&(0,o.tZ)(v.Z,{preset:"detail-large",children:u})]}))},x=e=>{let{pub:t,post:i,user:a,cta:l}=e,[s,c]=(0,d.XI)();return(0,o.tZ)(f.sp,{post:i,pub:t,trigger:(0,o.BX)(y.hs,(0,r._)((0,n._)({},c),{alignItems:"center",cursor:"pointer",gap:8,children:[(0,o.tZ)(g.Z,{height:24,isHovered:s,width:24}),l&&(0,o.tZ)(v.Z,{preset:"detail-large",children:l})]})),user:a})},B=e=>{let{className:t,context:i,post:a,pub:l,user:c}=e,[u,p]=(0,d.XI)();if(!c)return null;let m=u?h.t.brightOrange.hex:h.t.lightGray.hex,g=(0,o.tZ)(Z.kG,(0,r._)((0,n._)({display:"flex",resetCss:!0},p),{onClick:e=>{e.stopPropagation()},children:(0,o.tZ)(s.Z,{size:"post-preview"===i?16:24,stroke:m})}));return(0,o.tZ)("div",{className:t,style:{cursor:"pointer"},children:(0,o.tZ)(_.U,{hideDropCapOption:"post-preview"===i,hidePinning:!0,hidePostHeaderOptions:"post-preview"===i,post:a,pub:l,trigger:g,user:c})})}},87810:function(e,t,i){"use strict";i.d(t,{l:()=>c});var n=i(30396),r=i(14952),o=i(60807),a=i(7882),l=i(60308),s=i(47929);let d=e=>!!(null==e?void 0:e.subscription_id)||!!(null==e?void 0:e.is_free_subscribed),c=e=>{var t;let[i,c]=(0,n.eJ)(!1),[u,p]=(0,n.eJ)(!1),[h,m]=(0,n.eJ)(!0),[g,_]=(0,n.eJ)(!1),b=(0,r.Ij)(),f=(0,o.aF)(),v=null!==(t=null==b?void 0:b.authorPagesInfo)&&void 0!==t?t:[],Z=null==v?void 0:v.find(t=>t.user_id===e),y=(null==Z?void 0:Z.primary_section_id)===0?void 0:null==Z?void 0:Z.primary_section_id,w=d(f),{result:C,refetch:S}=(0,a.ib)({pathname:"/api/v1/subscription",auto:!1}),{refetch:k}=(0,a.ib)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH",cacheTtl:6e4});(0,n.d4)(()=>{(async()=>{m(!0);try{_(!!y);let t=await S(),i=new URLSearchParams(window.location.search),n="true"===i.get("follow");if(i.has("follow")){i.delete("follow");let e=i.toString()?"".concat(window.location.pathname,"?").concat(i.toString()):window.location.pathname;window.history.replaceState({},"",e)}if(n&&y&&w&&!(t instanceof Error)){var e;(null==t?void 0:null===(e=t.email_settings)||void 0===e?void 0:e[y])!=="individual"&&(await k({json:{[y]:{setting:"individual"}}}),c(!0))}}finally{m(!1)}})()},[e,b]),(0,n.d4)(()=>{p(w)},[w]),(0,n.d4)(()=>{(null==C?void 0:C.email_settings)&&y&&(c("individual"===C.email_settings[y]),p(w))},[C,y,w]);let x=async()=>{if(!y)return;if(!w&&b){var e;let t=null===(e=b.sections.find(e=>e.id===y))||void 0===e?void 0:e.slug,i=(0,l.W1P)(b,{addBase:!0,sectionSlug:t,next:(0,l.n1t)(window.location.href,{follow:!0}),utm_source:s.b3.followAuthorCta,utm_medium:s.lP.web});window.location.href=i;return}let t=!i;await k({json:{[y]:{setting:t?"individual":"disabled"}}}),c(t)};return{isSubscribedToAuthor:i,isSubscribedToPub:u,isLoading:h,hasSection:g,toggleSubscription:x,sectionId:y,currentUserSubscriptions:C}}},79160:function(e,t,i){"use strict";i.d(t,{r:()=>m});var n=i(16584),r=i(30396),o=i(95441),a=i(68833),l=i(15771),s=i(19081),d=i(6490),c=i(58175),u=i(4953),p=i(60308),h=i(47929);function m(e){let{postId:t,onClose:i}=e,{iString:u}=(0,o.M1)();return(0,r.d4)(()=>{(0,a.j)(a.FP.LISTEN_TO_THIS_POST_MODAL_SHOWN,{post_id:t})},[]),(0,n.BX)(d.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(d.xB,{showClose:!0,onClose:i}),(0,n.tZ)(d.fe,{children:(0,n.BX)(s.tu,{alignItems:"center",gap:24,children:[(0,n.BX)(s.tu,{style:{textAlign:"center"},justifyContent:"center",gap:8,children:[(0,n.tZ)(c.xv.H3,{weight:"heavy",children:u("Listen to this post")}),(0,n.tZ)(c.xv,{color:"secondary",style:{lineHeight:1.5},children:u("Get the Substack app to hear this article read aloud.")})]}),(0,n.tZ)(g,{})]})}),(0,n.tZ)(d.mz,{showDivider:!0,direction:"column",primaryButton:(0,n.tZ)(l.zx,{priority:"primary",href:(0,p.D4e)({utm_source:h.b3.web,utm_campaign:h.VX.ttsModal}),onClick:()=>(0,a.j)(a.FP.LISTEN_TO_THIS_POST_MODAL_GET_THE_APP_CLICKED,{post_id:t}),children:u("Get the app")})})]})}function g(){let e="/img/main/tts-dialog";return(0,n.BX)("video",{height:220,autoPlay:!0,muted:!0,loop:!0,children:[(0,n.tZ)("source",{src:"".concat(e,"/nux.mp4"),type:"video/mp4"}),(0,n.tZ)("img",{width:374,height:233,src:"".concat(e,"/1x.png"),srcset:Array.from((0,u.w6)(1,4)).map(t=>"".concat(e,"/").concat(t,"x.png ").concat(t,"x")).join(", ")})]})}},26989:function(e,t,i){"use strict";i.d(t,{Eo:()=>Z});var n=i(16584),r=i(64515),o=i(666);i(91355);var a=i(7409),l=i(99282);let s=e=>(0,n.BX)(r.l,(0,l._)((0,a._)({},e),{name:"MoreIcon",svgParams:{height:24,width:24,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},children:[(0,n.tZ)("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z"}),(0,n.tZ)("path",{d:"M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z"}),(0,n.tZ)("path",{d:"M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z"})]}));var d=i(50137),c=i(1467);i(95441);var u=i(90099),p=i(92291),h=i(71068),m=i(58175);i(33555),i(65749);var g=i(98012),_=i(31377),b=i(60308),f=i(63651),v=i(84864);function Z(e){var t,i,r,a,l,_,Z,B,I;let{comment:P,utmSource:E,hideUfi:N,commentLinkUrl:X}=e;if(!P)return(0,n.tZ)(m.xv.B3,{"data-component-name":"EmailCommentEmbedError",translated:!0,children:"Could not load comment"});let F=null===(t=P.attachments)||void 0===t?void 0:t.find(e=>"image"===e.type),A=null===(i=P.attachments)||void 0===i?void 0:i.find(e=>"post"===e.type),T=null==A?void 0:A.postSelection,O=null===(r=P.attachments)||void 0===r?void 0:r.find(e=>"image"!==e.type),L=O&&(0,p.kW)(O),H=null===(a=P.attachments)||void 0===a?void 0:a.find(e=>"video"===e.type);return(0,n.tZ)(h.xu,{as:"a",href:null!=X?X:(0,f.Sgq)(P,{urlParams:{utm_source:E}}),display:"block",padding:16,radius:"md",border:"detail",color:"primary",className:"note-flsrqQ","data-component-name":"EmailCommentEmbed",children:(0,n.BX)(u.zK,{style:{width:"100%"},verticalAlign:"top",gap:12,growLastChild:!0,children:[(0,n.tZ)(u.NS,{src:null!==(_=P.photo_url)&&void 0!==_?_:(0,b.I4e)(null!==(l=P.user_id)&&void 0!==l?l:0),size:48}),(0,n.BX)(u.i$,{gap:12,style:{lineHeight:1,width:"100%"},children:[(0,n.BX)(h.xu,{children:[(0,n.BX)(m.xv.B3,{children:[(0,n.tZ)(m.xv,{as:"span",weight:"semibold",children:P.name})," ",(0,n.tZ)(m.xv,{as:"span",color:"secondary",children:(0,g.Z)(P.date).fromNowShort()})]}),(0,n.tZ)(m.xv.B3,{children:(0,v.truncateWords)(P.body,420)})]}),A&&T&&(0,n.tZ)(m.xv.B3,{children:(0,n.tZ)(S,{attachment:A,selection:T})}),L&&!A&&(0,n.tZ)(m.xv.B4,{color:"highlight",children:L}),H&&(0,n.tZ)(x,{attachment:H}),F&&(0,n.tZ)(k,{attachment:F}),!N&&(0,n.tZ)(u.YF,{width:"100%",style:{width:"100%"},children:(0,n.BX)("tr",{children:[(0,n.BX)("td",{width:"20%",children:[(0,n.tZ)(o.Z,{width:16,height:16,strokeWidth:1.5,stroke:C,style:y,fill:"none",isStatic:!0}),(0,n.tZ)(w,{count:null!==(Z=P.reaction_count)&&void 0!==Z?Z:0})]}),(0,n.BX)("td",{width:"20%",children:[(0,n.tZ)(c.Z,{height:16,width:16,strokeWidth:1.5,stroke:C,style:y,isStatic:!0}),(0,n.tZ)(w,{count:null!==(B=P.children_count)&&void 0!==B?B:0})]}),(0,n.BX)("td",{width:"20%",children:[(0,n.tZ)(d.Z,{height:16,width:16,strokeWidth:1.5,stroke:C,style:y,isStatic:!0}),(0,n.tZ)(w,{count:null!==(I=P.restacks)&&void 0!==I?I:0})]}),(0,n.tZ)("td",{width:"20%",children:(0,n.tZ)(s,{height:16,width:16,strokeWidth:2,stroke:C,fill:C,style:y,isStatic:!0})})]})})]})]})})}let y={display:"inline-block",verticalAlign:"middle"};function w(e){let{count:t}=e;return(0,n.tZ)(m.xv.B4,{size:12,as:"span",weight:"semibold",color:"secondary",style:{marginLeft:4},children:t>0?(0,v.numberToRoughShortString)(Math.max(t,1),{plusSignifier:""}):" "})}let C="#808080";function S(e){let{attachment:t,selection:i}=e;return(0,n.tZ)(h.xu,{padding:12,radius:"md",bg:"secondary",children:(0,n.BX)(m.xv,{color:"secondary",font:"serif",fontStyle:"italic",lineHeight:24,children:[(0,v.truncateWords)(i.text.replaceAll("“","‘").replaceAll("”","’"),180),"” — ",(0,_.getPostAuthor)(t.publication,t.post).name]})})}function k(e){let{attachment:t}=e;return(0,n.tZ)(h.xu,{as:"img",src:(0,f.zF4)(t.imageUrl,800,{crop:"limit",height:800}),width:400,radius:"md",style:{maxHeight:600,objectFit:"cover",margin:0}})}function x(e){let{attachment:t}=e,i=t.mediaUpload;return(0,n.tZ)(h.xu,{as:"img",src:(0,b.kOB)(i,{isStatic:!0}),width:400,radius:"md",style:{maxHeight:600,objectFit:"cover",margin:0}})}},49688:function(e,t,i){"use strict";i.d(t,{V:()=>r});var n=i(30396);let r=e=>{let[t,r]=(0,n.eJ)();return(0,n.d4)(()=>{"string"==typeof e&&i.e("5871").then(i.bind(i,2345)).then(t=>{let{micromark:i}=t;r(i(e))})},[e]),{markdownProps:"string"==typeof e?{dangerouslySetInnerHTML:{__html:null!=t?t:e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/__(.*?)__/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/_(.*?)_/g,"$1")},style:{opacity:+!!t}}:{children:e}}}},25530:function(e,t,i){"use strict";i.d(t,{v:()=>r});var n=i(1852);let r=()=>({isPrint:(0,n.useMediaQuery)({query:"print"})})},27036:function(e,t,i){"use strict";i.d(t,{P:()=>n});let n=(e,t)=>"enabled"===t.payments_state?e.is_subscribed:e.is_free_subscribed},29927:function(e,t,i){"use strict";i.d(t,{X:()=>f});var n=i(16584),r=i(30396),o=i(41352),a=i(83034),l=i(20888),s=i(68833),d=i(98422),c=i(15771),u=i(61254),p=i(19081),h=i(6490),m=i(58175),g=i(60308),_=i(47929);let b="appStoreBadgeButton-PoDbV8",f=e=>{let{onClose:t}=e,{isMobile:i}=(0,d.v9)();return(0,r.d4)(()=>{(0,s.j)(s.FP.SAVE_VIDEO_UPSELL_MODAL_SEEN)},[]),(0,n.tZ)(h.u_,{disableCloseOnBackdropClick:!0,isOpen:!0,width:i?void 0:850,onClose:t,children:(0,n.BX)(p.gq,{position:"relative",padding:20,gap:32,justifyContent:i?"center":void 0,children:[(0,n.tZ)(p.gq,{position:"absolute",style:{top:8,right:8},children:(0,n.tZ)(c.GI,{rounded:!0,priority:"secondary",size:"sm",onClick:t,children:(0,n.tZ)(o.Z,{size:20})})}),!i&&(0,n.tZ)("div",{children:(0,n.tZ)(l.e,{src:(0,g.zF4)("/img/marketing/save-video-upsell.png",762),maxWidth:381,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,n.BX)(p.tu,{justifyContent:"center",gap:20,children:[(0,n.BX)(p.tu,{gap:8,children:[(0,n.tZ)(m.xv.H3,{align:"center",translated:!0,paddingBottom:8,children:"Video saved to your app"}),(0,n.tZ)(m.xv.B3,{align:"center",translated:!0,children:"Download now on iOS or Android to see all saved videos."})]}),(0,n.tZ)(a.AppInstallContent,{hideEmailPrompt:!0,size:160,padding:0}),(0,n.tZ)(u.ZC,{}),(0,n.BX)(p.gq,{gap:16,justifyContent:"center",paddingTop:8,children:[(0,n.tZ)("a",{className:b,href:(0,g.RMm)({utm_campaign:_.VX.saveVideoUpsellModal,utm_source:_.b3.post}),onClick:()=>{(0,s.j)(s.FP.APP_STORE_LINK_CLICKED,{source:"save_video_upsell_modal",app_store:"ios"})},children:(0,n.tZ)("img",{src:(0,g.zF4)("/img/app_page/app-store.png",320),height:40})}),(0,n.tZ)("a",{className:b,href:(0,g.AaB)({utm_campaign:_.VX.saveVideoUpsellModal,utm_source:_.b3.post}),onClick:()=>{(0,s.j)(s.FP.APP_STORE_LINK_CLICKED,{source:"save_video_upsell_modal",app_store:"android"})},children:(0,n.tZ)("img",{src:(0,g.zF4)("/img/app_page/google-play.png",320),height:40})})]})]})]})})}},23776:function(e,t,i){"use strict";i.d(t,{Z:()=>u});var n=i(16584),r=i(30396),o=i(18787),a=i(72508),l=i(95441),s=i(68833),d=i(24791),c=i(84864);let u=e=>{let{post:t,pub:i,user:u,playerRef:p}=e,h=!(0,c.canSeeTranscription)(u,t),m=(0,d.LH)(t),{iString:g}=(0,l.M1)();return((0,r.d4)(()=>{(0,s.j)(s.FP.TRANSCRIPTION_PAGE_VIEWED,{post_id:t.id})},[t.id]),m)?h?(0,n.tZ)(o.f1,{user:u,publication:i,post:t,title:g("Transcriptions on this post are for paid subscribers"),reauthenticationTitle:g("To see the post, please re-authenticate.")}):(0,n.tZ)(a.ZP,{transcription:m,player:p,postId:t.id}):null}},83963:function(e,t,i){"use strict";i.d(t,{B:()=>_});var n=i(16584),r=i(30396),o=i(45977),a=i(95441),l=i(68833),s=i(71068),d=i(15771),c=i(19081),u=i(6490),p=i(58175),h=i(63651);let m=e=>e?e.includes("free_subscribers")?"free_subscribers":e.includes("paid_subscribers")?"paid_subscribers":e.includes("founding_subscribers")?"founding_subscribers":null:null,g=e=>{switch(e){case"free_subscribers":return"Subscribers";case"paid_subscribers":return"Paid subscribers";case"founding_subscribers":return"Founding members"}},_=e=>{let{isOpen:t,onClose:i,profile:_,dmUpgradeOptions:b,isEditor:f=!1}=e,{iString:v}=(0,a.M1)();(0,r.d4)(()=>{(0,l.j)(l.FP.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_SEEN,{subscribeButtonShown:C})},[]);let Z=null==_?void 0:_.primaryPublication,y=m(b),w=y?g(y):null,C=w&&(f||!f&&Z),S="founding_subscribers"===y?{plan:"founding",utm_source:"direct-message-writer"}:void 0,k=!f&&Z?(0,h.W1P)(Z,{addBase:!f,params:S}):(0,h.W1P)({},{addBase:!1,params:S}),x=(0,s.oB)({width:200});return(0,n.tZ)(u.u_,{isOpen:t,onClose:i,children:(0,n.tZ)(u.fe,{children:(0,n.BX)(c.tu,{gap:16,alignItems:"center",children:[(0,n.tZ)(s.xu,{bg:"secondary",radius:"full",padding:16,children:(0,n.tZ)(o.Z,{size:32})}),(0,n.BX)(c.tu,{gap:8,alignItems:"center",padding:8,children:[!!w&&(0,n.BX)(p.xv.B1,{children:[w," only"]}),!!w&&(0,n.tZ)(p.xv.B3,{color:"secondary",align:"center",children:v("".concat(null==_?void 0:_.name," only accepts messages from ").concat(null==w?void 0:w.toLowerCase()))}),!w&&(0,n.tZ)(p.xv.B3,{color:"secondary",align:"center",children:v("".concat(null==_?void 0:_.name," is not currently accepting message invites"))})]}),(0,n.BX)(c.tu,{gap:8,alignItems:"center",padding:8,children:[C&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(d.zx,{className:x,priority:"primary",href:k,newTab:!0,children:v((null==_?void 0:_.isSubscribed)?"Upgrade":"Subscribe")}),(0,n.tZ)(d.zx,{className:x,onClick:()=>{(0,l.j)(l.FP.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_MAYBE_LATER_CLICKED),i()},priority:"secondary",children:v("Maybe later")})]}),!C&&(0,n.tZ)(d.zx,{className:x,onClick:()=>{(0,l.j)(l.FP.DIRECT_MESSAGE_WRITER_UPSELL_MODAL_OKAY_CLICKED),i()},priority:"secondary",children:v("Okay")})]})]})})})}},65749:function(e){e.exports=function(e){if(!e)return 0;let t=(e=e.replace(/<(.|\n)*?>/g," ")).match(/[a-zA-ZÀ-ÿ0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g)||e.match(/([\u0600-\u06ff]+|[\u0591-\u05F4]+)/g);if(null===t)return 0;let i=0;for(let e=0;e<t.length;e+=1){let n=t[e];n&&(n.charCodeAt(0)>=19968?i+=n.length:i+=1)}return i}},93903:function(e,t,i){"use strict";function n(e){return(e||"").replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}i.d(t,{Z:()=>n})}}]);