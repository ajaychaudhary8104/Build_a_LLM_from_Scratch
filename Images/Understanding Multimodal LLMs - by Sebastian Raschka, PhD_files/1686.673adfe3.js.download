"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["1686"],{67844:function(){},76511:function(){},66782:function(e,t,i){i.d(t,{Z:()=>l});let l={themeButton:"themeButton-ORTHZZ",imageBg:"imageBg-g08ncu",inner:"inner-ntFns3",selected:"selected-YSP54X"}},30279:function(){},75031:function(e,t,i){i.d(t,{Z:()=>l});let l={badge:"badge-jGMz0j",dot:"dot-dFwIaI",singleElement:"singleElement-ve4D6v",fillIcon:"fillIcon-hub55b",empty:"empty-w6FjPW",shape_circle:"shape_circle-Q9w9_R",shapeCircle:"shape_circle-Q9w9_R",shape_square:"shape_square-O2PxpD",shapeSquare:"shape_square-O2PxpD","placement_top-left":"placement_top-left-dsosXN",placementTopLeft:"placement_top-left-dsosXN","placement_top-right":"placement_top-right-CTrC80",placementTopRight:"placement_top-right-CTrC80","placement_bottom-left":"placement_bottom-left-JFLMtf",placementBottomLeft:"placement_bottom-left-JFLMtf","placement_bottom-right":"placement_bottom-right-hoG7Xz",placementBottomRight:"placement_bottom-right-hoG7Xz"}},5844:function(e,t,i){i.d(t,{Z:()=>l});let l={checkbox:"checkbox-h4aRbX",xs:"xs-u94A3p",sm:"sm-rkc_jb",md:"md-FWdzy4",enabled:"enabled-BlbymI",unchecked:"unchecked-ixpycg",icon:"icon-JVHTJb",checked:"checked-FCMkyU",indeterminate:"indeterminate-F1sLeA",theme_error:"theme_error-EdHJ89",themeError:"theme_error-EdHJ89",disabled:"disabled-TmcbuP",theme_accent:"theme_accent-BLPCPx",themeAccent:"theme_accent-BLPCPx",theme_success:"theme_success-K1reIy",themeSuccess:"theme_success-K1reIy",theme_select:"theme_select-db4cFz",themeSelect:"theme_select-db4cFz",theme_highlight:"theme_highlight-c5Va8G",themeHighlight:"theme_highlight-c5Va8G",theme_mono:"theme_mono-w3BrBe",themeMono:"theme_mono-w3BrBe"}},66327:function(e,t,i){i.d(t,{Z:()=>l});let l={tag:"tag-XbOVLt",clickable:"clickable-nTmG6b",trailing:"trailing-TAQX7m",leading:"leading-mI5Ihl",fillIcon:"fillIcon-dQ0mii",theme_default:"theme_default-ZkFeoy",themeDefault:"theme_default-ZkFeoy",priority_primary:"priority_primary-uPxff5",priorityPrimary:"priority_primary-uPxff5",theme_accent:"theme_accent-Y2sqZY",themeAccent:"theme_accent-Y2sqZY",theme_error:"theme_error-Ob6GzK",themeError:"theme_error-Ob6GzK",theme_success:"theme_success-rIz3Am",themeSuccess:"theme_success-rIz3Am",theme_warn:"theme_warn-Cpi08d",themeWarn:"theme_warn-Cpi08d",theme_paid:"theme_paid-dQGqrS",themePaid:"theme_paid-dQGqrS",theme_substack:"theme_substack-jJ5UVL",themeSubstack:"theme_substack-jJ5UVL",theme_select:"theme_select-sAp6Wr",themeSelect:"theme_select-sAp6Wr",priority_secondary:"priority_secondary-AEjb79",prioritySecondary:"priority_secondary-AEjb79","priority_secondary-outline":"priority_secondary-outline-RpooJS",prioritySecondaryOutline:"priority_secondary-outline-RpooJS",priority_tertiary:"priority_tertiary-HMnJV4",priorityTertiary:"priority_tertiary-HMnJV4",media:"media-cKchX2"}},18816:function(e,t,i){i.d(t,{Z:()=>l});let l={imageContainer:"imageContainer-ZCdWLc",imageContainerFullHeight:"imageContainerFullHeight-hF_KGu",overlay:"overlay-SefqcL",image:"image-MSZo7W",downloadButton:"downloadButton-lyp4Aa",loading:"loading-BBOJtl",link:"link-D8bzcd"}},4373:function(e,t,i){i.d(t,{C:()=>p,a:()=>m});var l=i(16584),a=i(95441),n=i(90099),r=i(94874),o=i(15771),s=i(19081),d=i(58175),c=i(63651),h=i(47929),u=i(45537);function m(e){let{pub:t,subdomain:i}=e,{iString:n}=(0,a.M1)();return(0,l.BX)(s.tu,{className:u.Z.webContainer,alignItems:"center",border:"detail-themed",radius:"md",padding:20,gap:16,as:"a",href:g(i),target:"_blank","data-component-name":"CommunityChatEmbed",children:[(0,l.tZ)(r.qE,{size:64,photoUrl:(0,c.zF4)(t.author_photo_url)}),(0,l.BX)(s.tu,{gap:4,alignItems:"center",children:[(0,l.BX)(d.xv.H3,{translated:!0,as:"div",color:"pub-primary-text",children:["Join ",I18N.p(t.author_name),"’s subscriber chat"]}),(0,l.tZ)(d.xv.B4,{translated:!0,color:"pub-secondary-text",children:"Available in the Substack app and on web"})]}),(0,l.tZ)(s.tu,{alignSelf:"stretch",children:(0,l.tZ)(o.zx,{priority:"primary",href:g(i),children:n("Join chat")})})]})}function p(e){let{pub:t,subdomain:i}=e,{iString:r}=(0,a.M1)();return(0,l.tZ)("a",{className:u.Z.emailWrapper,href:g(i),"data-component-name":"EmailCommunityChatEmbed",children:(0,l.BX)("div",{className:u.Z.container,children:[(0,l.tZ)(n.NS,{size:64,src:(0,c.zF4)(t.author_photo_url),framed:!0}),(0,l.BX)("div",{className:u.Z.text,children:[(0,l.BX)(d.xv.H3,{translated:!0,className:u.Z.title,as:"div",color:"pub-primary-text",children:["Join ",I18N.p(t.author_name),"’s subscriber chat"]}),(0,l.tZ)(d.xv.B4,{translated:!0,color:"pub-secondary-text",children:"Available in the Substack app and on web"})]}),(0,l.tZ)(n.Bj,{tableClassName:u.Z.button,children:r("Join chat")})]})})}function g(e){return(0,c.ZVW)({pubKey:e,utm_source:h.b3.chatEmbed})}},45528:function(e,t,i){i.d(t,{V:()=>Z,s:()=>v});var l=i(7409),a=i(99282),n=i(16584),r=i(93974),o=i(35240),s=i(68833),d=i(48980),c=i(7882),h=i(9682),u=i(19081),m=i(63651),p=i(47929),g=i(18427);function Z(e){var t,i,l,a,o;let Z,{postId:v}=e,[{path:f}]=(0,h.tv)();"undefined"!=typeof window&&(Z=f.startsWith("/inbox/post/")?Number(f.split("/post/")[1]):"post"in window._preloads?null===(o=window._preloads)||void 0===o?void 0:null===(a=o.post)||void 0===a?void 0:a.id:void 0);let{error:_,result:y}=(0,c.ib)({pathname:"/api/v1/community/posts/".concat(v),auto:!0,deps:[v]}),b=_ instanceof d.kp&&402===_.response.status&&((null===(t=_.body)||void 0===t?void 0:t.status)==="PAID_SUBSCRIPTION_REQUIRED"||(null===(i=_.body)||void 0===i?void 0:i.status)==="FOUNDING_SUBSCRIPTION_REQUIRED"||(null===(l=_.body)||void 0===l?void 0:l.status)==="FREE_SUBSCRIPTION_REQUIRED")?_.body:null;return(0,n.tZ)(u.hs,{as:"a",className:g.Z.container,target:"_blank",href:(0,m._5K)({postId:v,utm_source:p.b3.threadEmbed}),"data-component-name":"CommunityPostEmbed",onClick:()=>(0,s.j)(s.FP.EMBEDDED_COMMUNITY_POST_CLICKED,{post_id:Z,community_post_id:v}),children:b?"FREE_SUBSCRIPTION_REQUIRED"===b.status&&b.communityPost?(0,n.tZ)(r.Jg,{author:b.user,communityPost:b.communityPost,surface:"community_post_embed",communityPostEmbedPostId:Z,useClientSideRouting:!1,withAttribution:!0,isReadOnly:!0,utmSource:p.b3.threadEmbed}):(0,n.tZ)(r.V8,{author:b.user,audience:"FREE_SUBSCRIPTION_REQUIRED"===b.status?"all_subscribers":"PAID_SUBSCRIPTION_REQUIRED"===b.status?"only_paid":"only_founding"}):_?"Could not load chat message: Click to view":y&&(0,n.tZ)(r.Jg,{author:y.user,communityPost:y.communityPost,surface:"community_post_embed",communityPostEmbedPostId:Z,utmSource:p.b3.threadEmbed,useClientSideRouting:!1,withAttribution:!0,isReadOnly:!0})})}function v(e){let{postId:t}=e;return(0,n.tZ)("a",{className:g.Z.emailWrapper,href:(0,m._5K)({postId:t,utm_source:p.b3.threadEmbed,modal:"1"}),"data-component-name":"EmailCommunityPostEmbed",children:(0,n.tZ)("div",{className:g.Z.container,children:(0,n.tZ)(o.L,(0,a._)((0,l._)({},e),{withAttribution:!0}))})})}},42725:function(e,t,i){i.d(t,{pc:()=>l}),i(16584),i(6400),i(30396),i(14068),i(68833),i(62981),i(15771),i(19081),i(58175),i(35144);let l="clip_web_nux_seen_at"},41705:function(e,t,i){i.d(t,{U:()=>y});var l=i(7409),a=i(99282),n=i(16584),r=i(30396),o=i(14293),s=i.n(o),d=i(87756),c=i(95441),h=i(39556);async function u(e){return(0,h.O)(e,{imageCropAspectRatio:1,cropSelectPresetOptions:void 0,willRenderCanvas:(e,t)=>{let{utilVisibility:i,selectionRect:n,lineColor:r,backgroundColor:o}=t;if(i.crop<=0)return e;let{x:s,y:d,width:c,height:h}=n;return(0,a._)((0,l._)({},e),{interfaceShapes:[{x:s+.5*c,y:d+.5*h,rx:.5*c,ry:.5*h,opacity:i.crop,inverted:!0,backgroundColor:[...o,.5],strokeWidth:1,strokeColor:[...r]},...e.interfaceShapes]})}})}var m=i(98914),p=i(94874),g=i(71068),Z=i(15771),v=i(19081),f=i(89635),_=i(70408);function y(e){let{user:t,onChangePhoto:i}=e,{iString:o}=(0,c.M1)(),[h,y]=(0,r.eJ)(null),[b,w]=(0,r.eJ)(null),[{isDragging:N},{openFileDialog:C,getInputProps:x,getDragProps:I}]=(0,f.F)({accept:"image/*",multiple:!1,onFilesAdded:async e=>{let t=e[0];if(t)try{let e=t.file instanceof File?t.file:null;if(!e)return;let l=await (0,m.GL)(e);if(!l||s()(l.url))return;let a=await u(l.url),n=await (0,m.GL)(a);if(!n)return;let{url:r,orientation:o}=n;y(null!=o?o:null),r&&(w(r),i({photo_url:r}))}catch(e){console.error("Error processing image:",e)}}}),B=(0,r.Ye)(()=>({transform:(0,m.P_)(h)}),[h]),k=b||(0,_.SM)(t);return(0,n.tZ)(g.xu,(0,a._)((0,l._)({alignSelf:"start"},I()),{children:(0,n.BX)(Z.kG,{resetCss:!0,onClick:C,"aria-label":o("Edit profile photo"),children:[(0,n.BX)(v.M5,{style:B,position:"relative",width:120,height:120,border:"detail",radius:"full",bg:N?"secondary":"primary",overflow:"hidden",children:[k?(0,n.tZ)(p.qE,{photoUrl:k,size:120}):(0,n.tZ)(d.Z,{size:24}),N&&(0,n.tZ)(v.M5,{position:"absolute",inset:0,style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,n.tZ)(d.Z,{size:24})})]}),(0,n.tZ)("input",(0,l._)({},x()))]})}))}},22582:function(e,t,i){i.d(t,{hJ:()=>b,yW:()=>w});var l=i(7409),a=i(99282),n=i(16584),r=i(30396),o=i(94184),s=i.n(o),d=i(22448),c=i(2563),h=i(20888),u=i(80026),m=i(19081),p=i(63651),g=i(81567);let Z=(e,t)=>1===t?"large":2===t||4===t?"medium":t%3==0?"small":5===t||7===t?e<=2?"small":"medium":e<=5?"small":"medium",v={small:237,medium:360,large:728},f=e=>{let{src:t,size:i,onSelectImage:l,useViewer:a=!1,alt:r}=e;return(0,n.tZ)(h.e,{src:t,alt:r,maxWidth:2*v[i],className:s()(g.Z.image,g.Z[i],a&&g.Z.zoom,(0,u.oB)({pressable:"lg"})),onClick:()=>{a&&l()}})},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=[];for(let a in e){let n=e[a],{height:r=0,width:o=0}=n&&(0,p.zJH)(n.src)||{},s="(".concat(Number(a)+1," of ").concat(e.length,")"),d={src:n.src,height:r,width:o,alt:"".concat(i," ").concat(s),title:"".concat(t," ").concat(s)};l.push({attrs:d})}return l},y=e=>{let{onEditGallery:t}=e;return(0,n.tZ)(u.GI,{priority:"primary",onClick:t,className:g.Z.edit,children:(0,n.tZ)(d.Z,{size:20})})},b=e=>{let{node:t,editor:i}=e,{gallery:o}=t.attrs,d=t.attrs.isEditor||i,{caption:h,alt:u}=o,p=o.images.map((e,t)=>(0,a._)((0,l._)({},e),{idx:t})),v="undefined"!=typeof window&&!window.location.pathname.startsWith("/publish"),[b,w]=(0,r.eJ)(!1),[N,C]=(0,r.eJ)(0),x=1===p.length,I=_(p,h),B=e=>{C(e),w(!0)};if(0===p.length)return null;let k=function e(t){let i=4===t.length?2:3,l=[t.slice(0,i)],a=t.slice(i);return a.length>0&&(l=l.concat(e(a))),l}(p);return(0,n.BX)("figure",{className:g.Z.gallery,"data-drag-handle":!0,"data-component-name":"ImageGallery",children:[d&&o&&(0,n.tZ)(y,{onEditGallery:()=>{document.dispatchEvent(new Event("editSelectedImageGallery"))}}),(0,n.BX)(m.tu,{gap:8,children:[x?(0,n.tZ)(f,{src:p[0].src,alt:u,caption:h,size:Z(0,1),onSelectImage:()=>B(0),useViewer:v}):k.map(e=>(0,n.tZ)(m.hs,{className:s()(g.Z.imageRow,g.Z["length-".concat(e.length)]),gap:8,children:e.map(e=>(0,n.tZ)(f,{src:e.src,alt:u,caption:h,size:Z(e.idx,p.length),onSelectImage:()=>B(e.idx),useViewer:v}))})),h&&(0,n.tZ)("figcaption",{className:g.Z.imageCaption,children:h})]}),(0,n.tZ)(c.ImageViewerModal,{showModal:b,modalContent:I,onClose:()=>w(!1),step:N})]})},w=e=>{let{node:t}=e,{gallery:i}=t.attrs;if(!i)return null;let{alt:l,staticGalleryImage:a,caption:r}=i;return a?(0,n.BX)("div",{className:s()(g.Z.static,g.Z.gallery),"data-component-name":"ImageGalleryStatic",children:[(0,n.tZ)("img",{src:(0,p.zF4)(a.src,2*v.large),alt:l}),r&&(0,n.tZ)("div",{className:s()(g.Z.imageCaption,g.Z.static),children:r})]}):null}},13723:function(e,t,i){i.d(t,{$:()=>p,c:()=>g});var l=i(16584),a=i(94184),n=i.n(a),r=i(82701),o=i(94442),s=i(14952),d=i(60807),c=i(90099),h=i(19081),u=i(58175),m=i(71075);let p=e=>{var t;let{disableLinks:i,href:a,includeUfi:c=!1,paddingBottom:p=0,paddingTop:g=0,post:Z}=e,v=(0,d.aF)(),f=(0,s.Ij)();return(0,l.BX)(h.gq,{alignItems:"center",gap:16,paddingBottom:p,paddingTop:g,children:[c&&f&&v&&Z&&(0,l.BX)(h.gq,{className:"post-ufi",gap:8,children:[(0,l.tZ)(o.RY,{post:Z,pub:f,user:v}),(0,l.tZ)(o.L9,{post:Z,pub:f}),(0,l.tZ)(o.pD,{labelStyle:"cta",post:Z,pub:f,style:"button",user:v})]}),(0,l.tZ)(u.xv.B4,{align:"center",as:"a",className:n()({[null!==(t=m.Z.disableLink)&&void 0!==t?t:""]:i}),href:a,weight:"medium",children:(0,l.BX)(h.gq,{alignItems:"center",className:m.Z.link,gap:8,children:[(0,l.tZ)(u.xv.B4,{as:"span",color:"accent",size:14,weight:"semibold",children:"Read full story"}),(0,l.tZ)(r.Z,{size:16})]})})]})},g=e=>{let{href:t,paddingTop:i=0,paddingBottom:a=0}=e;return(0,l.tZ)(c.zK,{gap:16,style:{paddingTop:i,paddingBottom:a},children:(0,l.tZ)(u.xv.B4,{align:"center",as:"a",href:t,weight:"medium",children:(0,l.tZ)(c.zK,{gap:8,children:(0,l.tZ)(u.xv.B4,{as:"span",className:m.Z.link,color:"accent",size:14,children:"Read full story"})})})})}},57336:function(e,t,i){i.d(t,{I:()=>p,h:()=>m});var l=i(16584),a=i(94184),n=i.n(a),r=i(1548),o=i(90099),s=i(98914),d=i(19081),c=i(58175),h=i(63651),u=i(71075);let m=e=>{let{bylines:t,date:i,disableLinks:a}=e;return(0,l.BX)(d.gq,{alignItems:"center",gap:4,children:[(null==t?void 0:t.length)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(c.xv.Meta,{className:n()({[u.Z.disableLink]:a}),color:"pub-secondary-text",children:(0,l.tZ)(r.M,{array:t||[],formatter:e=>{let{id:t,name:i}=e;return(0,l.tZ)("a",{className:u.Z.inheritColor,href:(0,h.GR3)(t,i),children:i})},limit:3})}),(0,l.tZ)(c.xv,{color:"pub-secondary-text",children:"\xb7"})]}):null,(0,l.tZ)(c.xv.Meta,{color:"pub-secondary-text",children:(0,s.Po)(i)})]})},p=e=>{let{bylines:t,date:i}=e;return(0,l.BX)(o.zK,{gap:4,children:[(null==t?void 0:t.length)?(0,l.BX)(o.zK,{gap:4,children:[(0,l.tZ)(c.xv.Meta,{color:"pub-secondary-text",children:(0,l.tZ)(r.M,{array:t||[],formatter:e=>{let{id:t,name:i}=e;return(0,l.tZ)("a",{className:u.Z.inheritColor,href:(0,h.GR3)(t,i),children:i})},limit:3})}),(0,l.tZ)(c.xv,{color:"pub-secondary-text",children:"\xb7"})]}):null,(0,l.tZ)(c.xv.Meta,{color:"pub-secondary-text",children:(0,s.Po)(i)})]})}},77116:function(e,t,i){i.d(t,{_:()=>v,a:()=>Z});var l=i(16584),a=i(94184),n=i.n(a),r=i(19691),o=i(13723),s=i(57336),d=i(26522),c=i(20888),h=i(71068),u=i(19081),m=i(58175),p=i(91400),g=i(71075);let Z=e=>{var t,i,a;let{caption:d,disableLinks:Z,post:v,isEditingCaption:f,onEditCaption:_,onSaveCaption:y,onCancelCaption:b}=e,{publishedBylines:w,title:N,canonical_url:C,post_date:x,section_name:I,cover_image:B,cover_image_alt:k}=v,S=(0,p.XA)();return(0,l.BX)(u.tu,{children:[I&&(0,l.tZ)("a",{className:n()({[null!==(t=g.Z.disableLink)&&void 0!==t?t:""]:Z}),href:C,rel:"noopener",target:"_blank",children:(0,l.tZ)(m.xv.Meta,{color:"pub-primary-text",paddingBottom:8,children:I})}),(0,l.tZ)("a",{className:n()({[null!==(i=g.Z.disableLink)&&void 0!==i?i:""]:Z}),href:C,rel:"noopener",target:"_blank",children:(0,l.tZ)(m.xv.H2,{color:"pub-primary-text",children:N})}),(0,l.tZ)(s.h,{bylines:w,date:x,disableLinks:Z}),(0,l.BX)(u.hs,{direction:{mobile:"column",desktop:"row"},gap:16,paddingTop:16,children:[B&&(0,l.tZ)(h.xu,{style:{width:S?"unset":140},children:(0,l.tZ)("a",{className:n()({[null!==(a=g.Z.disableLink)&&void 0!==a?a:""]:Z}),href:C,rel:"noopener",target:"_blank",children:(0,l.tZ)(c.e,{alt:null!=k?k:N,className:S?g.Z.fullWidth:g.Z.mdSquare,imageProps:{height:Math.round(S?1300:280),smartCrop:!0},maxWidth:S?1300:280,src:B})})}),(0,l.BX)(u.tu,{flex:"grow",children:[f&&y&&b?(0,l.tZ)(r.Z,{initialCaption:d,onCancel:b,onSave:y}):(0,l.tZ)("p",{className:g.Z.caption,dangerouslySetInnerHTML:{__html:d},onClick:null!=_?_:void 0}),(0,l.tZ)(o.$,{disableLinks:Z,href:C,post:v})]})]})]})},v=e=>{let{post:t,children:i}=e;return(0,l.tZ)(d.Y,{children:i,post:t})}},57219:function(e,t,i){i.d(t,{o:()=>g,u:()=>p});var l=i(16584),a=i(94184),n=i.n(a),r=i(13723),o=i(57336),s=i(20888),d=i(90099),c=i(71068),h=i(19081),u=i(58175),m=i(71075);let p=e=>{var t;let{post:i,disableLinks:a}=e,{publishedBylines:d,title:p,canonical_url:g,post_date:Z,cover_image:v,cover_image_alt:f}=i;return(0,l.tZ)("a",{className:n()({[null!==(t=m.Z.disableLink)&&void 0!==t?t:""]:a}),href:g,rel:"noopener",target:"_blank",children:(0,l.BX)(h.gq,{gap:16,children:[v&&(0,l.tZ)(c.xu,{style:{width:70,height:70},children:(0,l.tZ)(s.e,{alt:null!=f?f:p,className:m.Z.smSquare,imageProps:{height:Math.round(140),smartCrop:!0},maxWidth:140,src:v})}),(0,l.BX)(h.tu,{children:[(0,l.tZ)(u.xv.H4,{color:"pub-primary-text",children:p}),(0,l.tZ)(o.h,{bylines:d,date:Z,disableLinks:a}),(0,l.tZ)(r.$,{disableLinks:a,href:g,includeUfi:!1,post:i})]})]})})},g=e=>{let{post:t}=e,{publishedBylines:i,title:a,canonical_url:n,post_date:h,cover_image:p,cover_image_alt:g}=t;return(0,l.BX)(d.zK,{gap:16,children:[p&&(0,l.tZ)(c.xu,{style:{width:70},children:(0,l.tZ)("a",{href:n,children:(0,l.tZ)(s.e,{alt:null!=g?g:a,className:m.Z.smSquare,imageProps:{height:140,smartCrop:!0},maxWidth:140,src:p})})}),(0,l.BX)(d.i$,{children:[(0,l.tZ)(u.xv.H4,{color:"pub-primary-text",children:(0,l.tZ)("a",{href:n,children:a})}),(0,l.tZ)(o.I,{bylines:i,date:h}),(0,l.tZ)(r.c,{href:n})]})]})}},16973:function(e,t,i){i.d(t,{N:()=>C,o:()=>x});var l=i(16584),a=i(30396),n=i(94184),r=i.n(n),o=i(71408),s=i(92560),d=i(67884),c=i(8719),h=i(90470),u=i(11809),m=i(347),p=i(20888),g=i(7523),Z=i(90099),v=i(15771),f=i(19081),_=i(99916),y=i(6490),b=i(58175),w=i(71766),N=i(30060);let C=e=>{let{title:t,postIds:i,showCount:n,posts:Z,pub:C,isEditor:x,updateAttributes:I,align:B}=e,[k,S]=(0,a.eJ)(Z||[]),[E,R]=(0,a.eJ)(!Z&&!x),[X,F]=(0,a.eJ)(!1),[P,H]=(0,a.eJ)(t),[T,M]=(0,a.eJ)(!1),[V,L]=(0,a.eJ)(null),[z,J]=(0,a.eJ)(0),[W,A]=(0,a.eJ)(!1),[D,O]=(0,a.eJ)(""),j=(0,a.sO)(null),U=e=>{if(null===V)return;let t=[...k];V<t.length?t[V]=e:t.push(e),S(t),I&&I({posts:t,postIds:t.map(e=>e.id)}),M(!1),L(null),$()},q=e=>{L(e),M(!0),J(0),$()},{searchQuery:Y,searchResults:K,isSearching:G,handleSearch:Q,clearSearch:$,getLatestPostsByTag:ee,fetchAvailableTags:et,availableTags:ei}=(0,u.l)({pubId:C.id,onSelectPost:U});(0,a.d4)(()=>{let e=!1;return(async()=>{if(!Z||(null==i?void 0:i.length)===0||x&&0===k.length&&!(null==i?void 0:i.length)){x||R(!0);try{let t=await (0,w.HK)((null==i?void 0:i.length)>0?i:void 0);if(e)return;let l=t.slice(0,n);S(l),I&&I({posts:l,postIds:l.map(e=>e.id)})}catch(t){e||console.error("Error fetching posts:",t)}finally{e||R(!1)}}})(),()=>{e=!0}},[i,n,Z,I,x,k.length]),(0,a.d4)(()=>{X&&j.current&&(j.current.focus(),j.current.select())},[X]);let el=()=>{I&&I({title:P}),F(!1)},ea=k.slice(0,n),en=async(e,t)=>{let i=await ee(e);if(i.length>0){let e=i.slice(0,n);S(e),I&&I({title:t,posts:e,postIds:e.map(e=>e.id)}),H(t)}A(!1),O("")},er=async()=>{await et(),A(!0),O("")};return(0,l.BX)(l.HY,{children:[(0,l.tZ)("div",{className:"the-free-press-theme",children:(0,l.tZ)(m.h,{children:(0,l.BX)("div",{className:r()(N.Z.fpRecircBlock,x?N.Z.editor:"","left"===B&&N.Z.alignLeft,"right"===B&&N.Z.alignRight),"data-component-name":"FpRecircBlock",children:[(0,l.BX)(f.hs,{justifyContent:"space-between",alignItems:"center",style:{marginBottom:24},className:N.Z.header,children:[X&&x?(0,l.tZ)("input",{ref:j,type:"text",value:P,onChange:e=>H(e.target.value),onBlur:el,onKeyDown:e=>{"Enter"===e.key&&el(),"Escape"===e.key&&(H(t),F(!1))},className:N.Z.titleInput}):(0,l.tZ)("div",{className:r()(N.Z.sectionTitle,x?N.Z.editable:""),onClick:x?()=>F(!0):void 0,children:(0,l.tZ)(g.Z,{preset:"body",children:(0,l.tZ)("span",{style:{fontWeight:700},children:t})})}),x&&(0,l.BX)(_.v2,{trigger:(0,l.tZ)(v.hU,{size:"sm",priority:"tertiary",className:N.Z.settingsButton,children:(0,l.tZ)(o.Z,{})}),children:[(0,l.BX)(_.xw,{title:"Count",isFirst:!0,children:[(0,l.tZ)(_.sN,{onClick:()=>null==I?void 0:I({showCount:3}),priority:3===n?"accent":"secondary",children:"Show 3 stories"}),(0,l.tZ)(_.sN,{onClick:()=>null==I?void 0:I({showCount:4}),priority:4===n?"accent":"secondary",children:"Show 4 stories"})]}),(0,l.tZ)(_.xw,{title:"Populate",children:(0,l.tZ)(_.sN,{onClick:()=>er(),priority:"secondary",children:"Populate by tag"})}),(0,l.BX)(_.xw,{title:"Alignment",children:[(0,l.tZ)(_.sN,{onClick:()=>null==I?void 0:I({align:null}),priority:B?"secondary":"accent",leading:(0,l.tZ)(s.Z,{}),children:"Center"}),(0,l.tZ)(_.sN,{onClick:()=>null==I?void 0:I({align:"left"}),priority:"left"===B?"accent":"secondary",leading:(0,l.tZ)(d.Z,{}),children:"Float left"}),(0,l.tZ)(_.sN,{onClick:()=>null==I?void 0:I({align:"right"}),priority:"right"===B?"accent":"secondary",leading:(0,l.tZ)(c.Z,{}),children:"Float right"})]})]})]}),E&&!x?(0,l.tZ)("div",{className:N.Z.loading,children:"Loading posts..."}):(0,l.tZ)(l.HY,{children:ea.length>0&&(0,l.tZ)(f.hs,{direction:"column",gap:16,children:ea.map((e,t)=>(0,l.tZ)("div",{className:N.Z.postWrapper,children:(0,l.BX)("a",{href:x?"#":e.canonical_url,className:N.Z.postCard,onClick:x?e=>e.preventDefault():void 0,children:[(0,l.BX)(f.hs,{gap:12,children:[(0,l.tZ)("div",{className:N.Z.imageWrapper,children:e.cover_image?(0,l.tZ)(p.e,{className:N.Z.postImage,imageIsFixedWidth:!0,maxWidth:300,src:e.cover_image,useRetinaSizing:!0}):(0,l.tZ)("div",{className:N.Z.imagePlaceholder})}),(0,l.BX)(f.hs,{direction:"column",justifyContent:"center",gap:8,className:N.Z.postContent,children:[(0,l.tZ)(g.Z,{preset:"lg-preview-byline",className:N.Z.postTitle,children:e.title}),e.author_names&&e.author_names.length>0&&(0,l.tZ)(g.Z,{preset:"detail-small",color:"accent",className:N.Z.postAuthor,children:e.author_names.join(", ")})]})]}),x&&(0,l.tZ)("div",{className:N.Z.editButtonContainer,children:(0,l.tZ)(v.hU,{priority:"primary-mono",size:"sm",onClick:e=>{e.preventDefault(),e.stopPropagation(),q(t)},children:(0,l.tZ)(h.Z,{size:16})})})]})},"post-".concat(e.id)))})})]})})}),(0,l.tZ)(y.u_,{isOpen:T,onClose:()=>{M(!1),L(null),$()},className:N.Z.modalContainer,children:(0,l.tZ)("div",{className:"the-free-press-theme",children:(0,l.tZ)(m.h,{children:(0,l.BX)("div",{className:N.Z.searchModal,children:[(0,l.tZ)("div",{className:N.Z.searchModalTitle,children:"Search Posts"}),(0,l.tZ)("input",{type:"text",placeholder:"Search posts...",value:Y,onChange:e=>{Q(e.target.value),J(0)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),J(e=>Math.min(e+1,K.length-1))):"ArrowUp"===e.key?(e.preventDefault(),J(e=>Math.max(e-1,0))):"Enter"===e.key&&K.length>0&&K[z]&&(e.preventDefault(),U(K[z]))},className:N.Z.searchModalInput,autoFocus:!0}),(0,l.BX)("div",{className:N.Z.searchModalResults,children:[G&&(0,l.tZ)("div",{className:N.Z.loading,children:(0,l.tZ)(b.xv,{color:"secondary",children:"Searching..."})}),!G&&K.map((e,t)=>(0,l.tZ)("div",{className:r()(N.Z.postWrapper,t===z&&N.Z.selected),onClick:()=>U(e),role:"option","aria-selected":t===z,children:(0,l.tZ)("a",{href:"#",className:N.Z.postCard,onClick:e=>e.preventDefault(),children:(0,l.BX)(f.hs,{gap:12,children:[(0,l.tZ)("div",{className:N.Z.imageWrapper,children:e.cover_image?(0,l.tZ)(p.e,{className:N.Z.postImage,imageIsFixedWidth:!0,maxWidth:300,src:e.cover_image,useRetinaSizing:!0}):(0,l.tZ)("div",{className:N.Z.imagePlaceholder})}),(0,l.BX)(f.hs,{direction:"column",justifyContent:"center",gap:8,className:N.Z.postContent,children:[(0,l.tZ)(g.Z,{preset:"lg-preview-byline",className:N.Z.postTitle,children:e.title}),e.author_names&&e.author_names.length>0&&(0,l.tZ)(g.Z,{preset:"detail-small",color:"accent",className:N.Z.postAuthor,children:e.author_names.join(", ")})]})]})})},e.id)),!G&&Y&&0===K.length&&(0,l.tZ)("div",{className:N.Z.noResults,children:(0,l.tZ)(b.xv,{color:"secondary",children:"No posts found"})})]})]})})})}),(0,l.tZ)(y.u_,{isOpen:W,onClose:()=>{A(!1),O("")},className:N.Z.modalContainer,children:(0,l.tZ)("div",{className:"the-free-press-theme",children:(0,l.tZ)(m.h,{children:(0,l.BX)("div",{className:N.Z.searchModal,children:[(0,l.tZ)("div",{className:N.Z.searchModalTitle,children:"Select Tag"}),(0,l.tZ)("input",{type:"text",placeholder:"Search tags...",value:D,onChange:e=>O(e.target.value),className:N.Z.searchModalInput,autoFocus:!0}),(0,l.BX)("div",{className:N.Z.searchModalResults,style:{maxHeight:"400px",overflowY:"auto"},children:[0===ei.length?(0,l.tZ)("div",{className:N.Z.loading,children:(0,l.tZ)(b.xv,{color:"secondary",children:"No tags available"})}):ei.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.slug.toLowerCase().includes(D.toLowerCase())).map(e=>(0,l.tZ)("div",{className:N.Z.postWrapper,onClick:()=>en(e.id,e.name),role:"option",style:{cursor:"pointer",padding:"12px"},children:(0,l.tZ)(b.xv,{children:e.name})},e.id)),0===ei.filter(e=>e.name.toLowerCase().includes(D.toLowerCase())||e.slug.toLowerCase().includes(D.toLowerCase())).length&&D&&(0,l.tZ)("div",{className:N.Z.noResults,children:(0,l.tZ)(b.xv,{color:"secondary",children:"No matching tags found"})})]})]})})})})]})},x=e=>{let{title:t,posts:i,showCount:a,pub:n,postIds:r}=e;if(!i||0===i.length)return r&&r.length>0?(0,l.tZ)("div",{className:N.Z.fpRecircBlockEmail,"data-component-name":"FpRecircBlockEmail",children:(0,l.BX)(Z.i$,{gap:24,style:{width:"100%"},children:[(0,l.tZ)("h3",{className:N.Z.sectionTitleEmail,children:t}),(0,l.BX)(b.xv,{size:14,color:"secondary",children:["FP Recirc block with ",r.length," posts"]})]})}):(0,l.tZ)("div",{className:N.Z.fpRecircBlockEmail,"data-component-name":"FpRecircBlockEmail",children:(0,l.BX)(Z.i$,{gap:24,style:{width:"100%"},children:[(0,l.tZ)("h3",{className:N.Z.sectionTitleEmail,children:t}),(0,l.tZ)(b.xv,{size:14,color:"secondary",children:"No stories available"})]})});let o=i.slice(0,a);return(0,l.tZ)("div",{className:N.Z.fpRecircBlockEmail,"data-component-name":"FpRecircBlockEmail",children:(0,l.BX)(Z.i$,{gap:24,style:{width:"100%"},children:[(0,l.tZ)("h3",{className:N.Z.sectionTitleEmail,children:t}),(0,l.tZ)(Z.i$,{gap:16,children:o.map(e=>(0,l.tZ)("a",{href:e.canonical_url,className:N.Z.emailLink,children:(0,l.BX)(Z.zK,{gap:12,verticalAlign:"middle",children:[(0,l.tZ)("div",{className:N.Z.imageWrapperEmail,children:e.cover_image?(0,l.tZ)("img",{src:e.cover_image,alt:e.title,className:N.Z.postImageEmail}):(0,l.tZ)("div",{className:N.Z.imagePlaceholderEmail})}),(0,l.BX)("div",{children:[(0,l.tZ)("div",{className:N.Z.postTitleEmail,children:e.title}),e.author_names&&e.author_names.length>0&&(0,l.tZ)("div",{className:N.Z.postAuthorEmail,children:e.author_names.join(", ")})]})]})},e.id))})]})})}},78435:function(e,t,i){i.d(t,{kq:()=>T,n_:()=>H,v8:()=>P});var l=i(7409),a=i(99282),n=i(58865),r=i(16584),o=i(30396),s=i(94184),d=i.n(s),c=i(71787),h=i(77705),u=i(72183),m=i(77216),p=i(92898),g=i(38735),Z=i(52573),v=i(47906),f=i(54917),_=i(67434),y=i(60437),b=i(45823),w=i(95441),N=i(14952),C=i(60807),x=i(90099),I=i(98914),B=i(19081),k=i(58175),S=i(70379),E=i(98012),R=i(6070),X=i(60308);function F(){let e=(0,n._)(["Option ",""]);return F=function(){return e},e}let P=(e,t)=>{let{iTemplate:i}=I18N.i(t);return i(F(),e+1)},H=e=>{var t,i;let{id:n,isEditor:s,post:x,isVersionView:F}=e,{iString:H,language:T}=(0,w.M1)(),M=(0,N.Ij)(),V=(0,S.pm)(),L=(0,b.K)(),z=(0,R.HD)({pub:M}),J=(0,C.aF)()||{},[W,A]=(0,o.eJ)(!1),[D,O]=(0,o.eJ)(!1),[j,U]=(0,o.eJ)(!1),q=(0,o.I4)(()=>{A(!1)},[]),{error:Y,loading:K,poll:G,savePoll:Q,voteForOption:$}=(0,v.B)({isEditor:s,isVersionView:!!F,pollId:n,post:x,onFinishSaving:q}),ee=!!(null==G?void 0:G.is_published),et=G&&G.published_at&&(0,E.Z)(G.published_at).add(G.expiry,"hour"),ei=(0,E.Z)(),el=!!ee&&!!et&&et.isBefore(ei),ea=et?et.diff(ei,"hour"):0,en=s&&((null==G?void 0:G.post_type)!=="adhoc_email"||!ee),er=!!G&&G.options.some(e=>e.my_vote),eo=(null==G?void 0:G.audience)==="only_paid"?!!J.is_subscribed:!!(J.is_free_subscribed||L),es=!er&&ee&&!el&&eo&&(!s||(null==G?void 0:G.post_type)==="adhoc_email"),ed=s?null:"".concat((0,X.uRy)(M,x),"#poll-").concat(n),ec=en?Array(Math.max(2,(null==G?void 0:null===(t=G.options)||void 0===t?void 0:t.length)||0)).fill("").map((e,t)=>{var i,l,a;return G&&(null===(i=G.options)||void 0===i?void 0:i.length)>t?null!==(a=null===(l=G.options[t])||void 0===l?void 0:l.label)&&void 0!==a?a:"":P(t,T)}):null==G?void 0:null===(i=G.options)||void 0===i?void 0:i.map(e=>e.label),eh=(0,o.I4)(async e=>{if(!s&&!el&&ee){if(!eo){U(!0);return}await $(e)}},[eo,s,el,ee,$]);return null===Y||G?(0,r.BX)(B.tu,{className:d()("poll-wrapper poll-web",{"poll-wrapper--thefp":z}),"data-component-name":"Poll",gap:24,children:[ed&&(0,r.tZ)("div",{className:"poll-anchor-target",id:"poll-".concat(n),children:(0,r.tZ)("div",{className:"poll-anchor-copy-button",onClick:e=>{var t;(null===(t=location)||void 0===t?void 0:t.href)&&(e.preventDefault(),(0,I.vQ)(ed),V.popToast(e=>(0,r.tZ)(S.FN,(0,a._)((0,l._)({},e),{Icon:c.Z,text:H("Copied link to clipboard")}))))},children:(0,r.tZ)("a",{href:ed,children:(0,r.tZ)(c.Z,{size:20})})})}),en&&G&&(0,r.tZ)(u.Z,{isOpen:W,isPublished:ee,poll:G,shouldShowAudiencePicker:"adhoc_email"!==G.post_type,onClose:()=>{A(!1)},onSave:Q}),!s&&G&&M&&(0,r.tZ)(p.M,{audience:G.audience,isOpen:j,pollId:G.id,post:x,pub:M,user:J,onClose:()=>U(!1)}),K?(0,r.tZ)(B.tu,{alignItems:"center",gap:8,justifyContent:"center",paddingY:48,children:(0,r.tZ)(k.xv.Meta,{translated:!0,children:"Loading..."})}):(0,r.BX)(r.HY,{children:[en&&(0,r.tZ)("button",{className:"poll-edit",disabled:K,onClick:()=>{A(!0)},children:(0,r.tZ)(h.Z,{height:20})}),z?(0,r.tZ)(f.y,{poll:G}):(0,r.tZ)(m.Z,{poll:G}),null!==Y&&(0,r.tZ)("div",{className:"poll-error",children:Y}),(0,r.tZ)(B.tu,{className:d()("poll-options",{"no-margins":!ee}),gap:z?16:12,children:ec&&ec.map((e,t)=>{var i,l,a,n,o,s;return z?(0,r.tZ)(y.g,{currentVotes:(null==G?void 0:null===(i=G.options[t])||void 0===i?void 0:i.votes)||0,hasVoted:er,id:(null==G?void 0:null===(l=G.options[t])||void 0===l?void 0:l.id)||null,index:t,myVote:(null==G?void 0:null===(a=G.options[t])||void 0===a?void 0:a.my_vote)||!1,showVotes:er||el||!!(J.is_contributor||J.is_admin||J.is_author)&&D,text:e,totalVotes:(null==G?void 0:G.total_votes)||0,onVote:eh}):(0,r.tZ)(Z.w,{canVote:es,currentVotes:(null==G?void 0:null===(n=G.options[t])||void 0===n?void 0:n.votes)||0,id:(null==G?void 0:null===(o=G.options[t])||void 0===o?void 0:o.id)||null,myVote:(null==G?void 0:null===(s=G.options[t])||void 0===s?void 0:s.my_vote)||!1,showVotes:er||el||!!(J.is_contributor||J.is_admin||J.is_author)&&D,text:e,totalVotes:(null==G?void 0:G.total_votes)||0,onVote:eh})})}),ee&&G&&(z?(0,r.tZ)(_.r,{hasVoted:er,poll:G,user:J}):(0,r.tZ)(g.k,{hasVoted:er,isExpired:el,poll:G,remainingHours:ea,showResults:D,user:J,onToggleShowResults:()=>{O(!D)}}))]})]}):(0,r.tZ)("div",{className:"poll-wrapper poll-web",children:(0,r.tZ)("div",{className:"poll-error",children:Y})})},T=e=>{let{id:t,embeddedPolls:i,pub:l}=e,a=i.find(e=>e.id===t),{iString:n,language:o}=(0,w.M1)(),s=(0,R.HD)({pub:l});return a?(0,r.tZ)(x.YF,{className:d()("poll-email-wrapper",{"poll-email-wrapper--thefp":s}),"data-component-name":"StaticPoll",children:(0,r.tZ)("tr",{children:(0,r.tZ)("td",{children:(0,r.BX)(x.YF,{width:"100%",children:[!s&&(0,r.tZ)("tr",{children:(0,r.tZ)("td",{className:"poll-header",children:n((null==a?void 0:a.audience)==="only_paid"?"SUBSCRIBER-ONLY POLL":"POLL")})}),(0,r.tZ)("tr",{className:"poll-question",width:"100%",children:(0,r.tZ)("td",{children:a.question||n("New Poll")})}),a.description&&(0,r.tZ)("tr",{className:"poll-description",width:"100%",children:(0,r.tZ)("td",{children:a.description})}),(0,r.tZ)("tr",{children:(0,r.tZ)("td",{children:(0,r.tZ)(x.YF,{className:"poll-options",width:"100%",children:a.options.map((e,t)=>{let{label:i,id:l}=e;return(0,r.tZ)("tr",{children:(0,r.tZ)("td",{className:"poll-option",width:"100%",children:(0,r.tZ)("a",{className:"poll-vote-link",href:"%%poll_vote_option_".concat(l,"_url%%"),width:"100%",children:(0,r.tZ)("div",{className:"poll-vote-contents",children:i||P(t,o)})})})})})})})})]})})})}):(0,r.tZ)("table",{className:"poll-wrapper","data-component-name":"StaticPollError",children:n("Something went wrong.")})}},89810:function(e,t,i){i.d(t,{i:()=>B});var l=i(7409),a=i(99282),n=i(16584),r=i(30396),o=i(39693),s=i.n(o),d=i(24350),c=i.n(d),h=i(80569),u=i.n(h),m=i(21061),p=i(73207),g=i(98130),Z=i(94778),v=i(95441),f=i(14952),_=i(60807),y=i(7882),b=i(98914),w=i(70379),N=i(24791),C=i(6070),x=i(67914),I=i(60308);let B=()=>{let e=(0,_.aF)(),t=(0,f.Ij)(),i=(0,w.pm)(),{iString:o}=(0,v.M1)(),[d,h]=(0,r.eJ)((null==e?void 0:e.name)||""),[B,k]=(0,r.eJ)((null==e?void 0:e.email)||""),[S,E]=(0,r.eJ)(!1),[R,X]=(0,r.eJ)(!1),[F,P]=(0,r.eJ)(null),[H,T]=(0,r.eJ)(null),[M,V]=(0,r.eJ)(!1),[L,z]=(0,r.eJ)(!1),[J]=(0,r.eJ)(0),[W,A]=(0,r.eJ)(new Set),{ids:D}=(0,p.I)({pub:t}),{ids:O}=(0,p.I)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:j}=(0,Z.c)({pub:null!=t?t:void 0}),{ids:U}=(0,g.L)({pub:null!=t?t:void 0}),{ids:q}=(0,m.l)({pub:null!=t?t:void 0}),{result:Y,isLoading:K,refetch:G}=(0,y.ib)({pathname:"/api/v1/subscription",auto:!0}),{refetch:Q,isLoading:$}=(0,y.ib)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{refetch:ee}=(0,y.ib)({pathname:"/api/v1/subscription/email",auto:!1,method:"POST"});(0,r.d4)(()=>{!K&&(null==Y?void 0:Y.email_settings)&&A(new Set(Object.keys(Y.email_settings).filter(e=>{var t;return"individual"===(null===(t=Y.email_settings)||void 0===t?void 0:t[e])}).map(e=>Number(e))))},[K,Y]);let et=(0,r.I4)(async e=>{if(e&&e!==d){E(!0),P(null);try{await u().put("/api/v1/user/profile").send({name:e}),h(e)}catch(e){P((0,b.zx)(e)),console.error("Name update failed:",e)}finally{E(!1)}}},[d]),ei=(0,r.I4)(async()=>{if(!(null==e?void 0:e.email))return{success:!1};V(!0);try{return await u().post("/api/v1/forgot").send({email:e.email,for_pub:null==t?void 0:t.subdomain,redirect:window.location.pathname}),i.popToast(e=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},e),{text:"Password reset email sent. Please check your inbox."}))),{success:!0}}catch(e){return console.error("Password reset failed:",e),i.popToast(t=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},t),{text:(0,b.zx)(e)}))),{success:!1}}finally{V(!1)}},[null==e?void 0:e.email,i]),el=(0,r.I4)(async(e,i)=>{if(e&&e!==B){if(e!==i){T("Email addresses do not match");return}X(!0),T(null);try{await u().put("/api/v1/user/email").send({email:e,email_doublecheck:i}),k(e),(0,b.uX)((0,I.ZPN)({redirect:"/subscribe?isSignInAttempt=true",for_pub:null==t?void 0:t.subdomain}))}catch(e){var l;(null===(l=e.response)||void 0===l?void 0:l.status)===403?T("This email is already associated with another account"):T((0,b.zx)(e)),console.error("Email update failed:",e)}finally{X(!1)}}},[B]),ea=(0,r.Ye)(()=>t?(0,N.tk)({pub:t,includeMainPub:!(0,C.HD)({pub:t}),excludePodcasts:(0,C.HD)({pub:t})}):[],[t]),en=(0,r.Ye)(()=>ea.filter(e=>{var t,i,l;return!j.includes(null!==(t=e.sectionId)&&void 0!==t?t:-1)&&!U.includes(null!==(i=e.sectionId)&&void 0!==i?i:-1)&&!q.includes(null!==(l=e.sectionId)&&void 0!==l?l:-1)}),[ea,j,U,q]),er=(0,r.I4)(async(e,i)=>{if(!e||!t)return;let l=new Set(W);i?l.add(e):l.delete(e);try{await Q({json:en.reduce((t,l)=>(l.sectionId===e&&(t[l.sectionId]={setting:i?"individual":"disabled"}),t),{})}),i&&(null==Y?void 0:Y.email_disabled)&&(await ee({json:{publication_id:t.id,email_disabled:!1,receive_podcast_emails:!0,source:"account_settings"}}),await G()),A(l)}catch(e){console.error("Failed to update newsletter subscription:",e)}},[t,W,en,Q,ee,Y,G]),eo=(0,r.I4)(async(e,i)=>{if(!t)return;let l=[];"fromTheFreePress"===e?l=O:"featured"===e?l=D.filter(e=>!O.includes(e)):"topic"===e&&(l=en.filter(e=>!O.includes(e.sectionId||0)&&!D.includes(e.sectionId||0)).map(e=>e.sectionId||0));let a=new Set(W);l.forEach(e=>{i?a.add(e):a.delete(e)});try{let e=l.reduce((e,t)=>(e[t]={setting:i?"individual":"disabled"},e),{});await Q({json:e}),i&&(null==Y?void 0:Y.email_disabled)&&(await ee({json:{publication_id:t.id,email_disabled:!1,receive_podcast_emails:!0,source:"account_settings"}}),await G()),A(a)}catch(e){console.error("Failed to update newsletter group:",e)}},[t,O,D,W,Q,ee,Y,G]),es=(0,r.I4)(async()=>{if(t&&e)try{let e=en.filter(e=>e.sectionId).map(e=>e.sectionId);if(e.length>0){let t=e.reduce((e,t)=>(e[t]={setting:"disabled"},e),{});await Q({json:t})}await ee({json:{publication_id:t.id,email_disabled:!0,receive_podcast_emails:!1,source:"account_settings"}}),await G(),A(new Set),i.popToast(e=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},e),{text:"Successfully unsubscribed from all emails."})))}catch(e){console.error("Failed to unsubscribe from all emails:",e),i.popToast(t=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},t),{text:(0,b.zx)(e)})))}},[t,e,en,Q,ee,G,i]),ed=(0,r.I4)(async()=>{if(confirm(o("Are you sure? Time paid will not be refunded")))try{await u().del("/api/v1/subscription").send({force_now:!0}),i.popToast(e=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},e),{text:"Subscription cancelled successfully."}))),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Failed to delete subscription:",e),i.popToast(t=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},t),{text:(0,b.zx)(e)})))}},[o,i]),ec=(0,r.I4)(async()=>{z(!0);try{await u().post("/api/v1/subscription/reactivate").send({}),i.popToast(e=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},e),{text:"Your subscription is set to renew."}))),await G()}catch(e){console.error("Failed to set to renew:",e),i.popToast(t=>(0,n.tZ)(w.FN,(0,a._)((0,l._)({},t),{text:(0,b.zx)(e)})))}finally{z(!1)}},[i,G]),eh=c()(en,"sectionId"),eu=t&&O?{name:"From The Free Press",newsletters:s()(O.map(e=>eh[e])).map(e=>(0,a._)((0,l._)({},e),{selected:W.has(e.sectionId||0),onToggle:t=>er(e.sectionId||0,t)}))}:{name:"From The Free Press",newsletters:[]},em=t&&O?{name:"All",newsletters:s()(en.filter(e=>e.sectionId).map(e=>(0,a._)((0,l._)({},e),{selected:W.has(e.sectionId||0),onToggle:t=>er(e.sectionId||0,t)})))}:{name:"All",newsletters:[]},ep=t&&D?{name:"Featured",newsletters:s()(D.filter(e=>!O.includes(e)).map(e=>eh[e])).map(e=>(0,a._)((0,l._)({},e),{selected:W.has(e.sectionId||0),onToggle:t=>er(e.sectionId||0,t)}))}:{name:"Featured",newsletters:[]},eg=t&&en?{name:"Topic Alerts",newsletters:s()(en.filter(e=>!!e.sectionId&&!O.includes(e.sectionId)&&!D.includes(e.sectionId)).map(e=>(0,a._)((0,l._)({},e),{selected:W.has(e.sectionId||0),onToggle:t=>er(e.sectionId||0,t)})))}:{name:"Topic Alerts",newsletters:[]},eZ=(null==Y?void 0:Y.status)==="trialing",ev=null;return eZ&&(Y.current_period_end?ev=new Date(1e3*Y.current_period_end):Y.expiry&&(ev=new Date(Y.expiry))),{name:d,email:B,updateName:et,updateEmail:el,isUpdatingName:S,isUpdatingEmail:R,nameError:F,emailError:H,isSendingReset:M,handlePasswordChange:ei,newsletters:{isLoading:K||$,fromTheFreePress:eu,all:em,featured:ep,topic:eg,updateNewsletter:er,updateNewsletterGroup:eo,unsubscribeFromAllEmails:es,pubEmailsDisabled:!!(null==Y?void 0:Y.email_disabled)},plan:null==Y?void 0:Y.plan,totalAmount:null==Y?void 0:Y.totalAmount,currency:null==Y?void 0:Y.currency,isLifetime:(null==Y?void 0:Y.type)==="lifetime"||(null==Y?void 0:Y.never_ends)||!1,isComped:(null==Y?void 0:Y.is_comped)||!1,isTrial:eZ,giftCount:J,trialEnd:ev,canChangeSubscription:!!Y&&(0,x.Nf)(Y),subscription:null!=Y?Y:void 0,renewing:L,onSetToRenew:ec,onUnsubscribeNow:ed}}},88216:function(e,t,i){i.d(t,{Z:()=>d});var l=i(7409),a=i(99282),n=i(98848),r=i(16584),o=i(64515),s=i(24476);let d=e=>{var{isHovered:t}=e,i=(0,n._)(e,["isHovered"]);let d=t?s.t.brightOrange.hex:s.t.lightGray.hex,c=s.t.offWhite.hex;return(0,r.BX)(o.l,(0,a._)((0,l._)({},i),{name:"FPPdfIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"none"},children:[(0,r.tZ)("path",{d:"M4 2V0H18V1H19V2H20V3H21V4H22V22H20V24H4V22H2V2H4Z",fill:d}),(0,r.tZ)("rect",{x:"5",y:"8",width:"0.999999",height:"14",transform:"rotate(-90 5 8)",fill:c}),(0,r.tZ)("rect",{x:"5",y:"11",width:"0.999999",height:"14",transform:"rotate(-90 5 11)",fill:c}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 13V18.3845H6.0769V16.2307H8.2307V15.1538H9.3076V14.0769H8.2307V13H5ZM6.0769 14.0769H8.2307V15.1538H6.0769V14.0769Z",fill:c}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3843 13V18.3845H13.615V17.3076H14.6919V14.0769H13.615V13H10.3843ZM11.4612 14.0769H13.615V17.3076H11.4612V14.0769Z",fill:c}),(0,r.tZ)("path",{d:"M15.7693 13H19V14.0769H16.8462V15.1538H19V16.2307H16.8462V18.3845H15.7693V13Z",fill:c}),(0,r.tZ)("path",{d:"M17 0H18V1H19V2H20V3H21V4H22V5H17V0Z",fill:c}),(0,r.tZ)("rect",{x:"21",y:"4",width:"1",height:"1",fill:d}),(0,r.tZ)("rect",{x:"20",y:"3",width:"1",height:"1",fill:d}),(0,r.tZ)("rect",{x:"19",y:"2",width:"1",height:"1",fill:d}),(0,r.tZ)("rect",{x:"18",y:"1",width:"1",height:"1",fill:d}),(0,r.tZ)("rect",{x:"17",width:"1",height:"1",fill:d})]}))}},41193:function(e,t,i){i.d(t,{Z:()=>d});var l=i(92002),a=i(73580),n=i(7409),r=i(99282),o=i(16584),s=i(64515);let d=e=>{var t=(0,l._)({},(0,a._)(e));return(0,o.tZ)(s.l,(0,r._)((0,n._)({},t),{name:"FPPlayIcon",svgParams:{width:25,height:25,viewBox:"0 0 25 24",fill:"none",stroke:"none"},children:(0,o.BX)("g",{id:"play-circle",children:[(0,o.tZ)("path",{id:"Icon",d:"M12.5 22C18.0228 22 22.5 17.5228 22.5 12C22.5 6.47715 18.0228 2 12.5 2C6.97715 2 2.5 6.47715 2.5 12C2.5 17.5228 6.97715 22 12.5 22Z",stroke:"#F2312C",strokeWidth:"2",strokeLinecap:"round"}),(0,o.tZ)("path",{id:"Icon_2",d:"M10 8.96533C10 8.58446 10 7.5 10 7.5C10 7.5 10.8311 8.03429 11.2326 8.29239L15.9532 11.3271C16.2555 11.5214 17 12 17 12C17 12 16.3016 12.449 15.9532 12.6729L11.2326 15.7076C10.8311 15.9657 10 16.5 10 16.5C10 16.5 10 15.4155 10 15.0347V8.96533Z",fill:"#F2312C",stroke:"#F2312C",strokeWidth:"2",strokeLinecap:"round"})]})}))}},91355:function(e,t,i){i.d(t,{Z:()=>s});var l=i(7409),a=i(99282),n=i(16584),r=i(25256),o=i(64515);let s=e=>(0,n.tZ)(o.l,(0,a._)((0,l._)({},e),{name:"LucideShare2",svgParams:{height:24,width:24},children:(0,n.tZ)(r.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},94499:function(e,t,i){i.d(t,{Z:()=>o});var l=i(7409),a=i(99282),n=i(98848),r=i(16584);let o=e=>{var{children:t,href:i,onClick:o,newTab:s}=e,d=(0,n._)(e,["children","href","onClick","newTab"]);return(0,r.tZ)("a",(0,a._)((0,l._)({role:"button",tabIndex:0,href:null!=i?i:"javascript:void(0)"},s&&{target:"_blank",rel:"noopener noreferrer"},o&&{onClick:e=>{e.stopPropagation(),o(e)}},d),{children:t}))}},84881:function(e,t,i){i.d(t,{S:()=>_,y:()=>f});var l=i(16584),a=i(30396),n=i(80569),r=i.n(n),o=i(20145),s=i(95441),d=i(90099),c=i(19081),h=i(10510),u=i(58175),m=i(40894),p=i(18967),g=i(60308),Z=i(47929),v=i(34009);let f=e=>{let{tierNumber:t,rewardDescription:i,numReferralsRequired:n,pub:d}=e,[m,Z]=(0,a.eJ)([]),v=async()=>{let{body:e}=await r().get("/api/v1/reader_referrals/tiers");Z(e.tiers)},{iString:f}=(0,s.M1)();if((0,a.d4)(()=>{v()},[]),!t||!d.id)return(0,l.tZ)("div",{"data-component-name":"ReferralsTierCardError"});let _=m[t-1],y=_?"custom"===_.reward_type?_.reward_description:f(p.ML[_.reward_type]):i,b=_?_.num_referrals_required:n;return b?(0,l.BX)(c.tu,{"data-component-name":"ReferralsTierCard",className:"milestone-tier-card",justifyContent:"start",border:"detail-themed",radius:"md",padding:20,gap:16,children:[(0,l.tZ)("div",{className:"tier-stars-container",children:Array(t).fill(0).map((e,t)=>(0,l.tZ)(o.Z,{width:20,height:20,strokeWidth:2,stroke:d.theme_var_background_pop||"#FF6719",fill:d.theme_var_background_pop||"#FF6719"},t))}),(0,l.BX)(c.tu,{gap:4,children:[(0,l.tZ)(u.xv.H4,{children:y}),(0,l.BX)(u.xv.Meta,{translated:!0,children:["Tier ",I18N.p(t)," reward - ",I18N.p(b)," Referrals"]})]}),(0,l.BX)(c.gq,{alignItems:"center",children:[(0,l.tZ)(h.wk,{pub:d,size:24}),(0,l.tZ)(u.xv.Meta,{color:"primary",as:"a",href:(0,g.SVA)(d),decoration:"none",weight:"bold",children:d.name})]})]}):(0,l.tZ)("div",{"data-component-name":"ReferralsTierCardError"})},_=e=>{let{tierNumber:t,pub:i}=e;return t&&i.id?(0,l.tZ)("a",{href:"".concat(m.W.LEADERBOARD_URL,"&utm_source=").concat(Z.b3.rewardEmail),className:v.Z.referralsTierCard,children:(0,l.BX)(d.i$,{gap:16,children:[(0,l.tZ)(d.zK,{style:{lineHeight:0},gap:4,children:Array(t).fill(0).map((e,t)=>(0,l.tZ)(o.Z,{width:20,height:20,strokeWidth:2,stroke:i.theme_var_background_pop||"#FF6719",fill:i.theme_var_background_pop||"#FF6719",isStatic:!0},t))}),(0,l.BX)(d.i$,{gap:4,children:[(0,l.tZ)(u.xv.H4,{children:m.W.REWARD_DESCRIPTION}),(0,l.BX)(u.xv.Meta,{translated:!0,children:["Tier ",I18N.p(t)," reward - ",I18N.p(m.W.NUM_REFERRALS_REQUIRED)," Referrals"]})]}),(0,l.BX)(d.zK,{verticalAlign:"middle",children:[(0,l.tZ)(h.CN,{pub:i,size:24}),(0,l.tZ)(u.xv.Meta,{color:"primary",as:"a",href:(0,g.SVA)(i),decoration:"none",weight:"bold",children:i.name})]})]})}):(0,l.tZ)("div",{})}},13693:function(e,t,i){i.d(t,{Og:()=>v,VR:()=>Z});var l=i(16584),a=i(94184),n=i.n(a),r=i(60807),o=i(90099),s=i(58175),d=i(40894),c=i(6070),h=i(71106),u=i(60308),m=i(63651),p=i(37175),g=i(24718);let Z=e=>{var t;let{campaign:i,pub:a,isEditor:r,dataAttrs:o,post:s}=e;return(0,l.tZ)("div",{className:n()("sponsorship-campaign-embed",{"sponsorship-campaign-embed-structured":"structured"===i.campaign_type,[null!==(t=g.Z.editorBorder)&&void 0!==t?t:""]:r}),dataAttrs:o,children:"structured"===i.campaign_type?(0,l.tZ)(f,{campaign:i,pub:a,isEditor:r,post:s}):(0,l.tZ)(b,{campaign:i,pub:a,isEditor:r,post:s})})},v=e=>{let{campaign:t,pub:i,post:a}=e;return(0,l.tZ)("table",{className:"sponsorship-campaign-embed",width:"100%",children:(0,l.tZ)("tbody",{children:(0,l.tZ)("tr",{children:(0,l.tZ)("td",{children:"structured"===t.campaign_type?(0,l.tZ)(_,{campaign:t,pub:i,post:a}):(0,l.tZ)(w,{campaign:t,pub:i,post:a})})})})})},f=e=>{var t,i;let{campaign:a,pub:n,isEditor:o,post:d}=e,c=(0,r.aF)(),h=(0,l.BX)("a",{className:"sponsorshipCampaignContainer",href:o?"#":(0,u.l5Q)({campaignId:a.id,medium:"web",pubId:null!==(t=null==n?void 0:n.id)&&void 0!==t?t:0,userId:null==c?void 0:c.id,postId:null==d?void 0:d.id}),children:[a.short_text&&(0,l.tZ)("span",{className:"sponsorshipCampaignPresentedBy",children:a.short_text}),a.image_url&&(0,l.tZ)("div",{className:"sponsorshipCampaignImageContainer",children:(0,l.tZ)("img",{alt:null!==(i=a.image_alt_text)&&void 0!==i?i:"",className:"sponsorshipCampaignImage",src:(0,m.zF4)(a.image_url,300)})})]});return o?(0,l.BX)("div",{className:g.Z.editorWrapper,children:[(0,l.BX)(s.xv.Digit,{color:"secondary",className:g.Z.editorHelperText,children:["paid"===a.exclude_audience_minimum?"Sponsorship Campaign (Free Only)":"Sponsorship Campaign",n&&(0,l.BX)(l.HY,{children:[" - ",(0,l.tZ)("a",{href:(0,u.p$H)({campaignId:a.id,pub:n}),children:"Edit"})]})]}),h]}):h},_=e=>{var t;let{campaign:i,pub:a,post:n}=e;return(0,l.tZ)("a",{className:"sponsorshipCampaignEmailLink",href:(0,u.l5Q)({campaignId:i.id,medium:"email",pubId:null!==(t=null==a?void 0:a.id)&&void 0!==t?t:0,userId:d.W.USER_ID,postId:null==n?void 0:n.id}),children:(0,l.tZ)(o.YF,{className:"sponsorshipCampaignEmailWrapper","data-component-name":"StaticSponsorshipCampaignBlock",children:(0,l.tZ)("tr",{children:(0,l.BX)("td",{className:"sponsorshipCampaignEmailTableCell",children:[i.short_text&&(0,l.tZ)("span",{className:"sponsorshipCampaignPresentedByEmailWithSpacing",children:i.short_text}),i.image_url&&(0,l.tZ)("img",{className:"sponsorshipCampaignEmailImage",src:(0,m.zF4)(i.image_url,300),width:"200"})]})})})})},y=e=>{let{html:t,campaign:i,pub:l,userId:a,medium:n,postId:r}=e;return t.replace(/href="([^"]*)"/g,(e,t)=>{var o;let s=(0,u.l5Q)({campaignId:i.id,medium:n,pubId:null!==(o=null==l?void 0:l.id)&&void 0!==o?o:0,userId:a,url:t,postId:r});return'href="'.concat(s,'"')})},b=e=>{let{campaign:t,pub:i,isEditor:a,post:n}=e,o=(0,r.aF)();if(!i)return null;let d=p.toHtml(t.doc_content,!1,{pubId:i.id}),c=a?d:y({html:(0,h.A)(d,{pub:i,user:o}),campaign:t,pub:i,userId:String(null==o?void 0:o.id),medium:"web",postId:null==n?void 0:n.id}),m=(0,l.tZ)("div",{className:"sponsorshipCampaignDocContentWrapper",dangerouslySetInnerHTML:{__html:c}});return a?(0,l.BX)("div",{className:g.Z.editorWrapper,children:[(0,l.BX)(s.xv.Digit,{color:"secondary",className:g.Z.editorHelperText,children:["paid"===t.exclude_audience_minimum?"Sponsorship Campaign (Free Only)":"Sponsorship Campaign",i&&(0,l.BX)(l.HY,{children:[" - ",(0,l.tZ)("a",{href:(0,u.p$H)({campaignId:t.id,pub:i}),children:"Edit"})]})]}),m]}):m},w=e=>{let{campaign:t,pub:i,post:a}=e;if(!i)return null;let n=y({html:p.toHtml(t.doc_content,!0,{pubId:i.id}),campaign:t,pub:i,userId:d.W.USER_ID,medium:"email",postId:null==a?void 0:a.id}),r=(0,c.G9)({pub:i})?(0,l.tZ)(o.RC,{src:"/img/daily_takes_email/sponsorship-header.png",style:{display:"block",height:"auto",width:"192px",maxWidth:"192px"}}):null;return(0,l.BX)(l.HY,{children:[r,(0,l.tZ)("div",{className:"sponsorshipCampaignDocContentWrapperEmail",dangerouslySetInnerHTML:{__html:n}})]})}},21061:function(e,t,i){i.d(t,{l:()=>o});var l=i(30396),a=i(24350),n=i.n(a),r=i(81977);let o=e=>{let{pub:t}=e,i=n()(null==t?void 0:t.sections,"id"),{setting:a,save:o}=(0,r.m)({key:"archived_section_ids",fallback:[]}),[s,d]=(0,l.eJ)(a),[c,h]=(0,l.eJ)(!1),u=async()=>{h(!0),await o({setting:s})};return{isSaving:c,ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>i[e]))},onSave:u}}},73207:function(e,t,i){i.d(t,{I:()=>d});var l=i(30396),a=i(24350),n=i.n(a),r=i(78718),o=i.n(r),s=i(81977);let d=e=>{let{pub:t,pubSetting:i="column_section_ids"}=e,a=n()(null==t?void 0:t.sections,"id"),{setting:r,save:d}=(0,s.m)({key:i,fallback:{metadata:{},order:[]}}),[c,h]=(0,l.eJ)(r.order),[u,m]=(0,l.eJ)(r.metadata),[p,g]=(0,l.eJ)(!1),Z=async()=>{g(!0),await d({setting:{order:c,metadata:o()(u,c)}})};return{isSaving:p,metadata:u,ids:c,onChangeMetadata:e=>{let{metadata:t}=e;m(t)},onChangeOrder:e=>{let{ids:t}=e;h(t.filter(e=>a[e]))},onSave:Z}}},98130:function(e,t,i){i.d(t,{L:()=>d});var l=i(30396),a=i(39693),n=i.n(a),r=i(24350),o=i.n(r),s=i(81977);let d=e=>{let{pub:t}=e,i=o()(null==t?void 0:t.sections,"id"),{setting:a,save:r}=(0,s.m)({key:"event_section_ids",fallback:[]}),[d,c]=(0,l.eJ)(a),[h,u]=(0,l.eJ)(!1),m=async()=>{u(!0),await r({setting:d})};return{initialSections:n()(a.map(e=>i[e])),isSaving:h,ids:d,sections:n()(d.map(e=>i[e])),onChange:e=>{let{ids:t}=e;c(t.filter(e=>i[e]))},onSave:m}}},81977:function(e,t,i){i.d(t,{m:()=>a});var l=i(56629);let a=e=>{let t,{key:i,fallback:a}=e,{getSettingFor:n,changeSetting:r}=(0,l.So)(),o=n(i);try{t=o?JSON.parse(o):a}catch(e){t=a}return{setting:t,save:async e=>{let{setting:t}=e;await r({[i]:JSON.stringify(t)})}}}},94778:function(e,t,i){i.d(t,{c:()=>u});var l=i(30396),a=i(39693),n=i.n(a),r=i(24350),o=i.n(r),s=i(78718),d=i.n(s),c=i(81977);let h=["mediumYellow","darkGreen","mediumRed","darkOrange","mediumPurple","mediumBlue"],u=e=>{let{pub:t}=e,i=o()(null==t?void 0:t.sections,"id"),{setting:a,save:r}=(0,c.m)({key:"video_section_ids",fallback:{metadata:{},order:[]}});for(let e=0;e<a.order.length;e++){var s,u,m;let t=a.order[e];t&&((null===(s=a.metadata[t])||void 0===s?void 0:s.carouselColor)||(a.metadata[t]={youtubeUrl:null!==(m=null===(u=a.metadata[t])||void 0===u?void 0:u.youtubeUrl)&&void 0!==m?m:"",carouselColor:h[e%h.length]}))}let[p,g]=(0,l.eJ)(a.order),[Z,v]=(0,l.eJ)(a.metadata),[f,_]=(0,l.eJ)(!1),y=async()=>{_(!0),await r({setting:{order:p,metadata:d()(Z,p)}}),window.location.reload()};return{initialSections:n()(a.order.map(e=>i[e])),isSaving:f,metadata:Z,ids:p,sections:n()(p.map(e=>i[e])),onChangeMetadata:e=>{let{metadata:t}=e;v(t)},onChangeOrder:e=>{let{ids:t}=e;g(t.filter(e=>i[e]))},onSave:y}}},90099:function(e,t,i){i.d(t,{Bj:()=>Z,NS:()=>p.N,RC:()=>b,YF:()=>y,_i:()=>g,b9:()=>v,i$:()=>f,zK:()=>_});var l=i(7409),a=i(99282),n=i(98848),r=i(16584),o=i(6400),s=i(94184),d=i.n(s);i(39693),i(1548);var c=i(82621);i(22670),i(68687),i(97006),i(75081),i(10510);var h=i(66611);i(24791),i(6070);var u=i(60308);i(84864);var m=i(98143);i(24750);var p=i(24421);function g(e){let{children:t,href:i,testId:l,tableClassName:a,tdClassName:n,aClassName:o,download:s,target:c,style:h,aStyle:u,disableTracking:m}=e;return(0,r.tZ)(y,{className:a,style:h,children:(0,r.tZ)("tr",{children:(0,r.tZ)("td",{className:n,align:"center",children:i?(0,r.tZ)("a",{href:i,className:d()(o),style:u,"data-test-id":l,download:s,target:c,"disable-tracking":m?"true":void 0,children:t}):(0,r.tZ)("span",{className:o,"data-test-id":l,children:t})})})})}function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{children:"",noUnderline:!1};return(0,r.tZ)(g,(0,a._)((0,l._)({},e),{aClassName:"email-button-a",tdClassName:"email-button-td"}))}function v(e){var{fullWidth:t,priority:i="primary",size:o="md",aStyle:s,aClassName:c,tdClassName:h}=e,u=(0,n._)(e,["fullWidth","priority","size","aStyle","aClassName","tdClassName"]);return(0,r.tZ)(g,(0,a._)((0,l._)({},u),{tableClassName:t?m.Z.fullWidth:void 0,aClassName:d()(t&&m.Z.fullWidth,m.Z.emailButtonA,c,m.Z["size_".concat(o)]),tdClassName:d()(t&&m.Z.fullWidth,m.Z.emailButtonTd,h,m.Z["priority_".concat(i)]),aStyle:s}))}function f(e){let{children:t,gap:i=0,style:l,className:a}=e,n=(0,o.toChildArray)(t).flatMap(e=>"object"==typeof e&&e.type===o.Fragment?(0,o.toChildArray)(e.props.children):e),s=[];for(let e of n.slice(0,-1))s.push((0,r.tZ)("tr",{children:(0,r.tZ)("td",{children:e})})),i>0&&s.push((0,r.tZ)("tr",{height:i,children:(0,r.tZ)("td",{})}));let d=n[n.length-1];return d&&s.push((0,r.tZ)("tr",{children:(0,r.tZ)("td",{children:d})})),(0,r.tZ)(y,{style:l,className:a,children:s})}function _(e){let{cellWidth:t,children:i,gap:a=0,style:n,verticalAlign:s="middle",growLastChild:d,className:c}=e,h=(0,o.toChildArray)(i),u=[];for(let e of h.slice(0,-1))u.push((0,r.tZ)("td",{style:(0,l._)({verticalAlign:s},t?{width:t}:null),children:e})),a>0&&u.push((0,r.tZ)("td",{width:a,style:"min-width: ".concat(a,"px")}));let m=h[h.length-1];if(m){let e=(0,l._)({verticalAlign:s},t?{width:t}:null);d&&(e.width="100%"),u.push((0,r.tZ)("td",{style:e,children:m}))}return(0,r.tZ)(y,{style:n,className:c,children:(0,r.tZ)("tr",{children:u})})}function y(e){var{children:t}=e,i=(0,n._)(e,["children"]);return(0,r.tZ)("table",(0,a._)((0,l._)({role:"presentation",width:"auto",border:"0",cellspacing:"0",cellpadding:"0"},i),{children:t}))}function b(e){var{src:t}=e,i=(0,n._)(e,["src"]);return(0,r.tZ)(c.Z,(0,l._)({src:(0,u.ZJn)()+t},i))}(0,h.L)("email-text-button","a"),(0,h.L)("email-text-b4 email-text-secondary","div")},52384:function(e,t,i){i.d(t,{Q:()=>s});var l=i(7409),a=i(98848),n=i(80569),r=i.n(n),o=i(7882);function s(e){var{auto:t,initialResult:i,deps:n}=e,s=(0,a._)(e,["auto","initialResult","deps"]);return(0,o.Wf)(async e=>{var{signal:t}=e,i=(0,a._)(e,["signal"]);let{pathname:n="",query:o,body:d,method:c="get"}=(0,l._)({},s,i),h=r()(c.toUpperCase(),n);o&&h.query(o),d&&h.send(d),t.addEventListener("abort",()=>{h.abort()});let u=await h;if(t.aborted)return;let m=u.error;if(m)throw m;return u.body},n||[],{auto:t,initialResult:i})}},55706:function(e,t,i){i.d(t,{R:()=>m,W:()=>u});var l=i(16584),a=i(95441),n=i(90099),r=i(98914),o=i(94874),s=i(15771),d=i(19081),c=i(58175),h=i(54991);let u=e=>{let{avatarUrl:t,name:i,url:r}=e,{iString:o}=(0,a.M1)();return(0,l.BX)(n.i$,{gap:12,style:{padding:"16px",border:"1px solid #E0E0E0",borderRadius:"8px",margin:"0 auto 20px"},children:[(0,l.BX)(n.zK,{gap:12,children:[(0,l.tZ)(n.NS,{src:t,size:40}),(0,l.BX)(n.i$,{children:[(0,l.BX)(c.xv.H4,{translated:!0,size:14,paddingBottom:4,color:"pub-primary-text",children:["Book a meeting with ",I18N.p(i)]}),(0,l.tZ)(c.xv.B4,{translated:!0,color:"pub-secondary-text",children:"Schedule a meeting"})]})]}),(0,l.tZ)(n.Bj,{tableClassName:h.Z.emailButton,href:r,children:o("Book meeting")})]})},m=e=>{let{avatarUrl:t,name:i,url:n}=e,{iString:u}=(0,a.M1)();return(0,l.BX)(d.hs,{direction:{mobile:"column",desktop:"row"},radius:"md",padding:24,alignItems:"center",className:h.Z.container,justifyContent:"space-between","data-component-name":"MeetingEmbed",children:[(0,l.BX)(d.gq,{className:h.Z.header,gap:16,paddingBottom:{mobile:20,desktop:0},children:[(0,l.tZ)(o.qE,{photoUrl:t,size:40}),(0,l.BX)("div",{children:[(0,l.BX)(c.xv.H4,{translated:!0,paddingBottom:4,color:"pub-primary-text",children:["Book a meeting with ",I18N.p(i)]}),(0,l.tZ)(c.xv.B4,{translated:!0,color:"pub-secondary-text",children:"Schedule a meeting"})]})]}),(0,l.tZ)(s.zx,{className:h.Z.cta,priority:"primary",onClick:()=>{(0,r.uX)(n,{newTab:!0})},children:u("Book meeting")})]})}},15186:function(e,t,i){i.d(t,{Z:()=>p,j:()=>f});var l=i(7409),a=i(99282),n=i(16584),r=i(49550),o=i(98661),s=i(95441),d=i(15771),c=i(80026),h=i(17172),u=i(45783),m=i(20346);function p(e){let{tabs:t,value:i,onChange:d,ariaLabel:p}=e,{iString:f}=(0,s.M1)(),_=(0,o.useRef)(null),y=(0,o.useRef)(null),{props:b,hasOverflow:w}=(0,h.aZ)(_),{state:N}=(0,u.eK)(_),C=e=>{let t=y.current,i=_.current;if(!i||!t||e<0)return;let l=i.getElementsByClassName(m.Z.segment)[e];if(!l)return;let a=l.getBoundingClientRect(),n=i.getBoundingClientRect(),r=parseInt(window.getComputedStyle(i).paddingLeft),o=a.left-n.left-r+i.scrollLeft;requestAnimationFrame(()=>{t.style.setProperty("--highlight-width","".concat(a.width,"px")),t.style.setProperty("--highlight-x","".concat(o,"px"))})},x=t.findIndex(e=>e.value===i);return(0,o.useLayoutEffect)(()=>{C(x)},[t,i,x]),(0,o.useEffect)(()=>{C(x)},[t,i,x]),(0,n.BX)(Z,{children:[(0,n.tZ)(r.O.Group,{manual:!0,selectedIndex:-1===x?0:x,onChange:e=>{var i;let l=null===(i=t[e])||void 0===i?void 0:i.value;void 0!==l&&d(l)},children:(0,n.tZ)(r.O.List,(0,a._)((0,l._)({as:c.X2},b),{ref:_,className:m.Z.container,position:"relative",cursor:w()?"grab":"default",gap:4,padding:4,radius:"sm",overflow:"auto",scrollBar:"hidden",outline:"detail","aria-label":null!=p?p:"".concat(f("Tabs")),children:()=>(0,n.BX)(n.HY,{children:[t.map((e,t)=>(0,n.tZ)(g,{tab:e,index:t,children:e.label},e.value)),(0,n.tZ)(v,{ref:y})]})}))}),(0,n.tZ)(u.R3,{direction:"left",isVisible:N.showLeft}),(0,n.tZ)(u.R3,{direction:"right",isVisible:N.showRight})]})}function g(e){let{tab:t,index:i,children:l}=e;return(0,n.tZ)(r.O,{as:o.Fragment,children:e=>{let{selected:a}=e;return(0,n.tZ)(d.zx,{className:m.Z.segment,leading:t.leadingIcon,trailing:t.trailingIcon,priority:a?"tertiary":"quaternary",size:"sm",children:l},i)}})}let Z=(0,c.zo)({display:"flex",direction:"column",position:"relative",bg:"primary",radius:"sm",minWidth:0,overflow:"hidden"}),v=(0,c.zo)({position:"absolute",height:32,radius:"xs",bg:"secondary",sizing:"border-box",className:m.Z.highlight}),f=(0,c.zo)({display:"flex",alignItems:"center",justifyContent:"center",width:24,height:24})},57641:function(e,t,i){i.d(t,{O:()=>m});var l=i(7409),a=i(99282),n=i(16584),r=i(58319),o=i(68833),s=i(82402),d=i(19081),c=i(58175),h=i(37313),u=i(6911);let m=e=>{let{includeCheckbox:t=!0,onCheckboxChange:i=()=>{},checked:m=!1,addSubscribePreamble:p=!1,addSignupPreamble:g=!1,fontWeight:Z="regular",size:v="regular",color:f="primary",textAlign:_="left",style:y}=e;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(r.Z,{onVisible:()=>{(0,o.j)(h.F.TERMS_OF_SERVICE_SEEN,{withCheckbox:t,initialCheckboxValue:m})}}),(0,n.BX)(d.gq,{as:"label",alignItems:"center",justifyContent:"center",gap:12,style:y,className:"tosCheckbox-XbLWCT",children:[t&&(0,n.tZ)(s.X,{checked:m,onChange:e=>{(0,o.j)(h.F.TERMS_OF_SERVICE_CHECKBOX_CLICKED,{checkboxValue:e}),i(e)},size:"sm"}),(0,n.BX)(c.xv.B4,(0,a._)((0,l._)({color:f,textAlign:_,fontWeight:Z},"small"===v?{size:11,lineHeight:16}:{}),{children:[p?"By subscribing, ":g?"By creating an account, ":""," I agree to Substack's"," ",(0,n.tZ)(c.xv,{as:"a",href:(0,u._Q)(),target:"_blank",style:{textDecoration:"underline"},children:"Terms of Use"}),", and acknowledge its"," ",(0,n.tZ)(c.xv,{as:"a",href:(0,u.WF)(),target:"_blank",style:{textDecoration:"underline"},children:"Information Collection Notice"})," ","and"," ",(0,n.tZ)(c.xv,{as:"a",href:(0,u.Zz)(),target:"_blank",style:{textDecoration:"underline"},children:"Privacy Policy"}),"."]}))]})]})}},6190:function(e,t,i){i.d(t,{ET:()=>a});let l={stories:{width:360,height:Math.floor(360/(9/16))},grid:{width:360,height:Math.floor(450)}};function a(e){return{height:l[e].height,width:l[e].width}}},67836:function(e,t,i){i.d(t,{a:()=>l});let l=(e,t,i)=>{var l;return(null!==(l=null==i?void 0:i.duration)&&void 0!==l?l:0)>0||["everyone","only_free"].includes(t.audience)||["only_paid"].includes(t.audience)&&(null==e?void 0:e.is_subscribed)||["founding"].includes(t.audience)&&(null==e?void 0:e.is_founding)}}}]);