"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["925"],{41705:function(e,i,t){t.d(i,{U:()=>k});var l=t(7409),r=t(99282),a=t(16584),n=t(30396),s=t(14293),o=t.n(s),c=t(87756),d=t(95441),u=t(39556);async function p(e){return(0,u.O)(e,{imageCropAspectRatio:1,cropSelectPresetOptions:void 0,willRenderCanvas:(e,i)=>{let{utilVisibility:t,selectionRect:a,lineColor:n,backgroundColor:s}=i;if(t.crop<=0)return e;let{x:o,y:c,width:d,height:u}=a;return(0,r._)((0,l._)({},e),{interfaceShapes:[{x:o+.5*d,y:c+.5*u,rx:.5*d,ry:.5*u,opacity:t.crop,inverted:!0,backgroundColor:[...s,.5],strokeWidth:1,strokeColor:[...n]},...e.interfaceShapes]})}})}var g=t(98914),h=t(94874),f=t(71068),m=t(15771),v=t(19081),b=t(89635),y=t(70408);function k(e){let{user:i,onChangePhoto:t}=e,{iString:s}=(0,d.M1)(),[u,k]=(0,n.eJ)(null),[_,Z]=(0,n.eJ)(null),[{isDragging:C},{openFileDialog:x,getInputProps:w,getDragProps:N}]=(0,b.F)({accept:"image/*",multiple:!1,onFilesAdded:async e=>{let i=e[0];if(i)try{let e=i.file instanceof File?i.file:null;if(!e)return;let l=await (0,g.GL)(e);if(!l||o()(l.url))return;let r=await p(l.url),a=await (0,g.GL)(r);if(!a)return;let{url:n,orientation:s}=a;k(null!=s?s:null),n&&(Z(n),t({photo_url:n}))}catch(e){console.error("Error processing image:",e)}}}),B=(0,n.Ye)(()=>({transform:(0,g.P_)(u)}),[u]),F=_||(0,y.SM)(i);return(0,a.tZ)(f.xu,(0,r._)((0,l._)({alignSelf:"start"},N()),{children:(0,a.BX)(m.kG,{resetCss:!0,onClick:x,"aria-label":s("Edit profile photo"),children:[(0,a.BX)(v.M5,{style:B,position:"relative",width:120,height:120,border:"detail",radius:"full",bg:C?"secondary":"primary",overflow:"hidden",children:[F?(0,a.tZ)(h.qE,{photoUrl:F,size:120}):(0,a.tZ)(c.Z,{size:24}),C&&(0,a.tZ)(v.M5,{position:"absolute",inset:0,style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:(0,a.tZ)(c.Z,{size:24})})]}),(0,a.tZ)("input",(0,l._)({},w()))]})}))}},68057:function(e,i,t){t.d(i,{F:()=>h,V:()=>m});var l=t(7409),r=t(99282),a=t(16584),n=t(95441),s=t(68833),o=t(71068),c=t(15771),d=t(82402),u=t(19081),p=t(10510),g=t(58175);function h(e){let{profile:i,onFinalizeVisibility:t,onSetVisibility:o,source:d,hideButton:p}=e,{iString:g}=(0,n.M1)();if(!i)return null;let h=i.subscriptions.every(e=>{let{visibility:i}=e;return"public"===i}),m=e=>t=>{o(i.subscriptions.reduce((i,a)=>{let{visibility:n,publication:s}=a;return(0,r._)((0,l._)({},i),{[s.id]:s.id===e.id?t:n})},{})),(0,s.j)(s.FP.PROFILE_EDITED,{type:"read_visibility_toggled",visibility:t})};return(0,a.BX)(u.sg,{children:[(0,a.tZ)(u.X2,{justifyContent:"end",pullX:8,children:(0,a.tZ)(c.zx,{size:"sm",priority:"quaternary",onClick:()=>{let e=h?"private":"public";o(i.subscriptions.reduce((i,t)=>{let{publication:a}=t;return(0,r._)((0,l._)({},i),{[a.id]:e})},{})),(0,s.j)(s.FP.PROFILE_EDITED,{type:"visibility_toggled_all",for:"reads",count:i.subscriptions.length,newVisibility:e})},children:g(h?"Hide all":"Show all")})}),(0,a.tZ)(u.sg,{minHeight:320,gap:4,children:i.subscriptions.map(e=>(0,a.tZ)(f,{sub:e,onSetVisibility:m(e.publication),source:d},e.id))}),!p&&(0,a.tZ)(c.zx,{priority:"primary",onClick:t,children:g("Done")})]})}function f(e){let{sub:i,onSetVisibility:t}=e,l=i.publication;return(0,a.BX)(m,{children:[(0,a.tZ)(p.wk,{pub:l,size:32}),(0,a.tZ)(g.xv.B3,{weight:"medium",flex:"grow",children:l.name}),(0,a.tZ)(d.X,{checked:"public"===i.visibility,onChange:()=>t("public"===i.visibility?"private":"public")})]})}let m=(0,o.zo)({display:"flex",paddingY:8,gap:12,alignItems:"center",minWidth:0})},89635:function(e,i,t){t.d(i,{F:()=>s,t:()=>o});var l=t(7409),r=t(99282),a=t(98661),n=t(95441);let s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxFiles:i=1/0,maxSize:t=1/0,accept:s="*",multiple:c=!1,initialFiles:d=[],onFilesChange:u,onFilesAdded:p}=e,{iString:g}=(0,n.M1)(),[h,f]=(0,a.useState)({files:d.map(e=>({file:e,id:e.id,preview:e.url})),isDragging:!1,errors:[]}),m=(0,a.useRef)(null),v=(0,a.useCallback)(e=>{if(e instanceof File){if(e.size>t)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(t),".")}else if(e.size>t)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(t),".");if("*"!==s){let i=s.split(",").map(e=>e.trim()),t=e instanceof File?e.type||"":e.type,l=(File,e.name),r=l.lastIndexOf("."),a=r>0?l.substring(r):"";if(!i.some(e=>{if(e.startsWith("."))return a.toLowerCase()===e.toLowerCase();if(e.endsWith("/*")){let i=e.split("/")[0];return t.startsWith("".concat(i,"/"))}return t===e}))return'File "'.concat((File,e.name),'" is not an accepted file type.')}return null},[s,t]),b=(0,a.useCallback)(e=>e instanceof File?URL.createObjectURL(e):e.url,[]),y=(0,a.useCallback)(e=>e instanceof File?"".concat(e.name,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)):e.id,[]),k=(0,a.useCallback)(()=>{f(e=>{e.files.forEach(e=>{e.preview&&e.file instanceof File&&e.file.type.startsWith("image/")&&URL.revokeObjectURL(e.preview)}),m.current&&(m.current.value="");let i=(0,r._)((0,l._)({},e),{files:[],errors:[]});return null==u||u(i.files),i})},[u]),_=(0,a.useCallback)(e=>{if(!e||0===e.length)return;let a=Array.from(e),n=[];if(f(e=>(0,r._)((0,l._)({},e),{errors:[]})),c||k(),c&&i!==1/0&&h.files.length+a.length>i){n.push("You can only upload a maximum of ".concat(i," files.")),f(e=>(0,r._)((0,l._)({},e),{errors:n}));return}let s=[];a.forEach(e=>{if(c&&h.files.some(i=>i.file.name===e.name&&i.file.size===e.size))return;if(e.size>t){n.push(c?"Some files exceed the maximum size of ".concat(o(t),"."):"File exceeds the maximum size of ".concat(o(t),"."));return}let i=v(e);i?n.push(i):s.push({file:e,id:y(e),preview:b(e)})}),s.length>0?(null==p||p(s),f(e=>{let i=c?[...e.files,...s]:s;return null==u||u(i),(0,r._)((0,l._)({},e),{files:i,errors:n})})):n.length>0&&f(e=>(0,r._)((0,l._)({},e),{errors:n})),m.current&&(m.current.value="")},[h.files.length,i,c,t,v,b,y,k,u,p]),Z=(0,a.useCallback)(e=>{void 0!==e&&f(i=>{let t=i.files.find(i=>i.id===e);t&&t.preview&&t.file instanceof File&&t.file.type.startsWith("image/")&&URL.revokeObjectURL(t.preview);let a=i.files.filter(i=>i.id!==e);return null==u||u(a),(0,r._)((0,l._)({},i),{files:a,errors:[]})})},[u]),C=(0,a.useCallback)(()=>{f(e=>(0,r._)((0,l._)({},e),{errors:[]}))},[]),x=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f(e=>(0,r._)((0,l._)({},e),{isDragging:!0}))},[]),w=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),!(e.relatedTarget&&e.relatedTarget instanceof Node&&e.currentTarget.contains(e.relatedTarget))&&f(e=>(0,r._)((0,l._)({},e),{isDragging:!1}))},[]),N=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),B=(0,a.useCallback)(e=>{var i,t;if(e.preventDefault(),e.stopPropagation(),f(e=>(0,r._)((0,l._)({},e),{isDragging:!1})),(null===(i=m.current)||void 0===i||!i.disabled)&&(null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&e.dataTransfer.files.length>0){if(c)_(e.dataTransfer.files);else{let i=e.dataTransfer.files[0];i&&_([i])}}},[_,c]),F=(0,a.useCallback)(e=>{e.currentTarget.files&&e.currentTarget.files.length>0&&_(e.currentTarget.files)},[_]),E=(0,a.useCallback)(()=>{m.current&&m.current.click()},[]),I=(0,a.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r._)((0,l._)({},e),{type:"file",onChange:F,accept:e.accept||s,multiple:void 0!==e.multiple?e.multiple:c,ref:m,className:"sr-only","aria-label":g("Upload file"),tabIndex:-1})},[s,c,F]),S=(0,a.useCallback)(()=>({onDragEnter:x,onDragLeave:w,onDragOver:N,onDrop:B}),[x,w,N,B]);return[h,{addFiles:_,removeFile:Z,clearFiles:k,clearErrors:C,handleDragEnter:x,handleDragLeave:w,handleDragOver:N,handleDrop:B,handleFileChange:F,openFileDialog:E,getInputProps:I,getDragProps:S}]},o=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,t)).toFixed(i<0?0:i))+(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]||"Bytes")}},57641:function(e,i,t){t.d(i,{O:()=>g});var l=t(7409),r=t(99282),a=t(16584),n=t(58319),s=t(68833),o=t(82402),c=t(19081),d=t(58175),u=t(37313),p=t(6911);let g=e=>{let{includeCheckbox:i=!0,onCheckboxChange:t=()=>{},checked:g=!1,addSubscribePreamble:h=!1,addSignupPreamble:f=!1,fontWeight:m="regular",size:v="regular",color:b="primary",textAlign:y="left",style:k}=e;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(n.Z,{onVisible:()=>{(0,s.j)(u.F.TERMS_OF_SERVICE_SEEN,{withCheckbox:i,initialCheckboxValue:g})}}),(0,a.BX)(c.gq,{as:"label",alignItems:"center",justifyContent:"center",gap:12,style:k,className:"tosCheckbox-XbLWCT",children:[i&&(0,a.tZ)(o.X,{checked:g,onChange:e=>{(0,s.j)(u.F.TERMS_OF_SERVICE_CHECKBOX_CLICKED,{checkboxValue:e}),t(e)},size:"sm"}),(0,a.BX)(d.xv.B4,(0,r._)((0,l._)({color:b,textAlign:y,fontWeight:m},"small"===v?{size:11,lineHeight:16}:{}),{children:[h?"By subscribing, ":f?"By creating an account, ":""," I agree to Substack's"," ",(0,a.tZ)(d.xv,{as:"a",href:(0,p._Q)(),target:"_blank",style:{textDecoration:"underline"},children:"Terms of Use"}),", and acknowledge its"," ",(0,a.tZ)(d.xv,{as:"a",href:(0,p.WF)(),target:"_blank",style:{textDecoration:"underline"},children:"Information Collection Notice"})," ","and"," ",(0,a.tZ)(d.xv,{as:"a",href:(0,p.Zz)(),target:"_blank",style:{textDecoration:"underline"},children:"Privacy Policy"}),"."]}))]})]})}},94827:function(e,i,t){if(t.d(i,{Bk:()=>N,Rj:()=>w,xI:()=>E}),369==t.j)var l=t(7409);if(369==t.j)var r=t(98848);var a=t(16584),n=t(6400),s=t(30396),o=t(94184),c=t.n(o),d=t(31012),u=t(1852),p=t(16104),g=t(35047),h=t(94499),f=t(95441),m=t(62514),v=t(68833),b=t(98914),y=t(15771),k=t(10510);if(369==t.j)var _=t(22419);var Z=t(60308);if(369==t.j)var C=t(47929);let x={desktop:15,mobile:6},w=e=>{let{className:i,hasFeatured:t,categories:l,categoryId:r,categoryIds:n,loadingCategoryId:o,ranking:p,onCategoryClicked:g,defaultExpanded:h,expandedCategoryIds:m,onToggleCategory:v}=e,[b,k]=(0,s.eJ)(h||!1),[_,Z]=(0,s.eJ)(new Set),C=x[(0,u.useMediaQuery)({query:"only screen and (max-width: 650px)"})?"mobile":"desktop"],{iString:w}=(0,f.M1)(),N=null!=m?m:_,B=l?b?l:l.slice(0,C):[],F=e=>e.id===r||(null==n?void 0:n.includes(e.id)),E=e=>{v?v(e):Z(i=>{let t=new Set(i);return t.has(e)?t.delete(e):t.add(e),t})};return(0,a.BX)("div",{className:c()("categories",i),children:[t&&(0,a.tZ)(y.zx,{priority:"featured"!==r||o&&"featured"!==o?"secondary":"primary-mono",loading:"featured"===o&&"featured"!==r,onClick:()=>{g({categoryId:"featured",ranking:"all",categories:l})},children:w("Featured")}),B.map(e=>{var i;let t=N.has(e.id),n=e.subcategories&&e.subcategories.length>0,s=F(e)&&(!o||o===e.id),c=o===e.id&&r!==e.id;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(y.zx,{priority:s?"primary-mono":"secondary-outline",loading:c,onClick:()=>{g({categoryId:e.id,ranking:p,categories:l}),n&&E(e.id)},className:s?"test-active":"test-inactive",children:w(e.name||"")}),t&&n&&(null==e?void 0:null===(i=e.subcategories)||void 0===i?void 0:i.map(e=>{let i=F(e)&&(!o||o===e.id),t=o===e.id&&r!==e.id;return(0,a.tZ)(y.zx,{priority:i?"primary-mono":"secondary",loading:t,onClick:()=>g({categoryId:e.id,ranking:p,categories:l}),children:w(e.name)},e.id)}))]})}),l&&l.length>C&&!b&&(0,a.tZ)(y.hU,{priority:"secondary-outline",onClick:()=>k(!0),children:(0,a.tZ)(d.Z,{size:20})})]})},N=e=>{let{publications:i,explanations:t,ranking:l,openInNew:r,startRankAt:n=0,source:s,onPublicationVisited:o=null,user:c,categoryId:d}=e,{language:u}=(0,f.M1)();return(0,a.tZ)(a.HY,{children:(0,a.tZ)("div",{className:"publications",children:i.map((e,i)=>{var p,h,f,m,b,y,_;let x;let w=t&&t[i];if(!e)return;w||(w=[]);let N=w.filter(e=>["posts.title","posts.subtitle"].includes(e.type)),F=!!(null===(m=N[0])||void 0===m?void 0:null===(f=m.posts)||void 0===f?void 0:null===(h=f[0])||void 0===h?void 0:null===(p=h[0])||void 0===p?void 0:p.slug);F&&(x=null===(_=N[0])||void 0===_?void 0:null===(y=_.posts)||void 0===y?void 0:null===(b=y[0])||void 0===b?void 0:b[0]);let E=w.filter(e=>"description"===e.type)[0],I=w.filter(e=>["name","subdomain","hero_text","custom_domain","author_name"].includes(e.type)).length>0||!E&&!x,S=w.filter(e=>"description"===e.type).map(e=>e.keyword),X=w.filter(e=>["posts.title","posts.subtitle"].includes(e.type)).map(e=>e.keyword),z=(0,Z.TJI)(e,{params:{utm_source:s||C.b3.discover},signedIn:!!c});return(0,a.BX)("a",{className:"publication",href:z,native:!0,target:r?"_blank":void 0,onClick:()=>{(0,v.x6)(e,s||"leaderboards",{position:i+1,category:d}),o&&o(e)},rel:"noopener",children:["paid"===l?(0,a.tZ)("div",{className:"publication-rank",children:i+1+n}):null,(0,a.BX)("div",{className:"publication-content",children:[(0,a.tZ)(k.wk,{pub:e,belowTheFold:!0}),(0,a.BX)("div",{className:"publication-text-area",children:[(0,a.tZ)("div",{className:"publication-title",children:e.name}),(I||x)&&(0,a.tZ)("div",{className:"publication-description",children:e.editorial_bio||B(e.hero_text,S)}),!I&&E&&!x&&(0,a.tZ)("div",{className:"publication-description",children:B(E.sentence,S)}),!I&&x&&(0,a.tZ)("div",{className:"publication-explanation-box",children:F&&(0,a.tZ)("a",{className:"title",href:(0,Z.uRy)(e,x),children:(0,a.BX)("div",{className:"post-preview-content",children:[(0,a.BX)("div",{className:"left-flex",children:[(0,a.tZ)("p",{className:"title",children:B(x.title,X)}),(0,a.tZ)("p",{className:"subtitle",children:B(x.subtitle,X)})]}),(0,a.tZ)("div",{className:"right-flex",children:(0,a.tZ)("img",{src:x.cover_image,className:x.cover_image?"":"no-preview"})})]})})}),(0,a.tZ)("div",{className:"publication-author",children:(0,g.sv)(e,{language:u})})]})]})]},e.id)})})})};function B(e,i){if(!e)return"";let t=RegExp(i.join("|"),"ig"),l=e.split(t),r=[...e.matchAll(t)];return(0,a.tZ)("span",{children:l.map((e,i)=>(0,a.BX)(a.HY,{children:[e,i!==l.length-1&&(0,a.tZ)("b",{children:r[i]})]}))})}let F=e=>{let{onCategoryClicked:i,categoryId:t,ranking:l,loadingRanking:r,categories:n}=e;return"string"==typeof t&&["featured","twitter"].includes(t)?null:(0,a.BX)("div",{className:"ranking-toggle",children:[(0,a.tZ)(h.Z,{className:c()({active:"paid"===l&&!r||"paid"===r,loading:"paid"===r&&"paid"!==l}),onClick:()=>i({categoryId:t,ranking:"paid",categories:n}),children:"Top paid"}),"  \xb7  ",(0,a.tZ)(h.Z,{className:c()({active:"all"===l&&!r||"all"===r,loading:"all"===r&&"all"!==l}),onClick:()=>i({categoryId:t,ranking:"all",categories:n}),children:"All"})]})},E=e=>{var{Component:i=I}=e,t=(0,r._)(e,["Component"]);let n=(0,m.z)(t);return n.categories?(0,a.tZ)(i,(0,l._)({},n)):null};class I extends(369==t.j?n.Component:null){componentDidUpdate(e){if(this.props.categorySlug===e.categorySlug&&this.props.rankingSlug===e.rankingSlug)return;let i=(0,_.Wq)(this.props.categorySlug,this.props.categories),t=this.props.rankingSlug||"paid";this.props.loadPublications({categoryId:i,ranking:t})}startReading(e){window.sessionStorage.setItem("initialJoinSubstack","true"),(0,v.j)(v.FP.HOMEPAGE_READER_LINK_CLICKED,{url:(0,Z.HMK)()}),(0,b.uX)((0,Z.HMK)(),{event:e})}render(e){let{categories:i,publications:t,categoryId:l,loadingCategoryId:r,ranking:n,loadingRanking:s,onCategoryClicked:o,hasMore:d,viewMore:u,featuredPublications:g,maxPublications:h}=e,f="featured"===l,m="twitter"===l,v=i.find(e=>e.id===l);return(0,a.tZ)("div",{className:c()("new-landing-page reader-landing-page page",{"category-featured":f}),children:(0,a.tZ)("div",{className:"container",children:(0,a.BX)("div",{className:"landing-content",children:[(0,a.BX)("div",{className:"landing-section landing-publications",children:[(0,a.tZ)("div",{className:"publications-header not-mobile",children:(0,a.tZ)(F,{categories:i,categoryId:l,ranking:n,onCategoryClicked:o})}),(0,a.tZ)(N,{publications:t,ranking:f?"all":n,categoryId:l}),"all"===n&&!f&&!m&&!h&&d&&(0,a.tZ)("div",{className:"view-more",children:(0,a.tZ)(y.zx,{priority:"secondary-outline",onClick:u,children:"View more"})}),h&&"featured"!==l&&(0,a.tZ)("div",{className:"see-all",style:{paddingLeft:"all"===n?"108px":"146px"},children:(0,a.BX)("a",{href:f?(0,Z._P8)():(0,Z._P8)(v,n),native:!0,children:["See all"," ",(0,a.tZ)(p.Z,{width:7,height:11,color:"var(--color-fg-primary-themed)",style:{marginLeft:"3px"}})]})})]}),(0,a.BX)("div",{className:"landing-section landing-categories",children:[(0,a.tZ)("div",{className:"only-mobile",children:(0,a.tZ)("div",{className:"mobile-toggle",children:(0,a.tZ)(F,{categories:i,categoryId:l,ranking:n,onCategoryClicked:o})})}),(0,a.tZ)(w,{hasFeatured:g&&g.length>0,categories:i,categoryId:l,loadingCategoryId:r,onCategoryClicked:o,ranking:n,loadingRanking:s})]})]})})})}}}}]);