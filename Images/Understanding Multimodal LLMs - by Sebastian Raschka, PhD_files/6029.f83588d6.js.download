"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["6029"],{59101:function(e,t,i){i.d(t,{Z:()=>n});let n={container:"container-KbMeLj",themed:"themed-EbT4uD",saveButton:"saveButton-bEqkhJ",text:"text-RPsawq",short:"short-ZM5yW_",imageText:"imageText-mhB5o2",backdrop:"backdrop-Xjlnco",imageBackdrop:"imageBackdrop-mwjQFt",tinted:"tinted-Vm3IqP",blurred:"blurred-UbnY7U",tint:"tint-HtqWIV",header:"header-ndGPw6",restack:"restack-YSzWKs",permalink:"permalink-bijGJH",footer:"footer-0EQTsv",swatchesContainer:"swatchesContainer-TDgd_R",swatchContainer:"swatchContainer-IIrOXq",selected:"selected-how610",alignmentSwatchContainer:"alignmentSwatchContainer-_cyt17",swatch:"swatch-otVp71"}},96046:function(){},78691:function(e,t,i){i.d(t,{Z:()=>n});let n={viewer:"viewer-ecNuD7",nav:"nav-XSY6_G",navArrows:"navArrows-yQyPsn",bottomNav:"bottomNav-cjoblk",isReading:"isReading-OrZu1k",viewerOffset:"viewerOffset-T8duEs",actionIcon:"actionIcon-uFP5Oe",content:"content-cFaSRD",navArrow:"navArrow-xdopTu",post:"post-XKrpvd",ufi:"ufi-l5oCA2",logoContainer:"logoContainer-m31AvM",ufiButton:"ufiButton-nSWhO0",likeButton:"likeButton-cDwe1L",isLiked:"isLiked-xJDjjp",commentButton:"commentButton-sQzbUO",restackButton:"restackButton-sMOIvG",isRestacked:"isRestacked-EvdZvU",shareButton:"shareButton-oCXda_",shortcutTooltip:"shortcutTooltip-pU9wZf",close:"close-zwyGNy",referringPubContainer:"referringPubContainer-BWGotX",referringPubTextContainer:"referringPubTextContainer-tL5sbE"}},78489:function(e,t,i){i.d(t,{Z:()=>n});let n={jumpButton:"jumpButton-AIaH5l",hidden:"hidden-jcjp2w"}},23024:function(e,t,i){i.d(t,{Z:()=>n});let n={sidebar:"sidebar-y6xw9g"}},87740:function(e,t,i){i.d(t,{Z:()=>n});let n={container:"container-mkVCmy",publicationNav:"publicationNav-oP8uLE",tabs:"tabs-ITZoHF"}},59065:function(e,t,i){i.d(t,{Z:()=>n});let n={liveStreamContainer:"liveStreamContainer-FcukCX",fillIcon:"fillIcon-CcS0fl",twitterVerifiedIcon:"twitterVerifiedIcon-v59YgL",profileRow:"profileRow-pxzPMX",profileImage:"profileImage-HkuUYh",socialLinkIcon:"socialLinkIcon-yTx6z2",stat:"stat-fGDQWV",readsRow:"readsRow-sdX9cR",page:"page-tdumDw",grid:"grid-bCt58x",pubMain:"pubMain-P7p9KT",pub:"pub-WKvJgt","reader2-mobile-nav-icon":"reader2-mobile-nav-icon-B_bswu",reader2MobileNavIcon:"reader2-mobile-nav-icon-B_bswu"}},56199:function(e,t,i){i.d(t,{Z:()=>n});let n={modalContainer:"modalContainer-mJcb4X",fullWidth:"fullWidth-G75cMo",previewImage:"previewImage-PB2ITv"}},79237:function(e,t,i){i.d(t,{J:()=>y});var n=i(58865),r=i(16584),l=i(30396),o=i(95441),a=i(60807),s=i(68833),d=i(48980),c=i(62981),u=i(94874),p=i(15771),h=i(19081),m=i(6490),v=i(43570),f=i(92039),b=i(63651),g=i(47929);function Z(){let e=(0,n._)([""," invited you to join a live video"]);return Z=function(){return e},e}function y(e){let{liveStreamInvite:t,invitingUser:i}=e,n=(0,a.aF)(),[y,_]=(0,l.eJ)(t),[C,w]=(0,l.eJ)(i),{iString:S,iTemplate:x}=(0,o.M1)(),[k,B]=(0,l.eJ)(!1),I=(0,f.rG)(),P=!1;"undefined"!=typeof window&&y&&(P=new URL(window.location.href).pathname==="/live-stream/".concat(y.live_stream_id));let[N,X]=(0,c.Z)(y?"live-stream-join-modal-".concat(y.id,"-").concat(+!!P):void 0);(0,l.d4)(()=>{if(null==n?void 0:n.id)return null==I?void 0:I.listen({["user:".concat(n.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:invited"&&(B(!0),(0,d.rd)("/api/v1/live_stream/invite/".concat(i.message.invite_id)).then(e=>{_(e.invite),w(e.activeLiveStream.user)}))}})},[I,null==n?void 0:n.id]),(0,l.d4)(()=>{y&&(null==C?void 0:C.name)&&!N&&(B(!0),(0,s.j)(s.FP.LIVE_STREAM_JOIN_MODAL_SEEN,{live_stream_invite_id:y.id,inviting_user_id:C.id,aggro_version:P}),X())},[y,C,N]);let z=(0,l.I4)(async()=>{try{await (0,d.rd)("/api/v1/live_stream/".concat(null==y?void 0:y.live_stream_id,"/invite/").concat(null==y?void 0:y.id,"/decline"),{method:"PUT"}),B(!1)}catch(e){alert((0,d.i)(e))}},[y]);return y&&(null==C?void 0:C.name)?(0,r.tZ)(m.u_,{isOpen:k,onClose:()=>B(!1),disableCloseOnBackdropClick:P,children:(0,r.BX)(h.tu,{gap:32*!P,children:[(0,r.tZ)(m.xB,{showClose:!0,onClose:()=>B(!1),icon:(0,r.BX)(h.hs,{position:"relative",children:[(0,r.tZ)(u.On,{className:"liveStreamAvatar-pa3eKG",size:72,user:C}),(0,r.tZ)(h.hs,{className:"liveBox-CSADGk",justifyContent:"center",children:(0,r.tZ)(v.Vp,{className:"liveTag-lDNHQP",theme:"error",priority:"primary",children:S("LIVE")})})]}),title:P?S("You must download the Substack app to join the live video as a co-host"):x(Z(),C.name),description:S(P?"The Substack app is available on iPhone and Android":"To join this live video, you must download the Substack iPhone or Android app."),alignItems:"center"}),(0,r.tZ)(m.mz,{primaryButton:P?void 0:(0,r.tZ)(p.zx,{priority:"primary",href:(0,b.h4i)({tab:"activity",redirect:"app-store",utm_campaign:g.VX.liveStreamInvite,utm_source:g.b3.liveStreamJoinModal}),children:S("Accept in the mobile app")}),secondaryButton:P?void 0:(0,r.tZ)(p.zx,{priority:"secondary",onClick:z,children:S("Decline")}),direction:"column"})]})}):null}},61594:function(e,t,i){i.d(t,{u:()=>b});var n=i(7409),r=i(99282),l=i(16584),o=i(25256),a=i(71787),s=i(79138),d=i(37632),c=i(4473),u=i(39535),p=i(75697),h=i(95441),m=i(15771),v=i(99916),f=i(70379);let b=e=>{let{shareName:t,shareUrl:i,trackParams:b,trigger:g,utmCampaign:Z}=e,{iString:y}=(0,h.M1)(),_=(0,f.pm)();return(0,l.BX)(v.v2,{trigger:null!=g?g:(0,l.tZ)(m.hU,{priority:"quaternary",children:(0,l.tZ)(o.Z,{size:20})}),"aria-label":y("View share options"),children:[(0,l.tZ)(v.sN,{leading:(0,l.tZ)(a.Z,{}),onClick:()=>{(0,p.Ui)({shareUrl:i,utm_campaign:Z,skipToast:!0,trackParams:b}),_.popToast(e=>(0,l.tZ)(f.FN,(0,r._)((0,n._)({},e),{text:y("Copied link to clipboard")})))},children:y("Copy link")}),(0,l.BX)(v.xw,{children:[(0,l.tZ)(v.sN,{leading:(0,l.tZ)(c.Z,{}),onClick:()=>{(0,p.BZ)({shareUrl:i,utm_campaign:Z,trackParams:b})},children:y("Share to Notes")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(s.Z,{}),onClick:()=>{(0,p.Po)({shareUrl:i,utm_campaign:Z,trackParams:b})},children:y("Share to Facebook")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(d.Z,{}),onClick:()=>{(0,p.lc)({shareUrl:i,utm_campaign:Z,trackParams:b})},children:y("Share to Linkedin")}),(0,l.tZ)(v.sN,{leading:(0,l.tZ)(u.Z,{}),onClick:()=>{(0,p.Wn)({shareUrl:i,shareName:t,utm_campaign:Z,trackParams:b})},children:y("Share to X")})]})]})}},26522:function(e,t,i){i.d(t,{Y:()=>f,c:()=>v});var n=i(16584),r=i(94184),l=i.n(r),o=i(19691),a=i(13723),s=i(57336),d=i(20888),c=i(90099),u=i(71068),p=i(19081),h=i(58175),m=i(71075);let v=e=>{var t,i,r;let{disableLinks:c,isEditingCaption:v,post:f,caption:b,onEditCaption:g,onSaveCaption:Z,onCancelCaption:y}=e,{publishedBylines:_,title:C,canonical_url:w,post_date:S,section_name:x,cover_image:k,cover_image_alt:B}=f;return(0,n.BX)(p.tu,{children:[x&&(0,n.tZ)("a",{className:l()({[null!==(t=m.Z.disableLink)&&void 0!==t?t:""]:c}),href:w,rel:"noopener",target:"_blank",children:(0,n.tZ)(h.xv.Meta,{color:"pub-primary-text",paddingBottom:8,children:x})}),(0,n.tZ)("a",{className:l()({[null!==(i=m.Z.disableLink)&&void 0!==i?i:""]:c}),href:w,rel:"noopener",target:"_blank",children:(0,n.tZ)(h.xv.H2,{color:"pub-primary-text",children:C})}),(0,n.tZ)(s.h,{bylines:_,date:S,disableLinks:c}),k&&(0,n.tZ)(u.xu,{paddingTop:24,children:(0,n.tZ)("a",{className:l()({[null!==(r=m.Z.disableLink)&&void 0!==r?r:""]:c}),href:w,rel:"noopener",target:"_blank",children:(0,n.tZ)(d.e,{alt:null!=B?B:C,className:m.Z.fullWidth,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:k})})}),(0,n.tZ)(p.hs,{flex:"grow",paddingTop:16,children:v&&Z&&y?(0,n.tZ)(o.Z,{initialCaption:b,onCancel:y,onSave:Z}):(0,n.tZ)("p",{className:m.Z.caption,dangerouslySetInnerHTML:{__html:b},onClick:g||void 0})}),(0,n.tZ)(a.$,{disableLinks:c,href:w,includeUfi:!1,post:f})]})},f=e=>{let{post:t,children:i}=e,{publishedBylines:r,title:l,canonical_url:o,post_date:p,section_name:v,cover_image:f,cover_image_alt:b}=t;return(0,n.BX)(c.i$,{children:[v&&(0,n.tZ)("a",{href:o,children:(0,n.tZ)(h.xv.Meta,{color:"pub-primary-text",paddingBottom:8,children:v})}),(0,n.tZ)("a",{href:o,children:(0,n.tZ)(h.xv.H2,{color:"pub-primary-text",children:l})}),(0,n.tZ)(s.I,{bylines:r,date:p}),f&&(0,n.tZ)(u.xu,{paddingTop:24,children:(0,n.tZ)("a",{href:o,children:(0,n.tZ)(d.e,{alt:null!=b?b:l,className:m.Z.fullWidth,imageProps:{height:Math.round(650),smartCrop:!0},maxWidth:1300,src:f})})}),(0,n.tZ)("a",{href:o,children:(0,n.tZ)(u.xu,{as:"p",children:i})}),(0,n.tZ)(a.c,{href:o})]})}},60129:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,color:i="var(--color-utility-white)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},d),{name:"EyeIconFilled",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:s,children:(0,o.tZ)("path",{d:"M11.869 18.1925C17.6987 18.1925 21.7307 13.4687 21.7307 11.9962C21.7307 10.5163 17.6914 5.7998 11.869 5.7998C6.11209 5.7998 2 10.5163 2 11.9962C2 13.4687 6.11209 18.1925 11.869 18.1925ZM11.869 16.0566C9.59825 16.0566 7.79331 14.2123 7.79331 11.9962C7.79331 9.72174 9.59825 7.93573 11.869 7.93573C14.1179 7.93573 15.9374 9.72174 15.9374 11.9962C15.9374 14.2123 14.1179 16.0566 11.869 16.0566ZM11.869 13.4614C12.6769 13.4614 13.3464 12.7981 13.3464 11.9962C13.3464 11.187 12.6769 10.5236 11.869 10.5236C11.0538 10.5236 10.3843 11.187 10.3843 11.9962C10.3843 12.7981 11.0538 13.4614 11.869 13.4614Z"})}))}},41069:function(e,t,i){i.d(t,{x:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.BX)("g",{children:[(0,n.tZ)("path",{style:{backdropFilter:"blur(5px)"},d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:"white","fill-opacity":"0.9"}),(0,n.tZ)("path",{opacity:"0.7",d:"M20 17.8685C20 17.0698 20.8901 16.5934 21.5547 17.0365L30.7519 23.168C31.3457 23.5638 31.3457 24.4362 30.7519 24.8321L21.5547 30.9635C20.8901 31.4066 20 30.9302 20 30.1315V17.8685Z",fill:"black",stroke:"black","stroke-linecap":"round","stroke-linejoin":"round"})]})})}},26582:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"PlayIconLockFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,o.tZ)("path",{stroke:"none",fillRule:"evenodd",clipRule:"evenodd",d:"M4.04688 18.5527C4.4375 18.5527 4.76953 18.3965 5.16016 18.1719L6.2041 17.5685V14.633V13.4815C6.2041 12.4757 6.61309 11.9682 7.46663 11.9001C7.46663 10 9.07077 8.01343 11.4472 8.01343C13.8237 8.01343 15.4278 10 15.4278 11.901C15.5875 11.9144 15.7314 11.9429 15.86 11.9869L16.5469 11.5898C17.3574 11.1113 17.6406 10.7988 17.6406 10.2812C17.6406 9.76367 17.3574 9.45117 16.5469 8.98242L5.16016 2.39062C4.76953 2.16602 4.4375 2.01953 4.04688 2.01953C3.32422 2.01953 2.875 2.56641 2.875 3.41602V17.1465C2.875 17.9961 3.32422 18.5527 4.04688 18.5527ZM10.1094 12.9648H12.7852V11.8418C12.7852 10.8262 12.2871 10.2793 11.4473 10.2793C10.6074 10.2793 10.1094 10.8262 10.1094 11.8418V12.9648ZM14.0645 12.9707V11.9492C14.0645 10.1816 13.0098 9 11.4473 9C9.8848 9 8.8301 10.1816 8.8301 11.9492V12.97C8.2689 13.0149 8 13.3485 8 14.0098V17.8086C8 18.5215 8.3125 18.8535 8.9668 18.8535H13.918C14.582 18.8535 14.8945 18.5215 14.8945 17.8086V14.0098C14.8945 13.3515 14.6281 13.0179 14.0645 12.9707Z"})}))}},67823:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=function(e){var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"BandcampIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,fill:i,children:(0,o.tZ)("path",{d:"M0 18.75l7.437-13.5H24l-7.438 13.5H0z"})}))}},59154:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"BlueskyIcon",svgParams:{viewBox:"0 0 600 600"},width:t,height:t,fill:i,stroke:"none",children:(0,o.tZ)("path",{stroke:"none",d:"m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"})}))}},85941:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"BookIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,stroke:"none",children:(0,o.tZ)("path",{stroke:"none",d:"M4.89796 2C2.98742 2 0.998702 2.88986 0.104212 4.43402C0.00868433 4.6085 0 4.72192 0 5.0447V17.3544C0 17.7557 0.251846 18 0.686062 18C0.894487 18 1.09423 17.9389 1.25054 17.7906C2.34477 16.8484 3.79506 16.3598 5.24534 16.3598C6.6001 16.3598 7.85933 16.8396 8.77987 17.6335C8.87539 17.7121 8.98827 17.7557 9.08378 17.7557C9.27488 17.7557 9.43122 17.6161 9.43122 17.3893V4.48636C9.43122 4.25954 9.41379 4.20719 9.24883 3.97164C8.39776 2.74155 6.73036 2 4.89796 2ZM15.102 2C13.2697 2 11.6023 2.74155 10.7512 3.97164C10.5862 4.20719 10.5689 4.25954 10.5689 4.48636V17.3893C10.5689 17.6161 10.7251 17.7557 10.9162 17.7557C11.0117 17.7557 11.1333 17.7121 11.2202 17.6335C12.1407 16.8396 13.4 16.3598 14.7547 16.3598C16.205 16.3598 17.6552 16.8484 18.7495 17.7906C18.9058 17.9389 19.1056 18 19.314 18C19.7482 18 20 17.7557 20 17.3544V5.0447C20 4.72192 19.9914 4.59978 19.8958 4.43402C19.0013 2.88986 17.0127 2 15.102 2Z"})}))}},79138:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"FacebookIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,stroke:"none",children:(0,o.tZ)("path",{stroke:"none",d:"M20 10C20 4.47715 15.5229 0 10 0C4.47715 0 0 4.47715 0 10C0 14.9912 3.65684 19.1283 8.4375 19.8785V12.8906H5.89844V10H8.4375V7.79688C8.4375 5.29063 9.93047 3.90625 12.2146 3.90625C13.3084 3.90625 14.4531 4.10156 14.4531 4.10156V6.5625H13.1922C11.95 6.5625 11.5625 7.3334 11.5625 8.125V10H14.3359L13.8926 12.8906H11.5625V19.8785C16.3432 19.1283 20 14.9912 20 10Z"})}))}},37632:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"LinkedInIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,stroke:"none",children:(0,o.tZ)("path",{stroke:"none",d:"M18.5195 0H1.47656C0.660156 0 0 0.644531 0 1.44141V18.5547C0 19.3516 0.660156 20 1.47656 20H18.5195C19.3359 20 20 19.3516 20 18.5586V1.44141C20 0.644531 19.3359 0 18.5195 0ZM5.93359 17.043H2.96484V7.49609H5.93359V17.043ZM4.44922 6.19531C3.49609 6.19531 2.72656 5.42578 2.72656 4.47656C2.72656 3.52734 3.49609 2.75781 4.44922 2.75781C5.39844 2.75781 6.16797 3.52734 6.16797 4.47656C6.16797 5.42188 5.39844 6.19531 4.44922 6.19531ZM17.043 17.043H14.0781V12.4023C14.0781 11.2969 14.0586 9.87109 12.5352 9.87109C10.9922 9.87109 10.7578 11.0781 10.7578 12.3242V17.043H7.79688V7.49609H10.6406V8.80078H10.6797C11.0742 8.05078 12.043 7.25781 13.4844 7.25781C16.4883 7.25781 17.043 9.23438 17.043 11.8047V17.043Z"})}))}},19022:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=function(e){var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"SoundcloudIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,fill:i,children:(0,o.tZ)("path",{d:"M23.999 14.165c-.052 1.796-1.612 3.169-3.4 3.169h-8.18a.68.68 0 0 1-.675-.683V7.862a.747.747 0 0 1 .452-.724s.75-.513 2.333-.513a5.364 5.364 0 0 1 2.763.755 5.433 5.433 0 0 1 2.57 3.54c.282-.08.574-.121.868-.12.884 0 1.73.358 2.347.992s.948 1.49.922 2.373ZM10.721 8.421c.247 2.98.427 5.697 0 8.672a.264.264 0 0 1-.53 0c-.395-2.946-.22-5.718 0-8.672a.264.264 0 0 1 .53 0ZM9.072 9.448c.285 2.659.37 4.986-.006 7.655a.277.277 0 0 1-.55 0c-.331-2.63-.256-5.02 0-7.655a.277.277 0 0 1 .556 0Zm-1.663-.257c.27 2.726.39 5.171 0 7.904a.266.266 0 0 1-.532 0c-.38-2.69-.257-5.21 0-7.904a.266.266 0 0 1 .532 0Zm-1.647.77a26.108 26.108 0 0 1-.008 7.147.272.272 0 0 1-.542 0 27.955 27.955 0 0 1 0-7.147.275.275 0 0 1 .55 0Zm-1.67 1.769c.421 1.865.228 3.5-.029 5.388a.257.257 0 0 1-.514 0c-.21-1.858-.398-3.549 0-5.389a.272.272 0 0 1 .543 0Zm-1.655-.273c.388 1.897.26 3.508-.01 5.412-.026.28-.514.283-.54 0-.244-1.878-.347-3.54-.01-5.412a.283.283 0 0 1 .56 0Zm-1.668.911c.4 1.268.257 2.292-.026 3.572a.257.257 0 0 1-.514 0c-.241-1.262-.354-2.312-.023-3.572a.283.283 0 0 1 .563 0Z"})}))}},39535:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=24,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.tZ)(a.l,(0,r._)((0,n._)({},s),{name:"XIcon",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:(0,o.tZ)("path",{stroke:"none",fillRule:"evenodd",clipRule:"evenodd",d:"M13.2879 19.1666L8.66337 12.575L2.87405 19.1666H0.424805L7.57674 11.0258L0.424805 0.833252H6.71309L11.0717 7.04577L16.5327 0.833252H18.982L12.1619 8.59699L19.5762 19.1666H13.2879ZM16.0154 17.3083H14.3665L3.93176 2.69159H5.58092L9.7601 8.54422L10.4828 9.55981L16.0154 17.3083Z"})}))}},29751:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(64515);let s=e=>{var{size:t=20,fill:i="var(--color-fg-primary)"}=e,s=(0,l._)(e,["size","fill"]);return(0,o.BX)(a.l,(0,r._)((0,n._)({},s),{name:"UnmuteIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:i,children:[(0,o.tZ)("path",{d:"M15.6392 17.817C15.4994 18.3172 15.0563 18.6519 14.476 18.6519C13.9832 18.6519 13.5654 18.451 13.0726 17.9858L8.50884 13.714C8.43385 13.6506 8.34814 13.6188 8.24102 13.6188H5.16636C3.72009 13.6188 2.92733 12.8364 2.92733 11.3032V7.36982C2.92733 6.68171 3.08924 6.14262 3.40172 5.75997L15.6392 17.817ZM15.6866 1.24768V12.0678L8.49264 4.97165C8.49818 4.96785 8.50353 4.96352 8.50884 4.95903L13.0726 0.729582C13.619 0.21147 13.9618 0 14.4546 0C15.183 0 15.6866 0.560404 15.6866 1.24768Z",stroke:"none"}),(0,o.tZ)("path",{d:"M19.3824 19.7621C19.7037 20.0793 20.2286 20.0793 20.5501 19.7621C20.8607 19.4343 20.8715 18.9267 20.5501 18.6096L2.19856 0.50751C1.87716 0.1903 1.34151 0.1903 1.02012 0.50751C0.70944 0.814142 0.70944 1.3534 1.02012 1.66003L19.3824 19.7621Z",stroke:"none"})]}))}},29176:function(e,t,i){i.d(t,{f:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 20.1456C2.33682 19.7895 2.25 19.3992 2.25 19V18V14V12C2.25 9.41414 3.27723 6.93419 5.10571 5.10571C6.93419 3.27723 9.41414 2.25 12 2.25C14.5859 2.25 17.0658 3.27723 18.8943 5.10571C20.7228 6.93419 21.75 9.41414 21.75 12V14V18V19C21.75 19.3992 21.6632 19.7895 21.5 20.1456V20.3889C21.4583 20.3889 21.4169 20.3875 21.3759 20.3848C21.2578 20.5874 21.1133 20.7758 20.9445 20.9445C20.4288 21.4603 19.7293 21.75 19 21.75H18C17.2707 21.75 16.5712 21.4603 16.0555 20.9445C15.5397 20.4288 15.25 19.7293 15.25 19V16C15.25 15.2707 15.5397 14.5712 16.0555 14.0555C16.5712 13.5397 17.2707 13.25 18 13.25H19.6528V12.2083C19.6528 10.1787 18.8465 8.23218 17.4113 6.797C15.9762 5.36183 14.0296 4.55556 12 4.55556C9.97036 4.55556 8.02384 5.36183 6.58867 6.797C5.15349 8.23218 4.34722 10.1787 4.34722 12.2083V13.25H6C6.72935 13.25 7.42882 13.5397 7.94454 14.0555C8.46027 14.5712 8.75 15.2707 8.75 16V19C8.75 19.7293 8.46027 20.4288 7.94454 20.9445C7.42882 21.4603 6.72935 21.75 6 21.75H5C4.27065 21.75 3.57118 21.4603 3.05546 20.9445C2.88674 20.7758 2.74221 20.5874 2.6241 20.3848C2.58309 20.3875 2.5417 20.3889 2.5 20.3889V20.1456Z"})})}},31548:function(e,t,i){i.d(t,{o:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.7848 3.78723C4.2873 3.28318 4.96884 3 5.67949 3H18.3205C19.0312 3 19.7127 3.28318 20.2152 3.78723C20.7177 4.29129 21 4.97494 21 5.68778V14.4027C21 15.1155 20.7177 15.7992 20.2152 16.3032C19.7127 16.8073 19.0312 17.0905 18.3205 17.0905H7.9309L4.2475 20.7853C4.0385 20.9949 3.72419 21.0576 3.45112 20.9442C3.17805 20.8307 3 20.5634 3 20.2669V5.68778C3 4.97494 3.2823 4.29129 3.7848 3.78723Z"})})}},13774:function(e,t,i){i.d(t,{O:()=>r});var n=i(16584);function r(e){let{className:t}=e;return(0,n.tZ)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",children:(0,n.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83333 5C1.26853 5 0 6.11207 0 7.48387V16.5161C0 17.8879 1.26853 19 2.83333 19H14.1667C15.7315 19 17 17.8879 17 16.5161V7.48387C17 6.11207 15.7315 5 14.1667 5H2.83333ZM18 14.7264L21.6962 17.5549C22.0546 17.8238 22.4334 18 22.8123 18C23.529 18 24 17.527 24 16.8037V7.19629C24 6.47295 23.529 6 22.8123 6C22.4334 6 22.0546 6.1762 21.6962 6.44513L18 9.25502V14.7264Z"})})}},40369:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.tZ)(r.l,{name:"ActivityTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:(0,n.tZ)("path",{d:"M13.7031 21.0672C14.197 20.8203 14.7978 21.0208 15.0449 21.5145C15.2919 22.0085 15.0916 22.6093 14.5977 22.8563C12.9623 23.6739 11.0377 23.6739 9.40234 22.8563C8.90836 22.6093 8.70809 22.0085 8.95507 21.5145C9.20219 21.0208 9.80303 20.8203 10.2969 21.0672C11.3692 21.6033 12.6308 21.6033 13.7031 21.0672ZM9.15722 0.949086C10.8954 0.424878 12.7424 0.392652 14.4941 0.85143L14.8428 0.949086L14.8447 0.950063C15.8459 1.25441 18.0718 2.36176 19.2617 4.53209C20.0047 5.88745 20.2444 7.47298 20.3603 8.78795C20.4179 9.44093 20.4495 10.0969 20.4844 10.5995C20.5222 11.1441 20.5638 11.5093 20.626 11.7362C20.7727 12.2713 21.0324 12.7556 21.3838 13.3612C21.7238 13.9471 22.1511 14.6485 22.5019 15.5018C22.6638 15.8954 22.791 16.2502 22.8896 16.576C23.1771 17.526 22.8785 18.4183 22.3057 19.034C21.7485 19.6328 20.9269 19.9881 20.0654 19.9881H3.93457C3.07304 19.9881 2.25152 19.6328 1.69433 19.034C1.12154 18.4183 0.822942 17.526 1.11035 16.576C1.20895 16.2502 1.33619 15.8954 1.49804 15.5018C1.84892 14.6485 2.27624 13.9471 2.61621 13.3612C2.9676 12.7556 3.22729 12.2713 3.37402 11.7362C3.43622 11.5093 3.47781 11.1441 3.51562 10.5995C3.55051 10.0969 3.58205 9.44093 3.63965 8.78795C3.75562 7.47298 3.99526 5.88745 4.73828 4.53209C5.92818 2.36176 8.1541 1.25441 9.15527 0.950063L9.15722 0.949086Z"})})}},46386:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.tZ)(r.l,{name:"ChatTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:(0,n.tZ)("path",{d:"M1 14.9869V5.81501C1.00001 4.24832 1.89466 2.70621 3.5 2.15388C7.29614 0.847876 13.8513 -0.234306 20.4746 2.13533C22.0773 2.70881 23 4.25955 23 5.85505V15.0269C23 16.5942 22.104 18.1369 20.499 18.689C18.0418 19.5342 14.4547 20.2754 10.4473 20.0679C9.01165 22.2374 6.19312 23.2632 3.5791 23.2633C3.17472 23.2633 2.8101 23.0196 2.65527 22.6461C2.50049 22.2724 2.58607 21.8422 2.87207 21.5562C3.20792 21.2203 3.4993 20.5973 3.6543 19.8804C3.72855 19.5369 3.7627 19.2074 3.7627 18.9322C3.76269 18.8818 3.75985 18.8354 3.75781 18.7926C3.72034 18.7784 3.68436 18.7655 3.65234 18.7535C3.61791 18.7405 3.58772 18.7299 3.56445 18.7213C3.55292 18.717 3.54353 18.7133 3.53613 18.7105C3.53242 18.7092 3.52955 18.7074 3.52734 18.7066C3.52517 18.7058 3.52441 18.7056 3.52441 18.7056C1.92119 18.1319 1 16.5819 1 14.9869Z"})})}},8626:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.tZ)(r.l,{name:"DashboardTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:(0,n.tZ)("path",{d:"M19 1C21.2091 1 23 2.79086 23 5V19C23 21.2091 21.2091 23 19 23H5C2.79086 23 1 21.2091 1 19V5C1 2.79086 2.79086 1 5 1H19ZM8 13C7.44772 13 7 13.4477 7 14V16C7 16.5523 7.44772 17 8 17C8.55228 17 9 16.5523 9 16V14C9 13.4477 8.55228 13 8 13ZM12 10C11.4477 10 11 10.4477 11 11V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V11C13 10.4477 12.5523 10 12 10ZM16 7C15.4477 7 15 7.44772 15 8V16C15 16.5523 15.4477 17 16 17C16.5523 17 17 16.5523 17 16V8C17 7.44772 16.5523 7 16 7Z",fillRule:"evenodd",clipRule:"evenodd"})})}},72257:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.tZ)(r.l,{name:"DashboardTabIcon",svgParams:{viewBox:"0 0 24 24"},stroke:i,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",width:t,height:t,fill:"none",className:l,children:(0,n.tZ)("path",{d:"M16 16V8M8 16V14M12 16V11M5 22H19C20.6569 22 22 20.6569 22 19V5C22 3.34315 20.6569 2 19 2H5C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22Z"})})}},89606:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.tZ)(r.l,{name:"HomeTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:(0,n.tZ)("path",{d:"M13.315 1.4785C12.5616 0.840501 11.4384 0.840501 10.685 1.4785L2.02743 8.80973C1.37462 9.36254 1 10.1622 1 11.003L1 19.1187C1 21.2623 2.79086 23 5 23L19 23C21.2091 23 23 21.2623 23 19.1187V11.003C23 10.1622 22.6254 9.36254 21.9726 8.80973L13.315 1.4785ZM10.4472 17.2804C9.95321 17.0408 9.35254 17.2351 9.10555 17.7144C8.85856 18.1937 9.05878 18.7765 9.55276 19.0162C11.0933 19.7636 12.9067 19.7636 14.4472 19.0162C14.9412 18.7766 15.1414 18.1937 14.8944 17.7144C14.6474 17.2351 14.0468 17.0408 13.5528 17.2804C12.5753 17.7547 11.4247 17.7547 10.4472 17.2804Z",fillRule:"evenodd",clipRule:"evenodd"})})}},66013:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.BX)(r.l,{name:"InboxTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:[(0,n.tZ)("path",{d:"M1.22478 15.2196C1.3687 15.0789 1.5639 14.9999 1.76744 14.9999H6.10047C6.58116 14.9999 7.02116 15.2627 7.23644 15.6827C7.3959 15.9938 7.58943 16.3747 7.77311 16.7446C8.14224 17.4881 8.91496 17.991 9.76056 17.991H14.2394C15.085 17.991 15.8578 17.4881 16.2269 16.7446C16.4106 16.3746 16.6041 15.9938 16.7636 15.6827C16.9788 15.2627 17.4188 14.9999 17.8995 14.9999H22.2326C22.6564 14.9999 23 15.3357 23 15.7499L23 18.75C23 20.8211 21.282 22.5 19.1628 22.5H4.83721C2.71798 22.5 1.00001 20.8211 1 18.75L1 15.7499C0.999999 15.551 1.08085 15.3602 1.22478 15.2196Z",fillRule:"evenodd",clipRule:"evenodd"}),(0,n.tZ)("path",{d:"M4.22326 2.84286C4.54919 1.75079 5.57353 1 6.73755 1H17.2625C18.4265 1 19.4508 1.75079 19.7767 2.84285L22.3553 12.58C22.423 12.8066 22.3775 13.0511 22.2325 13.24C22.0876 13.4289 21.8602 13.54 21.6186 13.54L17.0607 13.5142C16.5078 13.5111 16.0158 13.8566 15.779 14.3448C15.5784 14.7582 15.3438 15.1845 15.1341 15.5477C14.7879 16.1472 14.1305 16.5 13.4261 16.5H10.6277C9.89424 16.5 9.21567 16.1176 8.86754 15.4867C8.66157 15.1135 8.42948 14.6814 8.2237 14.2707C7.99548 13.8151 7.52704 13.5108 7.00806 13.5137L2.27908 13.54C2.03752 13.54 1.81006 13.4289 1.66512 13.24C1.52019 13.0511 1.4747 12.8066 1.54233 12.58L4.22326 2.84286Z",fillRule:"evenodd",clipRule:"evenodd"})]})}},1395:function(e,t,i){i.d(t,{Z:()=>l});var n=i(16584),r=i(64515);let l=e=>{let{size:t=24,color:i="var(--color-fg-primary)",className:l}=e;return(0,n.BX)(r.l,{name:"SearchTabActiveIcon",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:i,className:l,children:[(0,n.tZ)("path",{d:"M21.707 20.293C22.0975 20.6835 22.0975 21.3165 21.707 21.707C21.3165 22.0976 20.6835 22.0976 20.293 21.707L16.3272 17.7412C16.592 17.5246 16.8469 17.2959 17.0879 17.0537C17.3176 16.8229 17.5357 16.5805 17.7422 16.3281L21.707 20.293Z"}),(0,n.tZ)("path",{d:"M10 1.5C14.6944 1.5 18.5 5.30558 18.5 10C18.5 12.3397 17.5532 14.4601 16.0244 15.9961C14.4862 17.5415 12.3541 18.5 10 18.5C5.30559 18.5 1.50002 14.6944 1.50002 10C1.50002 5.30558 5.30559 1.5 10 1.5Z"})]})}},10878:function(e,t,i){i.d(t,{M:()=>C,u:()=>S});var n=i(58865),r=i(16584),l=i(30396),o=i(73510),a=i(9589),s=i(95441),d=i(98914),c=i(15771),u=i(19081),p=i(6490),h=i(15562),m=i(65523),v=i(17688),f=i(58175),b=i(64300),g=i(70379),Z=i(84610);function y(){let e=(0,n._)(["Your report and profile will be shared with the admins of ","."]);return y=function(){return e},e}let _=["hate","private_information","plagiarism","impersonation","illegal_activity","spam","pornography","other"],C=["impersonation","spam","pornography","other"],w=e=>{let{category:t,language:i="en"}=e;return(0,Z.H)({category:t,language:i})};function S(e){var t,i;let{isOpen:n,pub:Z,onClose:C,onSubmit:S=()=>Promise.resolve(),canReportToAdmins:k=!1,reasons:B=_}=e,[I,P]=(0,l.eJ)(null),{iString:N,iTemplate:X,language:z}=(0,s.M1)(),[L,T]=(0,l.eJ)(null),[M,E]=(0,l.eJ)(!1),[A,O]=(0,l.eJ)(!1),[V,H]=(0,l.eJ)(!k),{popToast:U}=(0,g.pm)();if((0,l.d4)(()=>{n&&H(!k)},[n,k,B]),(0,l.d4)(()=>{V?O(!!I):O(!!L)},[V,I,L,B]),k&&!Z)return console.error("Must supply pub if reporting to pub admins is possible"),null;let j=V?"Report to Substack":"Report to the ".concat(I18N.p(null!==(t=null==Z?void 0:Z.name)&&void 0!==t?t:"")," admins");return(0,r.BX)(r.HY,{children:[(0,r.BX)(p.u_,{isOpen:n,onClose:C,disableCloseOnBackdropClick:M||V,children:[(0,r.tZ)(p.xB,{title:j,icon:(0,r.tZ)(m.AM,{bg:"accent-red",icon:(0,r.tZ)(o.Z,{stroke:"var(--color-semantic-error-fg-primary)"})}),description:(0,r.tZ)(x,{reportingToSubstack:V,pub:null!=Z?Z:null,onReportToSubstackClicked:()=>{H(!0)}}),showClose:!0,onClose:C}),(0,r.tZ)(p.fe,{children:(0,r.BX)(u.tu,{gap:20,children:[V&&(0,r.tZ)(r.HY,{children:(0,r.BX)(u.tu,{gap:8,children:[(0,r.tZ)(f.xv.B4,{weight:"bold",translated:!0,children:"Reason"}),(0,r.BX)(v.i,{value:null!=I?I:void 0,onChange:e=>{P(e.target.value)},children:[(0,r.tZ)(v.d,{children:N("Select a reason")}),B.map(e=>(0,r.tZ)("option",{value:e,children:w({category:e,language:z})},e))]})]})}),(0,r.BX)(u.tu,{gap:8,children:[(0,r.BX)(u.gq,{justifyContent:"space-between",children:[V?(0,r.tZ)(f.xv.B4,{weight:"bold",translated:!0,children:"Additional details"}):(0,r.tZ)(f.xv.B4,{weight:"bold",translated:!0,children:"Reason"}),V&&(0,r.tZ)(f.xv.B4,{color:"secondary",translated:!0,children:"Optional"})]}),(0,r.tZ)(b.g,{onChange:e=>{T(e.currentTarget.value||null)},placeholder:N("Describe why you're reporting this...")})]})]})}),(0,r.tZ)(p.mz,{alignButtons:"stretch",primaryButton:(0,r.tZ)(c.zx,{disabled:!A,priority:"destructive",onClick:()=>{E(!0)},children:N("Submit")})})]}),(0,r.tZ)(h.W,{isOpen:M,onClose:()=>{E(!1)},title:N("Submit report?"),description:V?N("Reported content will be reviewed and removed if it violates our Content Guidelines."):X(y(),null!==(i=null==Z?void 0:Z.name)&&void 0!==i?i:"this publication"),primaryButton:(0,r.tZ)(c.zx,{priority:"destructive",onClick:async()=>{E(!1);try{await S({reportCategory:V?I:null,details:L,reportedToSubstack:V})}catch(i){console.error("could not submit report",i);let e=(0,d.zx)(i),t=e&&e.startsWith("Something went wrong")?e:"Something went wrong: ".concat(e);U(()=>(0,r.tZ)(g.FN,{text:t}));return}U(()=>(0,r.tZ)(g.FN,{text:"Your report was submitted",Icon:a.Z}))},children:N("Submit report")}),secondaryButton:(0,r.tZ)(c.zx,{priority:"secondary",onClick:()=>{E(!1)},children:N("Cancel")})})]})}function x(e){var t;let{reportingToSubstack:i,pub:n,onReportToSubstackClicked:l}=e;return i?(0,r.BX)(f.xv,{translated:!0,children:["Report content that violates Substack's"," ",(0,r.tZ)(f.hh,{color:"highlight",href:"https://substack.com/content",target:"_blank",rel:"noreferrer",children:"Content Guidelines"})," ","below. Your report is only viewed by our staff. Find additional reporting options and information in our"," ",(0,r.tZ)(f.hh,{color:"highlight",href:"https://support.substack.com/hc/en-us/articles/23248646000532",target:"_blank",rel:"noreferrer",children:"Standards and Enforcement Help Center"}),"."]}):(0,r.BX)(f.xv,{translated:!0,children:[(0,r.BX)(f.xv.B3,{color:"secondary",translated:!0,children:["Your report and profile will be shared with the admins of ",(0,r.tZ)("strong",{children:I18N.p(null!==(t=null==n?void 0:n.name)&&void 0!==t?t:"")}),", since at Substack we believe publication owners are best able to moderate their communities."]}),(0,r.BX)(f.xv.B3,{translated:!0,color:"secondary",children:["If you believe something violates Substack's"," ",(0,r.tZ)(f.hh,{color:"highlight",href:"https://substack.com/content",target:"_blank",rel:"noreferrer",children:"Content Guidelines"}),", you can"," ",(0,r.tZ)(f.hh,{color:"highlight",onClick:()=>{l()},children:"report it to Substack"})," ","instead."]})]})}},92291:function(e,t,i){i.d(t,{Gn:()=>E,Mk:()=>O,kN:()=>U,kW:()=>H,yd:()=>M});var n=i(7409),r=i(16584),l=i(3880),o=i(24202),a=i(20888),s=i(42375),d=i(27966),c=i(77906),u=i(72572),p=i(25827),h=i(58998),m=i(98170),v=i(68055),f=i(71576),b=i(86301),g=i(73544),Z=i(68710),y=i(60735),_=i(37663),C=i(25642),w=i(69181),S=i(93252),x=i(19081),k=i(33451),B=i(15503),I=i(18618),P=i(76820),N=i(23854),X=i(42886),z=i(60308),L=i(63651),T=i(5749);function M(e){let{parent:t,item:i,attachments:n,readOnly:l,isDm:a,isRestack:d,isPermalink:c,isComposing:u,onQuoteThemeChange:p,onAttachmentClick:h,onSavePostClick:m,utm_content:v}=e,f=(0,s.rI)();if(0===n.length)return null;let b=n.filter(e=>"image"===e.type),g=n.filter(e=>"video"===e.type),Z=n.filter(e=>"image"!==e.type&&"video"!==e.type);return(0,r.BX)(r.HY,{children:[b.length>0&&(0,r.tZ)(o.sp,{parent:t,readOnly:l||(0,S.P)(),assets:b.map(e=>U(e)),onClick:h,onSwipe:()=>{i&&(0,B.a2)(i,f)},isRestack:d,isPermalink:c,isDm:a}),g.map(e=>{var n;return(0,r.tZ)(P.Jl,{mediaUpload:e.mediaUpload,composing:null!=u&&u,videoPlayerProps:{surface:(0,_.T)(f),entityType:"comment",entityKey:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:"unknown",contentType:"comment",feedItemTrackingParameters:null==i?void 0:i.trackingParameters}},e.mediaUpload.id)}),Z.map(e=>(0,r.tZ)(O,{parent:t,attachment:e,readOnly:l,isDm:a,isRestack:d,isPermalink:c,isComposing:u,onAttachmentClick:h,onSavePostClick:m,onQuoteThemeChange:p,utm_content:v,compactIfPossible:b.length>0||g.length>0||Z.length>1,item:null!=i?i:void 0}))]})}function E(e){let{attachments:t}=e;if(0===t.length)return null;let i=t.filter(e=>"image"===e.type),n=t.filter(e=>"video"===e.type);return(0,r.BX)(r.HY,{children:[i.length>0&&(0,r.tZ)(l.i,{assets:i.map(e=>U(e))}),n.map(e=>(0,r.tZ)(A,{mediaUpload:e.mediaUpload}))]})}function A(e){let{mediaUpload:t}=e,i=(0,z.kOB)(t);return(0,r.BX)(x.hs,{width:72,height:72,radius:"md",overflow:"hidden",sizing:"border-box",border:"detail",position:"relative",alignItems:"center",justifyContent:"center",flex:"auto",children:[(0,r.tZ)(a.e,{src:i,maxWidth:72,useRetinaSizing:!0,imageIsFixedWidth:!0,imageProps:{height:72,smartCrop:!0},className:T.Z.videoThumbnailImage}),(0,r.tZ)(I.fI,{isPlaying:!1,size:40})]})}function O(e){var t,i,l,o,a,S;let{parent:x,attachment:B,readOnly:I,isRestack:z,isDm:L,isPermalink:T,isComposing:M,onAttachmentClick:E,onSavePostClick:A,onQuoteThemeChange:O,utm_content:H,compactIfPossible:U,item:j}=e,R=(0,s.rI)();if((0,N.bP)(B))return(0,r.tZ)(h.h,{attachment:B,readOnly:I,isRestack:z,onAttachmentClick:E,utm_content:H});if("live_stream"===B.type)return(0,r.tZ)(p.W,{activeLiveStream:B.active_live_stream,onAttachmentClick:E,maxWidth:P.PJ,videoPlayerProps:{surface:(0,_.T)(R),entityType:"comment",entityKey:null!==(t=null==x?void 0:x.id)&&void 0!==t?t:"unknown",contentType:"comment",feedItemTrackingParameters:null==j?void 0:j.trackingParameters}});if("link"===B.type){let{linkMetadata:e}=B,t=(0,k.P9)(e.url),i=(0,k.A7)(e.url);if(t)return(0,r.tZ)(y.n,{videoId:t});if(i)return(0,r.tZ)(Z.D,{videoId:i});let l=(0,g.R)(e.url);if(l)return(0,r.tZ)(g.n,{embedType:l.embedType,resourceId:l.resourceId});let o=(0,d.j)(e.url);if(o)return(0,r.tZ)(d.g,{country:o.country,type:o.type,id:o.id});let a=(0,b.N)(e.url);return a?(0,r.tZ)(b.J,{url:a.url,type:a.type}):(0,r.tZ)(u.N,(0,n._)({readOnly:I,onClick:E},B.linkMetadata))}if("comment"===B.type)return(0,r.tZ)(c.UK,{parent:x,readOnly:I,publication:null!==(i=B.publication)&&void 0!==i?i:void 0,comment:B.comment,onAttachmentClick:E,utm_content:H,isDm:L,isPermalink:T});if("post"===B.type&&B.postSelection)return(0,r.tZ)(C.Kk,{readOnly:I,attachment:B,onClick:E,onSavePostClick:A,onThemeChange:O,isPermalink:T,isComposing:M,isRestack:z});if("post"===B.type&&B.postImageSelection)return(0,r.tZ)(f.w,{readOnly:I,onClick:E,onSavePostClick:A,attachment:B,utm_content:H});if("post"===B.type){let e=j&&(0,X.D2)(j,B)&&"post"===j.type?(null===(l=j.mediaClip)||void 0===l?void 0:l.clip_info)||(null===(o=B.mediaClip)||void 0===o?void 0:o.clip_info):(null===(a=B.mediaClip)||void 0===a?void 0:a.clip_info)||B.clipInfo,t=B.post.videoUpload;return e&&t?(0,r.tZ)(P.Jl,{tag:(0,r.tZ)(w.u0,{pub:B.publication,post:B.post,onViewEpisodeClick:E}),mediaUpload:t,composing:!1,videoPlayerProps:{surface:(0,_.T)(R)}},B.id):(0,r.tZ)(m.tg,{clipInfo:e,readOnly:I,publication:B.publication,post:B.post,onClick:E,onSavePostClick:A,compact:U,item:j},B.id)}return"publication"===B.type?(0,r.tZ)(v.U,{publication:B.publication,readOnly:I,onClick:E}):"video"===B.type?(0,r.tZ)(P.Jl,{mediaUpload:B.mediaUpload,composing:!1,videoPlayerProps:{surface:(0,_.T)(R),entityType:"comment",entityKey:null!==(S=null==x?void 0:x.id)&&void 0!==S?S:"unknown",contentType:"comment"}},B.mediaUpload.id):(0,r.tZ)(V,{attachment:B})}function V(e){let{}=e;return(0,r.tZ)(x.hs,{})}function H(e){switch(e.type){case"post":if(e.postSelection)return(0,L.uRy)(e.publication,e.post,{urlParams:{selection:e.postSelection.id}});return e.post.canonical_url;case"comment":return(0,L.Sgq)(e.comment);case"publication":return e.publication.base_url;case"link":var t;return null!==(t=e.linkMetadata.url)&&void 0!==t?t:null;default:return null}}function U(e){return{id:e.id,src:e.imageUrl,explicit:e.explicit,width:e.imageWidth,height:e.imageHeight}}},98170:function(e,t,i){i.d(t,{$l:()=>A,FK:()=>M,Q9:()=>V,UO:()=>R,s_:()=>j,tg:()=>L,vE:()=>D});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(30396),s=i(94184),d=i.n(s),c=i(20816),u=i(20160),p=i(20888),h=i(95441),m=i(60807),v=i(27625),f=i(13748),b=i(3411),g=i(93252),Z=i(80878),y=i(15771),_=i(19081),C=i(10510),w=i(58175),S=i(2009),x=i(81043),k=i(65575),B=i(64172),I=i(9459),P=i(91432),N=i(60308),X=i(63651),z=i(5749);function L(e){var t,i;let{post:n,publication:r,compact:l,readOnly:a,onClick:s,onSavePostClick:d,item:c,clipInfo:u}=e,{isHidden:p,onShow:h}=(0,v.Sl)(!!(n.explicit||n.cover_image_is_explicit||(null===(t=n.videoUpload)||void 0===t?void 0:t.explicit))),{isPaid:m,isFreeSubscribed:f}=(0,B.Y0)(r.id),b=null!==(i=n.coverImagePalette)&&void 0!==i?i:null,g=n.podcastUpload&&!n.videoUpload;return(0,o.BX)(T,{readOnly:a,onClick:s,publication:r,post:n,compact:l,palette:b,children:[(0,o.tZ)(E,{item:c,post:n,publication:r,clipInfo:u,isHidden:p,isFreeSubscribed:f,isPaid:m,compact:l,readOnly:a}),!g&&(0,o.tZ)(V,{post:n,publication:r,palette:b,readOnly:a,onSavePostClick:d,compact:l}),p&&(0,o.tZ)(v.cD,{onShow:h,itemName:"post"})]})}let T=e=>{let{readOnly:t,onClick:i,publication:n,post:r,compact:l,palette:a,children:s}=e,c=R(a),p=!l&&c,h=D({post:r,publication:n,readOnly:t,onClick:i});return(0,o.tZ)(u.W,{children:(0,o.tZ)(_.tu,{as:t?"div":"a",className:d()(z.Z.postAttachment,t&&z.Z.readOnly),position:"relative",bg:"primary",radius:"md",minWidth:0,onClick:h,href:t?void 0:(0,X.uRy)(n,r,{feedViewer:!1}),target:(0,g.P)()?"_blank":void 0,style:p?c:void 0,draggable:!1,showFocus:!0,children:s})})};function M(e){let{post:t,compact:i,readOnly:n}=e;return n||i||!t.videoUpload?n||!t.podcastUpload||t.videoUpload?!i&&t.cover_image?{type:"cover",coverImage:t.cover_image}:null:{type:"audio"}:{type:"video",videoUpload:t.videoUpload}}function E(e){var t,i,r,l;let s=M(e),{item:c,post:u,publication:h,clipInfo:m,isHidden:v,isFreeSubscribed:f,isPaid:b}=e,g=(0,a.sO)(null),Z=null!==(t=u.coverImagePalette)&&void 0!==t?t:null;if((null==s?void 0:s.type)==="video")return(0,o.tZ)(O,{palette:Z,children:(0,o.tZ)(I.L,(0,n._)({clipInfo:m,disableAutoPlay:v,isFreeSubscribed:f,isLiveStream:!!s.videoUpload.live_stream_id&&!m,isSubscribed:b,mediaUpload:s.videoUpload,post:u,pub:h,startMuted:!0,videoPlayerRef:g,videoType:m?"clip":"feed"},A({post:u,item:c,clipInfo:m})))});if((null==s?void 0:s.type)==="audio"){let e=(i=u,r=h,i.section_id&&r.sections&&null!==(l=r.sections.find(e=>e.id===i.section_id))&&void 0!==l?l:null);return(0,o.tZ)(P.lU,{isFreeSubscribed:f,isSubscribed:b,post:u,pub:h,section:e,variant:"notes-embed",trackingProps:A({post:u,item:c})})}return(null==s?void 0:s.type)==="cover"?(0,o.tZ)(O,{palette:Z,borderBottom:"detail",children:(0,o.tZ)(p.e,{className:d()(z.Z.postImage,Z&&z.Z.vibrantPostImage),imageProps:{smartCrop:!0,aspect:"1.91:1"},src:s.coverImage,maxWidth:520,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1})}):null}function A(e){let{post:t,item:i,clipInfo:n}=e;return{entityKey:String(t.id),entityType:"post",primaryEntityKey:null==i?void 0:i.entity_key,primaryEntityType:null==i?void 0:i.type,surface:"feed",contentType:n?"clip":"post",feedItemTrackingParameters:null==i?void 0:i.trackingParameters}}function O(e){var{children:t,palette:i,className:a}=e,s=(0,l._)(e,["children","palette","className"]);return(0,o.tZ)(_.tu,(0,r._)((0,n._)({},s),{className:d()(i?z.Z.vibrantHeader:void 0,a),children:t}))}function V(e){let{post:t,publication:i,palette:n,readOnly:r,onSavePostClick:l,compact:a}=e,s=!a&&n;return(0,o.BX)(_.hs,{gap:12,padding:12,alignItems:"center",children:[(0,o.tZ)(H,{publication:i,post:t,palette:s?n:null,readOnly:r}),!r&&(0,o.tZ)(j,{post:t,palette:s?n:null,onSavePostClick:l})]})}function H(e){let{publication:t,post:i,palette:n,readOnly:r}=e;return(0,o.BX)(_.tu,{gap:2,flex:"grow",minWidth:0,children:[(0,o.BX)(_.hs,{gap:8,paddingBottom:4,alignItems:"center",children:[(0,o.tZ)(C.wk,{pub:t,size:18,radius:"xs"}),(0,o.tZ)(w.xv.B4,{color:n?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,flex:"grow",children:(0,o.tZ)(U,{publication:t,readOnly:r})})]}),(0,o.tZ)(w.xv.B3,{clamp:2,color:n?"vibrance-primary":"primary",weight:"medium",children:i.title})]})}function U(e){let{publication:t,readOnly:i}=e;return i?(0,o.tZ)(o.HY,{children:t.name}):(0,g.P)()?(0,o.tZ)(k.EU,{target:"_blank",href:(0,N.TJI)(t),draggable:!1,children:t.name}):(0,o.tZ)(k.zr,{href:(0,N.TJI)(t),draggable:!1,children:t.name})}function j(e){let{post:t,palette:i,onSavePostClick:n,className:r}=e,{iString:l}=(0,h.M1)(),a=(0,m.aF)(),{requireLogin:s}=(0,x.SJ)(),u=()=>null==s?void 0:s({redirectOverride:(0,X.uRy)(null,t,{urlParams:{triggerSave:!0}})}),{handleClick:p,isSaved:v}=function(e,t){let i=(0,f.v)(e);return{handleClick:n=>{n.preventDefault(),n.stopPropagation(),i(),t&&t(e.is_saved?"unsave":"save"),e.is_saved=!e.is_saved},isSaved:e.is_saved}}(t,n),b=d()(z.Z.saveButton,v&&z.Z.saved,i&&z.Z.vibrant,r),g=i?y.GI:y.hU;return(0,o.tZ)(g,{className:b,priority:"tertiary",size:"sm",onClick:e=>{a?p(e):(e.preventDefault(),u())},"aria-label":l("Save"),children:(0,o.tZ)(c.Z,{size:18})})}function R(e,t){return e?(0,n._)({},(0,b.mX)({palette:e,colorKey:t,defaultColor:"var(--color-dark-bg-primary)"})):void 0}function D(e){let{post:t,publication:i,readOnly:n,onClick:r}=e;return e=>{null==r||r(),!n&&S.L&&(0,Z.Q)(e,(0,X.uRy)(i,t,{noBase:!0,feedViewer:!0}))}}},25642:function(e,t,i){i.d(t,{Kk:()=>N,P$:()=>Y,ju:()=>q});var n=i(7409),r=i(99282),l=i(16584),o=i(6400),a=i(30396),s=i(94184),d=i.n(s),c=i(39693),u=i.n(c),p=i(67884),h=i(92560),m=i(1548),v=i(31852),f=i(98170),b=i(26049),g=i(80878),Z=i(71068),y=i(19081),_=i(58175),C=i(2009),w=i(30343),S=i(64757),x=i(60836),k=i(59101);let B="quote_preferences",I={name:"DarkMuted",alignment:S.a_.Left},P=(0,o.createContext)({preferredTheme:I,setPreferredTheme:()=>{}});function N(e){var t,i,o;let{attachment:s,readOnly:d,onClick:c,onSavePostClick:u,onThemeChange:p,isPermalink:h,isComposing:m,isRestack:v,noRadius:f}=e,{preferredTheme:b,setPreferredTheme:g}=Y(),{postSelection:Z,post:_,publication:C,postSelectionTheme:S}=s,[x,B]=(0,a.eJ)(null!=S?S:m?b:I),P=Z.text.length<100,N=null!==(t=_.coverImagePalette)&&void 0!==t?t:null,L=e=>{let{name:t,alignment:i}=e,n={name:null!=t?t:x.name,alignment:null!=i?i:x.alignment};g(n),B(n),null==p||p(n)},T=W(x.name,{size:{width:520},palette:N,coverImage:null!==(i=_.cover_image)&&void 0!==i?i:void 0}),V=Object.keys(w.r.image).includes(x.name),H=Object.keys(w.r.basic).includes(x.name),U="blurredImage"===x.name,j="tintedImageVibrant"===x.name||"tintedImageMuted"===x.name,R=H?"1.0":.6;return(0,l.BX)(y.tu,{gap:4,paddingTop:v?4:void 0,children:[(0,l.tZ)(X,{readOnly:d,onClick:c,publication:C,post:_,postSelection:Z,className:H?"":k.Z.themed,isRestack:v,noRadius:f,children:(0,l.tZ)(z,{text:Z.text,isShort:P,isImage:V,isBasic:H,publication:C,post:_,onSavePostClick:u,palette:N,alignment:x.alignment,isPermalink:h,isComposing:m,isRestack:v,children:V?j?(0,l.tZ)(A,{style:T||void 0,palette:N,themeName:x.name}):(0,l.tZ)(E,{style:T||void 0,className:U?k.Z.blurred:void 0}):(0,l.tZ)(M,{style:(0,r._)((0,n._)({},T),{"--backdrop-opacity":"".concat(R)})})})}),m&&(0,l.tZ)(O,{palette:N,onColorSelect:e=>L({name:e}),onAlignmentSelect:e=>L({alignment:e}),selectedColorKey:x.name,coverImage:null!==(o=_.cover_image)&&void 0!==o?o:void 0,alignment:x.alignment})]})}function X(e){let{readOnly:t,onClick:i,publication:n,post:r,postSelection:o,children:a,className:s,isRestack:c,noRadius:u}=e,p=t?void 0:(0,x.uR)(n,r,{feedViewer:!1,urlParams:{selection:o.id}});return(0,l.tZ)(y.tu,{className:d()(k.Z.container,s),as:t?"div":"a",position:"relative",onClick:e=>{i&&i(),C.L&&!t&&(0,g.Q)(e,(0,x.uR)(n,r,{noBase:!0,feedViewer:!0,urlParams:{selection:o.id}}))},href:p,draggable:!1,showFocus:!0,animate:!0,radius:u?void 0:c?"sm":"md",overflow:"hidden",children:a})}function z(e){let{text:t,isShort:i,isImage:n,isBasic:r,palette:o,publication:a,post:s,onSavePostClick:c,alignment:u,children:p,isPermalink:h,isComposing:m,isRestack:v}=e;return(0,l.BX)(y.tu,{padding:20,zIndex:1,className:d()(k.Z.header,h&&k.Z.permalink,v&&k.Z.restack),justifyContent:"space-between",gap:24,children:[p,(0,l.tZ)(L,{text:t,isShort:i,isImage:n,isVibrant:!r,alignment:u}),(0,l.tZ)(T,{publication:a,post:s,onSavePostClick:c,isVibrant:!r,palette:o,isComposing:m})]})}function L(e){let{text:t,isShort:i,isImage:n,isVibrant:r,alignment:o=S.a_.Left}=e;return(0,l.BX)(y.tu,{gap:12,justifyContent:"center"===o?"center":"start",alignItems:"center"===o?"center":"start",flex:"grow",children:[(0,l.tZ)(v.Z,{color:r?"var(--color-utility-white)":"var(--color-fg-tertiary)"}),(0,l.tZ)(_.xv,{font:"serif",color:r?"vibrance-primary":"primary",className:d()(k.Z.text,i&&k.Z.short,n&&k.Z.imageText),align:o,children:t})]})}function T(e){var t;let{publication:i,post:n,palette:r,onSavePostClick:o,isVibrant:a,isComposing:s}=e,d=0===(t=n).publishedBylines.length?null:(0,l.tZ)(m.M,{array:t.publishedBylines,limit:3,formatter:e=>e.name}),c=null!=d?d:i.name;return(0,l.BX)(y.gq,{gap:8,alignItems:"center",minWidth:0,height:20,children:[(0,l.tZ)(_.xv.B4,{weight:"regular",color:a?"vibrance-secondary":"secondary",ellipsis:!0,nowrap:!0,flex:"grow",decoration:"hover-underline",children:c}),!s&&o&&(0,l.tZ)(f.s_,{post:n,palette:r&&a?r:null,onSavePostClick:o,className:k.Z.saveButton})]})}function M(e){let{style:t,className:i,children:n}=e;return(0,l.tZ)(Z.xu,{style:t,className:d()(k.Z.backdrop,i),children:n})}function E(e){let{style:t,className:i}=e;return(0,l.tZ)(M,{className:k.Z.faded,children:(0,l.tZ)(Z.xu,{style:t,className:d()(k.Z.imageBackdrop,i)})})}function A(e){let{style:t,className:i,palette:n,themeName:r}=e,o=(0,f.UO)(n||null,"tintedImageVibrant"===r?"DarkVibrant":"DarkMuted");return(0,l.BX)(M,{className:k.Z.faded,children:[(0,l.tZ)(Z.xu,{style:t,className:d()(k.Z.imageBackdrop,k.Z.tinted,i)}),(0,l.tZ)(Z.xu,{style:o,className:k.Z.tint})]})}function O(e){let{palette:t,selectedColorKey:i,coverImage:n,alignment:r,onColorSelect:o,onAlignmentSelect:a}=e;return(0,l.BX)(y.gq,{justifyContent:"space-between",alignItems:"center",bg:"primary",cursor:"default",onClick:e=>e.stopPropagation(),gap:20,paddingTop:8,paddingBottom:16,height:28,children:[(0,l.tZ)(V,{palette:t,onColorSelect:o,selectedColorKey:i,coverImage:n}),(0,l.tZ)(H,{alignment:r,onAlignmentSelect:a})]})}function V(e){let{palette:t,onColorSelect:i,selectedColorKey:n,coverImage:r}=e,o=e=>t=>{t.preventDefault(),t.stopPropagation(),i(e)},a=(0,w.v)({coverImage:r,palette:null!=t?t:void 0}),s=u()(a.map(e=>{let i=W(e,{size:{width:26,height:28},palette:t,coverImage:r});return i?{key:e,style:i}:null}));return(0,l.tZ)(U,{children:s.map(e=>{let{key:i,style:r}=e;return(0,l.tZ)(j,{swatchKey:i,style:r,isSelected:n===i,onClick:o(i),palette:t})})})}function H(e){let{alignment:t,onAlignmentSelect:i}=e,n=S.Hp;return(0,l.tZ)(U,{children:n.map(e=>(0,l.tZ)(F,{alignment:e,onClick:()=>i(e),isSelected:t===e}))})}function U(e){let{children:t}=e;return(0,l.tZ)(y.gq,{gap:8,className:k.Z.swatchesContainer,children:t})}function j(e){let{swatchKey:t,style:i,palette:n,isSelected:r,onClick:o}=e;return t in w.r.image?(0,l.tZ)(R,{swatchKey:t,style:i,onClick:o,isSelected:r,palette:n}):(0,l.tZ)(D,{swatchKey:t,style:i,onClick:o,isSelected:r})}function R(e){let{swatchKey:t,style:i,onClick:n,isSelected:r,palette:o}=e,a="blurredImage"===t,s="tintedImageVibrant"===t||"tintedImageMuted"===t,c=(0,f.UO)(o||null,"tintedImageVibrant"===t?"DarkVibrant":"DarkMuted");return(0,l.BX)(J,{isSelected:r,children:[(0,l.tZ)(Z.xu,{onClick:n,width:28,height:28,title:t,flex:"auto",className:d()(k.Z.swatch,r&&k.Z.selected,a&&k.Z.blurred,s&&k.Z.tinted),style:i},t),s&&(0,l.tZ)(Z.xu,{style:c,className:k.Z.tint})]})}function D(e){var t;let{swatchKey:i,style:n,onClick:r,isSelected:o}=e;return(0,l.tZ)(J,{isSelected:o,children:(0,l.tZ)(Z.xu,{onClick:r,width:28,height:28,title:(t=i,"Theme ".concat(t)),style:n},i)})}function F(e){var t;let{alignment:i,onClick:n,isSelected:r}=e,o=r?"var(--color-fg-primary)":"var(--color-fg-secondary)";return(0,l.tZ)(J,{isSelected:r,className:k.Z.alignmentSwatchContainer,children:(0,l.tZ)(y.hs,{onClick:n,title:(t=i,"Align ".concat(t)),children:i===S.a_.Left?(0,l.tZ)(p.Z,{stroke:o,size:16}):(0,l.tZ)(h.Z,{stroke:o,size:16})},i)})}function J(e){let{isSelected:t,children:i,className:n}=e;return(0,l.tZ)(y.hs,{width:28,height:28,radius:"sm",outline:"detail",flex:"auto",cursor:"pointer",overflow:"hidden",sizing:"border-box",position:"relative",alignItems:"center",justifyContent:"center",animate:!0,className:d()(k.Z.swatchContainer,t&&k.Z.selected,n),tabIndex:0,children:i})}function W(e,t){let{size:i,palette:n,coverImage:r}=t;if(e in w.r.basic)return{background:w.r.basic[e]};if(e in w.r.custom)return{background:"linear-gradient(180deg, ".concat(w.r.custom[e],", ").concat(w.r.custom[e],"), var(--color-dark-bg-primary)")};if(e in w.r.image){if(!r)return;return{backgroundImage:(0,b._)(r,i),backgroundSize:"cover",backgroundPosition:"center"}}return(0,f.UO)(n||null,e)}function Y(){let e=(0,a.qp)(P);if(!e)throw Error("useQuotePreferences must be used within QuotePreferencesProvider");return e}function q(e){let{children:t}=e,[i,r]=(0,a.eJ)(function(){if("undefined"==typeof localStorage)return I;try{let e=localStorage.getItem(B);if(!e)return I;return(0,n._)({},I,JSON.parse(e))}catch(e){return console.error("Error reading quote preferredTheme:",e),I}}()),o=(0,a.I4)(e=>{r(t=>{let i=(0,n._)({},t,e);try{localStorage.setItem(B,JSON.stringify(i))}catch(e){console.error("Storage error:",e)}return i})},[]);return(0,l.tZ)(P.Provider,{value:{preferredTheme:i,setPreferredTheme:o},children:t})}},68733:function(e,t,i){i.d(t,{Fm:()=>o,N1:()=>r,uk:()=>a,zN:()=>l});var n=i(30396);function r(e){let{fileType:t}=e;return t.startsWith("image/")}function l(e){let{fileType:t}=e;return t.startsWith("video/")}function o(e){let{onAddFiles:t,acceptFile:i}=e,r=(0,n.sO)(),l=(0,n.sO)(),[o,a]=(0,n.eJ)(!1),s=e=>Array.from(e.items).filter(e=>"file"===e.kind&&i({fileType:e.type})),d=e=>s(e).length>0,c=e=>{let{current:t}=l;t&&t===e.target&&(l.current=void 0,a(!1))};return{isDragging:o,props:{onDragEnter:e=>{let{current:t}=r,{target:i}=e;t&&i&&i instanceof HTMLElement&&(t===i||t.contains(i))&&e.dataTransfer&&(d(e.dataTransfer)||0===e.dataTransfer.items.length)&&(e.preventDefault(),l.current=i,a(!0))},onDragOver:e=>{l.current&&e.preventDefault()},onDragLeave:c,onDragEnd:c,onDrop:e=>{e instanceof globalThis.DragEvent&&!e.defaultPrevented&&e.dataTransfer&&d(e.dataTransfer)&&0!==s(e.dataTransfer).length&&(e.preventDefault(),t(Array.from(e.dataTransfer.files)),a(!1),l.current=void 0)},ref:r}}}function a(e){let t=o(e),i=(0,n.sO)(!1);return(0,n.d4)(()=>{let{props:{onDragEnter:e,onDragOver:n,onDragLeave:r,onDragEnd:l,onDrop:o}}=t,a=document.body;t.props.ref.current=a;let s={dragenter:t=>{i.current||(i.current=!0,e(t))},dragover:n,dragleave:e=>{i.current&&(e.clientX<=0||e.clientX>=window.innerWidth||e.clientY<=0||e.clientY>=window.innerHeight)&&(i.current=!1,r(e))},dragend:e=>{i.current&&(i.current=!1,l(e))},drop:e=>{i.current&&(i.current=!1,o(e))}};for(let[e,t]of Object.entries(s))a.addEventListener(e,t);return()=>{for(let[e,t]of Object.entries(s))a.removeEventListener(e,t)}},[]),t}},76317:function(e,t,i){i.d(t,{d:()=>u,w:()=>p});var n=i(7409),r=i(30396),l=i(68833),o=i(48980),a=i(98914),s=i(92039),d=i(31406),c=i(84864);let u=e=>{var t,i,o;let{liveStream:a,onGuestJoined:u,updateLiveStream:p}=e,h=(0,s.rG)(),[m,v]=(0,r.eJ)(!a||"idle"===a.liveStream.status||"cancelled"===a.liveStream.status),[f,b]=(0,r.eJ)(null!==(t=null==a?void 0:a.liveStreamGuests)&&void 0!==t?t:[]),[g,Z]=(0,r.eJ)(null!==(i=null==a?void 0:a.liveStreamInformation.currentViewerCount)&&void 0!==i?i:0),[y,_]=(0,r.eJ)(null!==(o=null==a?void 0:a.liveStreamInformation.concurrentViewerCount)&&void 0!==o?o:0),C=(null==a?void 0:a.liveStream.status)==="scheduled";return(0,r.d4)(()=>{a&&(v("idle"===a.liveStream.status||"cancelled"===a.liveStream.status),b(a.liveStreamGuests),Z(a.liveStreamInformation.currentViewerCount),_(a.liveStreamInformation.concurrentViewerCount),u&&a.liveStreamGuests.forEach(e=>{u({message:{type:"live-stream:guest-joined",invited_user:e.user,invited_user_primary_publication:e.pub||void 0}})}))},[a]),(0,r.d4)(()=>{if(a)return null==h?void 0:h.listen({["live-stream:".concat(a.liveStream.id)]:e=>{var t,i,n,r,l;let{data:o}=e;if((null==o?void 0:null===(t=o.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&(Z(o.message.current_viewer_count),_(o.message.current_concurrent_viewer_count)),(null==o?void 0:null===(i=o.message)||void 0===i?void 0:i.type)==="live-stream:ended"&&v(!0),(null==o?void 0:null===(n=o.message)||void 0===n?void 0:n.type)==="live-stream:started"&&(null==p||p(a.liveStream.id)),(null==o?void 0:null===(r=o.message)||void 0===r?void 0:r.type)==="live-stream:guest-joined"){let e=o.message;b(t=>[...t,{user:e.invited_user,pub:e.invited_user_primary_publication}]),u&&u({message:e})}if((null==o?void 0:null===(l=o.message)||void 0===l?void 0:l.type)==="live-stream:guest-left"){let e=o.message;b(t=>t.filter(t=>t.user.id!==e.invited_user.id))}}})},[null==a?void 0:a.liveStream.status,null==a?void 0:a.liveStream.id,u,h]),(0,r.d4)(()=>{a&&(0,l.j)(l.FP.LIVE_STREAM_JOINED,(0,n._)({live_stream_id:a.liveStream.id},(0,c.extractEventAttributionDataFromRecord)((0,d.eY)())))},[null==a?void 0:a.liveStream.id]),(0,r.d4)(()=>{if(!a)return;let e=()=>{(0,l.j)(l.FP.LIVE_STREAM_LEFT,{live_stream_id:a.liveStream.id})};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[a,null==a?void 0:a.liveStream.id]),{guests:f,hasEnded:m,isScheduled:C,viewerCount:g,concurrentViewerCount:y}},p=e=>{let{inputRef:t,liveStream:i}=e,[n,l]=(0,r.eJ)(""),[s,d]=(0,r.eJ)(!1),c=async()=>{if(!s&&n){d(!0);try{await (0,o.rd)("/api/v1/live_stream/".concat(i.liveStream.id,"/message"),{method:"POST",json:{message_body:n.trim(),message_id:(0,a.EH)()}})}catch(e){alert((0,a.zx)(e))}l(""),d(!1),setTimeout(()=>{var e;null===(e=t.current)||void 0===e||e.focus()},0)}};return{message:n,setMessage:l,loading:s,sendMessage:c}}},12765:function(e,t,i){i.d(t,{L:()=>r});var n=i(30396);function r(e,t,i){let[r,l]=(0,n._Y)(e,t,i),o=(0,n.sO)(r);o.current=r;let a=(0,n.Ye)(()=>async e=>{if("function"==typeof e)return await e(a,()=>o.current);l(e)},[]);return[r,a]}},26049:function(e,t,i){i.d(t,{_:()=>r});var n=i(17043);function r(e,t){let{width:i,height:r}=t,a=l.flatMap(t=>o.map(l=>"'".concat((0,n.zF)(e,i*l,{format:t,height:r?r*l:void 0,crop:"fill"}),"' ").concat(l,"x type('image/").concat(t,"')")));return"image-set(".concat(a.join(", "),")")}let l=["avif","jpeg"],o=[1,2,3]},24425:function(e,t,i){i.d(t,{A:()=>o});var n=i(16584),r=i(27506),l=i(87077);function o(e){let{children:t,delay:i=l.$$}=e;return(0,n.tZ)(r.e0,{delay:i,children:t})}},52684:function(e,t,i){i.d(t,{YD:()=>o});var n=i(16584);i(94184),i(95441),i(15771),i(17352),i(86075);var r=i(19081);i(98248);var l=i(63474);function o(e){let{children:t,flex:i}=e;return(0,n.tZ)(r.X2,{gap:8,alignItems:"center",flex:i,children:t})}i(58175),i(96046),(0,l.zo)({display:"flex",direction:"column",gap:16}),(0,l.zo)({display:"flex",direction:{desktop:"row",mobile:"column"},gap:12,alignItems:{desktop:"center",mobile:"stretch"},justifyContent:{desktop:"space-between",mobile:void 0}}),(0,l.zo)({display:"flex",direction:"column",minHeight:280}),(0,l.zo)({display:"flex",direction:"column",gap:32}),(0,l.zo)({display:"flex",direction:"row",gap:12,alignItems:"center",justifyContent:"space-between",wrap:"wrap"}),(0,l.zo)({display:"flex",wrap:"wrap",direction:"row",gap:12,alignItems:"center"})},85566:function(e,t,i){i.d(t,{F:()=>o});var n=i(16584),r=i(80026),l=i(6490);function o(e){let{title:t,subtitle:i,children:o,onClose:a}=e;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(l.xB,{title:t,description:i,showClose:!0,onClose:a}),(0,n.tZ)(l.fe,{children:(0,n.tZ)(r.sg,{gap:12,children:o})})]})}},2207:function(e,t,i){i.d(t,{C:()=>p});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(56232),s=i(19081),d=i(50312),c=i(81043),u=i(41427);function p(e){var{forwardedRef:t,href:i,onClick:p}=e,h=(0,l._)(e,["forwardedRef","href","onClick"]);let{onRefresh:m}=(0,c.SJ)();return(0,o.tZ)(a.Match,{children:e=>{let{path:l}=e,a=i&&(0,u.M)(l,i);return h.native?(0,o.tZ)(s.hs,(0,r._)((0,n._)({as:"a"},h),{href:!a||h.native?i:void 0,onClick:a&&m?m:p,ref:t})):(0,o.tZ)(d.r,(0,r._)((0,n._)({},h),{role:"button",href:a?void 0:i,onClick:a&&m?m:p,ref:t}))}})}},50167:function(e,t,i){i.d(t,{QC:()=>g,_T:()=>b,hC:()=>Z});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(13766),s=i(89689),d=i(95441),c=i(7882),u=i(98914),p=i(15771),h=i(99916),m=i(70379),v=i(60308);function f(e,t,i){let{popToast:a}=(0,m.pm)(),[s,d]=(0,o.eJ)(!1),[p,h]=(0,o.eJ)(void 0),{refetch:f,isLoading:b}=(0,c.ib)({pathname:"/api/v1/@".concat(null==e?void 0:e.handle,"/personal-initialize"),method:"post"}),g=!t&&e.isPersonalEligible,Z=(null==e?void 0:e.isPersonalEligible)||g?async()=>{let e=await f({query:{action:"post"}});e instanceof Error?(console.error(e),a(e=>(0,l.tZ)(m.FN,(0,r._)((0,n._)({},e),{text:"Something went wrong. Please try again."})))):(d(!0),"undefined"!=typeof window&&(window.location.href=e.redirectUrl))}:async()=>(0,u.uX)((0,v.DeU)(),{local_navigation:!1});return(0,o.d4)(()=>{"undefined"!=typeof window&&(null==t?void 0:t.publication)&&!g&&h((0,v.n1t)("".concat((0,v.SVA)({subdomain:t.publication.subdomain}),"/publish/post"),{back:window.location.href,type:null==i?void 0:i.type}))},[t,g]),{onClick:Z,href:p,isLoading:b,willRedirect:s}}function b(e){let{profile:t,publicationUser:i}=e,{iString:n}=(0,d.M1)(),{onClick:r,href:o,isLoading:s,willRedirect:c}=f(t,i);return(0,l.tZ)(h.sN,{leading:(0,l.tZ)(a.Z,{}),disabled:s||c,onClick:r,href:o,children:n("Post")})}function g(e){let{profile:t,publicationUser:i,size:n,flex:r}=e,{iString:o}=(0,d.M1)(),{onClick:a,href:s,isLoading:c,willRedirect:u}=f(t,i);return(0,l.tZ)(p.zx,{priority:"primary",href:s,onClick:a,disabled:c||u,localNavigation:!1,size:n,flex:r,children:o("New post")})}function Z(e){let{profile:t,publicationUser:i}=e,{iString:n}=(0,d.M1)(),{onClick:r,href:o,isLoading:a,willRedirect:c}=f(t,i,{type:"podcast"});return(0,l.tZ)(h.sN,{leading:(0,l.tZ)(s.Z,{}),disabled:a||c,onClick:r,href:o,children:n("Video")})}},33417:function(e,t,i){i.d(t,{S:()=>S});var n=i(16584),r=i(30396),l=i(11607),o=i(95441),a=i(99259),s=i(85095),d=i(6910),c=i(9682),u=i(63018),p=i(71068),h=i(86075),m=i(19081),v=i(69891),f=i(76641),b=i(3021),g=i(81043),Z=i(12461),y=i(70293),_=i(91400),C=i(36186),w=i(84864);function S(e){let{id:t,subpath:i}=e,{subjectProfile:r}=(0,s.Un)({subjectId:t.startsWith("@")?t.replace("@",""):t});return r?(0,n.tZ)(x,{profile:r,subpath:i}):null}function x(e){var t;let{profile:i,subpath:l}=e,{iString:s}=(0,o.M1)(),d=i.name;(0,g.qr)(d||"",{backAction:(0,C.NN)(i),alwaysPinTitle:!0});let[u,p]=(0,c.tv)(),h=(0,_.XA)(),b=null===(t=l.match(/\/([^/]+)$/))||void 0===t?void 0:t[1],Z=(0,r.sO)(null),y=!i.primaryPublication,w=(0,a.M$)().isOnDestination,S=e=>{let t=history.state;p(w?(0,C.Fh)(i,e,{noBase:!0}):"/profile/".concat(e),!0),history.replaceState(t,"")};(0,r.d4)(()=>{y&&"subscribers"===b&&S("followers")},[y,b]);let x=[...y?[]:[{value:"subscribers",label:s("Subscribers")}],{value:"followers",label:i.followerCount&&i.followerCount>0?"".concat(s("Followers")," (").concat((0,f.L)(i.followerCount,"number-truncated"),")"):s("Followers")},{value:"following",label:s("Following")}];return(0,n.BX)(m.tu,{flex:"grow",style:{maxWidth:568},minWidth:0,paddingX:20*!h,paddingTop:20,gap:20,children:[(0,n.tZ)(v.n,{value:b,tabs:x,onChange:S,style:{minHeight:48},ariaLabel:s("Select filter")}),(0,n.tZ)(m.tu,{gap:4,ref:Z,paddingBottom:20,children:"subscribers"===b?(0,n.tZ)(k,{profile:i,bodyRef:Z}):"followers"===b?(0,n.tZ)(B,{profile:i,bodyRef:Z}):(0,n.tZ)(I,{profile:i,bodyRef:Z})})]})}function k(e){let{profile:t,bodyRef:i}=e,{id:r}=t,{data:o,users:a,isLoading:s,error:d}=N(r,"subscribers",i);return(0,n.tZ)(n.HY,{children:d?"Error":s?Array(10).fill(null).map(()=>(0,n.tZ)(b._v,{})):o?0===a.length?(0,n.tZ)(P,{children:(0,n.tZ)(h.u,{icon:(0,n.tZ)(l.Z,{}),title:"No subscribers yet"})}):a.map(e=>(0,n.tZ)(Z.$,{person:e,surface:"profile_Subscribers"},e.id)):null})}function B(e){let{profile:t,bodyRef:i}=e,r=(0,w.guessFirstName)(t.name),{data:l,users:o,isLoading:a,error:s}=N(t.id,"followers",i);return(0,n.tZ)(n.HY,{children:s?"Error":a?Array(10).fill(null).map(()=>(0,n.tZ)(b._v,{})):l?o.length?o.map(e=>(0,n.tZ)(Z.$,{person:e,surface:"profile_Followers"},e.id)):(0,n.tZ)(P,{children:(0,n.tZ)(h.u,{icon:(0,n.tZ)(d.m,{}),title:"No followers yet",description:"Be the first to follow ".concat(r)})}):null})}function I(e){let{profile:t,bodyRef:i}=e,r=(0,w.guessFirstName)(t.name),{data:l,users:o,isLoading:a,error:s}=N(t.id,"following",i);return(0,n.tZ)(n.HY,{children:s?"Error":a?Array(10).fill(null).map(()=>(0,n.tZ)(b._v,{})):l?o.length?o.map(e=>(0,n.tZ)(Z.$,{person:e,surface:"profile_Following"},e.id)):(0,n.tZ)(P,{children:(0,n.tZ)(h.u,{icon:(0,n.tZ)(d.m,{}),title:"".concat(r," isn't following anyone yet")})}):null})}let P=(0,p.E7)({display:"flex",paddingY:48,justifyContent:"center",alignItems:"center",flex:"grow"});function N(e,t,i){var n;let[l,o]=(0,r.eJ)(20),{data:a,isLoading:s,error:d}=(0,u._I)("/api/v1/user/".concat(e,"/subscriber-lists"),{query:{lists:t},deps:[e,t]},{revalidateOnMount:!0}),c=null!==(n=null==a?void 0:a.subscriberLists.flatMap(e=>e.groups.flatMap(e=>e.users)))&&void 0!==n?n:[],p=c.length>l;return(0,y.M)(()=>o(l+20),[l,p],{shouldCheck:p,threshold:640,bodyRef:i}),{data:a,isLoading:s,error:d,users:c.slice(0,l)}}},26960:function(e,t,i){i.d(t,{L:()=>l});var n=i(16584),r=i(58175);let l=(e,t,i)=>{if(!e)return"";if(!t)return e;t.sort((e,t)=>t.length-e.length);let l=RegExp(o(t.join("|")),"ig"),a=e.split(l),s=[...e.matchAll(l)];return a.map((e,t)=>(0,n.BX)(n.HY,{children:[e,t!==a.length-1&&(0,n.BX)(r.xv,{as:"span",weight:i||"bold",fontStyle:"italic",children:[s[t]," "]})]}))},o=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},92039:function(e,t,i){i.d(t,{m:()=>v,rG:()=>m,rw:()=>h});var n=i(27412),r=i(7409),l=i(99282),o=i(16584),a=i(98661),s=i(30396),d=i(48980),c=i(12120);class u{async connect(){try{if(!this.host)throw Error("Attempted to connect without a token");this.ws=new WebSocket(this.host),this.ws.addEventListener("open",()=>{for(let[e,t]of this.channels)t.size>0&&this.send({action:"subscribe",channel:e})}),this.ws.addEventListener("error",e=>{console.error(e),"closed"!==this.connectivityState&&(this.error=Error("Generic error"),this.handleError())}),this.ws.addEventListener("close",e=>{"closed"!==this.connectivityState&&(this.error={code:e.code,reason:e.reason,wasClean:e.wasClean},this.handleError())}),this.ws.addEventListener("message",e=>{"open"!==this.connectivityState&&(this.connectivityState="open",clearTimeout(this.timeoutId),this.reconnectInterval=900,this.notifyConnectivityChange());let t=JSON.parse(e.data),i=(0,l._)((0,r._)({},t),{data:t.data?(0,l._)((0,r._)({},t.data),{message:"string"==typeof t.data.message?JSON.parse(t.data.message):null}):null});if(i.data){var n;for(let e of null!==(n=this.channels.get(i.data.channel))&&void 0!==n?n:[])e(i)}}),clearTimeout(this.timeoutId);let e=this.ws;this.timeoutId=setTimeout(()=>{"connecting"===this.connectivityState&&(this.error=Error("Timeout"),e.close(),this.handleError())},3e4)}catch(e){this.error=e instanceof Error?e:Error(String(e)),this.handleError()}}async refreshToken(){let e;this.channels.size>0&&(e=Array.from(this.channels.keys()).join(","));let t=await (0,d.rd)("/api/v1/realtime/token",{query:{channels:e}});return this.token=t.token,this.expiry=t.expiry,this.host=t.endpoint,this.ws||this.connect(),t}send(e){let{ws:t}=this;if(!t)throw Error("Cannot send without a connection.");t.send(JSON.stringify((0,r._)({token:this.token},e)))}publish(e,t){this.send({action:"publish",channel:e,message:JSON.stringify(t)})}listen(e){let t=[],i=new Set(this.channels.keys());return this.subscriptionQueue=this.subscriptionQueue.then(async()=>{for(let[i,n]of Object.entries(e)){let e=this.channels.get(i);e||(e=new Set,this.channels.set(i,e)),e.add(n),t.push(()=>{var e;let t=this.channels.get(i);null==t||t.delete(n),(null==t?void 0:t.size)===0&&(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(this.send({action:"unsubscribe",channel:i}),this.channels.delete(i))})}let n=(0,c.e5)(new Set(this.channels.keys()),i);if(n.size>0){var r;if(await this.refreshToken(),(null===(r=this.ws)||void 0===r?void 0:r.readyState)===WebSocket.OPEN)for(let e of n)this.send({action:"subscribe",channel:e})}}),()=>{let e=new Set(this.channels.keys());for(let e of t)e();(0,c.e5)(e,new Set(this.channels.keys())).size>0&&this.refreshToken()}}onConnectivityChange(e){return this.connectivityHandlers.add(e),()=>{this.connectivityHandlers.delete(e)}}destroy(){var e;this.channels.clear(),this.connectivityHandlers.clear(),this.connectivityState="closed",null===(e=this.ws)||void 0===e||e.close(),clearTimeout(this.reconnectTimeoutId),clearTimeout(this.timeoutId)}notifyConnectivityChange(){for(let e of this.connectivityHandlers)e(this.connectivityState)}handleError(){console.info("ZyncSocket: Connection closed"),clearTimeout(this.timeoutId),"closed"!==this.connectivityState&&(this.connectivityState="closed",this.notifyConnectivityChange()),0===this.reconnectTimeoutId&&(console.info("ZyncSocket: Attempting to reconnect..."),this.reconnectTimeoutId=setTimeout(()=>{this.reconnectTimeoutId=0,this.reconnectInterval=Math.min(2*this.reconnectInterval,6e4),this.connect()},this.reconnectInterval+.2*this.reconnectInterval))}constructor(){(0,n._)(this,"token",void 0),(0,n._)(this,"expiry",void 0),(0,n._)(this,"host",void 0),(0,n._)(this,"ws",void 0),(0,n._)(this,"connectivityState","closed"),(0,n._)(this,"error",void 0),(0,n._)(this,"reconnectInterval",900),(0,n._)(this,"reconnectTimeoutId",0),(0,n._)(this,"channels",new Map),(0,n._)(this,"connectivityHandlers",new Set),(0,n._)(this,"timeoutId",0),(0,n._)(this,"subscriptionQueue",Promise.resolve())}}let p=(0,a.createContext)(null);function h(e){let{children:t}=e,[i,n]=(0,s.eJ)(null);return(0,s.d4)(()=>{null==i||i.destroy();let e=new u;return n(e),()=>{e.destroy()}},[]),(0,o.tZ)(p.Provider,{value:i,children:t})}function m(){return(0,s.qp)(p)}function v(){var e;let t=m(),[i,n]=(0,s.eJ)(null!==(e=null==t?void 0:t.connectivityState)&&void 0!==e?e:"closed");return(0,s.d4)(()=>null==t?void 0:t.onConnectivityChange(n),[t]),i}},40949:function(e,t,i){i.d(t,{y:()=>d});var n=i(7409),r=i(99282),l=i(16584),o=i(71787),a=i(98914),s=i(70379);function d(){let e=(0,s.pm)();return t=>{(0,a.vQ)(t),e.popToast(e=>(0,l.tZ)(s.FN,(0,r._)((0,n._)({},e),{text:"Copied link to clipboard",Icon:o.Z})))}}},49572:function(e,t,i){i.d(t,{A:()=>O});var n=i(7409),r=i(16584),l=i(98661),o=i(30396),a=i(99282),s=i(98848),d=i(64515);let c=e=>{var{strokeWidth:t=1.5}=e,i=(0,s._)(e,["strokeWidth"]);return(0,r.BX)(d.l,(0,a._)((0,n._)({},i),{strokeWidth:t,name:"SendIcon",svgParams:{height:20,width:20,viewBox:"0 0 20 20"},children:[(0,r.tZ)("path",{d:"M18.3332 1.66699L12.4998 18.3337L9.1665 10.8337L1.6665 7.50033L18.3332 1.66699Z",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.tZ)("path",{d:"M18.3332 1.66699L9.1665 10.8337",strokeLinecap:"round","stroke-linejoin":"round"})]}))};var u=i(95441),p=i(60807),h=i(76317),m=i(80026),v=i(58175),f=i(51776),b=i(95647),g=i(61594),Z=i(63651),y=i(47929);let _=e=>{let{activeLiveStream:t}=e,i=(0,Z.bHR)({liveStreamId:t.liveStream.id,utm_source:y.b3.liveStreamShareButton}),n=t.liveStream.title;return(0,r.tZ)(g.u,{shareName:n,shareUrl:i,trackParams:{live_stream_id:t.liveStream.id},utmCampaign:y.VX.liveStreamPermalink})};var C=i(58865),w=i(56953),S=i(66149),x=i(35702),k=i(48980),B=i(98914),I=i(1844),P=i(6490),N=i(65523),X=i(57641),z=i(60308);function L(){let e=(0,C._)(["We've sent an email to ",". Click the magic link inside to continue."]);return L=function(){return e},e}let T=e=>{let{liveStream:t,isOpen:i,setIsOpen:n,subscriptions:l,setSubscriptions:a}=e,[s,d]=(0,o.eJ)(""),[c,u]=(0,o.eJ)(!1),[h,m]=(0,o.eJ)(!1),{user:v,setUser:f}=(0,p.SE)(),[b,g]=(0,o.eJ)(!1),Z=(0,o.I4)(async()=>{g(!0);try{let e=await (0,k.rd)("/api/v1/reader/signup/just_email",{method:"POST",json:{email:s}});if(e.userExists){m(!0);return}if(e.emailConfirmationRequired){u(!0);return}v||((0,x.a)({user:e.user}),f(e.user))}catch(e){alert((0,B.zx)(e))}finally{g(!1)}},[s,v,x.a,f]);return(0,r.tZ)(P.u_,{isOpen:i,onClose:()=>n(!1),children:c?(0,r.tZ)(E,{email:s,setEmailConfirmationRequired:u}):v?(0,r.tZ)(A,{user:v,liveStream:t,subscriptions:l,setEntryState:x.a,setUser:f,setSubscriptions:a,setIsOpen:n}):(0,r.tZ)(M,{email:s,setEmail:d,onSubmit:Z,isLoading:b,userExistsButIsNotLoggedIn:h,setIsOpen:n})})},M=e=>{let{email:t,setEmail:i,onSubmit:n,isLoading:l,userExistsButIsNotLoggedIn:o,setIsOpen:a}=e,{iString:s}=(0,u.M1)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(P.xB,{title:s("Sign up to join the chat"),description:(0,r.BX)(r.HY,{children:[s("Already have an account? "),(0,r.tZ)(m.hh,{color:"substack",decoration:"hover-underline",href:(0,z.uXE)({redirect:document.location.href}),cursor:"pointer",children:s("Log in")})]}),showClose:!0,onClose:()=>a(!1),icon:(0,r.tZ)(N.ZN,{}),alignItems:"center"}),(0,r.tZ)(P.fe,{children:(0,r.BX)(m.sg,{gap:16,children:[(0,r.tZ)(f.oi,{flex:"grow",placeholder:s("Your email"),value:t,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key&&n()}}),o&&(0,r.BX)(I.y,{align:"center",children:[s("This email is already registered with Substack. "),(0,r.tZ)(m.hh,{decoration:"underline",href:(0,z.uXE)({redirect:document.location.href}),children:s("Sign in")})]}),(0,r.tZ)(X.O,{includeCheckbox:!1,addSignupPreamble:!0,color:"secondary",textAlign:"center"})]})}),(0,r.tZ)(P.mz,{direction:"column",primaryButton:(0,r.tZ)(m.zx,{priority:"primary",type:"submit",loading:l,onClick:()=>{n()},children:s("Sign up")})})]})},E=e=>{let{email:t,setEmailConfirmationRequired:i}=e,{iString:n,iTemplate:l}=(0,u.M1)();return(0,r.BX)(r.HY,{children:[(0,r.tZ)(P.xB,{title:n("Check your email to continue"),showClose:!1,icon:(0,r.tZ)(N.AM,{icon:(0,r.tZ)(w.Z,{size:20})}),alignItems:"center",description:l(L(),null!=t?t:"your email address")}),(0,r.tZ)(P.ex,{}),(0,r.tZ)(m.sg,{padding:16,borderTop:"detail",children:(0,r.tZ)(v.xv.B4,{as:"span",color:"secondary",align:"center",children:(0,r.BX)(r.HY,{children:[n("Didn't get the email? "),(0,r.tZ)(m.hh,{color:"substack",decoration:"hover-underline",onClick:e=>{e.preventDefault(),i(!1)},cursor:"pointer",children:n("Try again")})]})})})]})},A=e=>{let{user:t,liveStream:i,subscriptions:l,setEntryState:o,setUser:s,setSubscriptions:d,setIsOpen:c}=e;return(0,r.tZ)(m.xu,{padding:20,children:(0,r.tZ)(S._0,{className:"profileUpdater-bXuV5M",user:t,pub:i.pub,noSubscribeCta:Object.values(l).some(e=>{var t;return["free_signup","subscribed"].includes(null!==(t=null==e?void 0:e.membership_state)&&void 0!==t?t:"unsubscribed")}),onSuccess:e=>{let t=null==e?void 0:e.body;t&&(o({user:t}),s(t)),t.userDidSignUp&&d(e=>{var t,r,l,o;return(0,a._)((0,n._)({},e),{[null!==(l=null===(t=i.pub)||void 0===t?void 0:t.id)&&void 0!==l?l:0]:(0,a._)((0,n._)({},e[null!==(o=null===(r=i.pub)||void 0===r?void 0:r.id)&&void 0!==o?o:0]),{membership_state:"free_signup"})})}),c(!1)},complete:!0})})},O=e=>{let{liveStream:t,subscriptions:i,setSubscriptions:l}=e,a=(0,o.sO)(null),{message:s,setMessage:d,loading:c,sendMessage:f}=(0,h.w)({inputRef:a,liveStream:t}),[g,Z]=(0,o.eJ)(!1),C=(0,p.aF)(),{iString:w}=(0,u.M1)(),S=!s&&!c,x=!C,k=!(null==C?void 0:C.name),B=t.liveStreamInformation.chatAuthInfo.canSendChat,I=t.liveStreamInformation.chatAuthInfo.acceptableSendChatLevel,P=!1,N=!1;if(!B){let e=t.liveStreamInformation.chatAuthInfo.errorType;"banned"===e?P=!0:"gated"===e&&(N=!0)}let X=(0,z.Zs0)(t.pub,(0,n._)({utm_source:y.b3.liveStreamChat,next:document.location.href,utm_medium:y.lP.web},"founding_subscribers"===I&&{plan:"founding"}));return(0,r.BX)(m.X2,{padding:16,borderTop:"detail",children:[(0,r.tZ)(T,{liveStream:t,isOpen:g,setIsOpen:Z,subscriptions:i,setSubscriptions:l}),x?(0,r.tZ)(U,{onClick:()=>{Z(!0)}}):N?(0,r.tZ)(R,{checkoutUrl:X,chatLevel:I}):k?(0,r.tZ)(j,{onClick:()=>{Z(!0)}}):P?(0,r.tZ)(v.xv.B3,{children:w("You have been banned from commenting on this publication.")}):(0,r.tZ)(V,{ref:a,message:s,setMessage:d,loading:c,onSend:f}),S?(0,r.BX)(r.HY,{children:[(0,r.tZ)(b.d,{liveStream:t}),(0,r.tZ)(_,{activeLiveStream:t})]}):(0,r.tZ)(H,{loading:c,disabled:!s,onClick:f})]})},V=(0,l.forwardRef)((e,t)=>{let{message:i,setMessage:n,loading:l,onSend:o}=e,{iString:a}=(0,u.M1)();return(0,r.tZ)(f.oi,{ref:t,flex:"grow",placeholder:a("Write message..."),maxLength:256,value:i,disabled:l,onKeyDown:e=>{"Enter"===e.key&&o()},onChange:e=>{e.currentTarget.value.length<=256&&n(e.currentTarget.value)}})}),H=e=>{let{loading:t,disabled:i,onClick:n}=e;return(0,r.tZ)(m.hU,{priority:"tertiary",disabled:t||i,onClick:n,children:(0,r.tZ)(c,{width:20,height:20})})},U=e=>{let{onClick:t}=e,{iString:i}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",onClick:t,children:i("Sign up to join chat")})},j=e=>{let{onClick:t}=e,{iString:i}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",onClick:t,children:i("Set up profile to join the chat")})},R=e=>{let{checkoutUrl:t,chatLevel:i}=e,{iString:n}=(0,u.M1)();return(0,r.tZ)(m.zx,{flex:"grow",href:t,children:n("all_subscribers"===i?"Subscribe to join chat":"Upgrade to join chat")})}},78513:function(e,t,i){i.d(t,{M:()=>w,G:()=>I});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(9404),s=i(95441),d=i(60807),c=i(48980),u=i(94874),p=i(15771),h=i(80026),m=i(99916),v=i(6490),f=i(17688),b=i(70379),g=i(33555),Z=i(60308),y=i(47929);let _=e=>e&&"object"==typeof e&&"body"in e&&e.body&&"object"==typeof e.body&&"error"in e.body&&"string"==typeof e.body.error?e.body.error:null,C=[{value:1,label:"1 day"},{value:30,label:"30 days"},{value:90,label:"90 days"},{value:365,label:"1 year"},{value:36135,label:"Forever"}],w=e=>{let{message:t,showBlockButton:i,liveStream:n}=e;return(0,l.BX)(S,{children:[(0,l.tZ)(k,{user:t.user}),(0,l.BX)(h.sg,{gap:4,flex:"grow",children:[(0,l.tZ)(h.xv.B3,{as:"span",children:(0,l.tZ)(x,{user:t.user,showBlockButton:i,liveStream:n})}),(0,l.tZ)(B,{children:t.body})]})]},t.id)},S=e=>{let{children:t,key:i}=e;return(0,l.tZ)(h.X2,{gap:12,className:"message-lU6Uj5",children:t},i)},x=e=>{let{user:t,showBlockButton:i,liveStream:u}=e,{iString:w}=(0,s.M1)(),S=(0,d.aF)(),[x,k]=(0,o.eJ)(!1),[B,I]=(0,o.eJ)(30),{popToast:P}=(0,b.pm)(),N=async()=>{try{let e={surface:"live_stream_chat",expiryDays:B,liveStreamId:null==u?void 0:u.id};await (0,c.rd)("/api/v1/comment_bans/".concat(t.id),{method:"POST",json:e}),P(e=>(0,l.tZ)(b.FN,(0,r._)((0,n._)({},e),{text:w("User banned from commenting")})))}catch(e){console.error("Error banning user from commenting:",JSON.stringify(e)),P(t=>(0,l.tZ)(b.FN,(0,r._)((0,n._)({},t),{text:_(e)||w("Error banning user from commenting")})))}k(!1)};return i&&S?(0,l.BX)(h.gq,{alignItems:"center",justifyContent:"space-between",children:[(0,l.BX)(h.xv.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[(0,l.tZ)(h.hh,{href:(0,Z.NNq)(t,{utm_source:y.b3.liveStreamChat}),target:"_blank",children:I18N.p(t.name)})," ",t.bestseller_tier?(0,l.tZ)(g.UserBadge,{tier:t.bestseller_tier,size:"xs",inline:!0}):null]}),(0,l.BX)(h.M5,{width:20,height:20,children:[(0,l.BX)(m.v2,{trigger:(0,l.tZ)(p.hU,{priority:"quaternary",size:"xs",children:(0,l.tZ)(a.Z,{})}),placement:"bottom-start",children:[(0,l.tZ)(m.sN,{onClick:()=>{window.open((0,Z.NNq)(t,{utm_source:y.b3.liveStreamChat}),"_blank")},children:w("Visit profile")}),(0,l.tZ)(m.sN,{onClick:()=>{k(!0)},children:w("Ban from commenting")})]})," "]}),(0,l.BX)(v.u_,{isOpen:x,onClose:()=>k(!1),children:[(0,l.tZ)(v.xB,{title:w("Ban %1 from commenting?",t.name),showClose:!0,onClose:()=>k(!1)}),(0,l.tZ)(v.fe,{children:(0,l.BX)(h.sg,{gap:16,children:[(0,l.tZ)(h.xv.B3,{children:w("This user will no longer be able to comment or chat in this publication. This action cannot be undone in the livestream UI.")}),(0,l.BX)(h.sg,{gap:8,children:[(0,l.tZ)(h.xv.B3,{fontWeight:"medium",children:w("Ban duration:")}),(0,l.tZ)(f.i,{value:B,onChange:e=>I(Number(e.target.value)),children:C.map(e=>(0,l.tZ)("option",{value:e.value,children:e.label},e.value))})]})]})}),(0,l.tZ)(v.ex,{}),(0,l.tZ)(v.mz,{primaryButton:(0,l.tZ)(p.zx,{priority:"destructive",onClick:N,children:w("Ban from commenting")}),secondaryButton:(0,l.tZ)(p.zx,{priority:"secondary",onClick:()=>k(!1),children:w("Cancel")})})]})]}):(0,l.BX)(h.xv.B3,{as:"span",fontWeight:"medium",display:"inline-block",children:[(0,l.tZ)(h.hh,{href:(0,Z.NNq)(t,{utm_source:y.b3.liveStreamChat}),target:"_blank",children:I18N.p(t.name)})," ",t.bestseller_tier?(0,l.tZ)(g.UserBadge,{tier:t.bestseller_tier,size:"xs",inline:!0}):null]})},k=e=>{let{user:t}=e;return(0,l.tZ)(u.On,{size:24,user:t,utmSource:y.b3.liveStreamChat,linkProps:{target:"_blank"}})},B=e=>{let{children:t}=e;return(0,l.tZ)(h.xv.B3,{as:"span",opacity:90,children:t})},I=e=>{let{message:t}=e,{iPlural:i}=(0,s.M1)(),n=t.users_to_display.length,r=t.users_to_display[0],o=t.users_to_display[1];return n?(0,l.BX)(S,{children:[r?(0,l.tZ)(k,{user:r}):null,(0,l.tZ)(h.xv.B3,{as:"span",lineHeight:24,display:"inline-block",className:"joinedText-pllHZH",children:1===n&&r&&(null==r?void 0:r.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(x,{user:r}),(0,l.tZ)(B,{children:"joined"})]}):2===n&&r&&(null==r?void 0:r.name)&&o&&(null==o?void 0:o.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(x,{user:r}),(0,l.tZ)(B,{children:"and"}),(0,l.tZ)(x,{user:o}),(0,l.tZ)(B,{children:"joined"})]}):n>2&&r&&(null==r?void 0:r.name)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(x,{user:r}),(0,l.tZ)(B,{children:"and"}),(0,l.BX)(B,{children:[I18N.p(t.num_viewers_joined-1)," others joined"]})]}):n>=1?(0,l.BX)(B,{children:[i("%1 person","%1 people",t.num_viewers_joined)," ","joined"]}):null})]},t.id):null}},49883:function(e,t,i){i.d(t,{j:()=>a});var n=i(16584),r=i(80026),l=i(73674),o=i(36889);let a=()=>(0,n.tZ)(r.tu,{overflow:"hidden",flex:"grow",justifyContent:"end",children:(0,n.tZ)(l.T7,{children:Array.from({length:16}).map((e,t)=>(0,n.tZ)(s,{index:t},t))})}),s=e=>{let{index:t}=e;return(0,n.BX)(r.X2,{gap:12,children:[(0,n.tZ)(o.V,{radius:"full",bg:"secondary",width:32,height:32}),(0,n.tZ)(o.V,{radius:"md",bg:"secondary",flex:"grow",height:[40,120,72,64,40,72,40,72,64,120,40,64,40,120,72,64].at(t)})]})}},95647:function(e,t,i){i.d(t,{d:()=>u});var n=i(16584),r=i(30396),l=i(57420),o=i(60807),a=i(48980),s=i(98914),d=i(80026),c=i(92039);let u=e=>{let{liveStream:t}=e,[i,u]=(0,r.eJ)(new Set),[p,h]=(0,r.eJ)(new Set),m=(0,r.sO)(new Set),v=(0,o.aF)(),f=(0,c.rG)(),b=(0,r.I4)(e=>{u(t=>{let i=new Set(t);return i.add(e),m.current=i,i}),setTimeout(()=>{u(t=>{let i=new Set(t);return i.delete(e),m.current=i,i}),h(t=>{let i=new Set(t);return i.delete(e),i})},2750)},[]),g=(0,r.I4)(async()=>{await (0,a.rd)("/api/v1/live_stream/".concat(t.liveStream.id,"/reaction"),{method:"POST",json:{reaction:""}})},[t.liveStream.id]);(0,r.d4)(()=>null==f?void 0:f.listen({["live-stream:".concat(t.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:reaction"&&i.message.user.id!==(null==v?void 0:v.id)&&b(i.message.id)}}),[f]),(0,r.d4)(()=>{i.forEach(e=>{p.has(e)||setTimeout(()=>{h(t=>{let i=new Set(t);return i.add(e),i})},0)})},[i]);let Z=(e,t)=>parseInt(e,16)/parseInt(t,16),y=e=>{let t=Z(e.substring(0,8),"ffffffff"),i=Z(e.substring(9,13),"ffff"),n=Z(e.substring(28,32),"ffff");return"translate(".concat(50*t-25,"px, -").concat(125*i+200,"px) rotate(").concat(30*n-15,"deg)")};return(0,n.tZ)(d.hU,{priority:"quaternary",onClick:()=>{b((0,s.EH)()),g().catch(console.error)},children:(0,n.BX)(d.hs,{position:"relative",children:[Array.from(m.current).map(e=>(0,n.tZ)(l.Z,{className:"heart-v8Jdcb",style:{transform:p.has(e)?y(e):void 0},size:20},e)),(0,n.tZ)(l.Z,{size:20})]})})}},77962:function(e,t,i){i.d(t,{W:()=>eU});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(30396),s=i(56989),d=i(10120),c=i(32351),u=i(95441),p=i(60807),h=i(76317),m=i(68833),v=i(48980),f=i(65205),b=i(98914),g=i(80026),Z=i(98248),y=i(70379),_=i(83034),C=i(6490);let w=e=>{let{isOpen:t,onClose:i}=e,{iString:n}=(0,u.M1)();return(0,o.BX)(C.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(C.xB,{showClose:!0,onClose:i,title:n("Download the Substack app"),description:n("The Substack app is required to use the live stream practice room"),showDivider:!0}),(0,o.tZ)(_.AppInstallContent,{})]})};var S=i(11879),x=i(73674),k=i(30109),B=i(13742),I=i(29032),P=i(94874),N=i(24547),X=i(43254),z=i(60308),L=i(63651),T=i(23945),M=i(47929);function E(){let e=(0,l._)([""," was cancelled"]);return E=function(){return e},e}function A(){let e=(0,l._)([""," has ended"]);return A=function(){return e},e}function O(){let e=(0,l._)(["Subscribed to ",""]);return O=function(){return e},e}function V(){let e=(0,l._)(["See more from ",""]);return V=function(){return e},e}function H(){let e=(0,l._)(["See more from ",""]);return H=function(){return e},e}let U=e=>{let{liveStream:t,guests:i,isSubscribedToAll:l,setSubscriptions:s,subscriptions:d}=e,{iTemplate:c,iString:h}=(0,u.M1)(),{popToast:v}=(0,y.pm)(),[f,Z]=(0,a.eJ)([]),_=(0,p.aF)(),C="cancelled"===t.liveStream.status?c(E(),t.liveStream.title):c(A(),t.liveStream.title);(0,a.d4)(()=>{(0,m.j)(m.FP.LIVE_STREAM_ENDED_SCREEN_VIEWED,{live_stream_id:t.liveStream.id})},[]);let w=(0,a.Ye)(()=>[t,...i].sort((e,t)=>{var i,n,r,l,o,a,s,c;let u=["free_signup","subscribed"].includes(null!==(a=null==d?void 0:null===(i=d[null!==(o=null===(n=e.pub)||void 0===n?void 0:n.id)&&void 0!==o?o:0])||void 0===i?void 0:i.membership_state)&&void 0!==a?a:"unsubscribed")||!e.pub,p=["free_signup","subscribed"].includes(null!==(c=null==d?void 0:null===(r=d[null!==(s=null===(l=t.pub)||void 0===l?void 0:l.id)&&void 0!==s?s:0])||void 0===r?void 0:r.membership_state)&&void 0!==c?c:"unsubscribed")||!t.pub;return u&&!p?1:!u&&p?-1:0}),[]),S=async e=>{let t=!1;if(!_){window.location.href=(0,z.Zs0)(e,{utm_source:M.b3.liveStreamEndCard,next:document.location.href,utm_medium:M.lP.web});return}Z(t=>[...t,e.id]);try{let l=(await (0,X.i9)(e.id,M.b3.liveStreamEndCard,{publication:null!=e?e:void 0,user:_,openPubInNewTabAfterSubscription:!1})).errorMessage;l?v(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:k.Z,text:l}))):i.length?(s(t=>(0,r._)((0,n._)({},t),{[e.id]:(0,r._)((0,n._)({},t[e.id]),{membership_state:"free_signup"})})),v(t=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},t),{Icon:B.Z,text:c(O(),(null==e?void 0:e.name)||(null==_?void 0:_.name)||"")})))):((0,b.uX)((0,z.Zs0)(e,{utm_source:M.b3.liveStreamEndCard,next:document.location.href,utm_medium:M.lP.web,just_signed_up:!0}),{local_navigation:!1}),t=!0)}catch(e){v(t=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},t),{Icon:k.Z,text:(0,b.zx)(e)})))}finally{t||Z(t=>t.filter(t=>t!==e.id))}};if(0===i.length){var x,H,U,R,D,F,J,W;let e=["free_signup","subscribed"].includes(null!==(F=null==d?void 0:null===(x=d[null!==(D=null===(H=t.pub)||void 0===H?void 0:H.id)&&void 0!==D?D:0])||void 0===x?void 0:x.membership_state)&&void 0!==F?F:"unsubscribed"),i=t.pub&&!e;return(0,o.tZ)(I.C,{children:(0,o.BX)(g.sg,{alignItems:"center",gap:20,width:440,children:[(0,o.tZ)(P.qE,{user:t.user,size:80}),(0,o.BX)(g.sg,{alignItems:"center",gap:8,children:[(0,o.tZ)(g.xv.H3,{color:"primary",weight:"medium",textAlign:"center",children:C}),l?null:(0,o.tZ)(g.xv.B4,{color:"tertiary",textAlign:"center",translated:!0,children:"Subscribe to receive a notification when the recording is published"})]}),(0,o.tZ)(g.zx,{priority:"primary",size:"lg",onClick:()=>{i&&t.pub&&S(t.pub)},href:i?void 0:(0,L.NNq)(t.user,{utm_source:M.b3.liveStreamEndCard}),loading:f.includes(null!==(J=null===(U=t.pub)||void 0===U?void 0:U.id)&&void 0!==J?J:0),children:i?h(f.includes(null!==(W=null===(R=t.pub)||void 0===R?void 0:R.id)&&void 0!==W?W:0)?"Subscribing...":"Subscribe"):c(V(),(0,T.Q1)(t.user.name))})]})})}return(0,o.tZ)(I.C,{children:(0,o.BX)(g.sg,{alignItems:"center",gap:24,width:440,children:[(0,o.tZ)(N.H,{direction:"rtl",users:[t.user,...i.map(e=>e.user)],size:60}),(0,o.BX)(g.sg,{alignItems:"center",gap:8,children:[(0,o.tZ)(g.xv.H3,{weight:"medium",color:"primary",textAlign:"center",children:C}),l?null:(0,o.tZ)(g.xv.B4,{color:"tertiary",textAlign:"center",translated:!0,children:"Subscribe to receive a notification when the recording is published"})]}),(0,o.tZ)(g.sg,{gap:12,children:w.map((e,t)=>{var i,n,r,l,a,s,c;return(0,o.tZ)(j,{user:e.user,pub:null!==(l=e.pub)&&void 0!==l?l:void 0,isSubscribing:f.includes(null!==(a=null===(i=e.pub)||void 0===i?void 0:i.id)&&void 0!==a?a:0),isSubscribed:["free_signup","subscribed"].includes(null!==(c=null==d?void 0:null===(n=d[null!==(s=null===(r=e.pub)||void 0===r?void 0:r.id)&&void 0!==s?s:0])||void 0===n?void 0:n.membership_state)&&void 0!==c?c:"unsubscribed"),onSubscribe:S},e.user.id||t)})})]})})},j=e=>{let{user:t,pub:i,isSubscribed:n,isSubscribing:r,onSubscribe:l}=e,{iString:a,iTemplate:s}=(0,u.M1)(),d=i&&!n;return(0,o.BX)(g.X2,{alignItems:"center",gap:12,width:440,children:[(0,o.tZ)(P.qE,{user:t,size:40}),(0,o.BX)(g.sg,{gap:2,children:[(0,o.tZ)(g.xv.B3,{weight:"medium",color:"primary",children:t.name}),t.handle&&(0,o.BX)(g.xv.B5,{color:"primary",lineHeight:16,children:["@",t.handle]})]}),(0,o.tZ)(g.xu,{flex:"grow"}),(0,o.tZ)(g.zx,{priority:d?"primary":"secondary",size:"sm",onClick:()=>{d&&l(i)},href:d?void 0:(0,L.NNq)(t,{utm_source:M.b3.liveStreamEndCard}),loading:r,children:d?a(r?"Subscribing...":"Subscribe"):s(H(),(0,T.Q1)(t.name))})]})};var R=i(33665),D=i(10510),F=i(57641),J=i(31406);let W={primaryPubAvatar:"primaryPubAvatar-DsPqHi",guestPubAvatar:"guestPubAvatar-tqWNqe",subscribeWidget:"subscribeWidget-DmciqD"};function Y(){let e=(0,l._)([""," and ",""]);return Y=function(){return e},e}function q(){let e=(0,l._)(["",", ",", and ",""]);return q=function(){return e},e}function G(){let e=(0,l._)(["",", and ",""]);return G=function(){return e},e}function K(){let e=(0,l._)(["This live stream is only for founding members of ",""]);return K=function(){return e},e}function Q(){let e=(0,l._)(["This live stream is only for paid subscribers of ",""]);return Q=function(){return e},e}function $(){let e=(0,l._)(["This live video is only for subscribers of ",""]);return $=function(){return e},e}function ee(){let e=(0,l._)(["Subscribe to ",""]);return ee=function(){return e},e}let et=e=>{let{liveStream:t,guests:i,subscriptions:n,setSubscriptions:r,open:l,setOpen:a}=e,{title:s,subtitle:d,isOpen:c,showIndividualPubs:u}=el({liveStream:t,guests:i,open:l});if(!t.pub)return null;let p=i.find(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.logo_url});return(0,o.BX)(C.u_,{isOpen:c,onClose:()=>{a(!1)},children:[(0,o.tZ)(C.xB,{showClose:!1,title:s,description:d,alignItems:"center",icon:(0,o.tZ)(ei,{liveStream:t,guestPubWithLogo:p})}),(0,o.tZ)(C.fe,{children:(0,o.tZ)(g.sg,{gap:20,paddingTop:8,children:u?(0,o.BX)(o.HY,{children:[(0,o.tZ)(er,{pub:t.pub,streamingUser:t.user,subscriptions:n,setSubscriptions:r,setOpen:a,foundingUpsell:"only_founding"===t.liveStream.audience,audience:t.liveStream.audience}),i.map(e=>{var i;return(0,o.tZ)(er,{pub:e.pub,streamingUser:e.user,subscriptions:n,setSubscriptions:r,setOpen:a,foundingUpsell:"only_founding"===t.liveStream.audience,audience:t.liveStream.audience},null===(i=e.pub)||void 0===i?void 0:i.id)})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(en,{liveStream:t,guests:i,subscriptions:n}),(0,o.tZ)(g.xu,{children:(0,o.tZ)(F.O,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center"})})]})})})]})},ei=e=>{let{liveStream:t,guestPubWithLogo:i}=e;return i&&"only_free"===t.liveStream.audience?(0,o.BX)(g.xu,{position:"relative",width:80,height:80,children:[(0,o.tZ)(D.wk,{className:W.primaryPubAvatar,pub:t.pub,size:48,radius:"xs"}),(0,o.tZ)(D.wk,{className:W.guestPubAvatar,pub:i.pub||void 0,size:48,radius:"xs"})]}):(0,o.tZ)(D.wk,{pub:t.pub,size:48,radius:"sm",outline:"detail"})},en=e=>{var t,i,n,r,l,a,s,d,c,h,m,v,f,b,g,Z,y,_,C;let{liveStream:w,guests:S,subscriptions:x}=e,{iString:k}=(0,u.M1)(),B=(0,p.aF)();return w.pub?(B&&(B.is_subscribed=["subscribed"].includes(null!==(v=null===(n=x[null!==(m=null===(r=w.pub)||void 0===r?void 0:r.id)&&void 0!==m?m:0])||void 0===n?void 0:n.membership_state)&&void 0!==v?v:"unsubscribed"),B.is_free_subscribed=["free_signup","subscribed"].includes(null!==(b=null===(l=x[null!==(f=null===(a=w.pub)||void 0===a?void 0:a.id)&&void 0!==f?f:0])||void 0===l?void 0:l.membership_state)&&void 0!==b?b:"unsubscribed"),B.is_founding=["subscribed"].includes(null!==(Z=null===(s=x[null!==(g=null===(d=w.pub)||void 0===d?void 0:d.id)&&void 0!==g?g:0])||void 0===s?void 0:s.membership_state)&&void 0!==Z?Z:"unsubscribed")&&!!(null===(c=x[null!==(y=null===(h=w.pub)||void 0===h?void 0:h.id)&&void 0!==y?y:0])||void 0===c?void 0:c.is_founding)),(0,o.tZ)(R.Z,{className:W.subscribeWidget,pub:w.pub,user:B,foundingUpsell:"only_founding"===w.liveStream.audience,freeSignup:["free_signup","subscribed"].includes(null!==(C=null===(t=x[null!==(_=null===(i=w.pub)||void 0===i?void 0:i.id)&&void 0!==_?_:0])||void 0===t?void 0:t.membership_state)&&void 0!==C?C:"unsubscribed"),additionalPubIds:["only_free","everyone"].includes(w.liveStream.audience)?S.map(e=>{var t,i;return null!==(i=null===(t=e.pub)||void 0===t?void 0:t.id)&&void 0!==i?i:0}).filter(e=>!!e):[],source:M.b3.liveStreamPermalink,onSignup:["only_free","everyone"].includes(w.liveStream.audience)?()=>{location.reload()}:void 0,onConfirmationRequired:()=>{alert(k("Check your email to confirm subscription"))}})):null},er=e=>{var t,i;let{pub:l,streamingUser:s,subscriptions:d,setSubscriptions:c,setOpen:h,foundingUpsell:b,audience:Z}=e,{iString:y}=(0,u.M1)(),_=(0,p.aF)(),[C,w]=(0,a.eJ)(!1),S=(0,J.gs)(),x=async e=>{if(e&&!C){if(w(!0),_&&"only_free"===Z){try{await (0,v.rd)("/api/v1/reader/signup/pub",{method:"POST",json:{source:M.b3.liveStreamPermalink,publication_id:null==e?void 0:e.id,email:null==_?void 0:_.email,first_url:f.xY,first_referrer:f.ip,current_url:f.UE,current_referrer:f.xU,first_session_url:f.ac,first_session_referrer:f.qR}}),c(t=>(0,r._)((0,n._)({},t),{[e.id]:{is_founding:!1,membership_state:"free_signup"}})),h(!1),location.reload()}catch(e){(0,m.j)(m.FP.FREE_SIGNUP_FAILED,{reason:e.message,source:M.b3.liveStreamPermalink}),alert("There was an error subscribing. Please try again."),w(!1)}return}try{await (0,v.rd)("/api/v1/reader/signup/pub",{method:"POST",json:(0,n._)({source:M.b3.liveStreamPermalink,publication_id:null==e?void 0:e.id,email:null==_?void 0:_.email,first_url:f.xY,first_referrer:f.ip,current_url:f.UE,current_referrer:f.xU,first_session_url:f.ac,first_session_referrer:f.qR},S)}),(0,m.IU)()}catch(e){(0,m.j)(m.FP.FREE_SIGNUP_FAILED,{reason:e.message,source:M.b3.liveStreamPermalink})}window.location.href=(0,z.Zs0)(e,(0,n._)({utm_source:M.b3.liveStreamChat,next:document.location.href,utm_medium:M.lP.web},b&&{plan:"founding"}))}};return(0,o.BX)(g.gq,{gap:12,alignItems:"center",flex:"grow",children:[(0,o.tZ)(P.qE,{user:s,size:40}),(0,o.BX)(g.sg,{flex:"grow",children:[(0,o.tZ)(g.xv.B4,{fontWeight:"semibold",children:s.name}),(0,o.tZ)(g.xv.B4,{color:"secondary",children:null==l?void 0:l.name})]}),(0,o.tZ)(g.zx,{priority:"primary",size:"sm",disabled:C,onClick:()=>{x(l)},children:y((null===(t=d[null!==(i=null==l?void 0:l.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)==="free_signup"?"Upgrade":"Subscribe")})]})},el=e=>{var t;let{liveStream:i,guests:n,open:r}=e,{iString:l,iTemplate:o}=(0,u.M1)(),a=(null===(t=i.pub)||void 0===t?void 0:t.name)||"",s=n.length>0,d="active"===i.liveStream.status,c=!i.liveStreamInformation.desktopPlaybackUrl,p=r||d&&c,h=e=>{let t=e[0]||"",i=e[1]||"",n=e[2]||"";return 0===e.length?"":1===e.length?t:2===e.length?o(Y(),t,i):3===e.length?o(q(),t,i,n):o(G(),e.slice(0,-1).join(", "),e[e.length-1]||"")},m=()=>[a,...n.map(e=>{var t;return(null===(t=e.pub)||void 0===t?void 0:t.name)||""})].filter(Boolean);return(()=>{switch(i.liveStream.audience){case"only_founding":return{title:s?l("This live stream is for founding members only"):o(K(),a),subtitle:l("Become a founding member to watch now"),isOpen:p,showIndividualPubs:s};case"only_paid":return{title:s?l("This live stream is for paid subscribers only"):o(Q(),a),subtitle:l("Become a paid subscriber to watch now"),isOpen:p,showIndividualPubs:s};case"only_free":return{title:s?l("Subscribe for free to watch now"):o($(),a),subtitle:s?h(m()):l("Subscribe for free to watch now"),isOpen:p,showIndividualPubs:s};default:return{title:o(ee(),h(m())),subtitle:"",isOpen:r,showIndividualPubs:s}}})()};var eo=i(82717),ea=i(37238),es=i(98661),ed=i(94184),ec=i.n(ed),eu=i(41352),ep=i(57391),eh=i(69181);function em(){let e=(0,l._)(["Subscribed to ",""]);return em=function(){return e},e}let ev=e=>{let{liveStream:t,guests:i,subscriptions:n,setSubscriptions:r,isHostsModalOpen:l,setIsHostsModalOpen:a,user:s}=e,{iString:d}=(0,u.M1)();return(0,o.BX)(C.u_,{isOpen:l,onClose:()=>a(!1),children:[(0,o.tZ)(C.xB,{showDivider:!0,showClose:!0,onClose:()=>a(!1),title:d(i.length?"Hosts":"Host")}),(0,o.tZ)(C.fe,{children:(0,o.tZ)(g.tu,{gap:20,children:[t,...i.map(e=>e)].map(e=>{var t,i,l;let{user:a,pub:d}=e,c=["free_signup","subscribed"].includes(null!==(l=null===(t=n[null!==(i=null==d?void 0:d.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)&&void 0!==l?l:"unsubscribed");return(0,o.tZ)(ef,{streamingUser:a,pub:d,isSubscribed:c,subscriptions:n,setSubscriptions:r,user:s})})})})]})},ef=e=>{var t,i;let{streamingUser:l,pub:s,isSubscribed:d,subscriptions:c,setSubscriptions:p,user:h}=e,{iString:m,iTemplate:v}=(0,u.M1)(),{popToast:f}=(0,y.pm)(),[Z,_]=(0,a.eJ)([]);return(0,o.BX)(g.gq,{gap:12,alignItems:"center",children:[(0,o.tZ)(P.On,{user:l,size:40,utmSource:M.b3.liveStreamHostModal,linkProps:{target:"_blank"}}),(0,o.BX)(g.tu,{flex:"grow",children:[(0,o.tZ)(eb,{streamingUser:l}),(0,o.tZ)(eg,{pub:s})]}),s?(0,o.tZ)(g.zx,{size:"sm",priority:"primary",disabled:d||Z.includes(s.id)||["free_signup","subscribed"].includes(null!==(i=null===(t=c[s.id])||void 0===t?void 0:t.membership_state)&&void 0!==i?i:"unsubscribed"),onClick:async()=>{if(!h){window.location.href=(0,z.Zs0)(s,{utm_source:M.b3.liveStreamHostModal,next:document.location.href,utm_medium:M.lP.web});return}if(s.id){_(e=>[...e,s.id]);try{await (0,X.i9)(s.id,M.b3.liveStreamPermalink,{publication:null!=s?s:void 0,user:h,openPubInNewTabAfterSubscription:!1}),p(e=>(0,r._)((0,n._)({},e),{[s.id]:(0,r._)((0,n._)({},e[s.id]),{membership_state:"free_signup"})})),f(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:B.Z,text:v(em(),null==s?void 0:s.name)})))}catch(e){alert((0,b.zx)(e))}_(e=>e.filter(e=>e!==s.id))}},children:m(d?"Subscribed":"Subscribe")}):null]},l.id)},eb=e=>{let{streamingUser:t}=e;return(0,o.tZ)(g.xv.B4,{fontWeight:"semibold",children:(0,o.tZ)(g.hh,{href:(0,z.NNq)(t,{utm_source:M.b3.liveStreamHostModal}),target:"_blank",children:t.name})})},eg=e=>{let{pub:t}=e;return t?(0,o.tZ)(g.xv.B4,{color:"secondary",children:(0,o.tZ)(g.hh,{href:(0,L.SVA)(t,{forceSubdomain:!0}),target:"_blank",children:t.name})}):null},eZ={subscribeButton:"subscribeButton-CtrItP",authorPill:"authorPill-wbOG0c",viewerCountContainer:"viewerCountContainer-XTwz_D",closeButtonHidden:"closeButtonHidden-PBnS9i",liveStreamHeaderViewerCount:"liveStreamHeaderViewerCount-UDCSmc",liveStreamHeader:"liveStreamHeader-OLlNVf"},ey=e=>{let{closeHref:t,liveStream:i,handle:n,guests:r,showSubscribeAllButton:l,isSubscribing:s,onSubscribeAll:d,hasEnded:c,viewerCount:u,subscriptions:p,setSubscriptions:h,user:m,isScheduled:v}=e,[f,b]=(0,a.eJ)(!1),{getExperimentVariant:Z}=(0,ep.jc)(),y=Z("live_stream_guest_overlay");return(0,o.BX)(o.HY,{children:[(0,o.tZ)(ev,{liveStream:i,guests:r,subscriptions:p,setSubscriptions:h,isHostsModalOpen:f,setIsHostsModalOpen:b,user:m}),(0,o.BX)(I.C,{children:[document.body&&(0,es.createPortal)((0,o.tZ)(eP,{children:(0,o.BX)(g.X2,{minWidth:0,alignItems:"center",gap:8,children:[(0,o.tZ)(ew,{closeHref:t,handle:n}),!y||"control"===y||i.liveStream.is_rtmp?(0,o.tZ)(e_,{liveStream:i,guests:r,showSubscribeAllButton:l,isSubscribing:s,onSubscribeAll:d,setIsHostsModalOpen:b}):null]})}),document.body),c||v?null:(0,o.tZ)(g.X2,{position:"absolute",padding:16,gap:8,alignItems:"start",minWidth:0,className:eZ.liveStreamHeaderViewerCount,children:(0,o.BX)(eI,{children:[(0,o.tZ)(eh.Qn,{}),(0,o.tZ)(eh.C,{viewerCount:u})]})})]})]})},e_=e=>{var t;let{liveStream:i,guests:n,showSubscribeAllButton:r,isSubscribing:l,onSubscribeAll:a,setIsHostsModalOpen:s}=e;return(0,o.BX)(ek,{children:[(0,o.BX)(eB,{onClick:()=>s(!0),children:[(0,o.tZ)(N.H,{users:[i.user,...n.map(e=>e.user)],size:28,direction:"rtl"}),(0,o.BX)(g.sg,{paddingRight:20*!r,minWidth:0,children:[(0,o.tZ)(eS,{children:[i.user.name,...n.map(e=>e.user.name)].filter(Boolean).join(", ")}),(0,o.tZ)(ex,{children:[null===(t=i.pub)||void 0===t?void 0:t.name,...n.map(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.name})].filter(Boolean).join(", ")})]})]}),r?(0,o.tZ)(eC,{isSubscribing:l,onSubscribeAll:a}):null]})},eC=e=>{let{isSubscribing:t,onSubscribeAll:i}=e,{iString:n}=(0,u.M1)();return(0,o.tZ)(g.zx,{className:eZ.subscribeButton,priority:"primary",size:"sm",disabled:t,onClick:i,children:n("Subscribe")})},ew=e=>{let{closeHref:t,handle:i}=e;return(0,o.tZ)(g.hU,{href:t,size:"sm",priority:"quaternary",rounded:!0,className:ec()(i.active&&eZ.closeButtonHidden),children:(0,o.tZ)(eu.Z,{})})},eS=e=>{let{children:t}=e;return(0,o.tZ)(g.xv.B4,{color:"vibrance-primary",weight:"medium",ellipsis:!0,children:t})},ex=e=>{let{children:t}=e;return(0,o.tZ)(g.xv.B5,{color:"vibrance-secondary",opacity:70,ellipsis:!0,lineHeight:16,children:t})},ek=(0,g.zo)({display:"flex",direction:"row",alignItems:"center",gap:16,radius:"full",minWidth:0,paddingLeft:4,className:eZ.authorPill,pressable:"sm",wrap:"nowrap",userSelect:"none"}),eB=(0,g.zo)({display:"flex",direction:"row",gap:8,cursor:"pointer",alignItems:"center",minWidth:0,paddingLeft:2,height:40,sizing:"border-box"}),eI=(0,g.zo)({display:"flex",direction:"row",gap:8,alignItems:"center",className:eZ.viewerCountContainer}),eP=(0,g.zo)({display:"flex",direction:"row",position:"absolute",padding:16,gap:8,alignItems:"start",minWidth:0,className:eZ.liveStreamHeader});var eN=i(98012),eX=i(14773),ez=i(26111),eL=i(36186);function eT(){let e=(0,l._)(["Subscribed to "," and ",""]);return eT=function(){return e},e}function eM(){let e=(0,l._)(["Subscribed to ",", ",", and ",""]);return eM=function(){return e},e}function eE(){let e=(0,l._)(["Subscribed to ",", and ",""]);return eE=function(){return e},e}function eA(){let e=(0,l._)(["LIVE SOON: ",""]);return eA=function(){return e},e}function eO(){let e=(0,l._)(["LIVE NOW: ",""]);return eO=function(){return e},e}function eV(){let e=(0,l._)(["Starting "," at ",""]);return eV=function(){return e},e}function eH(){let e=(0,l._)([""," on Substack"]);return eH=function(){return e},e}function eU(e){var t,i;let{id:l,liveStream:g,liveStreamInvite:_,subscriptionToLiveStreamPub:C,subscriptionsToLiveStreamInvitedPub:k,smsInvite:B}=e,{liveStream:I,setLiveStream:P}=(0,S.R)({liveStream:g||null}),[N,X]=(0,a.eJ)(!!(0,ez.x)("show_test_run"));(0,a.d4)(()=>{l&&(0,v.rd)("/api/v1/live_stream/".concat(l)).then(e=>{P(e.activeLiveStream),e.activeLiveStream.pub&&(0,v.rd)("/api/v1/subscription/".concat(e.activeLiveStream.pub.id)).then(t=>{t.subscription&&A(i=>{var l,o;return e.activeLiveStream.pub?(0,r._)((0,n._)({},i),{[e.activeLiveStream.pub.id]:(0,r._)((0,n._)({},t.subscription),{role:null!==(o=null===(l=t.publicationUser)||void 0===l?void 0:l.role)&&void 0!==o?o:null})}):i})})})},[l]);let{iString:L,iTemplate:T}=(0,u.M1)(),[E,A]=(0,a.eJ)((0,n._)({},C?{[null!==(i=null==I?void 0:null===(t=I.pub)||void 0===t?void 0:t.id)&&void 0!==i?i:0]:C}:{},k));(0,a.d4)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&"scheduled"===I.liveStream.status&&(0,m.j)(m.FP.LIVE_STREAM_SCHEDULED_PERMALINK_VISITED,{liveStreamId:I.liveStream.id,addToCalendar:(0,ez.x)("add_to_calendar")})},[null==I?void 0:I.liveStream.scheduled_at,null==I?void 0:I.liveStream.status]);let O=(0,a.I4)(e=>{let{message:t}=e;if(t.invited_user_primary_publication&&!E[t.invited_user_primary_publication.id]){let e=t.invited_user_primary_publication;(0,v.rd)("/api/v1/subscription/".concat(e.id)).then(t=>{t.subscription&&A(i=>{var l,o;return(0,r._)((0,n._)({},i),{[e.id]:(0,r._)((0,n._)({},t.subscription),{role:null!==(o=null===(l=t.publicationUser)||void 0===l?void 0:l.role)&&void 0!==o?o:null})})})})}},[E]),{guests:V,hasEnded:H,isScheduled:j,viewerCount:R}=(0,h.d)({liveStream:I,onGuestJoined:O}),D=(0,d.r)(),F=(0,p.aF)(),[J,W]=(0,a.eJ)(!1),[Y,q]=(0,a.eJ)(!1),{popToast:G}=(0,y.pm)(),K=[null==I?void 0:I.pub,...V.map(e=>e.pub)].filter(e=>!!e).every(e=>{var t,i;return["free_signup","subscribed"].includes(null!==(i=null===(t=E[e.id])||void 0===t?void 0:t.membership_state)&&void 0!==i?i:"unsubscribed")}),Q=async()=>{var e,t;if(!F){W(!0);return}let i=[null==I?void 0:null===(e=I.pub)||void 0===e?void 0:e.id,...V.map(e=>{var t;return null===(t=e.pub)||void 0===t?void 0:t.id})].filter(Boolean);if(i.length){q(!0);try{let{subscriptionResults:e}=await (0,v.rd)("/api/v1/bulk_signup",{method:"POST",json:{publications:i,source:M.b3.liveStreamPermalink,current_referrer:f.xU,current_url:f.UE,first_referrer:f.ip,first_session_referrer:f.qR,first_session_url:f.ac,first_url:f.xY}});if(e.every(e=>e.requires_confirmation)){alert(L("Check your email to confirm subscription"));return}A(e=>Object.fromEntries([...i.map(e=>[e,{is_founding:!1,membership_state:"free_signup",role:null}]),...Object.entries(e).map(e=>{let[t,i]=e;return[t,(0,r._)((0,n._)({},i),{membership_state:["free_signup","subscribed"].includes(null==i?void 0:i.membership_state)?null==i?void 0:i.membership_state:"free_signup"})]})]));let l=[null==I?void 0:I.pub,...V.map(e=>e.pub)].filter(e=>{var t,i,n;return!["free_signup","subscribed"].includes(null!==(n=null==E?void 0:null===(t=E[null!==(i=null==e?void 0:e.id)&&void 0!==i?i:0])||void 0===t?void 0:t.membership_state)&&void 0!==n?n:"unsubscribed")}).map(e=>null==e?void 0:e.name).filter(Boolean),a=0===l.length?"":1===l.length&&l[0]?"Subscribed to ".concat(l[0]):2===l.length&&l[0]&&l[1]?T(eT(),l[0],l[1]):3===l.length&&l[0]&&l[1]&&l[2]?T(eM(),l[0],l[1],l[2]):T(eE(),l.slice(0,-1).join(", "),null!==(t=l[l.length-1])&&void 0!==t?t:"");G(e=>(0,o.tZ)(y.FN,(0,r._)((0,n._)({},e),{Icon:s.Z,text:a})))}catch(e){alert((0,b.zx)(e))}q(!1)}};if(!(null==I?void 0:I.liveStream.id))return(0,o.tZ)(Z.$j,{});let $=(0,ez.x)("fromPub")?(0,eX.SV)(null==I?void 0:I.pub):(0,eL.NN)(null==I?void 0:I.user,{utm_source:M.b3.liveStreamExit});return(0,o.BX)(d.I,{handle:D,children:[(0,o.tZ)(c.Metadata,{title:j?T(eA(),I.liveStream.title):T(eO(),I.liveStream.title),description:j?T(eV(),(0,eN.Z)(I.liveStream.scheduled_at).tz("America/New_York").format("MMM D"),(0,eN.Z)(I.liveStream.scheduled_at).tz("America/New_York").format("h:mm A z")):T(eH(),I.user.name),image:(0,z.VCE)(I),isLargeImage:!0}),(0,o.tZ)(w,{isOpen:N,onClose:()=>X(!1)}),(0,o.tZ)(et,{liveStream:I,guests:V,subscriptions:E,setSubscriptions:A,open:J,setOpen:W}),(0,o.BX)(eR,{children:[(0,o.BX)(ej,{children:[(0,o.tZ)(ey,{closeHref:$,liveStream:I,handle:D,guests:V,showSubscribeAllButton:!K&&!H,isSubscribing:Y,onSubscribeAll:Q,hasEnded:H,isScheduled:j,viewerCount:R,subscriptions:E,setSubscriptions:A,user:F}),H?(0,o.tZ)(U,{liveStream:I,guests:V,isSubscribedToAll:K,subscriptions:E,setSubscriptions:A}):j?(0,o.tZ)(eo.H,{liveStreamInvite:_,liveStream:I,subscriptions:E,smsInvite:B}):I.liveStreamInformation.desktopPlaybackUrl?(0,o.tZ)(ea.P,{liveStream:I,handle:D,guests:V,autoPlay:!0,subscriptions:E,setSubscriptions:A}):(0,o.tZ)(ea.r,{liveStream:I})]}),H||j?null:(0,o.tZ)(x.aG,{liveStream:I,handle:D,subscriptions:E,setSubscriptions:A})]})]})}let ej=(0,g.zo)({display:"flex",direction:"row",flex:"grow",justifyContent:"center",alignItems:"center",className:"videoContainer-bFmoVz"}),eR=(0,g.zo)({display:"flex",direction:"row",flex:"grow",alignItems:"center",className:"container-hbjpWY"})},82717:function(e,t,i){i.d(t,{H:()=>ei});var n=i(7409),r=i(99282),l=i(58865),o=i(16584),a=i(6400),s=i(30396),d=i(34622),c=i(31850),u=i(41352),p=i(13742),h=i(83034),m=i(29032),v=i(98848),f=i(64515);let b=e=>{var{size:t=24,fill:i="#363737"}=e,l=(0,v._)(e,["size","fill"]);return(0,o.tZ)(f.l,(0,r._)((0,n._)({},l),{name:"HandIcon",svgParams:{height:t,width:t,viewBox:"0 0 24 24",fill:"none"},children:(0,o.tZ)("path",{d:"M3.83496 14.9536V6.80225C3.83496 6.52002 3.9318 6.28206 4.12549 6.08838C4.31917 5.89469 4.55713 5.79785 4.83936 5.79785C5.11605 5.79785 5.35124 5.89469 5.54492 6.08838C5.73861 6.28206 5.83545 6.52002 5.83545 6.80225V11.9238C5.93506 11.863 6.0402 11.8021 6.15088 11.7412C6.26709 11.6803 6.38607 11.6195 6.50781 11.5586V4.2124C6.50781 3.93018 6.60465 3.69499 6.79834 3.50684C6.99202 3.31315 7.22721 3.21631 7.50391 3.21631C7.7806 3.21631 8.01579 3.31315 8.20947 3.50684C8.40316 3.69499 8.5 3.93018 8.5 4.2124V10.9941C8.61621 10.972 8.73242 10.9554 8.84863 10.9443C8.96484 10.9277 9.08105 10.9139 9.19727 10.9028V3.52344C9.19727 3.24121 9.29134 3.00326 9.47949 2.80957C9.67318 2.61589 9.91113 2.51904 10.1934 2.51904C10.4756 2.51904 10.7135 2.61589 10.9072 2.80957C11.1009 3.00326 11.1978 3.24121 11.1978 3.52344V10.9941C11.314 11.0163 11.4274 11.0439 11.5381 11.0771C11.6488 11.1048 11.7567 11.138 11.8618 11.1768V4.69385C11.8618 4.41162 11.9559 4.17367 12.144 3.97998C12.3377 3.7863 12.5757 3.68945 12.8579 3.68945C13.1401 3.68945 13.3753 3.7863 13.5635 3.97998C13.7572 4.17367 13.854 4.41162 13.854 4.69385V13.5093C13.854 13.6421 13.8761 13.7334 13.9204 13.7832C13.9702 13.8275 14.0311 13.8496 14.103 13.8496C14.1639 13.8496 14.222 13.8275 14.2773 13.7832C14.3327 13.7389 14.3853 13.6559 14.4351 13.5342L15.6055 11.0024C15.777 10.6427 15.9652 10.3771 16.1699 10.2056C16.3802 10.034 16.632 9.96484 16.9253 9.99805C17.1854 10.0257 17.3874 10.1309 17.5312 10.3135C17.6807 10.4906 17.7415 10.7091 17.7139 10.9692C17.7028 11.1242 17.6585 11.3345 17.5811 11.6001C17.5091 11.8657 17.4233 12.1535 17.3237 12.4634C17.2297 12.7733 17.1383 13.0693 17.0498 13.3516C16.9391 13.7057 16.8174 14.0848 16.6846 14.4888C16.5518 14.8927 16.4051 15.305 16.2446 15.7256C16.0897 16.1406 15.9154 16.5474 15.7217 16.9458C15.5335 17.3387 15.3288 17.7012 15.1074 18.0332C14.5264 19.0182 13.8097 19.7542 12.9575 20.2412C12.1108 20.7337 11.0705 20.98 9.83643 20.98C8.97868 20.98 8.18457 20.8444 7.4541 20.5732C6.72363 20.3021 6.08724 19.9064 5.54492 19.3862C5.00814 18.866 4.58757 18.2352 4.2832 17.4937C3.98438 16.7466 3.83496 15.8999 3.83496 14.9536Z",stroke:"none",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})}))},g=e=>{var{size:t=24,fill:i="#EEEEEE"}=e,l=(0,v._)(e,["size","fill"]);return(0,o.tZ)(f.l,(0,r._)((0,n._)({},l),{name:"KeyOffIcon",svgParams:{height:t,width:t,stroke:"none",viewBox:"0 0 33 33"},children:(0,o.tZ)("path",{d:"M16.5 4.34766C15.5781 4.34766 14.7266 4.54297 13.9453 4.93359C13.1719 5.31641 12.5117 5.83984 11.9648 6.50391C11.418 7.16016 11.0391 7.91016 10.8281 8.75391L9.19922 7.125C9.58984 6.17188 10.1445 5.32813 10.8633 4.59375C11.5898 3.85937 12.4336 3.28516 13.3945 2.87109C14.3633 2.45703 15.3984 2.25 16.5 2.25C17.6016 2.25 18.6328 2.45703 19.5938 2.87109C20.5547 3.27734 21.3984 3.84375 22.125 4.57031C22.8594 5.29688 23.4297 6.14062 23.8359 7.10156C24.2422 8.0625 24.4453 9.08984 24.4453 10.1836C24.4453 11.7227 24.0195 13.125 23.168 14.3906C22.3242 15.6484 21.1172 16.6719 19.5469 17.4609L17.9531 15.8555C18.8438 15.5977 19.6172 15.1875 20.2734 14.625C20.9297 14.0625 21.4375 13.4023 21.7969 12.6445C22.1641 11.8789 22.3477 11.0586 22.3477 10.1836C22.3477 9.10547 22.0859 8.125 21.5625 7.24219C21.0391 6.35938 20.3359 5.65625 19.4531 5.13281C18.5703 4.60937 17.5859 4.34766 16.5 4.34766ZM16.5 9.86719C15.9766 9.86719 15.5273 9.68359 15.1523 9.31641C14.7852 8.94141 14.6016 8.49219 14.6016 7.96875C14.6016 7.44531 14.7852 7 15.1523 6.63281C15.5195 6.26563 15.9688 6.08203 16.5 6.08203C17.0234 6.08203 17.4727 6.26563 17.8477 6.63281C18.2227 7 18.4102 7.44531 18.4102 7.96875C18.4102 8.49219 18.2227 8.94141 17.8477 9.31641C17.4727 9.68359 17.0234 9.86719 16.5 9.86719ZM17.3906 31.3359C17.1328 31.5859 16.8359 31.7031 16.5 31.6875C16.1719 31.6719 15.875 31.5508 15.6094 31.3242L13.6992 29.6602C13.5117 29.5039 13.3789 29.3125 13.3008 29.0859C13.2305 28.8672 13.1953 28.6523 13.1953 28.4414V18.2695L15.2344 20.2969V27.9844L16.5 29.25L18.9141 26.8008L17.332 25.2422V22.8633L21.0586 26.5781C21.1914 26.7188 21.2617 26.8945 21.2695 27.1055C21.2852 27.3242 21.1992 27.5273 21.0117 27.7148L17.3906 31.3359ZM4.37109 7.20703C4.19141 7.02734 4.10156 6.80859 4.10156 6.55078C4.10156 6.28516 4.19141 6.0625 4.37109 5.88281C4.55078 5.70313 4.77344 5.61719 5.03906 5.625C5.29688 5.625 5.51562 5.71484 5.69531 5.89453L27.1289 27.3047C27.3086 27.4844 27.3984 27.7031 27.3984 27.9609C27.3984 28.2188 27.3086 28.4414 27.1289 28.6289C26.9492 28.8008 26.7305 28.8867 26.4727 28.8867C26.2148 28.8945 25.9922 28.8086 25.8047 28.6289L4.37109 7.20703Z",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})}))},Z=e=>{let{size:t=24,fill:i="#363737"}=e;return(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",children:(0,o.tZ)("path",{d:"M19.0889 13.667C19.0889 14.4251 18.9754 15.0892 18.7485 15.6592C18.5216 16.2292 18.1536 16.7632 17.6445 17.2612C17.141 17.7537 16.4741 18.2573 15.644 18.772C14.814 19.2922 13.7985 19.8732 12.5977 20.5151C12.4925 20.5705 12.3846 20.612 12.2739 20.6396C12.1688 20.6729 12.0775 20.6895 12 20.6895C11.9225 20.6895 11.8285 20.6729 11.7178 20.6396C11.6126 20.612 11.5047 20.5705 11.394 20.5151C10.1932 19.8732 9.17773 19.2949 8.34766 18.7803C7.52311 18.2656 6.85628 17.762 6.34717 17.2695C5.84359 16.7715 5.47559 16.2375 5.24316 15.6675C5.01628 15.092 4.90283 14.4251 4.90283 13.667V7.44971C4.90283 6.91292 5.00521 6.51725 5.20996 6.2627C5.42025 6.00814 5.75228 5.78402 6.20605 5.59033C6.3776 5.51286 6.62386 5.41602 6.94482 5.2998C7.27132 5.17806 7.63102 5.04801 8.02393 4.90967C8.42236 4.77132 8.81527 4.63298 9.20264 4.49463C9.59554 4.35628 9.94971 4.23177 10.2651 4.12109C10.5861 4.01042 10.8324 3.92741 11.0039 3.87207C11.1644 3.8278 11.3304 3.79183 11.502 3.76416C11.6735 3.73096 11.8395 3.71436 12 3.71436C12.1549 3.71436 12.321 3.73096 12.498 3.76416C12.6751 3.79736 12.8411 3.83333 12.9961 3.87207C13.1621 3.92188 13.4056 4.00212 13.7266 4.11279C14.0475 4.21794 14.4045 4.33968 14.7974 4.47803C15.1903 4.61637 15.5804 4.75749 15.9678 4.90137C16.3607 5.03971 16.7176 5.16976 17.0386 5.2915C17.3651 5.41325 17.6169 5.51286 17.7939 5.59033C18.2533 5.77848 18.5825 6.0026 18.7817 6.2627C18.9865 6.51725 19.0889 6.91292 19.0889 7.44971V13.667ZM11.8755 18.7388V5.46582C11.8201 5.46582 11.7648 5.47412 11.7095 5.49072C11.6541 5.50179 11.5794 5.52393 11.4854 5.55713C11.2861 5.6346 11.0399 5.72868 10.7466 5.83936C10.4588 5.9445 10.1462 6.05794 9.80859 6.17969C9.47103 6.30143 9.12793 6.42318 8.7793 6.54492C8.43066 6.66667 8.09587 6.78564 7.7749 6.90186C7.45947 7.01253 7.18278 7.11214 6.94482 7.20068C6.82308 7.24495 6.74284 7.30583 6.7041 7.3833C6.66536 7.46077 6.646 7.57422 6.646 7.72363V13.3599C6.646 13.952 6.729 14.4556 6.89502 14.8706C7.06104 15.2856 7.33219 15.673 7.7085 16.0327C8.09033 16.3869 8.59391 16.7632 9.21924 17.1616C9.8501 17.5601 10.6248 18.0332 11.5435 18.5811C11.6209 18.6309 11.6846 18.6668 11.7344 18.689C11.7842 18.7111 11.8312 18.7277 11.8755 18.7388Z",fill:i,style:"fill:".concat(i,";fill-opacity:1;")})})};var y=i(33665),_=i(95441),C=i(60807),w=i(68833),S=i(48980),x=i(98914),k=i(60590),B=i(94874),I=i(80026),P=i(96745),N=i(6490),X=i(14518),z=i(70379),L=i(79567),T=i(60308),M=i(26111),E=i(63651),A=i(81821),O=i(47929);let V={headerIcon:"headerIcon-vFzD3Y",divider:"divider-RTh_Tm",declineButton:"declineButton-lXoT5b"};function H(){let e=(0,l._)(["Hey "," - Please accept this invite to my scheduled live stream on "," at "," in the Substack app: ",". Youll need the Substack iPhone or Android app with notifications on."]);return H=function(){return e},e}function U(){let e=(0,l._)(["Please accept this invite to my scheduled live stream on "," at "," in the Substack app: ",". Youll need the Substack iPhone or Android app with notifications on."]);return U=function(){return e},e}function j(){let e=(0,l._)(["Please accept this invite to my scheduled live stream on "," at "," in the Substack app: ",". Youll need the Substack iPhone or Android app with notifications on."]);return j=function(){return e},e}function R(){let e=(0,l._)([""," invited you to co-host this live video"]);return R=function(){return e},e}function D(){let e=(0,l._)([""," will start on "," at ",""]);return D=function(){return e},e}function F(){let e=(0,l._)([""," is ready for your live video"]);return F=function(){return e},e}function J(){let e=(0,l._)([""," needs the Substack app"]);return J=function(){return e},e}function W(){let e=(0,l._)(["Successfully blocked ",""]);return W=function(){return e},e}function Y(){let e=(0,l._)(["Block ",""]);return Y=function(){return e},e}function q(){let e=(0,l._)(["Successfully blocked invites from strangers"]);return q=function(){return e},e}function G(){let e=(0,l._)(["Block invites from strangers"]);return G=function(){return e},e}function K(){let e=(0,l._)(["Only people you follow can invite you"]);return K=function(){return e},e}function Q(){let e=(0,l._)(["Message "," to install the app"]);return Q=function(){return e},e}function $(){let e=(0,l._)(["Message your guest to install the app"]);return $=function(){return e},e}function ee(){let e=(0,l._)(["Copy and send this reminder to "," via SMS, email or direct message."]);return ee=function(){return e},e}function et(){let e=(0,l._)(["Copy and send this reminder to your guest via SMS, email or direct message."]);return et=function(){return e},e}let ei=e=>{var t,i,l,h,v;let{liveStream:f,liveStreamInvite:T,smsInvite:ei,subscriptions:er}=e,{language:el,iString:eo,iTemplate:ea}=(0,_.M1)(),es=(0,C.aF)(),[ed,ec]=(0,s.eJ)(!1),[eu,ep]=(0,s.eJ)(T),[eh,em]=(0,s.eJ)(!1),[ev,ef]=(0,s.eJ)(!!(0,M.x)("decline_invite_id")),[eb,eg]=(0,s.eJ)(!1),[eZ,ey]=(0,s.eJ)(!1),[e_,eC]=(0,s.eJ)(!1),[ew,eS]=(0,s.eJ)(!1),ex=(0,z.pm)(),{changeSetting:ek}=(0,C.SE)(),eB="undefined"!=typeof window&&(null===(t=window._preloads)||void 0===t?void 0:t.original_url)?(0,M.x)(window._preloads.original_url,"token"):null,[eI,eP]=(0,s.eJ)(!1),[eN,eX]=(0,s.eJ)(!1),[ez,eL]=(0,s.eJ)(null),[eT,eM]=(0,s.eJ)(null),[eE,eA]=(0,s.eJ)(f.liveStream.scheduled_at?new Date(f.liveStream.scheduled_at):new Date),[eO,eV]=(0,s.eJ)(!1),[eH,eU]=(0,s.eJ)(null!==(h=null==es?void 0:es.email)&&void 0!==h?h:""),[ej,eR]=(0,s.eJ)(!1),[eD,eF]=(0,s.eJ)(!1),eJ=!!eu||"everyone"===f.liveStream.audience||"only_free"===f.liveStream.audience&&Object.values(er).some(e=>"free_signup"===e.membership_state||"subscribed"===e.membership_state)||"only_paid"===f.liveStream.audience&&Object.values(er).some(e=>"subscribed"===e.membership_state)||"only_founding"===f.liveStream.audience&&Object.values(er).some(e=>"subscribed"===e.membership_state&&e.is_founding),eW=(null==es?void 0:es.id)===f.liveStream.user_id||(null==es?void 0:es.is_global_admin),eY=f.liveStream.scheduled_at&&new Intl.DateTimeFormat(el,{month:"short",day:"numeric"}).format(new Date(f.liveStream.scheduled_at)),eq=f.liveStream.scheduled_at&&new Intl.DateTimeFormat(el,{hour:"numeric",minute:"numeric",hour12:!0}).format(new Date(f.liveStream.scheduled_at)),eG=(0,E.bHR)({liveStreamId:f.liveStream.id,params:{appStoreRedirect:!0}}),eK=(0,E.bHR)({liveStreamId:f.liveStream.id,params:{smsInviteId:null==eT?void 0:eT.id}}),eQ=(null==ez?void 0:ez.name)?ea(H(),ez.name,null!=eY?eY:"",null!=eq?eq:"",eG):ez?ea(U(),null!=eY?eY:"",null!=eq?eq:"",eG):ea(j(),null!=eY?eY:"",null!=eq?eq:"",eK),e$=(0,L.k)(f.liveStream),e0=async()=>{eV(!0);try{await (0,S.rd)("/api/v1/live_stream/".concat(f.liveStream.id,"/schedule"),{method:"PUT",json:{scheduledAt:eE}}),eP(!1),ex.popToast(e=>(0,o.tZ)(z.FN,(0,r._)((0,n._)({},e),{text:eo("Successfully updated live video schedule")}))),window.location.reload()}catch(e){alert((0,S.i)(e))}finally{eV(!1)}},e1=()=>{f.liveStream.scheduled_at?eA(new Date(f.liveStream.scheduled_at)):eA(new Date),eP(!0)};return ei?(0,o.BX)(m.C,{children:[(0,o.tZ)(I.sg,{alignItems:"center",gap:20,width:320,padding:24,children:"cancelled"===ei.status?(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(g,{size:32})}),(0,o.tZ)(I.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:eo("This invite link is invalid")}),(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("Ask the host to send another link if you think you should be able to join.")})]}):"accepted"===ei.status||eD?(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(d.Z,{stroke:"white",size:32})}),(0,o.BX)(I.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:[eo("This live video starts")," ",eY," ",eo("at")," ",eq]}),(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("You'll need the Substack app to join.")}),(0,o.tZ)(I.zx,{priority:"primary",onClick:()=>{(0,A.tq)()?(0,x.uX)((0,E.bHR)({liveStreamId:f.liveStream.id,utm_source:O.b3.liveStreamScheduledUpsell,params:{appStoreRedirect:"true"}}),{local_navigation:!1}):ec(!0)},children:eo("Join in app")})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(I.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(c.Z,{stroke:"white",size:32})}),(0,o.tZ)(I.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:ea(R(),f.user.name)}),(0,o.tZ)(I.tu,{gap:12,width:"100%",children:(0,o.tZ)(X.H,{placeholder:eo("Enter your email"),placement:"end",priority:"primary",disabled:!!(null==es?void 0:es.email),button:(0,o.tZ)(I.zx,{priority:"primary",loading:ej,onClick:async()=>{eR(!0);try{await (0,S.rd)("/api/v1/live_stream/".concat(f.liveStream.id,"/sms_invite/").concat(ei.id,"/accept"),{method:"PUT",json:{email:eH}}),ex.popToast(e=>(0,o.tZ)(z.FN,(0,r._)((0,n._)({},e),{text:eo("Successfully accepted SMS invite")}))),eF(!0)}catch(e){alert((0,S.i)(e))}finally{eR(!1)}},children:ej?"":eo("Accept")}),value:eH,onChange:e=>eU(e.currentTarget.value)})})]})}),(0,o.tZ)(en,{isOpen:ed,onClose:()=>ec(!1),liveStream:f})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(m.C,{children:eu&&"pending"!==eu.status?(0,o.BX)(I.sg,{alignItems:"center",gap:20,width:320,padding:24,children:[(0,o.tZ)(I.hs,{bg:"secondary",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(g,{size:32})}),(0,o.tZ)(I.xv.B1,{color:"white",children:eo("This invite link is invalid")}),(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("If you think you should be able to join, please ask the host to send another link.")})]}):(0,o.BX)(I.sg,{alignItems:"center",gap:20,width:400,padding:24,children:[(0,o.tZ)(d.Z,{size:32}),(0,o.BX)(I.sg,{alignItems:"center",gap:8,children:[eY&&eq?(0,o.tZ)(I.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:ea(D(),f.liveStream.title,eY,eq)}):(0,o.tZ)(I.xv.H4,{weight:"medium",color:"white",textAlign:"center",children:eo("This live video will start soon")}),(null==eu?void 0:eu.status)==="pending"?(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("Youll need the Substack app to join as a participant.")}):eJ?null:(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("Subscribe now to watch this live video when it starts")})]}),eW?(0,o.BX)(a.Fragment,{children:[(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("You can start the live video up to 15 minutes before the scheduled start time")}),f.pendingLiveStreamGuests.length>0&&(0,o.BX)(I.sg,{gap:12,bg:"secondary",radius:"md",padding:12,width:400,children:[(0,o.tZ)(I.xv.B4,{color:"secondary",fontWeight:"medium",textTransform:"uppercase",children:eo("CO-HOSTS")}),f.pendingLiveStreamGuests.map(e=>{let{user:t}=e,i=t.reader_installed_at?"ready":"needs_app",n=t.name||t.handle||t.email||"Unknown";return(0,o.BX)(I.hs,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,o.BX)(I.hs,{alignItems:"center",gap:8,children:[(0,o.tZ)(B.qE,{size:24,user:t}),(0,o.tZ)(I.xv.B3,{color:"white",children:"ready"===i?ea(F(),n):ea(J(),n)})]}),"needs_app"===i&&(0,o.tZ)(I.zx,{priority:"primary",size:"sm",onClick:()=>{eL(t),eM(null),eX(!0)},children:eo("Remind")})]})}),null===(i=f.liveStream.pendingLiveStreamSmsInvites)||void 0===i?void 0:i.map(e=>(0,o.BX)(I.hs,{alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,o.BX)(I.hs,{alignItems:"center",gap:8,children:[(0,o.tZ)(B.qE,{size:24}),(0,o.tZ)(I.xv.B3,{color:"white",children:"SMS guest hasnt setup an account"})]}),(0,o.tZ)(I.zx,{priority:"primary",size:"sm",onClick:()=>{eL(null),eM(e),eX(!0)},children:eo("Remind")})]}))]}),(0,o.BX)(I.hs,{gap:12,width:"100%",children:[(0,o.tZ)(I.zx,{priority:"primary",flex:"grow",onClick:()=>{let e=(0,E.bHR)({liveStreamId:f.liveStream.id,utm_source:O.b3.liveStreamScheduledUpsell});(0,x.vQ)(e),ex.popToast(e=>(0,o.tZ)(z.FN,(0,r._)((0,n._)({},e),{text:eo("Copied link to clipboard")})))},children:eo("Copy link")}),(0,o.tZ)(I.zx,{priority:"secondary",flex:"grow",onClick:()=>{e1()},children:eo("Edit")})]})]}):eu?(0,o.BX)(I.sg,{alignItems:"center",gap:8,children:[(0,o.tZ)(I.zx,{priority:"primary",onClick:()=>{(0,A.tq)()?(0,x.uX)((0,E.bHR)({liveStreamId:f.liveStream.id,utm_source:O.b3.liveStreamScheduledUpsell,params:{appStoreRedirect:"true"}}),{local_navigation:!1}):ec(!0)},children:eo("Join in app")}),eu&&"pending"===eu.status?(0,o.tZ)(I.zx,{className:V.declineButton,priority:"secondary",loading:eh,onClick:async()=>{em(!0);try{let{liveStreamInvite:e}=await (0,S.rd)("/api/v1/live_stream/".concat(f.liveStream.id,"/invite/").concat(null==T?void 0:T.id,"/decline"),{method:"PUT",json:{token:eB}});ep(e),ef(!0)}catch(e){alert((0,S.i)(e))}finally{em(!1)}},children:eo("Decline invite")}):null]}):es&&eJ||!f.pub?(0,o.tZ)(I.sg,{alignItems:"center",gap:8,children:(0,o.tZ)(k.m,{priority:"primary",handleClick:e=>{(0,w.j)(w.FP.ADD_TO_CALENDAR_CLICKED,{liveStreamId:f.liveStream.id,surface:"live-stream-permalink",type:e})},event:e$,menuProps:{onOpen:()=>{(0,S.rd)("/api/v1/live_stream/".concat(f.liveStream.id,"/rsvp"),{method:"PUT",json:{token:eB}})}}})}):(0,o.tZ)(y.Z,{pub:f.pub,user:es,freeSignup:["free_signup","subscribed"].includes(null!==(v=null===(l=er[f.pub.id])||void 0===l?void 0:l.membership_state)&&void 0!==v?v:""),foundingUpsell:"only_founding"===f.liveStream.audience})]})}),(0,o.BX)(N.u_,{isOpen:ev,onClose:()=>ef(!1),position:(0,A.tq)()?"bottom":"default",children:[(0,o.BX)(I.tu,{gap:20,padding:16,alignItems:"center",children:[(0,o.tZ)(I.hs,{bg:"accent-red",radius:"full",width:64,height:64,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(I.hs,{className:V.headerIcon,radius:"full",width:32,height:32,alignItems:"center",justifyContent:"center",children:(0,o.tZ)(u.Z,{stroke:"white"})})}),(0,o.BX)(I.tu,{gap:4,children:[(0,o.tZ)(I.xv.B1,{fontWeight:"medium",textAlign:"center",children:eo("Invite declined")}),(0,o.tZ)(I.xv.B3,{color:"secondary",textAlign:"center",children:eo("You will no longer receive notifications for this live video")})]}),(0,o.tZ)(I.iz,{className:V.divider})]}),(0,o.BX)(I.tu,{gap:24,paddingX:16,paddingY:12,children:[(0,o.BX)(I.hs,{gap:12,alignItems:"center",children:[(0,o.tZ)(I.hU,{disabled:eZ,onClick:async()=>{ey(!0);try{await (0,S.rd)("/api/v1/blocks/".concat(f.user.id),{method:"POST",json:{type:"block",surface:"live-stream-scheduled-card",token:eB}}),ex.popToast(e=>(0,o.tZ)(z.FN,(0,r._)((0,n._)({},e),{text:ea(W(),f.user.name)}))),eg(!0)}catch(e){alert((0,S.i)(e))}finally{ey(!1)}},size:"md",children:eZ?(0,o.tZ)(I.X4,{priority:"secondary"}):eb?(0,o.tZ)(p.Z,{size:24}):(0,o.tZ)(b,{size:24})}),(0,o.tZ)(I.xv.B3,{fontWeight:"medium",fontSize:15,children:ea(Y(),f.user.name)})]}),(0,o.BX)(I.hs,{gap:12,children:[(0,o.tZ)(I.hU,{disabled:ew,onClick:async()=>{eS(!0);try{await ek("liveStreamAcceptableInviteLevel","follows_and_subscriptions","text",{token:eB}),ex.popToast(e=>(0,o.tZ)(z.FN,(0,r._)((0,n._)({},e),{text:ea(q())}))),eC(!0)}catch(e){alert((0,S.i)(e))}finally{eS(!1)}},size:"md",children:ew?(0,o.tZ)(I.X4,{priority:"secondary"}):e_?(0,o.tZ)(p.Z,{size:24}):(0,o.tZ)(Z,{size:24})}),(0,o.BX)(I.tu,{children:[(0,o.tZ)(I.xv.B3,{fontWeight:"medium",fontSize:15,children:ea(G())}),(0,o.tZ)(I.xv.B3,{color:"secondary",children:ea(K())})]})]})]}),(0,o.tZ)(I.hs,{padding:16,children:(0,o.tZ)(I.zx,{flex:"grow",priority:"secondary",onClick:()=>ef(!1),children:eo("Done")})})]}),(0,o.tZ)(en,{isOpen:ed,onClose:()=>ec(!1),liveStream:f}),(0,o.BX)(N.u_,{isOpen:eI,onClose:()=>eP(!1),children:[(0,o.tZ)(N.xB,{title:eo("Edit scheduled time"),showDivider:!0,showClose:!0,onClose:()=>eP(!1)}),(0,o.tZ)(N.fe,{children:(0,o.BX)(I.tu,{gap:8,children:[(0,o.tZ)(I.xv.B3,{children:eo("Date")}),(0,o.tZ)(P.Tz,{value:eE||new Date,onChange:e=>{eA(new Date(e.currentTarget.value))}})]})}),(0,o.tZ)(N.mz,{showDivider:!0,primaryButton:(0,o.tZ)(I.zx,{priority:"primary",disabled:!(!f.liveStream.scheduled_at||new Date(f.liveStream.scheduled_at).getTime()!==eE.getTime())||eO,onClick:e0,loading:eO,children:eo("Save changes")}),secondaryButton:(0,o.tZ)(I.zx,{priority:"secondary",onClick:()=>eP(!1),disabled:eO,children:eo("Cancel")})})]}),(0,o.BX)(N.u_,{isOpen:eN,onClose:()=>eX(!1),width:540,children:[(0,o.tZ)(N.xB,{title:(null==ez?void 0:ez.name)?ea(Q(),ez.name):ez?ea($()):eo("Message your guest to accept your live video invite"),description:(null==ez?void 0:ez.name)?ea(ee(),ez.name):ez?ea(et()):eo("Copy and send this reminder to your guest via SMS, email or direct message."),showClose:!0,onClose:()=>eP(!1)}),(0,o.tZ)(N.fe,{children:(0,o.tZ)(I.xu,{padding:16,border:"detail",radius:"md",fontStyle:"italic",children:eQ})}),(0,o.tZ)(N.mz,{primaryButton:(0,o.tZ)(I.zx,{priority:"primary",onClick:()=>{(0,x.vQ)(eQ)},flex:"grow",disabled:eO,children:eo("Copy reminder")})})]})]})},en=e=>{let{isOpen:t,onClose:i,liveStream:n}=e,{iString:r}=(0,_.M1)(),l=(0,C.aF)(),a=(0,E.bHR)({liveStreamId:n.liveStream.id,utm_source:O.b3.liveStreamScheduledUpsell});return(0,o.BX)(N.u_,{isOpen:t,onClose:i,children:[(0,o.tZ)(N.xB,{title:r("Open in app"),description:r("Scan the code below to open this live video in the app"),showDivider:!0,alignItems:"center",showClose:!0,onClose:i}),(0,o.tZ)(N.fe,{children:(0,o.tZ)(I.tu,{gap:16,alignItems:"center",children:(0,o.tZ)(I.sg,{border:"detail",radius:"lg",bg:"primary",padding:4,shadow:"md",children:(0,o.tZ)(h.AppStoreQrCode,{utm_source:O.b3.liveStreamScheduledUpsell,openUrl:(null==l?void 0:l.reader_installed_at)?a:void 0})})})}),(0,o.tZ)(N.mz,{direction:"column",showDivider:!0,primaryButton:(0,A.tq)()?(0,o.tZ)(I.zx,{priority:"primary",href:(0,T.D4e)({utm_source:O.b3.liveStreamScheduledUpsell}),children:r("Get the app")}):(0,o.tZ)(I.zx,{priority:"secondary",onClick:i,children:r("Done")})})]})}},37238:function(e,t,i){i.d(t,{P:()=>D,r:()=>F});var n=i(16584),r=i(30396),l=i(23279),o=i.n(l),a=i(47348),s=i(57391),d=i(59488),c=i(80026),u=i(7409),p=i(99282),h=i(58865),m=i(13742),v=i(31012),f=i(95441),b=i(60807),g=i(98914),Z=i(94874),y=i(71068),_=i(15771),C=i(19081),w=i(58175),S=i(70379),x=i(43254),k=i(60308),B=i(47929);let I={subscribeButton:"subscribeButton-yaTZKM",guestOverlay:"guestOverlay-hLjGLp"};function P(){let e=(0,h._)(["Subscribed to ",""]);return P=function(){return e},e}function N(){let e=(0,h._)(["Subscribed to ",""]);return N=function(){return e},e}function X(){let e=(0,h._)(["Subscribed to ",""]);return X=function(){return e},e}let z=(e,t)=>"no-guests"===e&&t.length>0||"one-guest"===e&&1!==t.length||"two-guests"===e&&2!==t.length,L=e=>{let{activeLiveStream:t,detectedGuests:i,guests:l,isZoomed:o,subscriptions:a,setSubscriptions:d}=e,{getExperimentVariant:c,exposeExperiment:u}=(0,s.jc)(),p=(0,r.Ye)(()=>l.sort((e,t)=>e.user.id-t.user.id),[l]),h=p[0],m=p[1];if(!i||t.liveStream.is_rtmp||z(i,l))return null;u("live_stream_guest_overlay");let v=null;switch(c("live_stream_guest_overlay")){case"treatment_loud":v=T;break;case"treatment_quiet":v=M;break;case"treatment_quietest":v=E;break;default:return null}switch(i){case"no-guests":return(0,n.tZ)(y.xu,{position:"absolute",style:{left:"calc(50% - 28.125vh)",right:"calc(50% - 28.125vh)",top:0},zIndex:1,children:(0,n.tZ)(v,{user:t.user,pub:t.pub,style:{maxWidth:"calc(56.25vh - 16px)"},subscriptions:a,setSubscriptions:d})});case"one-guest":if(!h)return null;if(o)return(0,n.BX)(n.HY,{children:[(0,n.tZ)(y.xu,{position:"absolute",style:{left:"calc(50% - 28.125vh)",right:"calc(50% - 28.125vh)",top:0},zIndex:1,children:(0,n.tZ)(v,{user:t.user,pub:t.pub,style:{maxWidth:"calc(56.25vh - 16px)"},subscriptions:a,setSubscriptions:d})}),(0,n.tZ)(y.xu,{position:"absolute",style:{left:"calc(50% - 28.125vh)",right:"calc(50% - 28.125vh)",top:"50%"},children:(0,n.tZ)(v,{user:h.user,pub:h.pub,style:{maxWidth:"calc(56.25vh - 16px)"},subscriptions:a,setSubscriptions:d})})]});return(0,n.BX)(n.HY,{children:[(0,n.tZ)(y.xu,{position:"absolute",style:{left:0,top:0,right:"50%"},zIndex:1,children:(0,n.tZ)(v,{user:t.user,pub:t.pub,style:{maxWidth:"calc(100% - 16px)"},subscriptions:a,setSubscriptions:d})}),(0,n.tZ)(y.xu,{position:"absolute",style:{left:"50%",right:0,top:0},zIndex:1,children:(0,n.tZ)(v,{user:h.user,pub:h.pub,style:{maxWidth:"calc(100% - 16px)"},subscriptions:a,setSubscriptions:d})})]});case"two-guests":if(!h||!m)return null;if(o)return(0,n.BX)(y.xu,{position:"absolute",style:{display:"grid",gridTemplateRows:"repeat(2, 1fr)",left:"calc(50% - 28.125vh)",right:"calc(50% - 28.125vh)",top:0,bottom:0},zIndex:1,children:[(0,n.tZ)(v,{user:t.user,pub:t.pub,style:{maxWidth:"calc(56.25vh - 16px)"},subscriptions:a,setSubscriptions:d}),(0,n.BX)(y.xu,{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",width:"100%"},children:[(0,n.tZ)(v,{user:h.user,pub:h.pub,style:{maxWidth:"calc(28.125vh - 16px)"},subscriptions:a,setSubscriptions:d}),(0,n.tZ)(v,{user:m.user,pub:m.pub,style:{maxWidth:"calc(28.125vh - 16px)"},subscriptions:a,setSubscriptions:d})]})]});return(0,n.BX)(y.xu,{position:"absolute",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(33%, 1fr))",left:0,right:0,top:0},zIndex:1,children:[(0,n.tZ)(v,{user:h.user,pub:h.pub,style:{maxWidth:"calc(100% - 16px)"},subscriptions:a,setSubscriptions:d}),(0,n.tZ)(v,{user:t.user,pub:t.pub,style:{maxWidth:"calc(100% - 16px)"},subscriptions:a,setSubscriptions:d}),(0,n.tZ)(v,{user:m.user,pub:m.pub,style:{maxWidth:"calc(100% - 16px)"},subscriptions:a,setSubscriptions:d})]})}},T=e=>{var t;let{user:i,pub:r,style:l,subscriptions:o,setSubscriptions:a}=e,{iString:s,iTemplate:d}=(0,f.M1)(),c=(0,b.aF)(),{popToast:h}=(0,S.pm)();if(!i)return null;let N=async()=>{if(r){if(!c){(0,g.uX)((0,k.Zs0)(r,{utm_source:B.b3.liveStreamGuestOverlay,next:document.location.href,utm_medium:B.lP.web}));return}await (0,x.i9)(r.id,B.b3.liveStreamPermalink,{publication:null!=r?r:void 0,user:c,openPubInNewTabAfterSubscription:!1}),a(e=>(0,p._)((0,u._)({},e),{[r.id]:(0,p._)((0,u._)({},e[r.id]),{membership_state:"free_signup"})})),h(e=>(0,n.tZ)(S.FN,(0,p._)((0,u._)({},e),{Icon:m.Z,text:d(P(),null==r?void 0:r.name)})))}};return(0,n.BX)(C.gq,{className:I.guestOverlay,gap:4,bg:"glass-inverted-medium",alignItems:"center",radius:"full",padding:4,style:l,children:[(0,n.tZ)(Z.qE,{user:i,size:28}),(0,n.BX)(C.tu,{minWidth:0,children:[(0,n.tZ)(w.xv.B3,{color:"white",weight:"semibold",fontSize:15,lineHeight:16,ellipsis:!0,children:i.name}),r&&(0,n.tZ)(w.xv.B4,{color:"white",fontSize:11,weight:"regular",lineHeight:16,ellipsis:!0,children:r.name})]}),r&&o[r.id]&&(null===(t=o[r.id])||void 0===t?void 0:t.membership_state)!=="unsubscribed"?(0,n.tZ)(y.xu,{padding:2}):(0,n.tZ)(_.zx,{className:I.subscribeButton,priority:"primary",size:"sm",onClick:N,leading:(0,n.tZ)(v.Z,{size:20}),radius:"full",children:s("Subscribe")})]})},M=e=>{var t;let{user:i,pub:r,style:l,subscriptions:o,setSubscriptions:a}=e,{iString:s,iTemplate:d}=(0,f.M1)(),c=(0,b.aF)(),{popToast:h}=(0,S.pm)();if(!i)return null;let v=async()=>{if(r){if(!c){(0,g.uX)((0,k.Zs0)(r,{utm_source:B.b3.liveStreamGuestOverlay,next:document.location.href,utm_medium:B.lP.web}));return}await (0,x.i9)(r.id,B.b3.liveStreamPermalink,{publication:null!=r?r:void 0,user:c,openPubInNewTabAfterSubscription:!1}),a(e=>(0,p._)((0,u._)({},e),{[r.id]:(0,p._)((0,u._)({},e[r.id]),{membership_state:"free_signup"})})),h(e=>(0,n.tZ)(S.FN,(0,p._)((0,u._)({},e),{Icon:m.Z,text:d(N(),null==r?void 0:r.name)})))}};return(0,n.BX)(C.gq,{className:I.guestOverlay,gap:4,alignItems:"center",padding:4,bg:"glass-inverted-medium",radius:"full",style:l,children:[(0,n.tZ)(w.xv.B3,{minWidth:0,fontSize:13,lineHeight:28,color:"white",weight:"semibold",ellipsis:!0,children:i.name}),r&&o[r.id]&&(null===(t=o[r.id])||void 0===t?void 0:t.membership_state)!=="unsubscribed"?(0,n.tZ)("div",{}):(0,n.tZ)(_.zx,{className:I.subscribeButton,priority:"primary",size:"xs",onClick:v,radius:"full",children:s("Subscribe")})]})},E=e=>{var t;let{user:i,pub:r,style:l,subscriptions:o,setSubscriptions:a}=e,{iTemplate:s}=(0,f.M1)(),d=(0,b.aF)(),{popToast:c}=(0,S.pm)();if(!i)return null;let h=async()=>{if(r){if(!d){(0,g.uX)((0,k.Zs0)(r,{utm_source:B.b3.liveStreamGuestOverlay,next:document.location.href,utm_medium:B.lP.web}));return}await (0,x.i9)(r.id,B.b3.liveStreamPermalink,{publication:null!=r?r:void 0,user:d,openPubInNewTabAfterSubscription:!1}),a(e=>(0,p._)((0,u._)({},e),{[r.id]:(0,p._)((0,u._)({},e[r.id]),{membership_state:"free_signup"})})),c(e=>(0,n.tZ)(S.FN,(0,p._)((0,u._)({},e),{Icon:m.Z,text:s(X(),null==r?void 0:r.name)})))}};return(0,n.BX)(C.gq,{className:I.guestOverlay,gap:4,alignItems:"center",padding:4,bg:"glass-inverted-medium",radius:"full",style:l,children:[(0,n.tZ)(w.xv.B3,{minWidth:0,fontSize:13,lineHeight:24,color:"white",weight:"semibold",ellipsis:!0,children:i.name}),r&&o[r.id]&&(null===(t=o[r.id])||void 0===t?void 0:t.membership_state)!=="unsubscribed"?(0,n.tZ)("div",{}):(0,n.tZ)(_.hU,{className:I.subscribeButton,priority:"primary",size:"xs",onClick:h,radius:"full",children:(0,n.tZ)(v.Z,{size:16})})]})};var A=i(74571),O=i(18618);let V=e=>{let{isVisible:t,onVisibilityChange:i,videoRef:l}=e;return(0,r.d4)(()=>{var e;let t=e=>{e.target.muted&&(i(!0),setTimeout(()=>i(!1),6e3))},n=null===(e=l.current)||void 0===e?void 0:e.player;return n&&n.addEventListener("playing",t),()=>{n&&n.removeEventListener("playing",t)}},[]),(0,n.tZ)("div",{className:"unmuteOverlayContainer-WcXkPG",style:{opacity:+!!t,pointerEvents:t?"auto":"none",transition:"opacity 0.5s ease"},onClick:()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.player)&&(l.current.player.muted=!1,i(!1))},children:(0,n.tZ)(O.KY,{})})};var H=i(61527),U=i(24054);let j={liveStreamVideoZoom:"liveStreamVideoZoom-_qvCom",liveStreamVideo:"liveStreamVideo-asigz8"};function R(e){let{player:t,cachedCanvas:i,sampleRate:n=10,direction:r,start:l}=e,o=t.videoWidth||t.width,a=t.videoHeight||t.height,s=function(e,t,i,n){var r;let l=null!==(r=t.current)&&void 0!==r?r:{canvas:null,ctx:null};if(l.canvas||(l.canvas=document.createElement("canvas")),l.ctx||(l.ctx=l.canvas.getContext("2d")),t.current||(t.current=l),!l.ctx)return!1;let o="vertical"===n?2:(e.videoWidth||e.width)-i.x,a="horizontal"===n?2:(e.videoHeight||e.height)-i.y;l.canvas.width=o,l.canvas.height=a;try{return l.ctx.drawImage(e,i.x,i.y,o,a,0,0,l.canvas.width,l.canvas.height),{data:l.ctx.getImageData(0,0,l.canvas.width,l.canvas.height).data,width:o,height:a}}catch(e){return null}}(t,i,{x:Math.floor((l="function"==typeof l?l({width:o,height:a}):l).x)===l.x&&0!==l.x?l.x-1:Math.floor(l.x),y:Math.floor(l.y)===l.y&&0!==l.y?l.y-1:Math.floor(l.y)},r);if(!s)return!1;let{data:d,width:c,height:u}=s,{iteratorEnd:p,getIdx:h}="vertical"===r?{iteratorEnd:u,getIdx:(e,t)=>(e*c+t)*4}:{iteratorEnd:c,getIdx:(e,t)=>(t*c+e)*4},m=0;for(let e=0;e<p;e+=n){var v,f,b,g,Z,y;let t=h(e,0),i=h(e,1);m+=Math.abs((null!==(v=d[t])&&void 0!==v?v:0)-(null!==(f=d[i])&&void 0!==f?f:0))+Math.abs((null!==(b=d[t+1])&&void 0!==b?b:0)-(null!==(g=d[i+1])&&void 0!==g?g:0))+Math.abs((null!==(Z=d[t+2])&&void 0!==Z?Z:0)-(null!==(y=d[i+2])&&void 0!==y?y:0))}return m>p/n*50}let D=e=>{var t,i,l,u,p,h;let{disableZoom:m,liveStream:v,handle:f,guests:b=[],autoPlay:g,isFreePress:Z=!1,subscriptions:y={},setSubscriptions:_=()=>{}}=e,C=(0,r.sO)(!0),w=(0,r.sO)(null),[S,x]=(0,r.eJ)(null),[k,B]=(0,r.eJ)(null),[I,P]=(0,r.eJ)(null),[N,X]=(0,r.eJ)(null),[z,T]=(0,r.eJ)(null),M=(0,r.sO)(null),E=(0,r.sO)(null),[O,D]=(0,r.eJ)(!!v.liveStream.is_rtmp&&"9:16"===v.liveStream.mux_aspect_ratio),[F,J]=(0,r.eJ)(null),[W,Y]=(0,r.eJ)("undefined"!=typeof window&&!v.liveStream.is_rtmp&&window.innerWidth/window.innerHeight<1.2),[q,G]=(0,r.eJ)(!1),{isIdle:K}=(0,d.c)({idleAfter:2e3,element:E.current}),Q=(0,A.Ml)(E),{getExperimentVariant:$}=(0,s.jc)();return(0,r.d4)(()=>{var e;let t=null===(e=M.current)||void 0===e?void 0:e.player;if(t){t.playbackRate=1;let e=()=>{t.paused&&(t.currentTime<t.duration-1&&(t.currentTime=t.duration-1),t.play())};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}},[M,null===(t=M.current)||void 0===t?void 0:t.player]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp&&"9:16"===v.liveStream.mux_aspect_ratio)return;let e=setInterval(()=>{var e;if(null===(e=M.current)||void 0===e?void 0:e.player){let e=function(e,t){var i,n,r,l,o,a,s;let d=null!==(i=t.current)&&void 0!==i?i:{canvas:null,ctx:null};if(d.canvas||(d.canvas=document.createElement("canvas")),d.ctx||(d.ctx=d.canvas.getContext("2d")),t.current||(t.current=d),!d.ctx)return!1;d.canvas.width=d.canvas.height=3;try{d.ctx.drawImage(e,0,0,3,3);let t=d.ctx.getImageData(0,1,1,1),i=d.ctx.getImageData(2,1,1,1);return(null!==(n=null==t?void 0:t.data[0])&&void 0!==n?n:0)+(null!==(r=null==t?void 0:t.data[1])&&void 0!==r?r:0)+(null!==(l=null==t?void 0:t.data[2])&&void 0!==l?l:0)+(null!==(o=null==i?void 0:i.data[0])&&void 0!==o?o:0)+(null!==(a=null==i?void 0:i.data[1])&&void 0!==a?a:0)+(null!==(s=null==i?void 0:i.data[2])&&void 0!==s?s:0)<7}catch(e){return!1}}(M.current.player,w);T(e),D(e)}},250);return()=>clearInterval(e)},[null===(i=M.current)||void 0===i?void 0:i.player,W,v.liveStream.is_rtmp,v.liveStream.mux_aspect_ratio]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp||!W||z||"control"===$("live_stream_guest_overlay"))return;let e=setInterval(()=>{var e;(null===(e=M.current)||void 0===e?void 0:e.player)&&x(R({player:M.current.player,cachedCanvas:w,direction:"horizontal",start:e=>{let{height:t}=e;return{x:0,y:t/2}}}))},255);return()=>clearInterval(e)},[M,null===(l=M.current)||void 0===l?void 0:l.player,v.liveStream.is_rtmp,W,z]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp||!S||!W||z||"control"===$("live_stream_guest_overlay"))return;let e=setInterval(()=>{var e;(null===(e=M.current)||void 0===e?void 0:e.player)&&X(R({player:M.current.player,cachedCanvas:w,direction:"vertical",start:e=>{let{width:t,height:i}=e;return{x:t/2,y:i/2}}}))},260);return()=>clearInterval(e)},[M,null===(u=M.current)||void 0===u?void 0:u.player,v.liveStream.is_rtmp,S,W,z]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp||W||z||"control"===$("live_stream_guest_overlay"))return;let e=setInterval(()=>{var e;(null===(e=M.current)||void 0===e?void 0:e.player)&&B(R({player:M.current.player,cachedCanvas:w,direction:"vertical",start:e=>{let{width:t}=e;return{x:t/2,y:0}}}))},255);return()=>clearInterval(e)},[M,null===(p=M.current)||void 0===p?void 0:p.player,v.liveStream.is_rtmp,W,z]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp||W||z||"control"===$("live_stream_guest_overlay"))return;let e=setInterval(()=>{var e;(null===(e=M.current)||void 0===e?void 0:e.player)&&P(R({player:M.current.player,cachedCanvas:w,direction:"vertical",start:e=>{let{width:t}=e;return{x:t/3,y:0}}}))},260);return()=>clearInterval(e)},[M,null===(h=M.current)||void 0===h?void 0:h.player,v.liveStream.is_rtmp,W,z]),(0,r.d4)(()=>{J("no-guests"),!z&&(W?S&&(N?J("two-guests"):J("one-guest")):k?J("one-guest"):I&&J("two-guests"))},[z,W,S,k,I,N]),(0,r.d4)(()=>{if(v.liveStream.is_rtmp)return;let e=o()(()=>{"undefined"!=typeof window&&window.innerWidth/window.innerHeight<1.2?Y(!0):Y(!1)},100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.d4)(()=>{var e,t,i,n,r,l;if(C.current){C.current=!1;return}null===(e=M.current)||void 0===e||e.refreshVideoSrc(),(null===(t=M.current)||void 0===t?void 0:t.player)&&(null===(n=M.current)||void 0===n?void 0:null===(i=n.player)||void 0===i?void 0:i.duration)>1&&(M.current.player.currentTime=(null===(l=M.current)||void 0===l?void 0:null===(r=l.player)||void 0===r?void 0:r.duration)-1)},[W]),(0,n.BX)(n.HY,{children:[(0,n.BX)(c.gq,{position:"relative",className:(W||O)&&!m?j.liveStreamVideoZoom:j.liveStreamVideo,alignItems:"center",justifyContent:"center",children:[(0,n.tZ)(a.j,{autoPlay:g,ref:M,portrait:W,noKeyboardShortcuts:!0,noControls:!0,liveStreamId:v.liveStream.id,pub:v.pub||null,mediaUpload:{id:"ls-".concat(v.liveStream.id),width:W?U.tV:U.Sb,height:W?U.bI:U.rx},isLive:!0,showPreviewWhenPaused:!0},!0),Z?null:(0,n.tZ)(L,{activeLiveStream:v,detectedGuests:F,guests:b,isZoomed:W||O,subscriptions:y,setSubscriptions:_})]}),(0,n.tZ)(c.xu,{position:"absolute",style:{left:0,right:0,bottom:0},children:(0,n.tZ)(H.Vo,{forLiveStream:!0,disableCaptions:!0,disableShortcuts:!0,disableTooltips:!0,disableSharing:!0,hideCaptions:!0,hidePip:!0,handle:f,hasPaywall:!1,hasTranscript:!1,hideNextVideoButton:!1,isActive:!K&&!q,isFocused:Q,mediaRef:M,mediaUpload:{id:"ls-".concat(v.liveStream.id),width:1920,height:1080},podcastUpload:null,pub:null,showPaywall:!1,showTranscript:!1,onToggleShowTranscript:()=>{},autoPlayMuted:!1})}),(0,n.tZ)(V,{isVisible:q,onVisibilityChange:e=>G(e),videoRef:M})]})},F=e=>{let{liveStream:t}=e;return(0,n.tZ)("img",{src:t.liveStreamInformation.desktopThumbnailGifUrl,style:{width:"100%"}})}},66318:function(e,t,i){i.d(t,{g:()=>o});var n=i(16584),r=i(94874);let l={active:"active-Mnay2Y"};function o(e){let{user:t,isActive:i}=e;return(0,n.tZ)(r.qE,{user:t,size:24,className:i?l.active:void 0})}},19434:function(e,t,i){i.d(t,{z:()=>m});var n=i(16584),r=i(31012),l=i(77705),o=i(86374),a=i(95441),s=i(60807),d=i(15771),c=i(19081),u=i(99916),p=i(81043),h=i(50167);function m(e){let{onNoteClick:t,profile:i,publicationUser:c,requireLogin:m}=e,{iString:f}=(0,a.M1)(),{isExpanded:b}=(0,p.SJ)();return(0,s.aF)()?(0,n.tZ)(v,{children:(0,n.BX)(u.v2,{trigger:b?(0,n.tZ)(d.zx,{trailing:(0,n.tZ)(o.Z,{color:"var(--color-button-fg)"}),"aria-label":f("Create"),style:{textIndent:"20px"},children:f("Create")}):(0,n.tZ)(d.hU,{priority:"primary","aria-label":f("Create"),children:(0,n.tZ)(r.Z,{size:24})}),matchReferenceWidth:!0,children:[(0,n.tZ)(u.sN,{onClick:t,leading:(0,n.tZ)(l.Z,{}),children:f("Note")}),i&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(h._T,{profile:i,publicationUser:c}),(0,n.tZ)(h.hC,{profile:i,publicationUser:c})]})]})}):b?(0,n.tZ)(v,{children:(0,n.tZ)(d.zx,{onClick:()=>null==m?void 0:m(),children:f("Create")})}):(0,n.tZ)(d.hU,{onClick:()=>null==m?void 0:m(),priority:"primary","aria-label":f("Create"),children:(0,n.tZ)(r.Z,{size:24})})}function v(e){let{children:t}=e,{isExpanded:i}=(0,p.SJ)();return(0,n.tZ)(c.sg,{paddingY:12,minWidth:48,justifyContent:i?void 0:"center",alignItems:i?void 0:"center",children:t})}},27504:function(e,t,i){i.d(t,{s:()=>B});var n=i(7409),r=i(99282),l=i(16584),o=i(2032),a=i(77232),s=i(98661),d=i(63718),c=i(95441),u=i(99259),p=i(60807),h=i(68833),m=i(15771),v=i(99916),f=i(20888),b=i(80026),g=i(6490),Z=i(64576);let y={active:"active-fPhBWQ"};function _(e){let{isOpen:t,onClose:i}=e,{_internalMode:n,setMode:r}=function(){let[e,t]=(0,s.useState)(()=>"undefined"!=typeof window?localStorage.getItem("colorScheme"):null),i=e=>{document.documentElement.classList.toggle("dark-mode",e)};return{mode:null===e?"auto":e,setMode:e=>{if("auto"===e){localStorage.removeItem("colorScheme");let e=window.matchMedia("(prefers-color-scheme: dark)").matches;i(e),window.dispatchEvent(new Z.J0(e?"dark":"light")),t(null)}else localStorage.setItem("colorScheme",e),window.dispatchEvent(new Z.J0(e)),i("dark"===e),t(e)},_internalMode:e}}(),{iString:o}=(0,c.M1)();return(0,l.BX)(g.u_,{isOpen:t,onClose:i,width:"auto",children:[(0,l.tZ)(g.xB,{title:o("Change appearance"),onClose:i,showClose:!0,showDivider:!0}),(0,l.tZ)(g.fe,{children:(0,l.BX)(b.X2,{gap:24,children:[(0,l.tZ)(C,{mode:"light",onClick:()=>r("light"),label:o("Light"),isActive:"light"===n}),(0,l.tZ)(C,{mode:"dark",onClick:()=>r("dark"),label:o("Dark"),isActive:"dark"===n}),(0,l.tZ)(C,{mode:"auto",onClick:()=>r("auto"),label:o("Auto"),isActive:"auto"===n||null===n})]})})]})}function C(e){let{mode:t,label:i,onClick:n,isActive:r}=e;return(0,l.BX)(b.kG,{resetCss:!0,onClick:n,display:"flex",direction:"column",flex:"grow",gap:12,cursor:"pointer",pressable:"lg",children:[(0,l.tZ)(w,{mode:t,isActive:r}),(0,l.tZ)(b.xv.B3,{weight:r?"semibold":"regular",color:r?"primary":"secondary",children:i})]})}function w(e){let{mode:t,isActive:i}=e;return(0,l.tZ)(b.xu,{outline:"detail",radius:"sm",overflow:"hidden",userSelect:"none",className:i?y.active:void 0,children:(0,l.tZ)(f.e,{src:"/img/color_modes/".concat(t,".png"),maxWidth:200,useRetinaSizing:!0,imageIsFixedWidth:!0,draggable:!1})})}var S=i(3357),x=i(60308),k=i(47929);function B(){let e=(0,p.aF)(),{iString:t}=(0,c.M1)(),[i,n]=(0,s.useState)(!1),r=(0,u.M$)().isOnDestination,a=k.b3.userMenu,m="https://support.substack.com/hc/en-us/?utm_source=".concat(a);return e?(0,l.BX)(l.HY,{children:[(0,l.BX)(v.v2,{trigger:(0,l.tZ)(I,{}),"aria-label":"Profile and settings",placement:"top-start",children:[(0,l.tZ)(v.xw,{isFirst:!0,children:(0,l.tZ)(v.sN,{leading:(0,l.tZ)(o.Z,{}),href:"/archive",children:t("Archive")})}),(0,l.BX)(v.xw,{children:[r&&(0,l.tZ)(v.sN,{onClick:()=>n(!0),priority:"secondary",children:t("Appearance")}),(0,l.tZ)(v.sN,{href:(0,x.v3t)({utm_source:a}),onClick:()=>(0,h.j)(h.FP.USER_MENU_ACCOUNT_SETTINGS_CLICKED),priority:"secondary",native:!0,children:t("Settings")}),(0,l.tZ)(v.sN,{href:m,priority:"secondary",children:t("Support")}),(0,l.tZ)(v.sN,{href:(0,x.ZPN)({utm_source:a}),priority:"secondary",native:!0,children:t("Sign out")})]}),!e.reader_installed_at&&(0,l.tZ)(v.xw,{children:(0,l.tZ)(v.sN,{href:(0,x.tSX)({utm_campaign:k.VX.appMarketing,utm_content:k.fZ.userMenuLink}),priority:"accent",native:!0,children:t("Get the app")})}),(0,l.tZ)(d.wF,{})]}),(0,l.tZ)(_,{isOpen:i,onClose:()=>n(!1)})]}):null}let I=(0,s.forwardRef)((e,t)=>{let{iString:i}=(0,c.M1)();return(0,l.tZ)(m.kG,(0,r._)((0,n._)({display:"flex",direction:"column",textAlign:"left",radius:"md",ref:t,resetCss:!0},e),{children:(0,l.tZ)(S.u,{icon:(0,l.tZ)(a.Z,{size:24}),text:i("More")})}))});I.displayName="ProfileMenuTrigger"},3357:function(e,t,i){i.d(t,{u:()=>S});var n=i(7409),r=i(99282),l=i(98848),o=i(16584),a=i(56232),s=i(87077),d=i(81043),c=i(94184),u=i.n(c),p=i(78327),h=i(19081),m=i(45985);function v(e){let{className:t}=e;return(0,o.tZ)(h.hs,{alignItems:"center",justifyContent:"center",radius:"full",className:u()(m.Z.dotContainer,t),children:(0,o.tZ)("div",{className:m.Z.dot})})}var f=i(58175),b=i(2207),g=i(41427),Z=i(47929);let y={icon:"icon-lyqgV5",inactive:"inactive-zdmjOL",active:"active-qkpOh1",badge:"badge-SSUMfv",dot:"dot-B4AfwU"};function _(e){let{href:t,matchSubpaths:i,icon:n,isActive:r,activeIcon:l=n,native:a,badge:s,dot:c,forwardedRef:u,requireLogin:h,onClick:m,text:f}=e,{isExpanded:_}=(0,d.SJ)(),S="undefined"!=typeof location?location.pathname:"",x=h?e=>{e.preventDefault(),h()}:null,k=h?null:t&&"".concat(t,"?").concat(new URLSearchParams({utm_source:S,utm_medium:Z.lP.reader2Nav})),B=void 0!==r?r:t&&(i?(0,g.h)(S,t):(0,g.M)(S,t));return(0,o.BX)(b.C,{href:k,matchSubpaths:i,native:!!h||a,onClick:m||x||void 0,forwardedRef:u,"aria-current":B?"page":void 0,"aria-label":f,gap:4,minWidth:48,minHeight:48,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",userSelect:"none",pressable:"lg",radius:"md",cursor:"pointer",bg:"primary",showFocus:!0,animate:!0,hover:!0,children:[(0,o.BX)(C,{isActive:!!B,children:[B?l:n,s?(0,o.tZ)(p.V,{className:y.badge,count:s}):c?(0,o.tZ)(v,{className:y.dot}):null]}),_&&(0,o.tZ)(w,{isActive:!!B,children:f})]})}function C(e){let{isActive:t,children:i}=e;return(0,o.tZ)(h.M5,{minWidth:48,height:48,position:"relative",className:u()(y.icon,t?y.active:y.inactive),children:i})}function w(e){let{isActive:t,children:i}=e;return(0,o.tZ)(f.xv.B3,{color:t?"primary":"secondary",weight:t?"semibold":"medium",flex:"grow",children:i})}function S(e){var{matchSubpaths:t=!0,text:i}=e,c=(0,l._)(e,["matchSubpaths","text"]);let{isExpanded:u}=(0,d.SJ)();return(0,o.tZ)(a.Match,{children:()=>(0,o.tZ)(s.u,{text:i,placement:"right",disabled:u||!i,as:"div",children:(0,o.tZ)(_,(0,r._)((0,n._)({},c),{matchSubpaths:t,text:i}))})})}},13434:function(e,t,i){i.d(t,{P:()=>p});var n=i(16584),r=i(94184),l=i.n(r),o=i(78327),a=i(2207),s=i(95770),d=i(41427),c=i(47929),u=i(15080);function p(e){let{href:t,children:i,requireLogin:r,badge:p,icon:h,activeIcon:m,native:v,className:f}=e,b="undefined"!=typeof location?location.pathname:"",g=m?t&&((0,d.h)(b,t)?m:h):h,Z=(0,s.C)(r);return(0,n.BX)(a.C,{className:l()("reader2-mobile-nav-icon",f),href:r?null:"".concat(t,"?").concat(new URLSearchParams({utm_source:b,utm_medium:c.lP.reader2Nav})),native:v,onClick:null!=Z?Z:void 0,onPointerDown:()=>{},children:[g,i,p?(0,n.tZ)(o.V,{count:p,className:u.Z.badge}):null]})}},72260:function(e,t,i){i.d(t,{L:()=>o});var n=i(99259),r=i(97842),l=i(98012);function o(e){var t,i,o,a,s;let{chatLastClicked:d}=e,c=(0,r.RN)(),u=(0,n.M$)().isOnDestination,p=(0,r.WG)({},{focusThrottleInterval:3e5});if(!u)return{chatUnreadCount:null!==(o=null===(i=p.data)||void 0===i?void 0:i.unreadCount)&&void 0!==o?o:0,useChatBadge:!1};let h=null!==(a=c.inbox.directMessagesUnreadCount)&&void 0!==a?a:0,m=null!==(s=null==c?void 0:null===(t=c.inbox)||void 0===t?void 0:t.pubChatUnreadCount)&&void 0!==s?s:0,v=0===h&&m>0&&c.inbox.mostRecentChatTimestamp&&(!d||d.isBefore((0,l.Z)(c.inbox.mostRecentChatTimestamp)));return{chatUnreadCount:h,useChatBadge:v}}},69165:function(e,t,i){i.d(t,{YN:()=>iL,Gk:()=>iT});var n=i(7409),r=i(99282),l=i(16584),o=i(30396),a=i(3312),s=i.n(a),d=i(13742),c=i(92828),u=i(9721),p=i(19548),h=i(35543),m=i(85095),v=i(60807),f=i(68833),b=i(21811),g=i(73491),Z=i(9682),y=i(98914),_=i(19081),C=i(63474),w=i(70379),S=i(21959),x=i(58865),k=i(83034),B=i(33665),I=i(75744),P=i(95441),N=i(6490),X=i(10510),z=i(58175),L=i(26111),T=i(63651),M=i(47929);let E={tos:"tos-fWRMR_",subscribeWidgetContainer:"subscribeWidgetContainer-xBr6Eu",mainPubAvatar:"mainPubAvatar-jsZ95u",invitedPubAvatar:"invitedPubAvatar-OPhB0e",pubAvatars:"pubAvatars-nTTf2Z"};function A(){let e=(0,x._)([""," and ",""]);return A=function(){return e},e}function O(){let e=(0,x._)([""," by ",""]);return O=function(){return e},e}let V=e=>{let{profile:t,activeLiveStream:i,subscriptionToLiveStreamPub:n,invitedLiveStreamPublications:r,subscriptionsToLiveStreamInvitedPub:a,freeSignup:s,freeSignupEmail:d}=e,[c,u]=(0,o.eJ)(!0);return(0,l.tZ)(H,{profile:t,activeLiveStream:i,subscriptionToLiveStreamPub:n,isOpen:c,onClose:()=>u(!1),freeSignup:s,freeSignupEmail:d,invitedLiveStreamPublications:r,subscriptionsToLiveStreamInvitedPub:a})},H=e=>{var t,i,n,r,a,s,d,c,u,p,h,m,b;let{profile:g,activeLiveStream:Z,subscriptionToLiveStreamPub:y,isOpen:C,onClose:w,freeSignup:S,freeSignupEmail:x,invitedLiveStreamPublications:V,subscriptionsToLiveStreamInvitedPub:H}=e,U=(0,T.bHR)({liveStreamId:Z.liveStream.id,utm_source:M.b3.web,utm_campaign:M.VX.profileLiveStream,params:{appStoreRedirect:!0}}),[j,R]=(0,o.eJ)(!1),{iTemplate:D}=(0,P.M1)(),F=(0,v.aF)(),J=Z.pub,W=Object.entries(null!=H?H:{}).find(e=>{var t;let[i,n]=e;return["free_signup","subscribed"].includes(null!==(t=n.membership_state)&&void 0!==t?t:"unsubscribed")}),Y=!["free_signup","subscribed"].includes(null!==(h=null==y?void 0:y.membership_state)&&void 0!==h?h:"unsubscribed")&&(null==V?void 0:V.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==W?void 0:W[0])===e.id)),q=Object.entries(null!=H?H:{}).find(e=>{let[t,i]=e;return"free_signup"===i.membership_state}),G=(null==y?void 0:y.membership_state)!=="free_signup"&&(null==V?void 0:V.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==q?void 0:q[0])===e.id)),{version:K,showLogo:Q,Header:$,Subtext:ee,CTA:et,invitedPub:ei=null}=!J||"only_founding"!==Z.liveStream.audience||(null==y?void 0:y.membership_state)==="subscribed"&&(null==y?void 0:y.is_founding)||(null==W?void 0:null===(t=W[1])||void 0===t?void 0:t.membership_state)==="subscribed"&&(null==W?void 0:null===(i=W[1])||void 0===i?void 0:i.is_founding)?J&&"only_paid"===Z.liveStream.audience&&(null==y?void 0:y.membership_state)!=="subscribed"&&(null==q?void 0:null===(a=q[1])||void 0===a?void 0:a.membership_state)!=="subscribed"?{version:"paywall",showLogo:!1,invitedPub:G,Header:(0,l.BX)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["This live video is for paid subscribers of"," ",I18N.p(G?G.name:J.name)]}),Subtext:(0,l.tZ)(z.xv.B3,{align:"center",translated:!0,children:"Choose a paid subscription to watch"}),CTA:(0,l.BX)(_.tu,{className:E.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(B.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||(null==V?void 0:V.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==q?void 0:q[0])===e.id))&&(null==q?void 0:null===(s=q[1])||void 0===s?void 0:s.membership_state)==="free_signup",freeSignupEmail:x,isStatic:!1,pub:G||J,source:M.b3.profileLiveStream,user:F}),(0,l.tZ)(I.fJ,{className:E.tos,publication:J})]})}:!J||"only_free"!==Z.liveStream.audience||["subscribed","free_signup"].includes((null==y?void 0:y.membership_state)||"unsubscribed")||Object.values(null!=H?H:{}).every(e=>["subscribed","free_signup"].includes(e.membership_state||"unsubscribed"))||S?{version:"open app",showLogo:!1,Header:(0,l.BX)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["Watch ",I18N.p(g.name),"'s live video in the Substack app"]}),Subtext:(0,l.tZ)(z.xv.B3,{align:"center",translated:!0,children:"Available now for iOS and Android"}),CTA:(0,l.tZ)(k.AppInstallContent,{hideEmailPrompt:!0,utm_campaign:"profile-live-stream",utm_source:"web",openUrl:U})}:{version:"freewall",showLogo:!!(null==V?void 0:V.length),Header:(0,l.BX)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["Subscribe for free to watch"," ",I18N.p(Z.liveStream.title)]}),Subtext:(0,l.tZ)(z.xv.B3,{align:"center",color:"secondary",children:(null==V?void 0:V.find(e=>e.name))?D(A(),J.name,(null===(d=V.find(e=>e.name))||void 0===d?void 0:d.name)||""):J.author_name?D(O(),J.name,J.author_name):J.name}),CTA:(0,l.BX)(_.tu,{className:E.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(B.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||Object.values(null!=H?H:{}).some(e=>"free_signup"===e.membership_state),freeSignupEmail:x,isStatic:!1,pub:J,additionalPubIds:(null==V?void 0:V.find(e=>e.name))?[null===(c=V.find(e=>e.name))||void 0===c?void 0:c.id].filter(e=>!!e):[],source:M.b3.profileLiveStream,user:F,onSignup:()=>{j||window.location.reload()},onConfirmationRequired:()=>{window.location.search+="&requires_confirmation=true",R(!0)}}),(0,l.tZ)(I.fJ,{className:E.tos,publication:J})]})}:{version:"founding paywall",showLogo:!1,invitedPub:Y,Header:(0,l.BX)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:["This live video is for founding subscribers of"," ",I18N.p(Y?Y.name:J.name)]}),Subtext:(0,l.tZ)(z.xv.B3,{align:"center",translated:!0,children:"Choose a founding subscription to watch"}),CTA:(0,l.BX)(_.tu,{className:E.subscribeWidgetContainer,alignItems:"stretch",padding:20,children:[(0,l.tZ)(B.Z,{freeSignup:S||(null==y?void 0:y.membership_state)==="free_signup"||(null==y?void 0:y.membership_state)==="subscribed"||(null==V?void 0:V.find(e=>"enabled"===e.payments_state&&e.plans&&Number(null==W?void 0:W[0])===e.id))&&((null==W?void 0:null===(n=W[1])||void 0===n?void 0:n.membership_state)==="free_signup"||(null==W?void 0:null===(r=W[1])||void 0===r?void 0:r.membership_state)==="subscribed"),freeSignupEmail:x,isStatic:!1,pub:Y||J,source:M.b3.profileLiveStream,user:F,foundingUpsell:!0}),(0,l.tZ)(I.fJ,{className:E.tos,publication:J})]})};return((0,o.d4)(()=>{if(C){var e;(0,f.j)(f.FP.LIVE_STREAM_UPSELL_MODAL_SEEN,{live_stream_id:Z.liveStream.id,publication_id:null===(e=Z.pub)||void 0===e?void 0:e.id,version:K})}},[C,K,Z.liveStream.id,null===(u=Z.pub)||void 0===u?void 0:u.id]),(0,L.x)("requires_confirmation"))?(0,l.BX)(N.u_,{isOpen:C,onClose:w,children:[(0,l.tZ)(N.xB,{showClose:!0,onClose:w,icon:Q&&ei&&(null==ei?void 0:ei.logo_url)&&(null===(m=Z.pub)||void 0===m?void 0:m.logo_url)?(0,l.BX)(_.tu,{className:E.pubAvatars,alignItems:"center",children:[(0,l.tZ)(X.wk,{className:E.invitedPubAvatar,pub:ei,size:48}),(0,l.tZ)(X.wk,{className:E.mainPubAvatar,pub:Z.pub,size:48})]}):void 0}),(0,l.tZ)(N.fe,{children:(0,l.BX)(_.tu,{gap:4,children:[(0,l.tZ)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:"Confirm your email address"}),(0,l.BX)(z.xv.B3,{align:"center",translated:!0,children:["We sent an email to"," ",I18N.p(null!==(b=x||(null==F?void 0:F.email))&&void 0!==b?b:"")," with a confirmation link. Click the link to finish your subscription."]})]})})]}):(0,l.BX)(N.u_,{isOpen:C,onClose:w,children:[(0,l.tZ)(N.xB,{showClose:!0,onClose:w,icon:Q&&ei&&(null==ei?void 0:ei.logo_url)&&(null===(p=Z.pub)||void 0===p?void 0:p.logo_url)?(0,l.BX)(_.tu,{className:E.pubAvatars,alignItems:"center",children:[(0,l.tZ)(X.wk,{className:E.invitedPubAvatar,pub:ei,size:48}),(0,l.tZ)(X.wk,{className:E.mainPubAvatar,pub:Z.pub,size:48})]}):void 0}),(0,l.tZ)(N.fe,{children:(0,l.BX)(_.tu,{gap:4,children:["active"===Z.liveStream.status?$:(0,l.BX)(z.xv.H4,{weight:"heavy",align:"center",translated:!0,children:[I18N.p(g.name),"'s live video has ended. Download the app so you can join next time"]}),ee]})}),et]})};var U=i(81043),j=i(94184),R=i.n(j),D=i(80026),F=i(74312);function J(e){let{isOpen:t,onClose:n,photoUrl:r}=e;return(0,l.tZ)(F.cr,{module:"@/frontend/components/ImageViewerModal",resolve:e=>e.ImageViewerModal,onRequest:()=>Promise.resolve().then(i.bind(i,2563)),showModal:t,modalContent:[{attrs:{src:r}}],onClose:n,step:0,includeDownloadButton:!1})}var W=i(91400),Y=i(11007);let q={container:"container-wcKC8m",image:"image-WJiR9w"};function G(e){var t,i;let{profile:n}=e,{iString:r}=(0,P.M1)(),a=(0,W.XA)(),[s,d]=(0,o.eJ)(!1),c=null===(i=n.theme)||void 0===i?void 0:null===(t=i.cover_image)||void 0===t?void 0:t.url;return c?(0,l.BX)(D.sg,{paddingTop:{desktop:8,mobile:0},children:[(0,l.tZ)(D.sg,{className:q.container,onClick:()=>d(!0),position:"relative",style:{"--overflow":a?"0":"-".concat(20,"px"),"--aspect":"".concat(Y.$G)},children:(0,l.tZ)(D.xu,{as:"img",src:c,draggable:!1,alt:r("Cover image"),radius:a?void 0:"sm",outline:a?void 0:"detail",className:R()(q.image,a&&q.mobile)})}),(0,l.tZ)(J,{isOpen:s,onClose:()=>d(!1),photoUrl:c})]}):null}var K=i(32351),Q=i(60308);function $(e){var t,i;let{profile:n,activeLiveStream:r}=e,o=(null==n?void 0:n.max_pub_tier)===2,a=!!(null==n?void 0:n.profile_set_up_at);return(0,l.tZ)(K.Metadata,{title:r?"LIVE NOW: ".concat(n.name||r.user.name||(null===(i=r.pub)||void 0===i?void 0:i.name)," on Substack"):"".concat(n.name||"<no name>"," | Substack"),description:(null==r?void 0:null===(t=r.pub)||void 0===t?void 0:t.name)||n.bio,image:r?(0,T.VCE)(r.liveStream.id,{isGif:!0}):n&&n.photo_url&&(0,Q.zF4)(n.photo_url),seoProps:{noindex:!o||!n.photo_url&&!n.bio&&!a}})}var ee=i(94881),et=i(71068),ei=i(15771),en=i(61254),er=i(86075);function el(){let e=(0,x._)([""," blocked you"]);return el=function(){return e},e}function eo(){let e=(0,x._)(["You are blocked from subscribing to "," and their publications"]);return eo=function(){return e},e}function ea(){let e=(0,x._)(["You blocked ",""]);return ea=function(){return e},e}function es(){let e=(0,x._)(["You can manage your blocks in your account settings."]);return es=function(){return e},e}function ed(e){let{profile:t}=e,{iTemplate:i}=(0,P.M1)();return(0,l.BX)(eu,{children:[(0,l.tZ)(en.iz,{}),(0,l.tZ)(er.u,{icon:(0,l.tZ)(ee.Z,{}),title:i(el(),t.name||"This user"),description:i(eo(),t.name||"this user")})]})}function ec(e){let{profile:t}=e,{iString:i,iTemplate:n}=(0,P.M1)();return(0,l.BX)(eu,{children:[(0,l.tZ)(en.iz,{}),(0,l.tZ)(er.u,{icon:(0,l.tZ)(ee.Z,{}),title:n(ea(),t.name||"this user"),description:n(es()),button:(0,l.tZ)(ei.zx,{href:(0,Q.v3t)(),children:i("Account settings")})})]})}let eu=(0,et.zo)({display:"flex",direction:"column",gap:32,paddingX:{desktop:0,mobile:16}});var ep=i(39693),eh=i.n(ep),em=i(99259),ev=i(40647),ef=i(69891),eb=i(77705),eg=i(42375),eZ=i(81914),ey=i(883),e_=i(12765),eC=i(7882),ew=i(27744),eS=i(70293),ex=i(31406),ek=i(84864);function eB(e){var t;let i,{profile:a,type:s="notes"}=e;(0,o.d4)(()=>{(0,f.j)(f.FP.FEED_PROFILE_SCREEN_VIEWED,(0,n._)({target_user_id:a.id},(0,ek.extractEventAttributionDataFromRecord)((0,ex.eY)())))},[]);let d=(0,v.aF)(),c=(0,em.M$)().isOnDestination,u=!d&&c,[h,m]=(0,e_.L)(ew.K5,ew._H);"likes"===s?i=["like"]:"notes"===s?i=void 0:console.warn("Unrecognized type in NotesList: ".concat(s));let{canFetchMore:b,lastPage:g,fetchMore:Z,hasLoadedOnce:y}=(0,eC.NL)({pathname:"/api/v1/reader/feed/profile/".concat(a.id),query:{types:i},getPageInit:e=>{var t;let{lastPage:i,init:l}=e,o=null==i?void 0:null===(t=i.result)||void 0===t?void 0:t.nextCursor;return o&&(l.query=(0,r._)((0,n._)({},l.query),{cursor:o})),l},auto:!0,deps:[a.id,s],pages:h.pages,dispatch:m}),C=b&&!!(null==g?void 0:null===(t=g.result)||void 0===t?void 0:t.nextCursor)&&!u,{bodyRef:w}=(0,eS.M)(Z,[g],{shouldCheck:C,threshold:640}),S=h.pages.map(e=>{var t;return(null===(t=e.result)||void 0===t?void 0:t.items)||[]}).flat(),x=u&&S.length>2;x&&(S=S.slice(0,3));let k=a&&a.id===(null==d?void 0:d.id);return(0,o.d4)(()=>{var e;(null==g?void 0:null===(e=g.result)||void 0===e?void 0:e.items.length)===0&&C&&Z()},[g]),(0,l.tZ)(eg.$U,{surface:"profile",dispatch:m,state:h,children:(0,l.BX)(_.tu,{ref:w,children:[(0,l.tZ)(p.fQ,{children:S.map((e,t)=>(0,l.tZ)(eZ.Bm,{item:(0,ew.K6)(h,e),showLoginPrompt:!!(x&&2===t)}))}),(null==g?void 0:g.isLoading)||!y?(0,l.tZ)(ey.n,{}):0===S.length?(0,l.tZ)(_.hs,{paddingY:64,flex:"grow",children:"notes"===s?(0,l.tZ)(eI,{yourProfile:k}):(0,l.tZ)(eP,{profile:a,yourProfile:k})}):null]})})}function eI(e){let{yourProfile:t}=e;return(0,l.tZ)(er.u,{icon:(0,l.tZ)(eb.Z,{}),title:t?"You havent published any notes yet.":"This user hasnt published any notes yet.",description:t?"Once you do, youll see them here.":"Once they do, youll see them here.",button:(0,l.tZ)(ei.zx,{href:(0,Q.E2n)(),children:"Explore more notes"})})}function eP(e){let{yourProfile:t,profile:i}=e,n=(0,ek.guessFirstName)(i.name);return(0,l.tZ)(er.u,{title:"No likes yet",description:t?"Your likes will appear here.":n?"".concat(n,"s likes will appear here."):"Their likes will appear here."})}var eN=i(98248),eX=i(65575),ez=i(19801);function eL(e){var t,i;let{profile:n,userId:r}=e,[a,s]=(0,o.eJ)(0),[d,c]=(0,o.eJ)([]),u=(0,v.aF)(),p=(0,em.M$)().isOnDestination,h=!u&&p,{result:m,isLoading:b}=(0,eC.ib)({pathname:"/api/v1/profile/posts",query:{profile_user_id:r,offset:a,limit:13},auto:!0,deps:[r,a]}),g=h&&((null===(i=d[0])||void 0===i?void 0:null===(t=i.posts)||void 0===t?void 0:t.length)||0)>2;(0,o.bt)(()=>{m&&c(0===a?[m]:[...d,m])},[m]);let Z=(0,o.Ye)(()=>{let e=d.map(e=>e.posts.slice(0,12)).flat();return g&&(e=e.slice(0,3)),{posts:e,publicationMap:new Map(d.map(e=>e.publications).flat().map(e=>[e.id,e]))}},[d]),C=d[d.length-1],w=C&&C.posts.length>12&&!h,{bodyRef:S}=(0,eS.M)(()=>{s(a+12)},[Z,b],{shouldCheck:!!w&&!b}),{posts:x,publicationMap:k}=Z;return(0,l.tZ)(_.tu,{children:(0,l.BX)(eX.mE,{ref:S,children:[m?x.length>0?x.map((e,t)=>{let i=k.get(e.publication_id);if(i){let r="profile"===i.homepage_type&&n.handle?(0,T.e3o)({postId:e.id,handle:n.handle,noBase:!1}):null;return(0,l.tZ)(ez.nK,{post:e,pub:i,isViewed:!0,isLiked:!!e.reaction,isSaved:e.is_saved,showLoginPrompt:!!(g&&2===t),onClick:r=>{if((0,f.j)(f.FP.ARCHIVE_PAGE_POST_CLICKED,{post_id:e.id,tab:"new",rank_in_feed:t,source:"profile"}),r.ctrlKey||r.metaKey)return;r.preventDefault(),r.stopPropagation();let l=p?(0,T.e3o)(n.handle?{postId:e.id,handle:n.handle,noBase:!0}:{readerProfileUser:n,postId:e.id,noBase:!0}):(0,T.uRy)(i,e,{noBase:!1});(0,y.uX)(l)},utmSource:"profile",openInPostViewer:!0,canonicalUrl:r},e.id)}}):(0,l.tZ)(eT,{profile:n}):(0,l.tZ)(ez.Zg,{}),b&&(0,l.tZ)(eN.$j,{})]})})}function eT(e){let{profile:t}=e,i=(0,v.aF)(),n=t&&t.id===(null==i?void 0:i.id);return(0,l.tZ)(_.hs,{paddingY:64,flex:"grow",children:(0,l.tZ)(er.u,{icon:(0,l.tZ)(eb.Z,{}),title:"".concat(n?"You havent":"".concat(t.name," hasnt")||"This user hasnt"," published any posts yet."),description:"Once they do, youll see them here."})})}var eM=i(71408),eE=i(41352),eA=i(99916),eO=i(78446),eV=i(43254),eH=i(36186),eU=i(59065);function ej(e){let{subscriptions:t,profile:i}=e,n=(0,v.aF)(),r=i.id===(null==n?void 0:n.id);return 0===t.length?(0,l.tZ)(_.hs,{paddingY:64,flex:"grow",children:r?i.hasHiddenPublicationUsers?(0,l.tZ)(er.u,{title:"All of your publications are hidden.",description:"Edit your profile to show others what you read.",button:(0,l.tZ)(ei.zx,{href:(0,Q.qvS)(),children:"Edit profile"})}):(0,l.tZ)(er.u,{title:"You havent subscribed to any publications yet.",description:"Visit Explore to find something to read.",button:(0,l.tZ)(ei.zx,{href:(0,Q._P8)(),children:"Explore"})}):(0,l.tZ)(er.u,{title:"".concat(i.name," doesnt have any subscriptions to show."),description:"Visit Explore to find something to read.",button:(0,l.tZ)(ei.zx,{href:(0,Q._P8)(),children:"Explore"})})}):(0,l.tZ)(_.tu,{flex:"fill",gap:{desktop:8,mobile:0},padding:8,children:t.map(e=>(0,l.tZ)(eR,{subscription:e},e.id))})}function eR(e){let{subscription:t}=e,i=t.is_founding?"founder":"subscribed"===t.membership_state?"subscribed":null,{publication:n}=t,{author:r}=n,o=(0,eV._F)({publication:n,subscriptionSource:M.b3.profileSubscriptions}),a="profile"===n.homepage_type&&r&&r.handle?(0,eH.NJ)(r.handle):(0,Q.TJI)(n);return(0,l.BX)(_.gq,{as:"a",href:a,gap:12,alignItems:"center",paddingY:8,paddingX:8,className:eU.Z.readsRow,minWidth:0,flex:"grow",children:[(0,l.tZ)(X.wk,{pub:n,size:40,badgeType:i}),(0,l.BX)(_.tu,{flex:"grow",minWidth:0,children:[(0,l.tZ)(z.xv.B4,{ellipsis:!0,weight:"semibold",color:"primary",children:n.name}),r&&(0,l.BX)(z.xv.B4,{ellipsis:!0,color:"secondary",children:["by ",r.name]})]}),o.isSubscribed?(0,l.tZ)(eD,{onUnsubscribe:o.unsubscribe,publication:n,button:(0,l.tZ)(ei.zx,{priority:"secondary",size:"sm",children:"Subscribed"})}):(0,l.tZ)(ei.zx,{priority:"primary",size:"sm",onClick:o.subscribe,children:"Subscribe"})]})}function eD(e){let{onUnsubscribe:t,publication:i,button:n,manageOnly:r,isPledged:o}=e,a=(0,eO.N4)(),s=async()=>{!a.isConfirming&&await a.confirm()&&t()};return(0,l.BX)(l.HY,{children:[(0,l.tZ)(eO.sm,{modal:a,title:"Unsubscribe from ".concat(i.name,"?"),body:o?"Unsubscribing will also cancel your pledge.":"You can resubscribe at any time.",cancelLabel:"Cancel",confirmLabel:"Unsubscribe"}),(0,l.BX)(eA.v2,{trigger:n,children:[(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(eM.Z,{}),target:"_blank",href:(0,Q.mGw)(i,{addBase:!0}),children:"Manage subscription"}),r?null:(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(eE.Z,{}),onClick:s,priority:"destructive",children:"Unsubscribe"})]})]})}var eF=i(31012),eJ=i(38202),eW=i(70839);let eY=e=>{let{lists:t,reads:i,ownProfile:n}=e,[r,a]=(0,o.eJ)(!1),[s,d]=(0,o.eJ)(null!=t?t:[]);return(0,o.d4)(()=>{(0,f.j)(f.FP.LIST_PROFILE_TAB_SEEN)}),(0,l.BX)(_.tu,{flex:"fill",gap:16,padding:8,children:[n&&(0,l.tZ)(eG,{openModal:()=>a(!0)}),null==s?void 0:s.map(e=>(0,l.tZ)(eq,{list:e})),(0,l.tZ)(eW.x,{open:r,close:e=>{e&&d([...s,e]),a(!1)},reads:i})]})},eq=e=>{let{list:t}=e,{iPlural:i}=(0,P.M1)();return(0,l.tZ)("a",{href:"".concat((0,T.SVA)(),"/list/").concat(t.slug),target:"_blank",rel:"noopener",onClick:()=>(0,f.j)(f.FP.LIST_PROFILE_TAB_LIST_CLICKED,{list_id:t.id}),children:(0,l.BX)(_.gq,{alignItems:"start",justifyContent:"center",gap:12,children:[(0,l.tZ)(eJ.t,{src:(0,T.cKK)(t),width:40,height:40,className:"previewImage-gPZ7_D"}),(0,l.BX)(_.tu,{minWidth:0,flex:"grow",children:[(0,l.tZ)(z.xv.B4,{weight:"semibold",ellipsis:!0,children:t.name}),(0,l.tZ)(z.xv.B4,{color:"secondary",ellipsis:!0,children:i("1 item","%1 items",t.publications.length)})]})]})})},eG=e=>{let{openModal:t}=e;return(0,l.BX)(_.gq,{alignItems:"center",justifyContent:"start",gap:8,cursor:"pointer",onClick:t,children:[(0,l.tZ)(ei.hU,{priority:"secondary-outline",children:(0,l.tZ)(eF.Z,{size:20})}),(0,l.tZ)(z.xv.B3,{translated:!0,weight:"medium",children:"Create new list"})]})},eK=new Set(["notes","posts","likes","lists","reads"]);function eQ(e){let{subscriptions:t,profile:i,subpath:n}=e,[r,o]=(0,Z.tv)(),a=(0,v.aF)(),{getConfigFor:s}=(0,ev.xR)(),d=s("lists_enabled"),c=(0,em.M$)().isOnDestination,u=n?n.slice(1):void 0,p=u&&eK.has(u)?u:i.hasActivity?"notes":i.hasPosts?"posts":i.hasLikes?"likes":(null==i?void 0:i.lists)&&d?"lists":"reads",h=eh()([{value:"notes",label:"Activity"},{value:"posts",label:"Posts"},{value:"likes",label:"Likes"},d?{value:"lists",label:"Lists"}:null,{value:"reads",label:"Reads".concat(i.visibleSubscriptionsCount>0?" (".concat(i.visibleSubscriptionsCount,")"):"")}]);return(0,l.BX)(_.tu,{children:[(0,l.tZ)(ef.n,{tabs:h,value:p,onChange:e=>{let t=history.state,n=c?"".concat((0,Q.NNq)(i,{noBase:!0}),"/").concat(e):"/profile/".concat(e);(0,f.j)(f.FP.PROFILE_TAB_TAPPED,{tab_id:e}),o(n,!0),history.replaceState(t,"")}}),(0,l.BX)(_.tu,{flex:"fill",paddingBottom:20,children:["posts"===p&&(0,l.tZ)(eL,{profile:i,userId:i.id}),"notes"===p&&(0,l.tZ)(eB,{profile:i}),"likes"===p&&(0,l.tZ)(eB,{profile:i,type:"likes"}),d&&"lists"===p&&(0,l.tZ)(eY,{lists:i.lists,ownProfile:(null==a?void 0:a.id)===i.id}),"reads"===p&&(0,l.tZ)(ej,{subscriptions:t,profile:i})]})]})}var e$=i(73510);function e0(){let{iString:e}=(0,P.M1)();return(0,l.BX)(eX.T3,{className:eU.Z.page,children:[(0,l.tZ)(K.Metadata,{title:e("Profile not found")}),(0,l.tZ)(er.u,{icon:(0,l.tZ)(e$.Z,{}),title:e("Profile not found"),description:e("We couldn't load this profile."),button:(0,l.tZ)(ei.zx,{href:(0,Q.daR)({params:{searching:"profile"}}),children:e("Search people on Substack")})})]})}var e1=i(28175),e2=i.n(e1),e4=i(94874),e5=i(43570),e8=i(92039),e7=i(98012);let e3={position:"position-PH56bs",container:"container-JHgoYl",avatar:"avatar-h98fMT",liveStreamAvatar:"liveStreamAvatar-f516FN",liveTag:"liveTag-Gk0dUD"};function e6(e){let{profile:t,activeLiveStream:i,hasCoverImage:n}=e,r=(0,W.XA)(),a=(0,Q.SMH)(t),[s,d]=(0,o.eJ)(!1),{isLive:c}=ti(i);return(0,l.BX)(e9,{hasCoverImage:n,children:[(0,l.BX)(te,{onClick:()=>{c&&(null==i?void 0:i.liveStream.id)?(0,y.uX)((0,T.bHR)({liveStreamId:i.liveStream.id,utm_source:M.b3.profileAvatar,utm_campaign:M.VX.substackProfile,params:{utm_medium:M.lP.web}}),{local_navigation:!1}):d(!0)},children:[(0,l.tZ)(e4.qE,{size:n?r?88:112:r?64:88,user:t,className:R()(c?e3.liveStreamAvatar:void 0,e3.avatar)}),(0,l.tZ)(tt,{isLive:c})]}),(0,l.tZ)(J,{isOpen:s,onClose:()=>d(!1),photoUrl:a})]})}function e9(e){let{hasCoverImage:t,children:i}=e;return(0,l.tZ)(D.xu,{position:t?"absolute":void 0,className:t?e3.position:void 0,children:i})}function te(e){let{onClick:t,children:i}=e;return(0,l.tZ)(_.hs,{onClick:t,tabIndex:0,showFocus:!0,animate:!0,radius:"full",position:"relative",cursor:"pointer",bg:"primary",className:e3.container,children:i})}function tt(e){let{isLive:t}=e,{iString:i}=(0,P.M1)();return t?(0,l.tZ)(e5.Vp,{className:e3.liveTag,theme:"error",priority:"primary",children:i("LIVE")}):null}let ti=e=>{let t=(0,e8.rG)(),[i,n]=(0,o.eJ)(!1);return(0,o.d4)(()=>{if(null==e?void 0:e.liveStream.id)return null==t?void 0:t.listen({["live-stream:".concat(e.liveStream.id)]:e=>{var t;let{data:i}=e;(null==i?void 0:null===(t=i.message)||void 0===t?void 0:t.type)==="live-stream:ended"&&n(!0)}})},[t,null==e?void 0:e.liveStream.id]),{isLive:null!=e&&!!e.liveStream.id&&"active"===e.liveStream.status&&(0,e7.Z)(e.liveStream.started_streaming_at).isBefore((0,e7.Z)().subtract(1,"minute"))&&!i}};var tn=i(9404),tr=i(71787),tl=i(25256),to=i(42841),ta=i(18814),ts=i(45977),td=i(49438),tc=i(40737),tu=i(80569),tp=i.n(tu),th=i(10878),tm=i(65958),tv=i(85566),tf=i(67369);function tb(e){let{user:t,profile:i}=e,{iString:a}=(0,P.M1)(),{popToast:s}=(0,w.pm)(),[d,c]=(0,o.eJ)(!1),{refetch:u,isLoading:p}=(0,eC.ib)({pathname:"/api/v1/@".concat(i.handle,"/personal-initialize"),method:"post"}),h=async()=>{(0,f.j)(f.FP.PROFILE_MENU_DASHBOARD_LINK_CLICKED);let e=await u({query:{action:"access_dashboard"}});e instanceof Error?(console.error(e),s(e=>(0,l.tZ)(w.FN,(0,r._)((0,n._)({},e),{text:"Something went wrong. Please try again.",Icon:eE.Z})))):(c(!0),location.href=e.redirectUrl)},m=(null==t?void 0:t.subdomain)?(0,Q.c0Q)(t.subdomain,{params:{utm_source:M.b3.substack}}):void 0;return(null==t?void 0:t.subdomain)||i.isPersonalEligible?(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(tf.Z,{}),disabled:p||d,onClick:(null==t?void 0:t.subdomain)?void 0:h,href:(null==t?void 0:t.subdomain)?m:void 0,children:a("Publisher dashboard")}):null}var tg=i(40949),tZ=i(50167),ty=i(84923);function t_(){let e=(0,x._)([""," only accepts messages from subscribers"]);return t_=function(){return e},e}function tC(){let e=(0,x._)([""," only accepts messages from paid subscribers"]);return tC=function(){return e},e}function tw(){let e=(0,x._)([""," only accepts messages from founding members"]);return tw=function(){return e},e}let tS=(0,T.Nhr)({utm_source:M.b3.substack}),tx=e=>{var t,i,a;let{profile:s,subscribeButton:d,yourProfile:c,user:u,onShare:h,showCTAs:m}=e,{iString:v}=(0,P.M1)(),b=(0,W.XA)(),g=(0,p.CH)(s,{surface:"profile",onClick(e){(0,f.j)(f.FP.PROFILE_BLOCKED_MUTED_CHANGED,{action:e,target_user_id:s.id})}}),[Z,y]=(0,o.eJ)(!1),C=(0,tg.y)(),w=()=>{C((0,Q.NNq)(s))},S=(0,tm.s)({source:"profile"}),x=null==s?void 0:null===(t=s.publicationUsers)||void 0===t?void 0:t.find(e=>"admin"===e.role||"contributor"===e.role),k=x||(null==s?void 0:s.isPersonalEligible),B={size:b?"sm":"md",flex:"grow"};return(0,l.BX)(_.hs,{gap:8,direction:"row",justifyContent:"end",children:[!c&&(0,l.BX)(l.HY,{children:[d,m&&!d&&(0,l.tZ)(tP,(0,n._)({profile:s},B)),s.can_dm?(0,l.tZ)(tk,(0,n._)({profile:s},B)):(null!==(a=null===(i=s.dm_upgrade_options)||void 0===i?void 0:i.length)&&void 0!==a?a:0)>0&&s.primaryPublication&&(0,l.tZ)(tB,(0,n._)({profile:s,publication:s.primaryPublication},B)),(0,l.BX)(eA.v2,{trigger:(0,l.tZ)(ei.hU,{size:B.size,children:(0,l.tZ)(tn.Z,{size:20})}),children:[(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(tr.Z,{}),priority:"primary",onClick:w,children:"Copy link"}),(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(tl.Z,{}),onClick:h,children:"Share"}),(0,l.BX)(eA.xw,{children:[s.can_dm&&(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(to.Z,{}),onClick:()=>S.handleStart([s.id]),children:"Send message"}),(0,l.tZ)(tI,(0,n._)({profile:s},B)),s.primaryPublication&&["free_can_upgrade","free_can_pledge"].includes(s.primaryPublicationSubscriptionState)&&(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(eM.Z,{}),href:(0,Q.mGw)(s.primaryPublication,{addBase:!0}),children:"Manage Subscription"}),s.subscribesToViewerSubdomain&&(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(ta.Z,{}),href:(0,Q.pN7)({subdomain:s.subscribesToViewerSubdomain},{userId:s.id},{addBase:!0}),children:"Subscriber details"})]}),(0,l.BX)(eA.xw,{children:[g,(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(e$.Z,{}),priority:"destructive",onClick:()=>y(!0),children:"Report"})]}),(null==u?void 0:u.is_global_admin)&&(0,l.tZ)(eA.xw,{children:(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(ta.Z,{}),priority:"secondary",onClick:()=>window.location.href=(0,Q.SIi)(s.id),children:"Open in Underground"})})]}),(0,l.tZ)(th.u,{canReportToAdmins:!1,isOpen:Z,onClose:()=>y(!1),onSubmit:async e=>{let{reportCategory:t,details:i}=e;await tp().post("/api/v1/users/".concat(s.id,"/profile/report")).send({details:i,reportCategory:t,surface:"profile"}),y(!1)},reasons:th.M})]}),m&&c&&(0,l.BX)(l.HY,{children:[s&&k?(0,l.tZ)(tZ.QC,(0,r._)((0,n._)({},B),{profile:s,publicationUser:x})):s.profile_set_up_at?(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},B),{onClick:h,children:v("Share profile")})):(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},B),{href:tS,localNavigation:!1,children:v("Set up profile")})),(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},B),{priority:"secondary",href:(0,Q.qvS)(),children:v("Edit profile")})),(0,l.BX)(eA.v2,{trigger:(0,l.tZ)(ei.hU,{size:B.size,children:(0,l.tZ)(tn.Z,{size:20})}),children:[(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(tr.Z,{}),priority:"primary",onClick:w,children:v("Copy link")}),(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(tl.Z,{}),onClick:h,children:v("Share")}),(0,l.tZ)(eA.xw,{children:(0,l.tZ)(tb,{user:u,profile:s})}),(null==u?void 0:u.is_global_admin)&&(0,l.tZ)(eA.xw,{children:(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(ta.Z,{}),priority:"secondary",onClick:()=>window.location.href=(0,Q.SIi)(s.id),children:v("Open in Underground")})})]})]})]})};function tk(e){let{profile:t,size:i,flex:n}=e,{isLoading:r,handleStart:o}=(0,tm.s)({source:"profile"}),{iString:a}=(0,P.M1)();return(0,l.tZ)(ei.zx,{priority:"secondary",onClick:()=>o([t.id]),disabled:r,size:i,flex:n,children:a("Message")})}function tB(e){let{profile:t,publication:i,size:o,flex:a}=e,{iString:s,iTemplate:d}=(0,P.M1)(),c=(0,v.aF)(),u=(0,ty.d)(),{dm_upgrade_options:p}=t,h=null==p?void 0:p.includes("free_subscribers"),m=null==p?void 0:p.includes("paid_subscribers");return(0,l.BX)(l.HY,{children:[(0,l.tZ)(ei.zx,{priority:"secondary",leading:(0,l.tZ)(ts.Z,{size:20}),onClick:u.onOpen,size:o,flex:a,children:s("Message")}),(0,l.tZ)(N.u_,(0,r._)((0,n._)({},u),{width:360,children:(0,l.BX)(tv.F,{title:s(h?"Subscribers only":m?"Paid subscribers only":"Founding members only"),subtitle:d(h?t_():m?tC():tw(),t.name),onClose:u.onClose,children:[(0,l.tZ)(ei.zx,{priority:"primary",href:(0,T.W1P)(i,{user:c,addBase:!0,params:{next:document.location.href,utm_source:"profile-dm",utm_medium:M.lP.web,utm_campaign:M.VX.substackProfile}}),children:s("Subscribe")}),(0,l.tZ)(ei.zx,{priority:"secondary",onClick:u.onClose,children:s("Cancel")})]})}))]})}function tI(e){let{profile:t}=e,{isFollowing:i,buttonProps:o}=(0,h.yr)(t,"profile");return(0,l.tZ)(eA.sN,(0,r._)((0,n._)({leading:i?(0,l.tZ)(td.Z,{}):(0,l.tZ)(tc.Z,{})},o),{children:i?"Unfollow":"Follow"}))}function tP(e){let{profile:t,size:i,flex:o}=e,{isFollowing:a,buttonProps:s}=(0,h.yr)(t,"profile"),{iString:d}=(0,P.M1)();return(0,l.tZ)(ei.zx,(0,r._)((0,n._)({priority:a?"secondary":"primary",size:i,flex:o},s),{children:d(a?"Following":t.followsViewer?"Follow back":"Follow")}))}var tN=i(57407),tX=i(67823),tz=i(59154),tL=i(85941),tT=i(79138),tM=i(23365),tE=i(37632),tA=i(18573),tO=i(19022),tV=i(8796),tH=i(39535),tU=i(33425),tj=i(10656),tR=i(55578);let tD={books:{icon:(0,l.tZ)(tL.Z,{size:16}),label:"Book"},facebook:{icon:(0,l.tZ)(tT.Z,{size:16}),label:"Facebook"},instagram:{icon:(0,l.tZ)(tM.Z,{size:16}),label:"Instagram"},linkedin:{icon:(0,l.tZ)(tE.Z,{size:16}),label:"LinkedIn"},youtube:{icon:(0,l.tZ)(tU.Z,{size:16}),label:"YouTube"},tiktok:{icon:(0,l.tZ)(tV.Z,{size:16}),label:"TikTok"},bluesky:{icon:(0,l.tZ)(tz.Z,{size:16}),label:"Bluesky"},soundcloud:{icon:(0,l.tZ)(tO.Z,{size:16}),label:"Soundcloud"},bandcamp:{icon:(0,l.tZ)(tX.Z,{size:16}),label:"Bandcamp"},twitter:{icon:(0,l.tZ)(tH.Z,{size:16}),label:"Twitter",verifiedIcon:(0,l.tZ)(tN.Z,{className:R()(eU.Z.fillIcon,eU.Z.twitterVerifiedIcon),size:18})}},tF={icon:(0,l.tZ)(tA.Z,{size:16,stroke:"var(--color-fg-primary) !important"}),label:"Website"};function tJ(e){var t;if(!e.type)return tF.icon;let i=tD[e.type];return null!==(t=null==i?void 0:i.icon)&&void 0!==t?t:tF.icon}function tW(e){return e?Object.keys(tD).indexOf(e):-1}var tY=i(76720);let tq="chip-fQexYY";function tG(e){let{link:t}=e;return(0,l.tZ)(tY.A,{leading:(0,l.tZ)(tK,{children:tJ(t)}),href:t.url,newTab:!0,className:tq,children:function(e){var t,i,n,r;let l="Link",o=null===e.type,a=(n=e.value,!!(0,tj.Du)(n)||!!(0,tj.Du)("https://".concat(n))&&n.includes(".")&&!n.includes(" ")),s="books"===e.type||"facebook"===e.type?e.value:null===(t=(null==(r=e.value)?void 0:r.startsWith("@"))?r:r?"@".concat(r):null)||void 0===t?void 0:t.toLocaleLowerCase();return o?(0,tR.u)(e.value,0,!1):a?null!==(i=e.label)&&void 0!==i?i:l:null!=s?s:l}(t)})}let tK=(0,C.zo)({display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:4});function tQ(e){let{pubs:t,links:i,onChipClick:n,params:r}=e,o=t.length+i.length;return(0,l.BX)(eA.v2,{trigger:(0,l.tZ)(tY.A,{flex:"auto",children:"+".concat(o.toLocaleString())}),placement:"bottom-start",children:[t.length>0&&t.map(e=>(0,l.tZ)(t0,{pub:e,onClick:n,params:r},e.id)),i.length>0&&i.map(e=>(0,l.tZ)(t$,{userLink:e},e.url))]})}function t$(e){var t;let{userLink:i}=e,n=i.type&&tD[i.type],r=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:i.value;return(0,l.tZ)(eA.sN,{leading:tJ(i),href:i.url,target:"_blank",children:(0,l.tZ)(t1,{title:r,body:i.value})},i.url)}function t0(e){let{pub:t,onClick:i,params:n}=e;return(0,l.tZ)(eA.sN,{leading:(0,l.tZ)(et.xu,{children:(0,l.tZ)(X.wk,{pub:t,size:20,radius:"xs"})}),href:(0,Q.TJI)(t,{params:n}),onClick:e=>i({e,pub:t}),children:(0,l.tZ)(t1,{title:t.name,body:t.subdomain})},t.id)}function t1(e){let{title:t,body:i}=e;return(0,l.BX)(_.sg,{minWidth:0,children:[(0,l.tZ)(z.xv.B4,{weight:"semibold",maxWidth:200,ellipsis:!0,children:t}),(0,l.tZ)(z.xv.B4,{color:"secondary",maxWidth:200,ellipsis:!0,children:i})]})}function t2(e){let{pub:t,onClick:i,params:n}=e;return(0,l.tZ)(tY.A,{leading:(0,l.tZ)(X.wk,{pub:t,size:20,radius:"full",alt:""}),href:(0,Q.TJI)(t,{params:n}),onClick:e=>i({e,pub:t}),newTab:!0,className:tq,flex:"auto",children:t.name})}function t4(e){let{profile:t,primaryPublication:i,utmParams:n}=e,{visibleChips:r,overflowChips:a,handleChipClick:s}=function(e,t,i){var n;let r=(0,W.XA)(),l=(0,tg.y)(),o=(0,em.M$)().isOnDestination,a=r?2:3,s=e.publicationUsers.filter(e=>{var i;return(null===(i=e.publication)||void 0===i?void 0:i.id)!==(null==t?void 0:t.id)}),d=[t,...s.length>0?eh()(s.map(e=>e.publication)):[],...(null!==(n=e.userLinks)&&void 0!==n?n:[]).sort((e,t)=>{let i=tW(e.type),n=tW(t.type);if(i!==n)return i-n;let r=String(e.id||""),l=String(t.id||"");return r.localeCompare(l)})].filter(Boolean);return{visibleChips:d.slice(0,a),overflowChips:d.slice(a),handleChipClick:e=>{let{e:t,pub:i}=e,n=(0,Q.TJI)(i,{params:void 0}),r=!1;try{r=!o&&(window.location.origin===new URL(n).origin||i.custom_domain===window.location.hostname)}catch(e){r=!1}r?(t.preventDefault(),l(n),(0,f.j)(f.FP.PUBLICATION_URL_COPIED)):(0,f.x6)(i,"profile")}}}(t,i),d=e=>!!(e&&"object"==typeof e&&"subdomain"in e),c=e=>!!(e&&"object"==typeof e&&"type"in e),u=(0,o.Ye)(()=>r.filter(d),[r]),p=(0,o.Ye)(()=>r.filter(c),[r]),h=(0,o.Ye)(()=>a.filter(d),[a]),m=(0,o.Ye)(()=>a.filter(c),[a]);return(0,l.BX)(t5,{children:[u.map(e=>(0,l.tZ)(t2,{pub:e,onClick:s,params:n},"pub-".concat(e.id))),p.map(e=>(0,l.tZ)(tG,{link:e},"link-".concat(e.id))),a.length>0&&(0,l.tZ)(tQ,{pubs:h,links:m,onChipClick:s,params:n})]})}let t5=(0,C.zo)({display:"flex",gap:6,wrap:"nowrap"});var t8=i(53678),t7=i(24547);function t3(e){let{profile:t}=e,{leaderboardRanking:i}=t;if(!i)return null;let n="paid"===i.ranking?"#".concat(i.rank," in ").concat(i.category_name):"bestseller"===i.category_id?"#".concat(i.rank," New bestseller"):"#".concat(i.rank," Rising in ").concat(i.category_name);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(z.xv.B3,{color:"secondary",as:"span",children:"  "}),(0,l.tZ)(z.xv.B3,{color:"accent",as:"span",children:(0,l.tZ)(t8.hh,{href:(0,T.k5c)({categoryId:i.category_id,ranking:i.ranking,utm_source:"profile",focusedPubId:i.publication_id,backAction:(0,Q.NNq)(t)}),children:n})})]})}function t6(e){let{profile:t,yourProfile:i}=e;return(0,l.BX)(_.X2,{alignItems:"center",wrap:"wrap",gap:8,children:[(0,l.tZ)(t9,{profile:t,yourProfile:i}),(0,l.tZ)(t3,{profile:t})]})}function t9(e){let{profile:t,yourProfile:i}=e;return i||!t.mutualsContext?(0,l.tZ)(it,{profile:t}):(0,l.tZ)(ie,{profile:t})}function ie(e){let{profile:t}=e,i=t.mutualsContext;if(!(i&&i.users.length>0))return(0,l.tZ)(it,{profile:t});let n=i.users.filter(e=>e.name);return(0,l.BX)(ir,{children:[(0,l.tZ)(ii,{faces:n}),(0,l.tZ)(it,{profile:t})]})}function it(e){let{profile:t}=e,i=(0,em.M$)().isOnDestination?(0,T.Fhs)(t,null,{noBase:!0}):"/profile/subscribers";return(0,l.tZ)(z.xv.B3,{color:"secondary",children:(0,l.tZ)(t8.hh,{href:i,state:{showBack:!0},decoration:"hover-underline",color:"secondary",children:t.subscriberCountString})})}function ii(e){let{faces:t}=e;return(0,l.tZ)(t7.H,{users:t,max:3,size:20,renderAvatar:e=>(0,l.tZ)(e4.xV,(0,n._)({},e))})}let ir=(0,et.zo)({display:"flex",direction:"row",gap:12,minWidth:0,alignItems:"center"});var il=i(87077),io=i(68279);function ia(e){let{profile:t,yourProfile:i}=e;return t.handle?(0,l.tZ)(is,{profile:t}):i?(0,l.tZ)(id,{}):null}let is=e=>{let{profile:t}=e,i=(0,W.XA)(),n=(0,tg.y)();return(0,l.tZ)(z.xv.B3,{color:"secondary",children:(0,l.tZ)(t8.hh,{onClick:()=>{(0,f.j)(f.FP.PROFILE_LINK_COPIED,{surface:"profile_page",profile_link:t.subdomainUrl,shared_user_id:t.id}),n((0,Q.NNq)(t))},cursor:"pointer",decoration:"hover-underline",children:(0,l.tZ)(il.u,{text:"Copy link",disabled:i,placement:"left",children:"@".concat(t.handle)})})})};function id(){let{iString:e}=(0,P.M1)();return(0,l.BX)(_.X2,{gap:4,alignItems:"center",children:[(0,l.tZ)(eF.Z,{size:16,stroke:"var(--color-accent-themed)"}),(0,l.tZ)(z.xv.B3,{color:"accent",children:(0,l.tZ)(t8.hh,{href:(0,Q.qvS)({params:{utm_source:M.b3.handleNotification,[io.UN]:!0}}),children:e("Claim your handle")})})]})}var ic=i(33555);function iu(e){var t,i;let{profile:n,yourProfile:r,user:o,showCTAs:a,subscribeButton:s,onShare:d,activeLiveStream:c,primaryPublication:u,isBlocked:p}=e,h=!!(null===(i=n.theme)||void 0===i?void 0:null===(t=i.cover_image)||void 0===t?void 0:t.url);return(0,l.BX)(iv,{children:[(0,l.BX)(ig,{children:[(0,l.BX)(ib,{hasCoverImage:h,children:[(0,l.tZ)(ip,{profile:n}),(0,l.tZ)(ia,{profile:n,yourProfile:r})]}),(0,l.tZ)(e6,{profile:n,activeLiveStream:c,hasCoverImage:h})]}),(0,l.tZ)(ih,{profile:n}),!p&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(t4,{profile:n,primaryPublication:u,utmParams:{utm_campaign:M.VX.profileChips}}),(0,l.tZ)(t6,{profile:n,yourProfile:r}),(0,l.tZ)(tx,{subscribeButton:s,profile:n,yourProfile:r,user:o,showCTAs:a,onShare:d})]})]})}function ip(e){let{profile:t}=e,{iString:i}=(0,P.M1)(),n=(0,W.XA)(),r=t.name||i("Substack user");return(0,l.BX)(z.xv.H4,{fontWeight:"bold",as:"span",size:n?17:20,children:[r,(0,l.tZ)(im,{profile:t})]})}function ih(e){let{profile:t}=e,[i,n]=(0,o.eJ)(!1);return t.bio?(0,l.tZ)(z.xv.B3,{clamp:i?void 0:3,onClick:()=>n(!i),children:(0,l.tZ)(e2(),{options:{attributes:{rel:"nofollow ugc"}},children:t.bio})}):null}function im(e){var t,i;let{profile:n}=e;return(null===(t=n.status)||void 0===t?void 0:t.badge)?(0,l.BX)("span",{style:{whiteSpace:"nowrap"},children:["\xa0",(0,l.tZ)(z.xv,{as:"span",paddingLeft:4,children:(0,l.tZ)(ic.UserBadge,{tier:n.bestseller_tier,userBadge:null===(i=n.status)||void 0===i?void 0:i.badge,userId:n.id,inline:!0,size:"md",hideViewProfileButton:!0})})]}):null}function iv(e){let{children:t}=e;return(0,l.tZ)(_.sg,{display:"flex",direction:"column",gap:12,paddingTop:16,children:t})}function ib(e){let{children:t,hasCoverImage:i}=e,n=(0,W.XA)();return(0,l.tZ)(_.sg,{display:"flex",direction:"column",gap:{desktop:2,mobile:0},style:{paddingRight:i?20+(n?88:112):void 0},children:t})}let ig=(0,C.zo)({display:"flex",direction:"row",justifyContent:"space-between",alignItems:"center",position:"relative"});var iZ=i(98848),iy=i(64515);let i_=e=>{var{strokeWidth:t=1.5}=e,i=(0,iZ._)(e,["strokeWidth"]);return(0,l.BX)(iy.l,(0,r._)((0,n._)({},i),{name:"UserIcon",svgParams:{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},children:[(0,l.tZ)("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",strokeWidth:t,strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{d:"M12 11C14.2091 11 16 9.20914 16 7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7C8 9.20914 9.79086 11 12 11Z",strokeWidth:t,strokeLinecap:"round","stroke-linejoin":"round"})]}))};function iC(){let{iString:e}=(0,P.M1)();return(0,l.tZ)(eX.ET,{children:(0,l.tZ)(_.hs,{paddingY:64,flex:"grow",children:(0,l.tZ)(er.u,{icon:(0,l.tZ)(i_,{}),title:e("You havent set up your profile yet."),description:e("Click the button below to get started."),button:(0,l.tZ)(ei.zx,{href:(0,Q.v3t)(),children:e("Set up profile")})})})})}function iw(){return(0,l.tZ)(_.tu,{style:{maxWidth:600},flex:"grow",children:(0,l.BX)(_.tu,{gap:{desktop:20,mobile:16},paddingTop:{desktop:32,mobile:16},paddingBottom:16,children:[(0,l.BX)(_.gq,{justifyContent:"space-between",alignItems:"center",children:[(0,l.BX)(_.tu,{justifyContent:"center",gap:8,children:[(0,l.tZ)(eX.Vm,{type:"bar",height:36,width:200}),(0,l.tZ)(eX.Vm,{type:"bar",height:20,width:180})]}),(0,l.tZ)(eX.Vm,{type:"circle",size:88})]}),(0,l.BX)(_.tu,{gap:8,flex:"grow",minWidth:0,children:[(0,l.tZ)(eX.Vm,{type:"bar",height:20,width:"70%"}),(0,l.tZ)(eX.Vm,{type:"bar",height:20,width:"80%"}),(0,l.tZ)(eX.Vm,{type:"bar",height:20,width:"30%"})]}),(0,l.tZ)(eX.Vm,{type:"bar",height:40,width:120})]})})}var iS=i(94442),ix=i(21972),ik=i(5623);function iB(e){let{postId:t,onClose:i}=e,n=(0,ix.B)(t),r=(0,ew.I0)(),a=(0,o.sO)(null),{posts:s,publications:d,publicationSettings:c,publicationRecommendations:u}=(0,ew.kc)(),p=s.get(t),h=(0,iS.nA)({postId:t,isSaved:!!(null==p?void 0:p.is_saved),trackSurface:"post-viewer"}),m=p?d.get(p.publication_id):void 0,v=p?c.get(p.publication_id):void 0,f=m?u.get(m.id):void 0,b=f?d.get(f.recommending_publication_id):void 0;return(0,l.tZ)(ik.R5,{post:p,postId:t,videoPlayerRef:a,onClose:i,onLike:n,onSave:()=>{h.onSave(),r({type:"post_save",payload:{postId:t}})},onLoad:e=>{r({type:"post_load",payload:e})},publication:m,publicationSettings:v,referringRecommendation:f,referringPub:b})}function iI(e){let{profile:t,subscriptionSource:i}=e,n=(0,W.XA)(),{refetch:r,isLoading:o}=(0,eC.ib)({pathname:(0,T.n1t)("/api/v1/@".concat(t.handle,"/personal-initialize"),{source:i}),method:"post"}),a=async()=>{let e=await r({query:{action:"subscribe"}});if(e instanceof Error)throw e;location.href=e.redirectUrl};return t.handle?(0,l.tZ)(ei.zx,{priority:"primary",size:n?"sm":"md",flex:"grow",onClick:a,localNavigation:!1,disabled:o,children:"Subscribe"}):null}var iP=i(11358),iN=i(32189);function iX(e){let{user:t,profile:i,primaryPublication:a,subscriptionSource:s}=e,{iString:d}=(0,P.M1)(),c=(0,W.XA)(),u=(0,iN.x)({surface:"profile",zIndex:1001}),[p,h]=(0,o.eJ)(i.primaryPublicationSubscriptionState),m=(0,eV._F)({publication:a,subscriptionSource:"profile"}),{isLoading:v,subscribe:b}=(0,iP.G)({publication:a,profileId:i.id,source:s,params:(0,ex.eY)(),onSuccess:()=>h("free")}),g=(0,T.W1P)(a,{user:t,addBase:!0,params:{next:document.location.href,utm_source:s,utm_medium:M.lP.web,utm_campaign:M.VX.substackProfile,just_signed_up:!0}}),Z=(0,em.M$)().isOnDestination,y={size:c?"sm":"md",flex:"grow"};return["free","paid","founding"].includes(p)?(0,l.tZ)(eD,{publication:a,onUnsubscribe:async()=>{await m.unsubscribe(),h("none")},button:(0,l.tZ)(ei.zx,(0,r._)((0,n._)({priority:"secondary"},y),{children:d("Subscribed")})),manageOnly:["paid","founding"].includes(p),isPledged:i.primaryPublicationIsPledged}):"free_can_upgrade"===p?(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},y),{href:g,localNavigation:!1,onClick:()=>{(0,f.j)(f.FP.ACCOUNT_CARD_UPGRADE_CLICKED,{homepage_type:a.homepage_type,is_on_destination:Z,target_user_id:i.id,target_publication_id:a.id}),(0,f.x6)(a,"hover_profile")},children:d("Upgrade")})):"free_can_pledge"===p?(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},y),{href:g,localNavigation:!1,onClick:()=>{(0,f.j)(f.FP.ACCOUNT_CARD_PLEDGE_CLICKED,{homepage_type:a.homepage_type,is_on_destination:Z,target_user_id:i.id,target_publication_id:a.id}),(0,f.x6)(a,"hover_profile")},children:d("Pledge")})):"none"===p&&s===iL?t?(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},y),{priority:"primary",onClick:e=>{e.preventDefault(),b()},disabled:v,children:d("Subscribe")})):(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},y),{priority:"primary",onClick:u(a,i),children:d("Subscribe")})):(0,l.tZ)(ei.zx,(0,r._)((0,n._)({},y),{href:g,localNavigation:!1,onClick:()=>{(0,f.j)(f.FP.ACCOUNT_CARD_SUBSCRIBE_CLICKED,{homepage_type:a.homepage_type,is_on_destination:Z,target_user_id:i.id,target_publication_id:a.id}),(0,f.x6)(a,"hover_profile")},title:a.name,children:d("Subscribe")}))}var iz=i(25479);let iL="profile-page-feed";function iT(e){var t;let i,a,{id:s,subpath:g,initialData:{profileSubscribeOnTransit:_=!1,referringUser:C,freeSignup:x,freeSignupEmail:k,activeLiveStream:B,subscriptionToLiveStreamPub:I,invitedLiveStreamPublications:P,subscriptionsToLiveStreamInvitedPub:N}}=e,X=(0,v.aF)(),[z,T]=(0,Z.tv)(),[M,E]=(0,o.eJ)(!1),A=(0,w.pm)(),[O]=(0,o.eJ)(!!((0,L.x)("followPrompt")&&C)),{addSurface:H}=(0,iz.ze)();(0,U.qr)(""),s.includes("-")?(i=function(e){let t=e.split("-")[0];if(!t)return -1;let i=parseInt(t);return isNaN(i)?-1:i}(s),a=function(e){let t=e.split("-");return t.length?t.slice(1).join("-"):""}(s)):i=s;let{subjectProfile:j,error:R}=(0,m.Un)({subjectId:i,subjectName:a}),D=RegExp("/p-(\\d+)"),F=null,J=g.match(D);J&&J[1]&&(F=Number(J[1]));let W=(0,p.gc)(null==j?void 0:j.id),Y="blocked"===W||"blocking"===W,q=!!(null==j?void 0:j.profile_set_up_at),K=j&&j.id===(null==X?void 0:X.id),ee=(null==j?void 0:j.subscriptions)||[],et=(null==j?void 0:j.primaryPublication)&&(null===(t=j.publicationUsers.find(e=>{var t;return e.publication_id===(null==j?void 0:null===(t=j.primaryPublication)||void 0===t?void 0:t.id)}))||void 0===t?void 0:t.publication),ei=!!(et&&(null==j?void 0:j.isSubscribed)),en=(0,h.Sv)(j,"profile");(0,o.d4)(()=>{var e;(null===(e=new URL(document.location.href).searchParams)||void 0===e?void 0:e.has("invite"))?(0,y.uX)("/app",{local_navigation:!1}):j&&((0,f.j)(f.FP.PROFILE_VISITED,(0,n._)({profile_user_id:j.id,is_set_up:q,is_self:K,has_name:!!j.name,has_photo:!!j.photo_url,has_bio:!!j.bio,has_twitter:!!j.twitterAccount,reads_count:j.visibleSubscriptionsCount,writes_count:j.publicationUsers.length,subscribe_cta_publication_id:!ei&&(null==et?void 0:et.id),live_stream_id:null==B?void 0:B.liveStream.id,primary_publication_id:null==et?void 0:et.id,is_free_subscribed:!["none"].includes(j.primaryPublicationSubscriptionState),is_subscribed:["paid","founding","author"].includes(j.primaryPublicationSubscriptionState)},(0,ek.extractEventAttributionDataFromRecord)((0,ex.eY)()))),_&&((0,y.iO)("subscribed"),A.popToast(e=>(0,l.tZ)(w.FN,(0,r._)((0,n._)({},e),{text:"Subscribed to ".concat((null==et?void 0:et.name)||j.name||"user"),Icon:d.Z})))))},[s,j]),(0,o.d4)(()=>{var e;(null===(e=new URL(document.location.href).searchParams)||void 0===e?void 0:e.has("follow"))&&j&&en.isLoaded&&((0,y.iO)("follow"),K||en.isFollowing||en.toggle())},[s,j,en.isLoaded]),(0,o.d4)(()=>{X&&j&&H({type:"visited-profile",profile:j})},[H,j,X]);let[{url:er}]=(0,Z.tv)(),el=!function(e,t){var i;let n=null===(i=new URL(e,"https://monograph.dev").searchParams)||void 0===i?void 0:i.get("utm_source");return!!(n&&iO.includes(n)||(null==t?void 0:t.source)&&iO.includes(t.source))}(er,(0,b.l)())?"profile-page":iL,eo=(0,L.x)(document.location.href,"liveStream")&&(null==B?void 0:B.liveStream.id),ea=null;j&&!K&&!Y&&(et?ea=(0,l.tZ)(iX,{user:X,profile:j,primaryPublication:et,subscriptionSource:el}):j.isPersonalEligible&&(ea=(0,l.tZ)(iI,{profile:j,subscriptionSource:el})));let es=null!=ea;return((0,o.d4)(()=>{if(!j)return;let e=[];if(K)e.push("share","edit");else{var t;es&&e.push((null==j?void 0:j.isSubscribed)?"subscribed":"subscribe"),j.isSubscribed||e.push(j.isFollowing?"following":"follow"),(j.can_dm||(null!==(t=j.dm_upgrade_options)&&void 0!==t?t:[]).length>0)&&e.push("message")}0!==e.length&&(0,f.j)(f.FP.PROFILE_PRIMARY_ACTIONS_SHOWN,{actions:e})},[j,K,es]),R)?(0,l.tZ)(e0,{}):j?(0,l.tZ)(S.S,{theme:j.theme,children:(0,l.BX)(iM,{children:[(0,l.tZ)($,{profile:j,activeLiveStream:B}),(0,l.tZ)(iA,{profile:j}),(0,l.tZ)(G,{profile:j}),(0,l.tZ)(iE,{children:(0,l.tZ)(iu,{profile:j,yourProfile:!!K,primaryPublication:et,user:X,showCTAs:!Y,onShare:()=>E(!0),subscribeButton:ea,activeLiveStream:B,isBlocked:Y})}),"blocked"===W&&(0,l.tZ)(ed,{profile:j}),"blocking"===W&&(0,l.tZ)(ec,{profile:j}),!Y&&!!j.name&&(0,l.tZ)(eQ,{subscriptions:ee,profile:j,subpath:g}),!q&&K&&(0,l.tZ)(iC,{}),F&&(0,l.tZ)(iB,{postId:F,onClose:()=>{T((0,Q.NNq)(j,{noBase:!0}))}}),(0,l.tZ)(u.V,{isOpen:M,onClose:()=>E(!1),medium:"profile-page",user:X,profile:j}),O&&C?(0,l.tZ)(c.yi,{referringUser:C,freeSignupEmail:k,forceFollowPrompt:!0,surface:"profile-follow-referrer-prompt"}):null,eo?(0,l.tZ)(V,{profile:j,activeLiveStream:B,subscriptionToLiveStreamPub:I,invitedLiveStreamPublications:P,subscriptionsToLiveStreamInvitedPub:N,freeSignup:x,freeSignupEmail:k}):null]})}):(0,l.tZ)(iw,{})}function iM(e){let{children:t}=e;return(0,l.tZ)(_.sg,{style:{maxWidth:568},minWidth:0,flex:"grow",children:t})}let iE=(0,C.zo)({display:"flex",direction:"column",gap:8,paddingX:{desktop:0,mobile:16},paddingBottom:8,zIndex:1}),iA=e=>{let{profile:t}=e;return(0,l.tZ)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:s()((0,g.v_)(t),{json:!0,isScriptContext:!0})}})},iO=["feed","feed-mentions","notes-inline-suggestions","notes-all-suggestions","notes-like-list","notes-restack-list","substack-feed-item"]},61412:function(e,t,i){i.d(t,{B:()=>r});var n=i(30396);function r(e){let{name:t,action:i}=e;(0,n.d4)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){i();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},78446:function(e,t,i){i.d(t,{N4:()=>a,sm:()=>s});var n=i(16584),r=i(30396),l=i(15771),o=i(15562);function a(){let[e,t]=(0,r.eJ)(null);return{confirm:()=>new Promise((i,n)=>{e&&n(Error("Already confirming.")),t({resolve:i,reject:n})}),isConfirming:!!e,handleConfirm:i=>{t(null),null==e||e.resolve(i)},handleCancel:i=>{t(null),null==e||e.resolve(i)}}}function s(e){let{title:t,body:i,cancelLabel:r="Cancel",confirmLabel:a="Confirm",modal:s}=e;return(0,n.tZ)(o.W,{isOpen:s.isConfirming,onClose:()=>s.handleCancel(!1),title:t,description:i,primaryButton:(0,n.tZ)(l.zx,{priority:"destructive",onClick:()=>s.handleConfirm(!0),children:a}),secondaryButton:(0,n.tZ)(l.zx,{priority:"secondary",onClick:()=>s.handleCancel(!1),children:r})})}},84923:function(e,t,i){i.d(t,{d:()=>r});var n=i(30396);function r(){let[e,t]=(0,n.eJ)(!1);return{isOpen:e,onOpen:()=>t(!0),onClose:()=>t(!1)}}},71132:function(e,t,i){function n(e,t){return e.map(t).filter(e=>null!=e)}i.d(t,{ZN:()=>n}),i(27361)},30343:function(e,t,i){i.d(t,{v:()=>s,r:()=>a});var n,r=i(64757),l=((n=l||{})[n.Vibrant=0]="Vibrant",n[n.DarkVibrant=1]="DarkVibrant",n[n.LightVibrant=2]="LightVibrant",n[n.Muted=3]="Muted",n[n.DarkMuted=4]="DarkMuted",n[n.LightMuted=5]="LightMuted",n);let o=Object.keys(l),a={custom:{green:"var(--color-bg-marketing-green)",orange:"var(--color-accent-fg-orange)"},basic:{primary:"var(--color-bg-secondary)"},image:{tintedImageMuted:"cover_image_tinted_muted",tintedImageVibrant:"cover_image_tinted_vibrant",fadedImage:"cover_image_faded",blurredImage:"cover_image_blurred"}};function s(e){let{coverImage:t,palette:i}=e;return r.Hv.filter(e=>e in a.basic||e in a.custom||e in a.image&&!!t||!!o.includes(e)&&!!(null==i?void 0:i[e]))}},24054:function(e,t,i){i.d(t,{Sb:()=>n,bI:()=>o,rx:()=>r,tV:()=>l});let n=1920,r=1080,l=1080,o=1920},67914:function(e,t,i){i.d(t,{B9:()=>a,Nf:()=>d,Ps:()=>o,hl:()=>l});var n=i(6070);let r=new Set(["subscribed","free_signup"]);function l(e){return r.has(e)}function o(e,t){if(!e)return!1;if(!t)return!0;let i=["unsubscribed","free_signup","subscribed"];return i.indexOf(e)>=i.indexOf(t)}function a(e){let{pub:t,subscriptionType:i}=e;return(0,n.uT)({pub:t})&&"comp"===i}function s(e){if(e){if(e.current_period_end){let t=e.current_period_end;return new Date("number"==typeof t?1e3*t:t)}if(e.expiry)return new Date(e.expiry)}return null}function d(e){if(!e||e.parent_subscription_id||e.is_group_parent)return!1;let t=e.type||(e.status&&"trialing"!==e.status?null:"trial");if("gift"===t||"lifetime"===t||"bitcoin"===t||"ios_app"===t)return!1;let i=s(e);return!(e.cancel_at_period_end||function(e){let t=s(e);return!!t&&t>new Date("2100-01-01")}(e))&&!0!==e.paused&&!("trial"===t&&i&&i>new Date&&i<new Date(Date.now()+3e5))}},64757:function(e,t,i){i.d(t,{Hp:()=>o,Hv:()=>n,a_:()=>l});let n=["DarkMuted","Vibrant","green","orange","primary","blurredImage","fadedImage","tintedImageMuted","tintedImageVibrant"];var r,l=((r={}).Left="left",r.Center="center",r);let o=Object.values(l)},36515:function(e,t,i){i.d(t,{R:()=>o});var n=i(7409),r=i(99282),l=i(14773);function o(e,t){return(0,l.Q2)("/publish/growth/subscribers",(0,r._)((0,n._)({},t),{pub:e}))}}}]);