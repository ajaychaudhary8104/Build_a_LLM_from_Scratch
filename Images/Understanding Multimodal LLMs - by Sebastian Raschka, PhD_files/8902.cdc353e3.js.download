"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["8902"],{37168:function(t,n,e){e.d(n,{Mw:()=>_,WH:()=>g,ZN:()=>w,hO:()=>y});var o,i,l=e(7409),r=e(99282),a=e(16584),c=e(6400),u=e(98661),d=e(30396),s=e(57391),f=e(40647);let m=(0,s.gn)(),p="undefined"!=typeof window&&null!==(i=null===(o=window._preloads)||void 0===o?void 0:o.siteConfigs)&&void 0!==i?i:{},v=(t,n)=>(0,l._)({},(0,s.ng)(t,n),(0,f.Xz)(t)),g=(0,c.createContext)(v(p,m));function w(t){let{siteConfigs:n={},experimentInfo:e,children:o}=t,i=e||m,l=(0,d.Ye)(()=>v(n,i),[n,i]);return(0,a.tZ)(g.Provider,{value:l,children:o})}function _(){return(0,d.qp)(g)}g.displayName="ExperimentsAndSiteConfigContext";let y=t=>{let n=(0,u.forwardRef)((n,e)=>{let o=_();return(0,a.tZ)(t,(0,r._)((0,l._)({},o,n),{ref:e}))});return n.displayName="withExperimentsAndSiteConfigContext(".concat(t.displayName||t.name||"Anonymous",")"),n}},56629:function(t,n,e){e.d(n,{Iz:()=>g,So:()=>w,us:()=>v,vz:()=>p});var o,i,l=e(7409),r=e(99282),a=e(16584),c=e(6400),u=e(98661),d=e(30396),s=e(48980);let f="undefined"!=typeof window&&null!==(i=null===(o=window._preloads)||void 0===o?void 0:o.publicationSettings)&&void 0!==i?i:{};function m(t){return n=>{if(!n||!t)return null;let e=t[n];return void 0===e?null:e}}let p=(0,c.createContext)({getSettingFor:m(f),changeSetting:()=>Promise.resolve(void 0),preloadedPubSettings:f});p.displayName="PublicationSettingsContext";let v=t=>{let n=(0,u.forwardRef)((n,e)=>{let o=w();return(0,a.tZ)(t,(0,r._)((0,l._)({},o,n),{ref:e}))});return n.displayName="withPubSettingsContext(".concat(t.displayName||t.name||"Anonymous",")"),n};function g(t){let{settings:n={},children:e}=t,[o,i]=(0,d.eJ)(n),r=async t=>{i((0,l._)({},o,t));try{await (0,s.rd)("/api/v1/publication_settings",{method:"PUT",json:t})}catch(t){console.error(t)}},c=(0,d.Ye)(()=>({getSettingFor:m(o),changeSetting:r,preloadedPubSettings:o}),[o]);return(0,a.tZ)(p.Provider,{value:c,children:e})}function w(){return(0,d.qp)(p)}},40647:function(t,n,e){e.d(n,{QA:()=>s,Xz:()=>d,vC:()=>f,xR:()=>p,xY:()=>m});var o,i,l=e(7409),r=e(99282),a=e(16584),c=e(98661);let u="undefined"!=typeof window&&null!==(i=null===(o=window._preloads)||void 0===o?void 0:o.siteConfigs)&&void 0!==i?i:{},d=t=>({allConfigs:t,getConfigFor:n=>{if(!n||!t)return null;let e=t[n];return void 0===e?null:e}}),s=(0,c.createContext)(d(u));function f(t){let{siteConfigs:n={},children:e}=t,o=(0,c.useMemo)(()=>d(n),[n]);return(0,a.tZ)(s.Provider,{value:o,children:e})}s.displayName="SiteConfigsContext";let m=t=>{let n=(0,c.forwardRef)((n,e)=>{let o=p();return(0,a.tZ)(t,(0,r._)((0,l._)({},o,n),{ref:e}))});return n.displayName="withSiteConfigContext(".concat(t.displayName||t.name||"Anonymous",")"),n};function p(){return(0,c.useContext)(s)}},10704:function(t,n,e){e.d(n,{NR:()=>b,OW:()=>x,ex:()=>k,fe:()=>P,u_:()=>N});var o=e(92002),i=e(73580),l=e(7409),r=e(99282),a=e(98848),c=e(16584),u=e(19425),d=e(79403),s=e(94184),f=e.n(s),m=e(50308),p=e.n(m),v=e(98661),g=e(71068),w=e(58076),_=e(19081),y=e(4615),h=e(63124),Z=e(88e3),C=e(91400),S=e(40484);let N=t=>{var n;let{isOpen:e,onClose:o=()=>void 0,children:i,position:a="default",testId:s="modal",className:m,fullscreenMobile:g,maxFullscreenMobile:_,overflow:N,width:x=440,disableCloseOnBackdropClick:b=!1,initialFocus:P,renderOverReactLaagPortal:k=!1,style:V}=t,M=(0,C.XA)();return n=e&&M&&g,(0,v.useEffect)(()=>{if(n){if(A.current++,1===A.current){let t=document.getElementById("entry");t&&(t.style.visibility="hidden")}return()=>{if(1===A.current){A.current--;let t=document.getElementById("entry");t&&(t.style.visibility="")}}}},[n]),(0,c.tZ)(u.u,{show:e,as:v.Fragment,children:(0,c.tZ)(d.V,{onMouseDown:t=>t.stopPropagation(),onMouseUp:t=>t.stopPropagation(),onClick:t=>t.stopPropagation(),"data-testid":s,as:"div",className:f()(k&&S.Z.renderOverReactLaagPortal,S.Z.modal),onClose:b?p():o,onKeyDown:t=>{"Escape"!==t.key||b||(t.stopPropagation(),t.preventDefault(),null==o||o())},initialFocus:P,style:(0,r._)((0,l._)({},V),{zIndex:w.Z7}),children:(0,c.BX)(h.Uv,{children:[(0,c.tZ)(h.sc,{children:(0,c.tZ)(h._n,{})}),(0,c.tZ)(y.Sf,{children:(0,c.tZ)(Z.Q,{children:(0,c.tZ)(Z.l,{className:m,position:a,fullscreenMobile:g,maxFullscreenMobile:_,width:x,overflow:N,children:i})})})]})})})},x=t=>{var n=(0,o._)({},(0,i._)(t));let e=(0,C.XA)();return(0,c.tZ)(N,(0,r._)((0,l._)({},n),{className:f()(S.Z.fullscreen,e&&S.Z.mobile)}))};function b(t){var{className:n,padding:e=20}=t,o=(0,a._)(t,["className","padding"]);return(0,c.tZ)(_.sg,(0,l._)({flex:"grow",overflow:"auto",padding:e,className:f()(S.Z.modalBody,S.Z.fullscreenModalBody,n)},o))}function P(t){var{className:n,padding:e=20}=t,o=(0,a._)(t,["className","padding"]);return(0,c.tZ)(_.sg,(0,l._)({overflow:"auto",padding:e,className:f()(S.Z.modalBody,n)},o))}let k=()=>(0,c.tZ)(g.xu,{height:20}),A={current:0}},60836:function(t,n,e){e.d(n,{AN:()=>m,Mo:()=>u,Tg:()=>c,_N:()=>p,aE:()=>g,jn:()=>s,mG:()=>v,rN:()=>w,tk:()=>d,uR:()=>a,ws:()=>f});var o=e(7409),i=e(14773),l=e(33884),r=e(26111);function a(t,n){let{noBase:e,edit:r,email:a,comments:c,commentId:d,commentInput:s,highlightComment:f,replyToComment:v,commentContextId:g,uuid:w,urlParams:_,signedIn:y=!1,feedViewer:h=!1,clipId:Z}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},C=n?w?n.uuid:n.slug:null;if((r||!C)&&t&&!t.is_www&&(null==n?void 0:n.id)){let o=e?"":(0,i.SV)(t);return"".concat(o).concat(m(t,n.id,{params:_}))}if((null==n?void 0:n.type)==="restack"&&(null==n?void 0:n.id)){let o=e?"":(0,i.SV)(t);return"".concat(o,"/cp/").concat(n.id)}if(h||!t||!n||!C){let o=e?"":(0,i.SV)();return d?(0,l.NZ)(d,{noBase:e,urlParams:_}):n&&Z?(0,i.n1)("".concat((0,i.SV)(t),"/p/").concat(n.slug),_):n?(0,l.rc)(n.id,{noBase:e,urlParams:_}):(0,i.n1)("".concat(o).concat(l.Ds),_)}let S=p(y,t);return u(t,C,{noBase:e,email:a,comments:c,commentId:d,commentInput:s,highlightComment:f,replyToComment:v,commentContextId:g,urlParams:(0,o._)({lli:S},_)})}function c(t,n,e){let{isPreview:o=!1}=e;return"".concat((0,i.SV)(t),"/embed/p/").concat(n,"?origin=").concat(window.location.origin).concat(o?"&isPreview=true":"")}function u(t,n){let{noBase:e,email:o,comments:l,commentId:r,commentInput:a,highlightComment:c,replyToComment:u,commentContextId:d,urlParams:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f="";return e||(f+=(0,i.SV)(t)),f+="/p/".concat(n),l&&(!r||c)&&(f+="/comments"),!r||c||d||(f+="/comment/".concat(r)),o&&(f+="/email"),r&&(c||u)?f+="#comment-".concat(r).concat(u?"-reply":""):a&&(f+="#input"),r&&d&&(f+="/comment/".concat(d,"#comment-").concat(r)),s&&(f=(0,i.n1)(f,s)),f}function d(t,n,e,i){return t&&"profile"===t.homepage_type?(null==e?void 0:e.id)?(0,l.gt)("c-".concat(null==e?void 0:e.id)):(0,l.mx)(t,n):a(t,n,(0,o._)({comments:!0,commentId:null==e?void 0:e.id},i))}function s(t){let{mediaUploadId:n}=t;return"media-".concat(n)}function f(t){let{pub:n,post:e,mediaUploadId:o}=t,i=a(n,e);return"".concat(i,"#").concat(s({mediaUploadId:o}))}function m(t,n){let{params:e,addBase:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o?(0,i.SV)(t):"";return"".concat(l).concat((0,i.n1)("/publish/post/".concat(n),e))}function p(t,n){return n.custom_domain&&t?"1":void 0}function v(t){let{addBase:n,params:e={},signedIn:l,skipToken:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=p(l,t),u=n?(0,i.SV)(t):"";if(!(null==e?void 0:e.token)&&!a){var d;let t="undefined"!=typeof window&&(null===(d=window._preloads)||void 0===d?void 0:d.original_url)?(0,r.x)(window._preloads.original_url,"token"):null;e.token=t}return(0,i.n1)("".concat(u,"/account"),(0,o._)({lli:c},e))}function g(t,n,e,o){return n.post_id?d(null!=e?e:void 0,null!=t?t:void 0,n,o):(0,l.Sg)(n,o)}function w(t){let{postId:n,appTab:e,params:l}=t;return(0,i.n1)("".concat((0,i.ZX)(),"/post/").concat(n,"/stats").concat(e?"?tab=".concat(e):""),(0,o._)({},l))}e(17043)}}]);