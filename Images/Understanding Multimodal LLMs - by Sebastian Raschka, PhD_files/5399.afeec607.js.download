"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["5399"],{53969:function(e,t,n){n.d(t,{Z:()=>l});let l={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"}},29439:function(e,t,n){n.d(t,{Z:()=>l});let l={link:"link-LIBpto"}},41302:function(e,t,n){n.d(t,{Z:()=>l});let l={reset:"reset-kAomxn","color-primary":"color-primary-S_7X35",colorPrimary:"color-primary-S_7X35","color-secondary":"color-secondary-vHUBzS",colorSecondary:"color-secondary-vHUBzS",overscrollTransition:"overscrollTransition-h5GdsE"}},95738:function(e,t,n){n.d(t,{Z:()=>l});let l={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},51938:function(e,t,n){n.d(t,{V:()=>d});var l=n(16584),i=n(30396),r=n(94184),o=n.n(r),a=n(24202),c=n(19081),u=n(54796);function d(e){let{className:t,assets:n,readOnly:r,onClick:d,maxHeight:m=420,children:v}=e,h=(0,a.dz)(n),[p,f]=(0,i.eJ)(null),g=(0,i.sO)(null),y=(0,a.yU)(g,0),[b,w]=h;if(!b||!w)return null;let Z=b.width&&b.height?b.width/b.height:1,k=w.width&&w.height?w.width/w.height:1,C=Z+k,S=y-6,T=Math.min(m,S/C),x=[S*Z/C,S*k/C];return(0,l.BX)(c.hs,{ref:g,className:o()(u.Z.imageDiptych,t),gap:6,overflow:"hidden",children:[h.map((e,t)=>(0,l.tZ)(s,{asset:e.src,explicit:e.explicit,readOnly:r,width:x[t],height:T,index:t,onClick:r?void 0:n=>{n.preventDefault(),d&&d({attachmentId:e.id,attachmentType:"image"}),f({index:t})},children:v},e.src)),!r&&(0,l.tZ)(a.$9,{assets:h,imageViewer:p,setImageViewer:f,readOnly:r})]})}function s(e){let{asset:t,explicit:n,onClick:i,readOnly:r,width:c=500,height:d,children:s,index:m}=e;return(0,l.tZ)(a.Z4,{asset:t,explicit:n,onClick:i,readOnly:r,width:c,height:d,className:o()(u.Z.diptychImage,u.Z["index-".concat(m+1)]),children:s})}},31122:function(e,t,n){n.d(t,{Y:()=>_});var l=n(7409),i=n(16584),r=n(98661),o=n(94184),a=n.n(o),c=n(11607),u=n(2431),d=n(29032),s=n(47348),m=n(60807),v=n(69181),h=n(98914),p=n(98422),f=n(71068),g=n(19081),y=n(58175),b=n(75822),w=n(92039),Z=n(18618),k=n(74571),C=n(6511),S=n(63651),T=n(47929);let x={backDrop:"backDrop-FxvQIL",liveStreamTitle:"liveStreamTitle-xahUfX",liveStreamContainer:"liveStreamContainer-NKIioJ",viewerCountContainer:"viewerCountContainer-uxBWdH",endedMessage:"endedMessage-Z3p5RL",endedMessageContent:"endedMessageContent-d_enFy",liveStreamExplicitLabel:"liveStreamExplicitLabel-roJA52",liveStreamThumbnail:"liveStreamThumbnail-uER3zj",explicit:"explicit-tw5du6",liveStreamVideoPlayer:"liveStreamVideoPlayer-tm5aYT"},_=e=>{var t,n;let{activeLiveStream:o,fromPub:_=!1,listenForViewerCount:I=!0,isFeedItem:B=!1,videoPlayerProps:E,startMuted:N=!1}=e,P=(0,r.useRef)(null),L=(0,r.useRef)(null),[R,O]=(0,r.useState)(!B);(0,b.KS)({videoPlayerRef:P,showPaywall:!1,disable:R}),(0,r.useEffect)(()=>{if(R){let e=()=>{O(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}},[R]),(0,r.useEffect)(()=>{var e;let t=null===(e=P.current)||void 0===e?void 0:e.player,n=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",n),()=>{null==t||t.removeEventListener("play",n)}},[P.current]);let M=(0,k.Ml)(L),[U,X]=(0,r.useState)(o.liveStreamInformation.currentViewerCount),[z,A]=(0,r.useState)(!1),{isMobile:D}=(0,p.v9)(),V=(0,m.Fl)().autoPlayVideo,[J,H]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e;return J&&(e=setTimeout(()=>{H(!1)},4e3)),()=>{clearTimeout(e)}},[J]);let j=(0,w.rG)();(0,r.useEffect)(()=>{if(I)return null==j?void 0:j.listen({["live-stream:".concat(o.liveStream.id)]:e=>{var t,n;let{data:l}=e;(null==l?void 0:null===(t=l.message)||void 0===t?void 0:t.type)==="live-stream:viewer-count-updated"&&X(l.message.current_viewer_count),(null==l?void 0:null===(n=l.message)||void 0===n?void 0:n.type)==="live-stream:ended"&&A(!0)}})},[j,I]);let Y=o.liveStreamInformation.isExplicit||"active"!==o.liveStream.status;return z?null:(0,i.BX)(g.hs,{position:"relative",overflow:"hidden",radius:"sm",ref:L,className:x.liveStreamContainer,onClick:e=>{if(e.stopPropagation(),"active"===o.liveStream.status){let e=(0,h.K1)()?(0,S.bHR)({liveStreamId:o.liveStream.id,utm_campaign:T.VX.substackProfile,params:(0,l._)({utm_medium:T.lP.web},_&&{fromPub:_})}):(0,S.UDR)({noBase:!0,liveStreamId:o.liveStream.id,params:(0,l._)({utm_campaign:T.VX.substackProfile,utm_medium:T.lP.web},_&&{fromPub:_})});(0,h.K1)()?document.location.href=e:(0,h.uX)(e)}else H(!0)},cursor:"pointer",children:[Y?(0,i.BX)(i.HY,{children:[o.liveStreamInformation.isExplicit&&(0,i.tZ)(f.xu,{position:"absolute",inset:0,zIndex:1,children:(0,i.BX)(g.tu,{className:x.liveStreamExplicitLabel,alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.tZ)(c.Z,{stroke:"white",size:24}),(0,i.tZ)(y.xv.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,i.tZ)("img",{className:a()(x.liveStreamThumbnail,o.liveStreamInformation.isExplicit&&x.explicit),src:o.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,i.tZ)(s.j,(0,l._)({className:x.liveStreamVideoPlayer,ref:P,liveStreamId:o.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:V,pub:o.pub||null,mediaUpload:{id:"ls-".concat(o.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:o.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:B?()=>(0,i.tZ)(Z.fI,{isPlaying:!1,size:D?40:56}):void 0,startMuted:N},E),!0),"active"===o.liveStream.status?(0,i.BX)(g.gq,{gap:8,className:x.viewerCountContainer,children:[(0,i.tZ)(v.Qn,{}),(0,i.tZ)(v.C,{viewerCount:U})]}):(0,i.tZ)(g.gq,{className:x.viewerCountContainer,children:(0,i.tZ)(v.j0,{})}),J&&(0,i.tZ)(g.gq,{className:x.endedMessage,children:(0,i.BX)(g.tu,{className:x.endedMessageContent,padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.tZ)(u.Z,{size:24,stroke:"white"}),(0,i.tZ)(y.xv.B3,{color:"white",children:"Live video has ended"})]})}),(0,i.tZ)("div",{className:x.backDrop}),(0,i.BX)(g.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!Y&&(0,i.tZ)(f.xu,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,i.tZ)(C.Z,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:M,mediaRef:P})}),(0,i.tZ)(d.C,{children:(0,i.tZ)(g.tu,{className:x.liveStreamTitle,gap:4*!B,padding:B?12:16,style:{pointerEvents:"none"},children:B?(0,i.BX)(i.HY,{children:[(0,i.tZ)(y.xv.B3,{weight:"semibold",color:"vibrance-primary",children:o.liveStream.title}),(0,i.tZ)(y.xv.B4,{color:"vibrance-secondary",children:null===(t=o.pub)||void 0===t?void 0:t.name})]}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(y.xv.H4,{color:"vibrance-primary",children:o.liveStream.title}),(0,i.tZ)(y.xv.B3,{color:"vibrance-secondary",children:null===(n=o.pub)||void 0===n?void 0:n.name})]})})})]})]})}},27966:function(e,t,n){n.d(t,{g:()=>c,j:()=>s});var l=n(16584),i=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{country:t,type:n,id:r}=e,{iString:c}=(0,i.M1)(),d="https://embed.music.apple.com/".concat(t,"/").concat(n,"/").concat(r,"?theme=auto&app=music");return(0,l.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.appleMusic,children:(0,l.tZ)(u,{src:d,height:"song"===n?"175":"450",frameBorder:0,allow:"encrypted-media *",title:c("Apple Music player"),sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"})})}let u=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),d=["album","playlist","song","artist","station"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["music.apple.com","www.music.apple.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<3)return null;let[l,i,...r]=n,o=r[r.length-1];if(!l||!i||!o)return null;if("album"===i&&t.searchParams.has("i")){let e=t.searchParams.get("i");if(e)return{country:l,type:"song",id:e}}if(!d.includes(i))return null;return{country:l,type:i,id:o}}catch(e){return null}}},25827:function(e,t,n){n.d(t,{W:()=>v});var l=n(16584),i=n(30396),r=n(31122),o=n(98914),a=n(19081),c=n(76820),u=n(24054),d=n(63651),s=n(47929),m=n(5749);function v(e){let{activeLiveStream:t,onAttachmentClick:n,maxWidth:v,videoPlayerProps:h}=e,p=(0,o.K1)(),f=(0,i.sO)(null),g=(0,c.Qz)(f,v),y=u.Sb/u.rx,b={};if(p){let e=null!=g?g:c.YQ;b={width:"".concat(e,"px"),height:"".concat(e/y,"px")}}else{let e=null!=g?g:c.PJ;b={width:"".concat(e,"px"),height:"".concat(e/y,"px")}}return(0,l.tZ)(a.tu,{width:"100%",ref:f,onClick:()=>{null==n||n({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=p?(0,d.bHR)({liveStreamId:t.liveStream.id,utm_campaign:s.VX.substackProfile,params:{utm_medium:s.lP.web,appStoreRedirect:!!p}}):(0,d.UDR)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:s.VX.substackProfile,utm_medium:s.lP.web}});p?document.location.href=e:(0,o.uX)(e)},children:(0,l.tZ)(a.tu,{style:b,radius:"md",overflow:"hidden",position:"relative",className:m.Z.videoPlayerContainer,children:(0,l.tZ)(r.Y,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:h,startMuted:!0})})})}},58998:function(e,t,n){n.d(t,{h:()=>v});var l=n(16584),i=n(30396),r=n(20160),o=n(95441),a=n(92291),c=n(15771),u=n(19081),d=n(58175),s=n(15503),m=n(23854);function v(e){let{attachment:t,readOnly:n,isRestack:v,onAttachmentClick:h,utm_content:p}=e,f=[m.sC.YouBlocked,m.sC.YouMuted].includes(t.reason)&&!!t.hidden_attachment,[g,y]=(0,i.eJ)(!1),{iString:b}=(0,o.M1)();return g&&t.hidden_attachment?(0,l.tZ)(a.Mk,{attachment:t.hidden_attachment,readOnly:n,isRestack:v,onAttachmentClick:h,utm_content:p}):(0,l.tZ)(r.W,{children:(0,l.BX)(u.hs,{bg:"primary",border:"detail",justifyContent:f?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,l.tZ)(d.xv.B4,{color:"secondary",align:"center",children:t.reason===m.sC.YouBlocked?"This note is from someone you blocked.":t.reason===m.sC.YouMuted?"This note is from someone you muted.":"This attachment is not available."}),f&&(0,l.tZ)(c.kG,{resetCss:!0,onClick:()=>{var e;(0,s.Kr)(t.id,t.reason,{noteId:null===(e=t.hidden_attachment)||void 0===e?void 0:e.id}),y(!0)},children:(0,l.tZ)(d.xv,{weight:"bold",size:14,color:"secondary",children:b("Show")})})]})})}},71576:function(e,t,n){n.d(t,{w:()=>p});var l=n(7409),i=n(99282),r=n(16584),o=n(20160),a=n(98170),c=n(26049),u=n(80878),d=n(80026),s=n(19081),m=n(2009),v=n(63651),h=n(47929);let p=e=>{let{readOnly:t,attachment:n,onClick:l,utm_content:i,onSavePostClick:c}=e,{post:u,publication:d,postImageSelection:s}=n,m=function(e){var t,n,l,i,r;let o=(null!==(t=e.width)&&void 0!==t?t:520)/(null!==(n=e.height)&&void 0!==n?n:450);if(o>1){let t=!e.img_width||(null==e?void 0:e.img_width)>520?520:null!==(l=e.width)&&void 0!==l?l:520;return{height:t/o,width:t}}let a=(null!==(i=e.height)&&void 0!==i?i:0)>450?450:null!==(r=e.height)&&void 0!==r?r:450;return{height:a,width:a*o}}(s);return(0,r.tZ)(o.W,{children:(0,r.BX)(f,{readOnly:t,onClick:l,publication:d,post:u,postImageSelection:s,size:m,utm_content:i,children:[(0,r.tZ)(g,{postImageSelection:s,size:m}),(0,r.tZ)(a.Q9,{post:u,publication:d,onSavePostClick:c,compact:!1,readOnly:t,palette:s.imagePalette})]})})},f=e=>{let{readOnly:t,children:n,publication:i,postImageSelection:o,post:c,onClick:d,size:p,utm_content:f}=e,g=(0,a.UO)(o.imagePalette),y=t?void 0:(0,v.uRy)(i,c,{feedViewer:!1,urlParams:{imgSelection:null==o?void 0:o.id,utm_content:h.fZ.substackFeedItem,utm_source:null!=f?f:void 0}});return(0,r.tZ)(s.tu,{className:"container-ruacmA",as:t?"div":"a",position:"relative",onClick:e=>{d&&d(),m.L&&!t&&(0,u.Q)(e,(0,v.uRy)(i,c,{noBase:!0,feedViewer:!0,urlParams:{imgSelection:null==o?void 0:o.id,utm_content:h.fZ.substackFeedItem,utm_source:null!=f?f:void 0}}))},href:y,draggable:!1,showFocus:!0,animate:!0,bg:"primary",radius:"md",overflow:"hidden",style:(0,l._)({width:o?p.width:void 0},g),children:n})};function g(e){var t,n;let{postImageSelection:o,size:a}=e,u=(t=o.img_src,n=a,{backgroundImage:(0,c._)(t,n),backgroundSize:"cover",backgroundPosition:"center"});return(0,r.tZ)(d.xu,{style:(0,i._)((0,l._)({},u),{width:a.width,height:a.height})})}},86301:function(e,t,n){n.d(t,{J:()=>c,N:()=>d});var l=n(16584),i=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{url:t,type:n}=e,{iString:r}=(0,i.M1)(),c=encodeURIComponent(t);return(0,l.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.soundcloud,children:(0,l.tZ)(u,{src:"https://w.soundcloud.com/player/?url=".concat(c,"&color=%23ff6719&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"),height:"track"===n?"166":"300",frameBorder:0,scrolling:"no",title:r("Soundcloud player"),allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",sandbox:"allow-scripts allow-same-origin"})})}let u=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe");function d(e){if(!e)return null;try{let t=new URL(e);if(!["soundcloud.com","www.soundcloud.com","m.soundcloud.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let l="track";return n.includes("sets")?l="set":n.length>=2&&(l="track"),{url:e,type:l}}catch(e){return null}}},73544:function(e,t,n){n.d(t,{R:()=>s,n:()=>c});var l=n(16584),i=n(95441),r=n(71068),o=n(19081),a=n(5749);function c(e){let{embedType:t,resourceId:n}=e,{iString:r}=(0,i.M1)();if(!n)return null;let c="https://open.spotify.com/embed/".concat(t,"/").concat(n);return(0,l.tZ)(o.hs,{radius:"md",outline:"detail",overflow:"hidden",className:a.Z.spotify,children:(0,l.tZ)(u,{src:c,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:r("Spotify player"),sandbox:"allow-scripts allow-same-origin"})})}let u=(0,r.zo)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),d=["track","playlist","show","episode","artist","album"];function s(e){if(!e)return null;try{let t=new URL(e);if(!["spotify.com","www.spotify.com","open.spotify.com","play.spotify.com","embed.spotify.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let[l,i]=n;if(!d.includes(l))return null;return{embedType:l,resourceId:i}}catch(e){return null}}},79251:function(e,t,n){n.d(t,{Mi:()=>s});var l=n(16584),i=n(98170),r=n(53678),o=n(58175),a=n(2009),c=n(23854),u=n(63651),d=n(55578);function s(e){let{attachments:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e;if(0===t.length)return null;let o=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,l.tZ)(l.HY,{children:o.map(e=>(0,l.tZ)(m,{attachment:e,readOnly:n,onAttachmentClick:i,utm_content:r},e.id))})}function m(e){let{attachment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,a=null;return(0,c.bP)(t)?null:("textlink"===t.type&&(a=(0,l.tZ)(v,{url:t.url,readOnly:n,onClick:()=>{null==i||i()}})),"link"===t.type&&(a=(0,l.tZ)(h,{readOnly:n,onClick:i,url:t.linkMetadata.url},t.id)),"post"===t.type&&(a=(0,l.tZ)(p,{readOnly:n,post:t.post,publication:t.publication,onClick:i},t.id)),"comment"===t.type&&(a=(0,l.tZ)(g,{comment:t.comment,readOnly:n,onAttachmentClick:i,utm_content:r},t.id)),"publication"===t.type&&(a=(0,l.tZ)(f,{readOnly:n,publication:t.publication,onClick:i},t.id)),a?(0,l.tZ)(o.xv.B4,{color:"highlight",children:a}):null)}function v(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.tZ)(r.hh,{onClick:i,href:n?void 0:t,rel:"nofollow noopener ugc",target:"_blank",className:"note-link",color:"highlight",fontSize:14,children:(0,d.u)(t,48)})}function h(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.tZ)(v,{url:t,readOnly:n,onClick:i})}function p(e){let{post:t,publication:n,readOnly:r,onClick:o}=e,a=(0,u.uRy)(n,t,{feedViewer:!1}),c=(0,i.vE)({post:t,publication:n,readOnly:r,onClick:o});return(0,l.tZ)(v,{url:a,readOnly:r,onClick:()=>{c(new MouseEvent("click"))}})}function f(e){let{publication:t,readOnly:n,onClick:i}=e;return(0,l.tZ)(v,{url:t.base_url,readOnly:n,onClick:i})}function g(e){let{comment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,o=(0,u.Sgq)(t,{noBase:a.L,urlParams:{utm_content:null!=r?r:void 0}});return(0,l.tZ)(v,{url:o,readOnly:n,onClick:()=>null==i?void 0:i({commentId:String(t.id)})})}},68710:function(e,t,n){n.d(t,{D:()=>a});var l=n(16584),i=n(71068),r=n(19081),o=n(5749);function a(e){let{videoId:t}=e;return(0,l.tZ)(r.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.tiktok,children:(0,l.tZ)(c,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let c=(0,i.zo)({className:o.Z.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},60735:function(e,t,n){n.d(t,{n:()=>a});var l=n(16584),i=n(71068),r=n(19081),o=n(5749);function a(e){let{videoId:t}=e;return(0,l.tZ)(r.hs,{radius:"md",outline:"detail",overflow:"hidden",className:o.Z.youtube,children:(0,l.tZ)(c,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let c=(0,i.zo)({className:o.Z.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},6511:function(e,t,n){n.d(t,{Z:()=>y});var l=n(16584),i=n(30396),r=n(74691),o=n.n(r),a=n(29876),c=n(92559),u=n(13075),d=n(12799),s=n(98422),m=n(19081),v=n(84370),h=n(87077),p=n(74571),f=n(63722),g=n(20080);let y=e=>{let{mediaRef:t,isFocused:n,disableShortcuts:r,disableTooltips:y=!1,hideVolumeBar:b=!1}=e,{isMobile:w}=(0,s.v9)(),[Z,k]=(0,i.eJ)(0),[C,S]=(0,i.eJ)(!1),[T,x]=(0,i.eJ)(!1),_=(0,i.sO)(null),I=e=>{let n=0;if(_.current){var l;let i=_.current.getBoundingClientRect(),r=(e.clientX-i.left)/i.width;k(n=o()(r,0,1)),localStorage.setItem("video_player:volume",n.toString()),(null===(l=t.current)||void 0===l?void 0:l.player)&&(t.current.player.volume=n)}C&&n>0&&P()},B=e=>{x(!0),I(e)},E=()=>{x(!1),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",E),document.removeEventListener("selectstart",N)},N=e=>{T&&e.preventDefault()};(0,i.d4)(()=>{var e,n,l,i,r,a;let c=parseFloat(null!==(i=localStorage.getItem("video_player:volume"))&&void 0!==i?i:"");if(S(null!==(r=null===(n=t.current)||void 0===n?void 0:null===(e=n.player)||void 0===e?void 0:e.muted)&&void 0!==r&&r),isNaN(c))(null===(l=t.current)||void 0===l?void 0:l.player)&&k(t.current.player.volume);else{let e=o()(c,0,1);k(e),(null===(a=t.current)||void 0===a?void 0:a.player)&&(t.current.player.volume=e)}return()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",E),document.removeEventListener("selectstart",N)}},[]);let P=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&(t.current.player.muted=!C)},L=()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&S(t.current.player.muted)};return(0,i.d4)(()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.addEventListener("volumechange",L),()=>{var e;(null===(e=t.current)||void 0===e?void 0:e.player)&&t.current.player.removeEventListener("volumechange",L)}},[]),(0,p.Kr)("m",P,n&&!r),(0,l.BX)(m.gq,{className:g.Z.mainContainer,justifyContent:"center",alignItems:"center",position:"relative",children:[(0,l.tZ)(h.u,{disabled:y,text:C?"Unmute":"Mute",trailing:r?void 0:(0,l.tZ)(v.T,{children:"M"}),children:(0,l.tZ)(f.Z,{onClick:P,children:C?(0,l.tZ)(a.Z,{size:18}):Z>.6||w?(0,l.tZ)(c.Z,{size:18}):Z>.3?(0,l.tZ)(u.Z,{size:18}):(0,l.tZ)(d.Z,{size:18})})}),!w&&!b&&(0,l.tZ)(m.gq,{className:g.Z.volumeBarContainer,justifyContent:"center",alignItems:"center",onMouseDown:e=>{e.preventDefault(),x(!0),I(e),document.addEventListener("mousemove",B),document.addEventListener("mouseup",E),document.addEventListener("selectstart",N)},children:(0,l.tZ)("div",{className:g.Z.volumeBar,ref:_,children:(0,l.tZ)("div",{className:g.Z.volumeLevel,style:{width:"".concat(100*Z,"%")}})})})]})}},85446:function(e,t,n){n.d(t,{X:()=>v});var l=n(7409),i=n(99282),r=n(55578),o=n(25266),a=n(22498);function c(e){let t=0;if(e){if(e.content&&e.content.length>0)for(let n of e.content)t+=c(n);else{var n,l;t+=null!==(l=null===(n=e.text)||void 0===n?void 0:n.length)&&void 0!==l?l:0}}return t}function u(e){let t=0;return(0,a.cb)(e,e=>{e.type&&o.t.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var n,l;t+=(null!==(l=(null!==(n=e.text)&&void 0!==n?n:"").match(/\n/g))&&void 0!==l?l:[]).length+1}}):t++)}),t}var d=n(84864);let s={medium:{desktop:{charactersTruncateTo:500,charactersTruncateIfOver:560,linesTruncateTo:6,linesTruncateIfOver:8},mobile:{charactersTruncateTo:320,charactersTruncateIfOver:420,linesTruncateTo:6,linesTruncateIfOver:8}},small:{desktop:{charactersTruncateTo:340,charactersTruncateIfOver:400,linesTruncateTo:4,linesTruncateIfOver:6},mobile:{charactersTruncateTo:210,charactersTruncateIfOver:210,linesTruncateTo:4,linesTruncateIfOver:4}}},m={desktop:{TRUNCATED_LINES:32,TRUNCATED_CHARACTERS:2400},mobile:{TRUNCATED_LINES:20,TRUNCATED_CHARACTERS:1e3}};function v(e,t){var n,a,v,h;let{truncationProfile:p="medium",isMobile:f}=t,{charactersTruncateTo:g,charactersTruncateIfOver:y,linesTruncateTo:b,linesTruncateIfOver:w}=s[a=e,"small"!==(v=p)&&(null===(h=a.attachments)||void 0===h?void 0:h.length)?"small":v][f?"mobile":"desktop"],Z=function e(t){let n=null;if(t){if(n=(0,i._)((0,l._)({},t),{content:void 0,text:void 0}),null==t?void 0:t.content)for(let l of(n.content=[],t.content)){let t=e(l);t&&n.content.push(t)}else{var o,a;let e=null===(o=t.marks)||void 0===o?void 0:o.find(e=>"link"===e.type);(null==e?void 0:null===(a=e.attrs)||void 0===a?void 0:a.href)?n.text=(0,r.u)(e.attrs.href):n.text=t.text}}return n}(null!==(n=null==e?void 0:e.body_json)&&void 0!==n?n:(null==e?void 0:e.body)?{type:"doc",attrs:{schemaVersion:"v1"},content:e.body.split("\n\n").map(e=>({type:"paragraph",content:[{type:"text",text:e}]}))}:null),k=c(Z)>y,C=u(Z)>w;if(!Z||!(k||C))return{bodyJson:Z,truncatedBodyJson:Z,isTruncated:!1,shouldExpandInline:!1};let S=Z,T=!1,x=0;if(k){let e=function e(t){let{limit:n=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=0,a=!1;if(t){var c,u,s,m;if(n<=0)a=!0;else if(t.content&&t.content.length>0)for(let u of(r=(0,i._)((0,l._)({},t),{content:[]}),t.content)){let t=e(u,{limit:n-o});if(t.doc){if(null===(c=r.content)||void 0===c||c.push(t.doc),o+=t.length,t.isTruncated){a=!0;break}}else{a=!0;break}}else o+=null!==(m=null===(u=(r=(0,i._)((0,l._)({},t),{text:null!==(s=(0,d.truncateText)(t.text,n))&&void 0!==s?s:void 0})).text)||void 0===u?void 0:u.length)&&void 0!==m?m:0,t.text!==r.text&&(a=!0)}return{doc:r,length:o,isTruncated:a}}(S,{limit:g});S=e.doc,T=e.isTruncated,x=c(Z)-c(S)}let _=!1,I=0;if(C&&S){let e=function e(t,n){var r;let a=[],c=!1,u=0;for(let l of null!==(r=t.content)&&void 0!==r?r:[]){if(l.type&&o.t.includes(l.type)){if(++u===n){c=!0,a.push(l);break}}else if(l.content){let t=e(l,n-u);if(u+=t.blockCount,t.isTruncated){a.push(t.doc),c=!0;break}}a.push(l)}let d=(0,i._)((0,l._)({},t),{content:a});return t.text&&(d.text=t.text.split(/\n/g).slice(0,n).join("\n")),{doc:d,blockCount:u,isTruncated:c}}(S,b);S=e.doc,_=e.isTruncated,I=u(Z)-u(S)}return{bodyJson:Z,truncatedBodyJson:S,isTruncated:T||_,shouldExpandInline:I<m[f?"mobile":"desktop"].TRUNCATED_LINES&&x<m[f?"mobile":"desktop"].TRUNCATED_CHARACTERS}}}}]);