"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3844"],{5183:function(e,a,t){t.d(a,{Z:()=>i});let i={container:"container-XxSyR3",image:"image-nBNbRY","image-square-legacy":"image-square-legacy-jBVF2K",imageSquareLegacy:"image-square-legacy-jBVF2K",containerSquare:"containerSquare-M6P7XI","inner-wrapper":"inner-wrapper-ymo6T9",innerWrapper:"inner-wrapper-ymo6T9","inner-wrapper-small":"inner-wrapper-small-h1CnSS",innerWrapperSmall:"inner-wrapper-small-h1CnSS","inner-wrapper-medium":"inner-wrapper-medium-JvLb2H",innerWrapperMedium:"inner-wrapper-medium-JvLb2H","inner-wrapper-large":"inner-wrapper-large-ffUJx1",innerWrapperLarge:"inner-wrapper-large-ffUJx1","image-square":"image-square-b7oiFr",imageSquare:"image-square-b7oiFr","image-square-small":"image-square-small-v9eiR2",imageSquareSmall:"image-square-small-v9eiR2","image-square-medium":"image-square-medium-Z6HNx5",imageSquareMedium:"image-square-medium-Z6HNx5","image-square-large":"image-square-large-dp7_L9",imageSquareLarge:"image-square-large-dp7_L9"}},52478:function(e,a,t){t.d(a,{Z:()=>i});let i={dragArea:"dragArea-sMT00C",dragActive:"dragActive-g1aWbC",text:"text-ehFyYa",file:"file-P3qftv"}},43336:function(e,a,t){t.d(a,{Z:()=>i});let i={input:"input-X5E9i8",inputWrapper:"inputWrapper-oU82fm",inputBox:"inputBox-sEFZlI",disabled:"disabled-E8NHVa",hasChips:"hasChips-vDsUWG",options:"options-aBXwqq",empty:"empty-DC9PME",option:"option-orqVUP",check:"check-qomjjP",button:"button-xcVawW"}},49733:function(e,a,t){t.d(a,{X:()=>q});var i=t(16584),r=t(30396),n=t(94184),l=t.n(n),o=t(68835),s=t(66784),u=t(20888),d=t(40647),p=t(98422),c=t(68648),m=t(93029),v=t(53394),g=t(70717),Z=t(19081),h=t(18618),y=t(74571),f=t(31377),w=t(60308),b=t(5183);let q=e=>{var a,t,n,q,N;let{className:S,disableVideoHover:U,hidePlaceholder:x,hideTimestamp:B,hideTimestampIcon:P,imageAspectRatio:k,imageWidth:W,isBelowTheFold:L,playButtonSize:_,post:R,squareImageSize:X}=e,{cropGravity:I,pub:z}=(0,c.ZT)(),{getConfigFor:M}=(0,d.xR)(),{isMobile:O}=(0,p.v9)(),j=M("show_entire_square_image"),F=(0,r.sO)(null),[T]=(0,y.i5)(F),E=T&&!U,V=!!R.videoUpload,H=!!(!V&&"podcast"===R.type),J=(0,f.getCoverImageUrl)(R);!J&&((null===(q=R.videoUpload)||void 0===q?void 0:q.thumbnail_id)?J=(0,w.kOB)(R.videoUpload):(null===(N=R.podcastUpload)||void 0===N?void 0:N.thumbnail_id)&&(J=(0,w.kOB)(R.podcastUpload,{post:R})));let Y=W<=640;if(!J&&x)return null;let K=W||k?k:1.32,A=W||336,D=!!J&&R.cover_image_is_square&&j,G=D&&!!X&&(!O||"small"!==X),Q=L?"lazy":void 0,$=(0,f.getDurationForPostPreview)({post:R}),ee=!!(null===(a=R.videoUpload)||void 0===a?void 0:a.live_stream_id);return G?(0,i.tZ)(C,{aspectRatio:K,className:S,imageUrl:J,loading:Q,size:X,width:A}):(0,i.BX)("div",{ref:F,className:l()(S,b.Z.container,{"post-preview-cover-image-container--empty":!J}),style:"aspect-ratio: ".concat(K),children:[(V||H)&&null!==_&&(0,i.tZ)(Z.gq,{alignItems:"center",inset:0,justifyContent:"center",opacity:V&&E?0:100,position:"absolute",style:{transition:"opacity ".concat(Y?"var(--animation-timing-fast)":"var(--animation-timing-slow)"," var(--animation-smooth)")},children:(0,i.tZ)(h.fI,{isPlaying:!1,size:_})}),V&&(Y?(0,i.tZ)(m.Z,{aspectRatio:(null===(t=R.videoUpload)||void 0===t?void 0:t.width)&&(null===(n=R.videoUpload)||void 0===n?void 0:n.height)?R.videoUpload.width/R.videoUpload.height:K,containerRef:F,post:R,size:W>320?"large":"medium"}):(0,i.tZ)(v.Z,{isHovered:E,post:R,pub:z})),J?(0,i.tZ)(u.e,{alt:"",className:l()(b.Z.image,{[b.Z["image-square-legacy"]]:D}),imageProps:K?{height:Math.round(A/K),smartCrop:!0,gravity:ee?"auto":I}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:Q,maxWidth:A,src:J,style:{aspectRatio:"".concat(K)}}):null,!!$&&!B&&(0,i.tZ)(g.w,{duration:$,icon:P?null:H?(0,i.tZ)(o.Z,{size:12,stroke:"white"}):(0,i.tZ)(s.Z,{size:14,stroke:"white"})})]})},C=e=>{let{aspectRatio:a,className:t,imageUrl:r,width:n,loading:o,size:s}=e;return(0,i.tZ)("div",{className:l()(t,b.Z.container,b.Z.containerSquare),style:"aspect-ratio: ".concat(a),children:(0,i.tZ)("div",{className:l()(b.Z["inner-wrapper"],b.Z["inner-wrapper-".concat(s)]),children:(0,i.tZ)(u.e,{alt:"",className:l()(b.Z.image,b.Z["image-square"],b.Z["image-square-".concat(s)]),imageProps:{height:n,smartCrop:!0,gravity:"center"},loading:o,maxWidth:n,src:r})})})}},53394:function(e,a,t){t.d(a,{Z:()=>v});var i=t(16584),r=t(30396),n=t(94184),l=t.n(n),o=t(29876),s=t(92559),u=t(12281),d=t(14952),p=t(15771),c=t(19081),m=t(85131);let v=e=>{let{isHovered:a,post:t}=e,[n,v]=(0,r.eJ)(!0),[g,Z]=(0,r.eJ)(!1),h=(0,r.sO)(null),y=(0,d.Ij)();(0,r.d4)(()=>{var e,t,i,r,l,o,s,u,d,p;let c=()=>Z(!0);return null===(t=h.current)||void 0===t||null===(e=t.player)||void 0===e||e.addEventListener("loadedmetadata",c),a?(null===(l=h.current)||void 0===l||null===(r=l.player)||void 0===r||null===(i=r.play)||void 0===i||i.call(r),(null===(o=h.current)||void 0===o?void 0:o.player)&&(h.current.player.volume=+!n)):(null===(d=h.current)||void 0===d||null===(u=d.player)||void 0===u||null===(s=u.pause)||void 0===s||s.call(u),(null===(p=h.current)||void 0===p?void 0:p.player)&&(h.current.player.volume=0)),()=>{var e,a;null===(a=h.current)||void 0===a||null===(e=a.player)||void 0===e||e.removeEventListener("loadedmetadata",c)}},[a]);let f=e=>{var a;e.stopPropagation(),v(!n),(null===(a=h.current)||void 0===a?void 0:a.player)&&(h.current.player.volume=+!!n)};return y&&t.videoUpload&&a?(0,i.tZ)("div",{className:l()(m.Z.gifPreview,{[m.Z.visible]:g}),children:(0,i.BX)(c.gq,{alignItems:"center",justifyContent:"center",position:"relative",style:{width:"100%",height:"100%"},children:[(0,i.tZ)(u.Z,{ref:h,autoPlay:!0,className:m.Z.videoPlayerWrapper,contentType:"post",entityKey:t.id,entityType:"post",mediaUpload:t.videoUpload,noControls:!0,noPreview:!0,pub:y,surface:"publication",videoClassName:m.Z.videoClassName,videoPlayerClassName:m.Z.videoPlayerClassName,videoType:"post-preview"}),(0,i.tZ)(c.gq,{padding:12,position:"absolute",style:{top:0,right:0},children:(0,i.tZ)(p.GI,{onClick:e=>f(e),children:n?(0,i.tZ)(o.Z,{size:20}):(0,i.tZ)(s.Z,{size:20})})})]})}):null}},95280:function(e,a,t){t.d(a,{O2:()=>y,Wv:()=>b,YS:()=>w,fs:()=>g,qU:()=>Z,tw:()=>f});var i=t(58865),r=t(16584),n=t(26788),l=t(78493),o=t(58017),s=t(13742),u=t(86374),d=t(95441),p=t(80026),c=t(58175),m=t(43336);function v(){let e=(0,i._)(['Create "','"']);return v=function(){return e},e}let g={placement:"bottom-start",strategy:"fixed",whileElementsMounted:n.Me,middleware:[(0,l.cv)(4),(0,l.RR)(),(0,l.dp)({padding:0,elementContext:"floating",altBoundary:!1,rootBoundary:"viewport",apply(e){let{elements:a,rects:t}=e;Object.assign(a.floating.style,{minWidth:"".concat(t.reference.width,"px")})}})]},Z=200;function h(){return(0,r.tZ)(p.M5,{className:m.Z.check,position:"absolute",children:(0,r.tZ)(s.Z,{size:20,stroke:"var(--color-link-fg)"})})}function y(e){let{option:a,isDisabled:t,isSelected:i}=e;return(0,r.BX)(o.h.Option,{className:m.Z.option,value:a.value,disabled:t,children:[(0,r.tZ)(c.xv.B3,{color:t?"secondary":"primary",children:a.label}),i&&(0,r.tZ)(h,{})]},String(a.value))}function f(e){let{inputString:a}=e,{iTemplate:t}=(0,d.M1)();return(0,r.tZ)(o.h.Option,{className:m.Z.option,value:{isNew:!0,label:a},children:(0,r.tZ)(c.xv.B3,{color:"secondary",children:t(v(),a)})})}function w(){return(0,r.tZ)(o.h.Button,{className:m.Z.button,children:e=>{let{disabled:a}=e;return(0,r.tZ)(u.Z,{color:a?"var(--color-fg-tertiary)":void 0})}})}function b(e){return"object"==typeof e&&null!==e&&"isNew"in e&&!0===e.isNew&&"label"in e&&"string"==typeof e.label}},26668:function(e,a,t){t.d(a,{q:()=>v});var i=t(16584),r=t(27506),n=t(58017),l=t(94184),o=t.n(l),s=t(95280),u=t(84450),d=t(80026),p=t(51776),c=t(43336),m=t(68686);function v(e){let{options:a,value:t,onChange:l,placeholder:v,disabled:g,onCreate:Z,isCreateOptionValid:h}=e,{trimmedInputValue:y,filteredOptions:f,handleInputChange:w,showCreateOption:b,noResults:q,processSelectionValue:C,getDisplayValue:N}=(0,u.K)({options:a,onCreate:Z,isCreateOptionValid:h}),{refs:S,floatingStyles:U}=(0,r.YF)(s.fs),x=async e=>{C(e,l)};return(0,i.tZ)(n.h,{value:t,onChange:x,disabled:g,nullable:!0,children:e=>{let{open:a}=e;return(0,i.BX)(i.HY,{children:[(0,i.BX)(d.X2,{ref:S.setReference,flex:"grow",alignItems:"center",position:"relative",children:[(0,i.tZ)(n.h.Input,{className:o()("pencraft",m.Z.input,m.Z.inputText,m.Z.trailing,g&&m.Z.disabled),onChange:w,placeholder:v,displayValue:N}),(0,i.tZ)(p.b9,{position:"trailing",pointerEvents:"auto",children:(0,i.tZ)(s.YS,{})})]}),a&&(0,i.BX)(n.h.Options,{ref:S.setFloating,style:U,static:!0,className:o()(c.Z.options,q&&c.Z.empty),children:[f.slice(0,s.qU).map(e=>{let a=e.value===t;return(0,i.tZ)(s.O2,{option:e,isSelected:a},String(e.value))}),b&&(0,i.tZ)(s.tw,{inputString:y})]})]})}})}},84450:function(e,a,t){t.d(a,{K:()=>n});var i=t(98661),r=t(95280);function n(e){var a;let{options:t,onCreate:n,isCreateOptionValid:l,hasReachedMax:o=!1}=e,[s,u]=(0,i.useState)(""),d=s.trim(),p=()=>{u("")},c=d?t.filter(e=>e.label.toLowerCase().includes(d.toLowerCase())):t,m=null===(a=null==l?void 0:l(d,t))||void 0===a||a,v=!t.some(e=>e.label.toLowerCase()===d.toLowerCase()),g=d&&n&&m&&v&&!o,Z=0===c.length&&!g,h=async e=>{n&&(await n(e.label),p())};return{inputValue:s,trimmedInputValue:d,handleInputChange:e=>{u(e.currentTarget.value)},filteredOptions:c,getDisplayValue:e=>{if(null===e)return"";let a=t.find(a=>a.value===e);return(null==a?void 0:a.label)||""},showCreateOption:g,noResults:Z,processSelectionValue:(e,a)=>{if((0,r.Wv)(e)){h(e);return}a(e),p()}}}}}]);