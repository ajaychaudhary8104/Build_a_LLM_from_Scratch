"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["7041"],{54796:function(e,t,i){i.d(t,{Z:()=>n});let n={imageBubble:"imageBubble-PUJ2WF",clickable:"clickable-z7o89Z",imageGrid:"imageGrid-TadIyX","size-1":"size-1-rfav9C",size1:"size-1-rfav9C","size-2":"size-2-LosM46",size2:"size-2-LosM46","size-4":"size-4-O0kTBk",size4:"size-4-O0kTBk","size-3":"size-3-MmfJJu",size3:"size-3-MmfJJu","size-5":"size-5-cc0rFG",size5:"size-5-cc0rFG","size-6":"size-6-SP0NOv",size6:"size-6-SP0NOv",contained:"contained-GU4Fy5",preview:"preview-SSSK5E",dm:"dm-XsOsrC",diptychImage:"diptychImage-L7kJ7N",carouselImage:"carouselImage-X3Cree",imageCountOverlay:"imageCountOverlay-J0DNI5",imageGridThumbnail:"imageGridThumbnail-D4cu25",thumbnailImage:"thumbnailImage-uSyTfq",imageCarouselContainer:"imageCarouselContainer-Y1hu48",imageCarousel:"imageCarousel-s8aXY3",carouselSpacer:"carouselSpacer-yyKzy_",overscrollTransition:"overscrollTransition-FddfeV",arrowContainer:"arrowContainer-_8XYI6",left:"left-QRb4rs",right:"right-_sA6d0",arrowButton:"arrowButton-iwL13X",hidden:"hidden-YjEzYn",arrowIcon:"arrowIcon-Vpjw1u",permalink:"permalink-Zw9a6V",restack:"restack-AvS7gl"}},71891:function(e,t,i){i.d(t,{Z:()=>n});let n={header:"header-m3czQu",headerWithJustTitle:"headerWithJustTitle-AWuTLu",noImage:"noImage-VVe5Lh",actions:"actions-mMxsK2",thickRule:"thickRule-c8r1qH",bodyWrapperTwoMiddleColumns:"bodyWrapperTwoMiddleColumns-EOoshF",notifyButton:"notifyButton-wkevVH",hoverText:"hoverText-OtXqlP",notifyButtonInternal:"notifyButtonInternal-wv0x02",titleNotifyButton:"titleNotifyButton-bWyjlY",caret:"caret-vNjCU3",collapsed:"collapsed-KQpXLZ"}},44989:function(e,t,i){i.d(t,{Z:()=>n});let n={listOuter:"listOuter-l1CBOE"}},16823:function(e,t,i){i.d(t,{Z:()=>n});let n={specialFeatureHeaderContainer:"specialFeatureHeaderContainer-Skrlng",thickRule:"thickRule-oguYhe",threeColumnContainer:"threeColumnContainer-ziuSvf",mediumRule:"mediumRule-wQbBfo",headerButtonMobile:"headerButtonMobile-DURJFG",america250HomepageHeader:"america250HomepageHeader-Gp7Pmn",a250Rule:"a250Rule-oAzvtB",a250Logo:"a250Logo-sb3SfS"}},77081:function(e,t,i){i.d(t,{D:()=>S});var n=i(7409),o=i(99282),l=i(58865),r=i(16584),a=i(30396),s=i(80569),d=i.n(s),c=i(95441),u=i(15771),p=i(17352),h=i(82402),m=i(19081),g=i(6490),v=i(10510),Z=i(58175),f=i(70379),b=i(60308),y=i(84864);function _(){let e=(0,l._)(["Recommend ","?"]);return _=function(){return e},e}function w(){let e=(0,l._)(["Recommend "," and "," other Substacks?"]);return w=function(){return e},e}function C(){let e=(0,l._)(["Since you embedded "," in your post, we thought you might like to recommend them to your subscribers."]);return C=function(){return e},e}function B(){let e=(0,l._)(["Since you embedded these Substacks in your post, we thought you might like to recommend them to your subscribers."]);return B=function(){return e},e}function k(){let e=(0,l._)(["Recommend "," Substack"]);return k=function(){return e},e}function x(){let e=(0,l._)(["Recommend "," Substacks"]);return x=function(){return e},e}function S(e){var t,i;let{pub:l,pubsToRecommend:s}=e,{iString:p,iTemplate:h,iPlural:v}=(0,c.M1)(),Z=(0,f.pm)(),[b,y]=(0,a.eJ)(!0),[S,I]=(0,a.eJ)(!1),[X,T]=(0,a.eJ)(new Set((s||[]).map(e=>e.id)));if(0===s.length||!s[0])return null;let N=()=>{y(!1)},M=e=>{let t=new Set(X);t.has(e)?t.delete(e):t.add(e),T(t)},L=async()=>{try{I(!0);let e=Array.from(X);await d().put("/api/v1/recommendations/multiple").send({recommending_publication_id:l.id,recommended_publication_ids:e,source:"post_publish_cta",suggested:e.map(()=>!0)}),e.length&&Z.popToast(t=>(0,r.tZ)(f.FN,(0,o._)((0,n._)({},t),{text:v("Added %1 recommendation","Added %1 recommendations",e.length)}))),N()}catch(e){console.error("Failed to add recommendations: ",e),Z.popToast(e=>(0,r.tZ)(f.FN,(0,o._)((0,n._)({},e),{text:p("Failed to add recommendations")}))),N()}finally{I(!1)}},E=X.size,q=1===s.length?h(_(),s[0].name):h(w(),s[0].name,s.length-1),z=1===s.length?h(C(),null!==(i=null===(t=s[0])||void 0===t?void 0:t.name)&&void 0!==i?i:""):h(B());return(0,r.tZ)(r.HY,{children:b?(0,r.BX)(g.u_,{isOpen:b,onClose:N,children:[(0,r.tZ)(g.xB,{title:q,description:z,onClose:N,showClose:!0,showDivider:!0}),(0,r.tZ)(g.fe,{children:(0,r.tZ)(m.sg,{gap:16,children:s.map(e=>(0,r.tZ)(P,{pub:e,checked:X.has(e.id),onChange:()=>M(e.id)},e.id))})}),(0,r.tZ)(g.mz,{showDivider:!0,primaryButton:(0,r.tZ)(u.zx,{onClick:L,disabled:0===E,loading:S,children:0===E?p("Recommend"):h(1===E?k():x(),E)}),secondaryButton:(0,r.tZ)(u.zx,{onClick:N,priority:"secondary",children:p("Cancel")})})]}):null})}function P(e){let{pub:t,checked:i,onChange:n}=e;return(0,r.tZ)("label",{children:(0,r.BX)(p.Z,{padding:12,gap:12,direction:"row",alignItems:"center",cursor:"pointer",children:[(0,r.tZ)(v.jM,{pub:t,size:40,openInNewTab:!0}),(0,r.BX)(m.sg,{gap:2,flex:"grow",children:[(0,r.tZ)(Z.xv.B3,{children:(0,r.tZ)(Z.hh,{href:(0,b.SVA)(t),target:"_blank",children:t.name})}),(0,r.tZ)(Z.xv.B4,{color:"secondary",children:(0,y.getByLine)(t)})]}),(0,r.tZ)(h.X,{name:"pub-".concat(t.id),checked:i,onChange:n,size:"sm"})]})})}},70011:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(64515);function s(e){var{fill:t="#10BC4C",size:i=24}=e,s=(0,l._)(e,["fill","size"]);return(0,r.BX)(a.l,(0,o._)((0,n._)({name:"SpotifyIcon",svgParams:{viewBox:"0 0 24 24"},width:i,height:i,fill:"none",stroke:"none"},s),{children:[(0,r.tZ)("circle",{cx:"12",cy:"12",r:"12",fill:t}),(0,r.tZ)("path",{d:"M17.4551 16.8197C17.2501 17.145 16.8127 17.2361 16.471 17.0409C13.7785 15.4795 10.4025 15.1281 6.41156 15.9869C6.02886 16.065 5.64617 15.8438 5.56416 15.4795C5.48215 15.1151 5.7145 14.7508 6.0972 14.6727C10.4572 13.7228 14.2022 14.1262 17.2091 15.8828C17.5508 16.078 17.6601 16.4944 17.4551 16.8197ZM18.8492 13.8529C18.5895 14.2563 18.0428 14.3734 17.6191 14.1392C14.5439 12.3305 9.85583 11.81 6.22021 12.864C5.74184 12.9941 5.2498 12.7469 5.11313 12.3045C4.97645 11.8491 5.23613 11.3806 5.7145 11.2505C9.86949 10.0534 15.0359 10.6259 18.5758 12.6949C18.9722 12.9291 19.1089 13.4496 18.8492 13.8529ZM18.9722 10.756C15.2819 8.6741 9.19978 8.47892 5.6735 9.49387C5.11313 9.66303 4.51175 9.36375 4.33406 8.81724C4.15638 8.28374 4.48441 7.7112 5.04479 7.54205C9.09043 6.37095 15.815 6.60517 20.052 8.99941C20.5577 9.28568 20.7217 9.91026 20.421 10.3917C20.134 10.8862 19.4779 11.0553 18.9722 10.756Z",fill:"white"})]}))}},39900:function(e,t,i){i.d(t,{Z:()=>d});var n=i(7409),o=i(99282),l=i(16584),r=i(98848),a=i(64515);let s=e=>{var{name:t,children:i}=e,s=(0,r._)(e,["name","children"]);return(0,l.tZ)(a.l,(0,o._)((0,n._)({},s),{name:t,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"},children:i}))},d=e=>(0,l.BX)(s,(0,o._)((0,n._)({},e),{name:"ActivationUsersIcon",children:[(0,l.tZ)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,l.tZ)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"})]}))},30428:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(64515);let s=e=>{var{size:t=20,color:i="var(--color-fg-primary)",className:s}=e,d=(0,l._)(e,["size","color","className"]);return(0,r.tZ)(a.l,(0,o._)((0,n._)({},d),{name:"FilledCircleCrossIcon",svgParams:{viewBox:"0 0 20 20"},stroke:"none",width:t,height:t,fill:i,className:s,children:(0,r.tZ)("path",{d:"M10 18.6646C8.80469 18.6646 7.68408 18.4377 6.63818 17.9839C5.59229 17.5356 4.6709 16.9131 3.87402 16.1162C3.08268 15.3249 2.46289 14.409 2.01465 13.3687C1.56641 12.3228 1.34229 11.2021 1.34229 10.0068C1.34229 8.81152 1.56641 7.69092 2.01465 6.64502C2.46289 5.59912 3.08268 4.6805 3.87402 3.88916C4.6709 3.09229 5.59229 2.46973 6.63818 2.02148C7.68408 1.57324 8.80469 1.34912 10 1.34912C11.1953 1.34912 12.3159 1.57324 13.3618 2.02148C14.4077 2.46973 15.3263 3.09229 16.1177 3.88916C16.909 4.6805 17.5288 5.59912 17.9771 6.64502C18.4308 7.69092 18.6577 8.81152 18.6577 10.0068C18.6577 11.2021 18.4308 12.3228 17.9771 13.3687C17.5288 14.409 16.909 15.3249 16.1177 16.1162C15.3263 16.9131 14.4077 17.5356 13.3618 17.9839C12.3159 18.4377 11.1953 18.6646 10 18.6646ZM7.31885 13.543C7.5734 13.543 7.78646 13.46 7.95801 13.2939L10.0083 11.2354L12.0669 13.2939C12.2274 13.46 12.4321 13.543 12.6812 13.543C12.9246 13.543 13.1294 13.46 13.2954 13.2939C13.4614 13.1279 13.5444 12.9232 13.5444 12.6797C13.5444 12.4417 13.4587 12.2425 13.2871 12.082L11.2202 10.0151L13.2954 7.94824C13.4614 7.77669 13.5444 7.57747 13.5444 7.35059C13.5444 7.1071 13.4614 6.90511 13.2954 6.74463C13.1349 6.57861 12.9357 6.49561 12.6978 6.49561C12.4543 6.49561 12.2495 6.57861 12.0835 6.74463L10.0083 8.81152L7.94141 6.75293C7.76986 6.58691 7.56234 6.50391 7.31885 6.50391C7.08089 6.50391 6.87891 6.58691 6.71289 6.75293C6.55241 6.91341 6.47217 7.1154 6.47217 7.35889C6.47217 7.58577 6.55518 7.78223 6.72119 7.94824L8.79639 10.0151L6.72119 12.0903C6.55518 12.2563 6.47217 12.4528 6.47217 12.6797C6.47217 12.9232 6.55241 13.1279 6.71289 13.2939C6.87891 13.46 7.08089 13.543 7.31885 13.543Z",stroke:"none"})}))}},15702:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),l=i(16584),r=i(64515);let a=e=>(0,l.BX)(r.l,(0,o._)((0,n._)({},e),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"},children:[(0,l.tZ)("circle",{cx:"3.93749",cy:"5.97916",r:"3.4375"}),(0,l.tZ)("path",{d:"M8.39583 9.49273C8.39583 11.3912 6.85681 12.9302 4.95833 12.9302C3.05985 12.9302 1.52083 11.3912 1.52083 9.49273C1.52083 7.59425 3.05985 6.05523 4.95833 6.05523C6.85681 6.05523 8.39583 7.59425 8.39583 9.49273Z"}),(0,l.tZ)("path",{d:"M12.4792 9.49273C12.4792 11.3912 10.9402 12.9302 9.04172 12.9302C7.14324 12.9302 5.60422 11.3912 5.60422 9.49273C5.60422 7.59425 7.14324 6.05523 9.04172 6.05523C10.9402 6.05523 12.4792 7.59425 12.4792 9.49273Z"}),(0,l.tZ)("circle",{cx:"6.99999",cy:"3.9375",r:"3.4375"}),(0,l.tZ)("circle",{cx:"10.0625",cy:"5.97916",r:"3.4375"})]}))},25682:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(64515);let s=e=>{var{color:t="#262626"}=e,i=(0,l._)(e,["color"]);return(0,r.BX)(a.l,(0,o._)((0,n._)({},i),{name:"LockThinIcon",svgParams:{height:16,width:16},children:[(0,r.tZ)("path",{className:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:t}),(0,r.tZ)("path",{className:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:t,stroke:t})]}))}},21286:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),l=i(16584),r=i(20816),a=i(64515);let s=function(e){return(0,l.tZ)(a.l,(0,o._)((0,n._)({},e),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.tZ)(r.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))}},76157:function(e,t,i){i.d(t,{Z:()=>s});var n=i(7409),o=i(99282),l=i(16584),r=i(17103),a=i(64515);let s=e=>(0,l.tZ)(a.l,(0,o._)((0,n._)({},e),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,l.tZ)(r.Z,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},39929:function(e,t,i){i.d(t,{Z:()=>a});var n=i(7409),o=i(99282),l=i(16584),r=i(64515);let a=e=>(0,l.BX)(r.l,(0,o._)((0,n._)({},e),{name:"PinIconSmall",svgParams:{height:16,width:14},children:[(0,l.tZ)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),(0,l.tZ)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),(0,l.tZ)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"})]}))},37696:function(e,t,i){i.d(t,{U:()=>$,l:()=>ee});var n=i(7409),o=i(99282),l=i(58865),r=i(16584),a=i(30396),s=i(96490),d=i(76789),c=i(95058),u=i(78107),p=i(25169),h=i(42841),m=i(76915),g=i(63058),v=i(93818),Z=i(82431),f=i(42695),b=i(59719),y=i(13766),_=i(26118),w=i(30143),C=i(34464),B=i(11607),k=i(61108),x=i(62112),S=i(9404),P=i(80569),I=i.n(P),X=i(94499),T=i(94442),N=i(98914),M=i(15771),L=i(19081),E=i(17391),q=i(87185),z=i(6490),R=i(70379);function A(e){var t,i;let{isOpen:l,onClose:s,post:d}=e,c=(0,R.pm)(),[u,p]=(0,a.eJ)(!1),h=null===(i=d.postTheme)||void 0===i?void 0:null===(t=i.variant_config)||void 0===t?void 0:t.fullWidthImage,m={hideOverlay:(null==h?void 0:h.hideOverlay)||!1,hideSectionLink:(null==h?void 0:h.hideSectionLink)||!1,textColor:(null==h?void 0:h.textColor)||"black"},[g,v]=(0,a.eJ)(m),Z=async()=>{p(!0);try{var e;let t=(0,o._)((0,n._)({},null===(e=d.postTheme)||void 0===e?void 0:e.variant_config),{fullWidthImage:g});await I().patch("/api/v1/post/".concat(d.id,"/theme")).send({variant_config:t}),location.reload()}catch(e){c.popToast(t=>(0,r.tZ)(R.FN,(0,o._)((0,n._)({},t),{text:(0,N.zx)(e)})))}finally{p(!1)}},f=()=>{v(m),s()};return(0,r.BX)(z.u_,{isOpen:l,onClose:f,children:[(0,r.tZ)(z.xB,{showClose:!0,title:"Full Width Image Options",onClose:f}),(0,r.tZ)(z.fe,{children:(0,r.BX)(L.tu,{gap:12,children:[(0,r.tZ)(q.m,{label:"Text Color",options:[{value:"black",label:"Black"},{value:"red",label:"Red"},{value:"white",label:"White"}],value:g.textColor,onChange:e=>v((0,o._)((0,n._)({},g),{textColor:e}))}),(0,r.tZ)(E.j,{label:"Hide overlay",value:g.hideOverlay,onChange:e=>v((0,o._)((0,n._)({},g),{hideOverlay:e}))}),(0,r.tZ)(E.j,{label:"Hide section link",value:g.hideSectionLink,onChange:e=>v((0,o._)((0,n._)({},g),{hideSectionLink:e}))})]})}),(0,r.tZ)(z.mz,{primaryButton:(0,r.tZ)(M.zx,{disabled:u,priority:"primary",onClick:Z,children:"Save"}),secondaryButton:(0,r.tZ)(M.zx,{disabled:u,priority:"secondary",onClick:f,children:"Cancel"})})]})}var F=i(95441),O=i(68833),D=i(48980),H=i(49762),U=i(68648),J=i(99916),W=i(46585),j=i(98012),Y=i(6070),V=i(60308),G=i(63651),K=i(84864);function Q(){let e=(0,l._)([""," top posts"]);return Q=function(){return e},e}function $(e){var t,i,l,S;let{pub:P,post:X,hideDropCapOption:M,hidePinning:L,hidePostHeaderOptions:E,user:q,emailSent:z,allowSendEmail:O,handleCrossPost:$,onToggleMenu:ee,onSummaryOpen:et,trigger:ei,disabled:en}=e,eo=(0,a.qp)(U.re),el=(0,R.pm)(),{iString:er,iTemplate:ea}=(0,F.M1)(),[es,ed]=(0,a.eJ)(!1),[ec,eu]=(0,a.eJ)(!1),[ep,eh]=(0,a.eJ)(!1),[em,eg]=(0,a.eJ)(!1),[ev,eZ]=(0,a.eJ)(!1),[ef,eb]=(0,a.eJ)(null),[ey,e_]=(0,a.eJ)(null),[ew,eC]=(0,a.eJ)(null),[eB,ek]=(0,a.eJ)(!1);(0,a.d4)(()=>{(async()=>{eZ(!!await (0,D.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"GET"}))})()},[X.id]);let ex=async e=>{let t;switch(e){case"1hour":t=1;break;case"8hours":t=8;break;case"24hours":t=24}let i=t?{expires_at:(0,j.Z)().add(t,"hour").toISOString()}:{};await (0,D.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"POST",json:i}),eZ(!0),el.popToast(e=>(0,r.tZ)(R.FN,(0,o._)((0,n._)({},e),{text:er("Paused notifications"),Icon:s.Z})))},eS=async()=>{await (0,D.rd)("/api/v1/notification_settings/post/".concat(X.id,"/mute"),{method:"DELETE"}),eZ(!1),el.popToast(e=>(0,r.tZ)(R.FN,(0,o._)((0,n._)({},e),{text:er("Unpaused notifications"),Icon:d.Z})))},eP=async()=>{let e={everyone:"everyone",only_free:"free subscribers",only_paid:"paid subscribers",founding:"founding members"}[X.audience];if(confirm("Send this published post as an email to ".concat(e,"?")))try{await I().post("/api/v1/drafts/".concat(X.id,"/publish")).send({send:!0,only_send:!0}),location.reload()}catch(e){alert((0,N.zx)(e))}},eI=async()=>{try{await I().put("/api/v1/posts/".concat(X.id,"/clear_cache")),location.reload()}catch(e){alert((0,N.zx)(e))}},eX=async()=>{ed(!0);try{let e=await I().post("/api/v1/posts/".concat(X.id,"/duplicate"));(0,N.uX)((0,V.ANx)(P,e.body.id),{local_navigation:!1})}catch(e){alert((0,N.zx)(e)),ed(!1)}},eT=async e=>{eh(!0),await I().patch("/api/v1/post/".concat(X.id,"/theme")).send({post_preview_crop_gravity:e}),location.reload()},eN=async e=>{eg(!0),await I().patch("/api/v1/post/".concat(X.id,"/theme")).send({disable_drop_cap:e}),location.reload()},eM=async()=>{if(ef)return;eb(P.id);let e=X.pins.includes(P.id),t="/api/v1/publication/".concat(P.id,"/pin/").concat(X.id);try{e?(await I().del(t),X.pins=X.pins.filter(e=>e!==P.id)):(await I().post(t),P.multiple_pins||(X.pins=[]),X.pins.push(P.id)),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,N.zx)(e))}finally{eb(null)}},eL=async()=>{if(ey)return;let e=X.section_id;if(!e)return;e_(e);let t="/api/v1/publication/".concat(P.id,"/section/").concat(e,"/pin/").concat(X.id);try{X.is_section_pinned?(await I().del(t),X.is_section_pinned=!1):(await I().post(t),X.is_section_pinned=!0),(["/","/beta","/publish"].includes(location.pathname)||location.pathname.startsWith("/s/"))&&location.reload()}catch(e){alert((0,N.zx)(e))}finally{e_(null)}},eE=async()=>{if(ew)return;eC(P.id);let e=X.top_exclusions.includes(P.id),t="/api/v1/publication/".concat(P.id,"/exclusion/").concat(X.id);try{e?(await I().del(t),X.top_exclusions=[]):(await I().post(t),X.top_exclusions=[P.id]),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,N.zx)(e))}finally{eC(null)}},eq=(null===(t=X.postTheme)||void 0===t?void 0:t.post_preview_crop_gravity)||eo.cropGravity,ez=!(null===(i=X.postTheme)||void 0===i?void 0:i.disable_drop_cap),eR=null===(l=P.sections)||void 0===l?void 0:l.find(e=>e.id===X.section_id),eA="undefined"!=typeof window?window.location.pathname:"",eF=!!(0,H.ZP)("enable_post_summarization"),eO=(0,Y.HD)({pub:P}),eD=X.is_section_pinned!==(ey===X.section_id),eH=X.pins.includes(P.id)!==(ef===P.id),eU=X.top_exclusions.includes(P.id)!==(ew===P.id),eJ=eO&&!E&&(null===(S=X.postTheme)||void 0===S?void 0:S.header_variant)==="full-width-image";return(0,r.BX)(r.HY,{children:[(0,r.tZ)(T.RZ,{isOpen:ec,setIsOpen:eu}),(0,r.tZ)(A,{isOpen:eB,onClose:()=>ek(!1),post:X}),(0,r.BX)(J.v2,{trigger:ei,onOpen:()=>{null==ee||ee({active:!0})},onClose:()=>{null==ee||ee({active:!1})},disabled:en,children:[(0,r.BX)(J.xw,{isFirst:!0,children:[(0,r.tZ)(J.sN,{leading:(0,r.tZ)(c.Z,{}),href:(0,G.cwg)(P,X.id,{referrer:eA}),native:!0,children:er("View stats")}),(0,r.tZ)(J.sN,{leading:(0,r.tZ)(u.Z,{}),href:(0,G.fQy)(P,X.id,{referrer:eA}),native:!0,children:er("Share assets")})]}),(0,r.BX)(J.xw,{children:[(0,r.tZ)(J.sN,{leading:(0,r.tZ)(p.Z,{}),href:(0,V.uRy)(P,X,{edit:!0}),children:er("Edit")}),!z&&O&&X.is_published&&(0,r.tZ)(J.sN,{leading:(0,r.tZ)(h.Z,{}),onClick:eP,children:er("Send as email")}),(0,r.tZ)(J.sN,{leading:(0,r.tZ)(m.Z,{}),disabled:es,onClick:eX,children:es?"Duplicating...":"Duplicate"}),$&&(0,r.tZ)(J.sN,{leading:(0,r.tZ)(g.Z,{}),onClick:$,children:er("Cross post")}),eO&&(0,r.tZ)(J.sN,{disabled:ep,leading:(0,r.tZ)(v.Z,{}),onClick:()=>eT("auto"===eq?"center":"auto"),children:ep?"Updating...":"auto"===eq?"Disable smart cropping":"Enable smart cropping"}),eO&&!M&&(0,r.tZ)(J.sN,{disabled:em,leading:(0,r.tZ)(Z.Z,{}),onClick:()=>eN(ez),children:em?"Updating...":ez?"Disable drop cap":"Enable drop cap"}),eJ&&(0,r.tZ)(J.sN,{leading:(0,r.tZ)(f.Z,{}),onClick:()=>ek(!0),children:er("Edit full width image options")}),eF&&et&&(0,r.tZ)(J.sN,{leading:(0,r.tZ)(b.Z,{}),onClick:et,children:er("Reader guide")}),(0,H.ZP)("show_open_post_as_pdf_button")&&(0,r.tZ)(J.sN,{leading:(0,r.tZ)(y.Z,{}),onClick:()=>{eu(!0),(0,N.uX)((0,G.SUl)(P,X.id),{local_navigation:!1})},children:er("Open as PDF")})]}),(0,r.BX)(J.xw,{children:[!L&&X.slug&&(0,r.BX)(r.HY,{children:[(0,K.isPinnable)(P)&&X.section_id&&(X.section_name||(null==eR?void 0:eR.name))&&(0,r.BX)(J.sN,{leading:eD?(0,r.tZ)(_.Z,{}):(0,r.tZ)(w.Z,{}),onClick:eL,children:[eD?"Unpin from":"Pin to"," ",X.section_name||(null==eR?void 0:eR.name)]}),(0,K.isPinnable)(P)&&(0,r.tZ)(J.sN,{leading:eH?(0,r.tZ)(_.Z,{}):(0,r.tZ)(w.Z,{}),onClick:eM,children:eH?"Unpin from homepage":"Pin to homepage"})]}),X.slug&&"adhoc_email"!==X.type&&(0,r.tZ)(J.sN,{leading:eU?(0,r.tZ)(C.Z,{}):(0,r.tZ)(B.Z,{}),onClick:eE,children:ea(Q(),eU?"Include in":"Hide from")}),ev?(0,r.tZ)(W.WS,{onClick:eS,customLabel:er("Unpause notifications")}):(0,r.tZ)(W.KV,{onMute:e=>ex(e),customLabel:er("Pause notifications")})]}),(null==q?void 0:q.is_global_admin)&&(0,r.BX)(J.xw,{children:[(0,r.tZ)(J.sN,{priority:"secondary",onClick:eI,leading:(0,r.tZ)(k.Z,{}),children:er("Clear from cache")}),(0,r.tZ)(J.sN,{priority:"secondary",href:"".concat((0,V.SVA)({subdomain:"admin"}),"/posts/").concat(X.id),leading:(0,r.tZ)(x.Z,{}),children:er("Open in Underground")})]})]})]})}function ee(e){let{pub:t,post:i,iconHeight:n,hidePinning:o,user:l,emailSent:a,allowSendEmail:s,iconClassName:d}=e,c=(0,r.tZ)(X.Z,{onClick:()=>{(0,O.j)(O.FP.EDIT_POST_DROPDOWN_MENU_OPENED)},children:(0,r.tZ)(S.Z,{stroke:"var(--color-fg-secondary)",size:n,className:d})});return(0,r.tZ)($,{trigger:c,pub:t,post:i,hidePinning:o,user:l,emailSent:a,allowSendEmail:s})}},2995:function(e,t,i){i.d(t,{J:()=>T});var n=i(7409),o=i(16584),l=i(30396),r=i(80569),a=i.n(r),s=i(50515),d=i(95441),c=i(68833),u=i(98914),p=i(12900),h=i(15771),m=i(96745),g=i(19081),v=i(17391),Z=i(1844),f=i(68709),b=i(6490),y=i(10510),_=i(17688),w=i(58175),C=i(64300),B=i(51776),k=i(70379),x=i(98012),S=i(40894),P=i(31377),I=i(60308);let X={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},T=e=>{let{pub:t,post:i,user:r,open:y,setOpen:S,placeholderText:T=""}=e,M=(0,x.Z)().add(2,"minutes"),[L,E]=(0,l.eJ)(null),[q,z]=(0,l.eJ)(T),[R,A]=(0,l.eJ)(!1),[F,O]=(0,l.eJ)(!0),[D,H]=(0,l.eJ)("PREAMBLE"),[U,J]=(0,l.eJ)(null),[W,j]=(0,l.eJ)(void 0),[Y,V]=(0,l.eJ)(!0),[G,K]=(0,l.eJ)(!0),[Q,$]=(0,l.eJ)(!1),[ee,et]=(0,l.eJ)((0,x.Z)().add(1,"day").toDate()),[ei,en]=(0,l.eJ)(""),{iString:eo}=(0,d.M1)(),el={everyone:"to everyone",founding:"to founding members",only_paid:"to paid subscribers"}[null!=W?W:"null"],er=Y?"Send":"Publish",ea=Q&&ee?(0,x.Z)(ee).max(M).fromNow():"",es=Y?el:"",ed="".concat(er," cross-post ").concat(es," ").concat(ea),ec=null==L?void 0:L.find(e=>e.id===U),eu=(0,k.pm)();(0,l.d4)(()=>{let e=async()=>{try{var e;let t=await a().get("/api/v1/restack/restackable-pubs"),i=(null==t?void 0:null===(e=t.body)||void 0===e?void 0:e.publications)||[];E(i),O(!1),i.length>0&&(J(i[0].id),j("everyone"))}catch(e){console.error("Failed to load user profile for restacking: ",e)}};y&&!L&&F&&e()},[y,r,F,O,L,E]),(0,l.d4)(()=>{y&&L&&0===L.length&&!F&&(0,u.uX)((0,I._HV)())},[y,L,F]);let ep=(e,l)=>{S(!y,l),H("PREAMBLE"),en(null),O(!1),l&&(z(""),(0,c.j)(c.FP.RESTACK_POST_SUBMITTED,{restacked_publication_id:t.id,restacked_post_id:i.id,restacking_user_id:r.id,restacking_publication_id:null==ec?void 0:ec.id,restacking_blurb:q}),eu.popToast(e=>(0,o.tZ)(k.FN,(0,n._)({text:Q?"This post is scheduled to cross-post ".concat(ea):"This post was cross-posted to your subscribers"},e)))),(0,c.j)(c.FP.CROSS_POST_MODAL_CLOSED,{didRestack:l})},eh=async()=>{(0,c.j)(c.FP.CROSS_POST_MODAL_SUBMIT_CLICKED),O(!0);try{if(Q){let e=(0,x.Z)(ee).max(M).toDate();if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id,"/schedule")).send({audience:W,restackingPubId:ec.id,introText:q,sendEmail:Y,publishToWeb:G,scheduledAt:e})}else{if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(i.id)).send({audience:W,restackingPubId:ec.id,introText:q,sendEmail:Y,publishToWeb:G})}(0,c.j)(c.FP.CROSS_POST_MODAL_SUBMITTED),ep({},!0);return}catch(e){if((0,c.j)(c.FP.CROSS_POST_MODAL_SUBMIT_FAILED,{error:(0,u.zx)(e,"Could not retrieve error message")}),console.error("Failed to restack post:",e),e instanceof TypeError)throw en("An unknown error ocurred. This post was not recommended."),O(!1),e;en((0,u.zx)(e,"This post could not be recommended.")),O(!1)}};return(0,o.BX)(b.u_,{isOpen:y,onClose:ep,children:[(0,o.tZ)(b.xB,{showClose:!0,onClose:ep,title:eo("Cross-post to your Substack"),showDivider:!0}),"PREAMBLE"===D?(0,o.BX)(o.HY,{children:[(0,o.tZ)(b.fe,{children:(0,o.BX)(g.tu,{gap:20,children:[(0,o.tZ)(N,{post:i,pub:t}),(0,o.tZ)(C.g,(0,n._)({placeholder:eo("Say why this post is worth reading..."),onChange:e=>{R||(A(!0),(0,c.j)(c.FP.CROSS_POST_MODAL_TYPING_STARTED)),z(e.target.value)},value:q,maxLength:800,rows:5},s.J)),ei&&(0,o.tZ)(Z.y,{children:ei})]})}),(0,o.tZ)(b.mz,{direction:"column",primaryButton:(0,o.tZ)(h.zx,{priority:"primary",onClick:()=>{if((0,c.j)(c.FP.CROSS_POST_MODAL_CONTINUE_CLICKED),!q){en("Please write something to your subscribers to continue"),(0,c.j)(c.FP.CROSS_POST_MODAL_CONTINUE_FAILED);return}en(""),H("AUDIENCE_SELECTION"),(0,c.j)(c.FP.CROSS_POST_MODAL_CONTINUED)},disabled:!q,loading:F,children:eo("Continue")})})]}):(0,o.BX)(o.HY,{children:[(0,o.tZ)(b.fe,{children:(0,o.BX)(g.tu,{gap:20,children:[(0,o.BX)(B.fv,{children:[(0,o.tZ)(f.__,{children:eo("Post to")}),(0,o.tZ)(_.i,{value:null==ec?void 0:ec.id,onChange:e=>{let t=e.currentTarget.value;j("everyone"),J(Number(t))},children:null==L?void 0:L.map(e=>(0,o.tZ)("option",{value:e.id,children:e.name}))})]}),(0,o.BX)(B.fv,{children:[(0,o.tZ)(f.__,{children:eo("Send to")}),(0,o.tZ)(_.i,{value:W,onChange:e=>j(e.target.value),children:((null==ec?void 0:ec.payments_state)==="enabled"?(0,P.getAudiencesForPublicListing)():["everyone"]).map(e=>(0,o.tZ)("option",{value:e,children:X[e]}))})]}),(0,o.BX)(g.tu,{gap:12,children:[(0,o.tZ)(f.__,{children:eo("Delivery")}),(0,o.tZ)(v.j,{value:Y,label:eo("Send cross-post via email"),onChange:e=>V(e)}),(0,o.tZ)(v.j,{value:G,label:eo("Publish cross-post to web"),onChange:e=>K(e)}),(0,o.tZ)(v.j,{value:Q,label:eo("Schedule time to publish cross-post"),onChange:e=>$(e),contentBelow:(0,o.tZ)(p.H,{expanded:Q,children:(0,o.tZ)(g.tu,{paddingTop:8,children:(0,o.tZ)(m.Tz,{value:null!=ee?ee:new Date,max:(0,x.Z)().add(92,"days").toDate(),onChange:e=>{et(new Date(e.currentTarget.value))}})})})})]}),ei&&(0,o.tZ)(w.xv.B4,{color:"error",children:ei})]})}),(0,o.tZ)(b.mz,{direction:"column",primaryButton:(0,o.tZ)(h.zx,{priority:Y||G?"primary":"secondary",onClick:eh,disabled:F||!Y&&!G,children:ed})})]})]})},N=e=>{let{post:t,pub:i}=e;return(0,o.BX)(g.tu,{gap:12,border:"detail",radius:"md",shadow:"xs",bg:"secondary",padding:12,children:[(0,o.BX)(g.gq,{alignItems:"center",gap:8,children:[(0,o.tZ)(y.wk,{pub:i,size:18}),(0,o.tZ)(w.xv.Meta,{weight:"medium",children:i.name})]}),(0,o.BX)(g.tu,{gap:2,children:[(0,o.tZ)(w.xv.B3,{weight:"semibold",clamp:2,children:t.title}),(0,o.tZ)(w.xv.B4,{color:"secondary",clamp:2,children:t.truncated_body_text?(t.truncated_body_text||"").replace(S.W.PUBLICATION_NAME,i.name):t.subtitle||""})]})]})}},17807:function(e,t,i){i.d(t,{r:()=>Y});var n=i(16584),o=i(30396),l=i(90470),r=i(7409),a=i(99282),s=i(57557),d=i.n(s),c=i(63684),u=i(19081),p=i(58175);let h=e=>{let{emptyText:t,label:i,value:o}=e;return(0,n.BX)(u.gq,{alignItems:"baseline",gap:4,children:[(0,n.BX)(p.xv.B4,{fontWeight:"semibold",children:[i,":"]}),(0,n.tZ)(p.xv.B4,{color:o?"primary":"secondary",children:o||t})]})};var m=i(21061),g=i(73207),v=i(15771),Z=i(89263),f=i(6490);let b=e=>{let{pub:t,onClose:i}=e,{isSaving:o,metadata:l,ids:s,onChangeMetadata:p,onChangeOrder:b,onSave:y}=(0,g.I)({pub:t}),{isSaving:_,metadata:w,ids:C,onChangeMetadata:B,onChangeOrder:k,onSave:x}=(0,g.I)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:S,isSaving:P,onChange:I,onSave:X}=(0,m.l)({pub:t}),T=async()=>{await y(),await x(),await X(),window.location.reload()};return(0,n.BX)(f.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(f.xB,{showClose:!0,title:"Edit featured and archived sections",onClose:i}),(0,n.tZ)(f.fe,{children:(0,n.BX)(u.tu,{gap:36,children:[(0,n.tZ)(c.i,{addLabel:"Add From the Free Press section",metadata:w,pub:t,renderEditMetadata:e=>{var t,i;let{value:o,onChange:l}=e;return(0,n.BX)(u.tu,{gap:8,children:[(0,n.tZ)(Z.n,{label:"Tagline",value:null!==(t=null==o?void 0:o.tagline)&&void 0!==t?t:"",width:260,onChange:e=>{var t;l({frequency:null!==(t=null==o?void 0:o.frequency)&&void 0!==t?t:"",tagline:e})}}),(0,n.tZ)(Z.n,{label:"Frequency",value:null!==(i=null==o?void 0:o.frequency)&&void 0!==i?i:"",width:260,onChange:e=>{l((0,a._)((0,r._)({},o),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.BX)(u.tu,{children:[(0,n.tZ)(h,{emptyText:"no tagline set",label:"Tagline",value:null!==(t=null==e?void 0:e.tagline)&&void 0!==t?t:""}),(0,n.tZ)(h,{emptyText:"no frequency set",label:"Frequency",value:null!==(i=null==e?void 0:e.frequency)&&void 0!==i?i:""})]})},selectedIds:C,selectedLabel:"From The Free Press sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;B({metadata:n?(0,a._)((0,r._)({},l),{[i]:(0,a._)((0,r._)({},n),{frequency:null!==(t=null==n?void 0:n.frequency)&&void 0!==t?t:""})}):d()(l,i)})},onChangeSelectedIds:e=>{k({ids:e})}}),(0,n.tZ)(c.i,{addLabel:"Add featured section",metadata:l,pub:t,renderEditMetadata:e=>{var t,i;let{value:o,onChange:l}=e;return(0,n.BX)(u.tu,{gap:8,children:[(0,n.tZ)(Z.n,{label:"Tagline",value:null!==(t=null==o?void 0:o.tagline)&&void 0!==t?t:"",width:260,onChange:e=>{var t;l({frequency:null!==(t=null==o?void 0:o.frequency)&&void 0!==t?t:"",tagline:e})}}),(0,n.tZ)(Z.n,{label:"Frequency",value:null!==(i=null==o?void 0:o.frequency)&&void 0!==i?i:"",width:260,onChange:e=>{l((0,a._)((0,r._)({},o),{frequency:e}))}})]})},renderMetadata:e=>{var t,i;return(0,n.BX)(u.tu,{children:[(0,n.tZ)(h,{emptyText:"no tagline set",label:"Tagline",value:null!==(t=null==e?void 0:e.tagline)&&void 0!==t?t:""}),(0,n.tZ)(h,{emptyText:"no frequency set",label:"Frequency",value:null!==(i=null==e?void 0:e.frequency)&&void 0!==i?i:""})]})},selectedIds:s,selectedLabel:"Featured sections",onChangeMetadata:e=>{var t;let{sectionId:i,value:n}=e;p({metadata:n?(0,a._)((0,r._)({},l),{[i]:(0,a._)((0,r._)({},n),{frequency:null!==(t=null==n?void 0:n.frequency)&&void 0!==t?t:""})}):d()(l,i)})},onChangeSelectedIds:e=>{b({ids:e})}}),(0,n.tZ)(c.i,{addLabel:"Add archived section",pub:t,selectedIds:S,selectedLabel:"Archived sections",onChangeSelectedIds:e=>{I({ids:e})}})]})}),(0,n.tZ)(f.mz,{primaryButton:(0,n.tZ)(v.zx,{disabled:o||P||_,onClick:T,children:"Save"}),secondaryButton:(0,n.tZ)(v.zx,{disabled:o||P||_,priority:"secondary",onClick:i,children:"Cancel"})})]})};var y=i(98130);let _=e=>{let{pub:t,onClose:i}=e,{isSaving:o,ids:l,onSave:r,onChange:a}=(0,y.L)({pub:t}),s=async()=>{await r(),window.location.reload()};return(0,n.BX)(f.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(f.xB,{showClose:!0,title:"Edit event sections",onClose:i}),(0,n.tZ)(f.fe,{children:(0,n.tZ)(c.i,{addLabel:"Add event section",pub:t,selectedIds:l,selectedLabel:"Event sections",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.tZ)(f.mz,{primaryButton:(0,n.tZ)(v.zx,{disabled:o,onClick:s,children:"Save"}),secondaryButton:(0,n.tZ)(v.zx,{disabled:o,priority:"secondary",onClick:i,children:"Cancel"})})]})};var w=i(87725),C=i(24476),B=i(87185);let k=e=>{let{pub:t,onClose:i}=e,{ids:l,metadata:s,onChangeOrder:d,onChangeMetadata:p,onSave:h}=(0,w.F)({pub:t}),[m,g]=(0,o.eJ)(!1),Z=async()=>{g(!0),await h(),window.location.reload()};return(0,n.BX)(f.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(f.xB,{title:"Edit podcast sections",onClose:i}),(0,n.tZ)(f.fe,{children:(0,n.tZ)(c.i,{addLabel:"Add podcast section",isValidSection:e=>e.is_podcast,metadata:s,pub:t,renderEditMetadata:e=>{var t;let{value:i,onChange:o}=e;return(0,n.tZ)(u.tu,{gap:12,children:(0,n.tZ)(B.m,{label:"Carousel color",options:C.k.map(e=>({label:e,value:e})),value:null!==(t=null==i?void 0:i.carouselColor)&&void 0!==t?t:"black",onChange:e=>{o({carouselColor:e})}})})},renderMetadata:e=>{var t;return(0,n.tZ)(u.gq,{height:20,radius:"xs",style:{backgroundColor:C.t[null!==(t=null==e?void 0:e.carouselColor)&&void 0!==t?t:"black"].hex},width:20})},selectedIds:l,selectedLabel:"Podcast sections",onChangeMetadata:e=>{let{sectionId:t,value:i}=e;p({metadata:(0,a._)((0,r._)({},s),{[t]:i})})},onChangeSelectedIds:e=>{d({ids:e})}})}),(0,n.tZ)(f.mz,{primaryButton:(0,n.tZ)(v.zx,{disabled:m,onClick:Z,children:"Save"}),secondaryButton:(0,n.tZ)(v.zx,{disabled:m,priority:"secondary",onClick:i,children:"Cancel"})})]})};var x=i(94778),S=i(43905);let P=e=>{let{pub:t,onClose:i}=e,{isSaving:o,metadata:l,ids:s,onChangeMetadata:d,onChangeOrder:h,onSave:m}=(0,x.c)({pub:t}),g=async()=>{await m(),window.location.reload()};return(0,n.BX)(f.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(f.xB,{showClose:!0,title:"Edit video sections",onClose:i}),(0,n.tZ)(f.fe,{children:(0,n.tZ)(c.i,{addLabel:"Add video section",metadata:l,pub:t,renderEditMetadata:e=>{var t,i;let{errors:o,value:l,onChange:r}=e;return(0,n.BX)(u.tu,{gap:12,children:[(0,n.tZ)(B.m,{label:"Carousel color",options:C.k.map(e=>({label:e,value:e})),value:null!==(t=null==l?void 0:l.carouselColor)&&void 0!==t?t:"black",onChange:e=>{var t;r({carouselColor:e,youtubeUrl:null!==(t=null==l?void 0:l.youtubeUrl)&&void 0!==t?t:""})}}),(0,n.tZ)(Z.n,{errors:o,label:"YouTube URL",value:null!==(i=null==l?void 0:l.youtubeUrl)&&void 0!==i?i:"",width:260,onChange:e=>{var t;r({carouselColor:null!==(t=null==l?void 0:l.carouselColor)&&void 0!==t?t:"black",youtubeUrl:e})}})]})},renderMetadata:e=>{var t;return(0,n.BX)(u.gq,{alignItems:"center",gap:8,children:[(0,n.tZ)(u.gq,{height:20,radius:"xs",style:{backgroundColor:C.t[null!==(t=null==e?void 0:e.carouselColor)&&void 0!==t?t:"black"].hex},width:20}),(null==e?void 0:e.youtubeUrl)?(0,n.tZ)(p.xv.B4,{children:(0,n.tZ)("a",{href:null==e?void 0:e.youtubeUrl,rel:"noopener noreferrer",target:"_blank",children:"YouTube link"})}):(0,n.tZ)(p.xv.B4,{color:"pub-secondary-text",children:"No YouTube link set"})]})},selectedIds:s,selectedLabel:"Video sections",validateMetadata:e=>{var t;let i=(null!==(t=null==e?void 0:e.youtubeUrl)&&void 0!==t?t:"").trim();if(!i)return{isValid:!0,message:null};let{isValid:n,message:o}=(0,S.tc)({platform:"youtube",url:i,language:"en"});return{isValid:n,message:o}},onChangeMetadata:e=>{var t,i;let{sectionId:n,value:o}=e;d({metadata:(0,a._)((0,r._)({},l),{[n]:(0,a._)((0,r._)({},o),{carouselColor:null!==(t=null==o?void 0:o.carouselColor)&&void 0!==t?t:"black",youtubeUrl:null!==(i=null==o?void 0:o.youtubeUrl)&&void 0!==i?i:""})})})},onChangeSelectedIds:e=>{h({ids:e})}})}),(0,n.tZ)(f.mz,{primaryButton:(0,n.tZ)(v.zx,{disabled:o,onClick:g,children:"Save"}),secondaryButton:(0,n.tZ)(v.zx,{disabled:o,priority:"secondary",onClick:i,children:"Cancel"})})]})};var I=i(94697),X=i(45587),T=i(24285),N=i(39693),M=i.n(N),L=i(24350),E=i.n(L),q=i(89734),z=i.n(q),R=i(41352),A=i(95441),F=i(54278),O=i(17688);let D=e=>{let{pub:t,selectedIds:i,selectedLabel:o,onChangeSelectedIds:l}=e,s=(0,I.Dy)((0,I.VT)(I.we,{activationConstraint:{distance:5}})),d=E()(t.authorPagesInfo,"user_id"),c=M()(i.map(e=>d[e]?(0,a._)((0,r._)({},d[e]),{id:e}):null)),h=e=>{l(i.filter(t=>t!==e))};return(0,n.BX)(u.tu,{gap:16,children:[(0,n.tZ)(F.g,{label:o,children:(0,n.tZ)(u.tu,{gap:8,children:i.length?(0,n.tZ)(I.LB,{collisionDetection:I.pE,sensors:s,onDragEnd:e=>{let{active:t,over:n}=e;if(t.id!==n.id){let e=i.findIndex(e=>e===t.id),o=i.findIndex(e=>e===n.id);l((0,X.Rp)(i,e,o))}},children:(0,n.tZ)(X.Fo,{items:c,strategy:X.U2,children:c.map(e=>(0,n.tZ)(U,{id:e.user_id,children:(0,n.tZ)(J,{authorId:e.user_id,authorName:e.name,onRemove:h})},e.user_id))})}):(0,n.tZ)(p.xv.B3,{color:"pub-secondary-text",children:"No authors selected"})})}),(0,n.tZ)(F.g,{label:"Add an author",children:(0,n.tZ)(H,{excludedAuthorIds:c.map(e=>e.id),pub:t,onSelect:e=>{l([...i,e])}})})]})},H=e=>{var t,i;let{excludedAuthorIds:o,pub:l,onSelect:r}=e,{iString:a}=(0,A.M1)(),s=null!==(i=null===(t=l.authorPagesInfo)||void 0===t?void 0:t.filter(e=>!!e.name&&!!e.bio&&!!e.photo_url).filter(e=>!(null==o?void 0:o.includes(e.user_id))))&&void 0!==i?i:[];return(0,n.BX)(O.i,{value:"",onChange:e=>{let t=e.target.value;t&&r(parseInt(t))},children:[(0,n.tZ)(O.d,{children:a("Select a section")}),z()(s,"name").map(e=>(0,n.tZ)("option",{value:e.user_id,children:e.name}))]})},U=e=>{let{children:t,disableDrag:i,id:o}=e,{attributes:l,isDragging:s,listeners:d,setNodeRef:c,transform:u,transition:p}=(0,X.nB)({id:o}),h={transform:T.ux.Translate.toString(u),transition:p,zIndex:+!!s,cursor:s?"grabbing":"grab"};return i?(0,n.tZ)("div",{children:t}):(0,n.tZ)("div",(0,a._)((0,r._)({ref:c},l,d),{role:"button",style:h,children:t}))},J=e=>{let{authorId:t,authorName:i,onRemove:o}=e;return(0,n.BX)(u.gq,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,n.tZ)(u.tu,{children:(0,n.tZ)(p.xv.B4,{weight:"semibold",children:i})}),(0,n.tZ)(v.hU,{size:"xs",onClick:()=>{o(t)},children:(0,n.tZ)(R.Z,{size:14})})]})};var W=i(1056);let j=e=>{let{pub:t,onClose:i}=e,{ids:l,onSave:r,onChange:a}=(0,W.d)({pub:t}),[s,d]=(0,o.eJ)(!1),c=async()=>{d(!0),await r(),window.location.reload()};return(0,n.BX)(f.u_,{isOpen:!0,onClose:i,children:[(0,n.tZ)(f.xB,{showClose:!0,title:"Edit authors",onClose:i}),(0,n.tZ)(f.fe,{children:(0,n.tZ)(D,{pub:t,selectedIds:l,selectedLabel:"Authors to show",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,n.tZ)(f.mz,{primaryButton:(0,n.tZ)(v.zx,{disabled:s,onClick:c,children:"Save"}),secondaryButton:(0,n.tZ)(v.zx,{disabled:s,priority:"secondary",onClick:i,children:"Cancel"})})]})},Y=e=>{let{pub:t,sectionType:i,user:r}=e,[a,s]=(0,o.eJ)(!1);return(null==r?void 0:r.is_admin)?(0,n.BX)(n.HY,{children:[(0,n.tZ)(v.hU,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,n.tZ)(l.Z,{size:16})}),a&&"columns"===i&&(0,n.tZ)(b,{pub:t,onClose:()=>{s(!1)}}),a&&"event"===i&&(0,n.tZ)(_,{pub:t,onClose:()=>{s(!1)}}),a&&"podcast"===i&&(0,n.tZ)(k,{pub:t,onClose:()=>{s(!1)}}),a&&"video"===i&&(0,n.tZ)(P,{pub:t,onClose:()=>{s(!1)}}),a&&"who-we-are"===i&&(0,n.tZ)(j,{pub:t,onClose:()=>{s(!1)}})]}):null}},56378:function(e,t,i){i.d(t,{z:()=>s});var n=i(16584),o=i(14952),l=i(68833),r=i(60590),a=i(63651);let s=e=>{let{trigger:t,liveStream:i,trackingSurface:s}=e,d=(0,o.Ij)();if(!d)return null;let c={title:i.title,description:i.description||"",location:(0,a.thY)({pub:d}),start:i.scheduled_at||new Date,duration:[1,"hour"],allDay:!1,busy:!0};return(0,n.tZ)(r.m,{event:c,handleClick:e=>{(0,l.j)(l.FP.ADD_TO_CALENDAR_CLICKED,{liveStreamId:i.id,surface:s,type:e})},menuProps:{trigger:t}})}},18582:function(e,t,i){i.d(t,{q:()=>v});var n=i(7409),o=i(99282),l=i(16584),r=i(94184),a=i.n(r),s=i(32351),d=i(347),c=i(81451),u=i(7523),p=i(49688),h=i(98422),m=i(19081),g=i(71891);let v=e=>{let{actions:t,aboveTitle:i,belowDescription:r,bodyWrapperVariant:v,children:Z,description:f,image:b,isLoading:y,metadata:_,title:w,pageCTA:C,hideDivider:B=!1}=e,{isMobile:k}=(0,h.v9)(),x=!!(w&&!f&&!i&&!r&&!t&&!b),{markdownProps:S}=(0,p.V)(f);return(0,l.BX)(d.h,{children:[_&&(0,l.tZ)(s.Metadata,(0,n._)({},_)),(0,l.tZ)(c.x,{paddingTop:k?40:64,children:!y&&(0,l.BX)(m.tu,{gap:k?24:40,paddingBottom:64,children:[(0,l.tZ)("div",{className:a()(g.Z.header,{[g.Z.noImage]:!b,[g.Z.headerWithJustTitle]:x}),children:k?(0,l.BX)(m.tu,{gap:24,children:[i&&(0,l.tZ)(m.gq,{alignSelf:"start",children:i}),(0,l.tZ)(u.Z,{preset:"h1-serif",children:w}),b&&(0,l.tZ)(m.gq,{children:b}),f&&(0,l.tZ)(u.Z,(0,o._)((0,n._)({},S),{preset:"d1-sans-regular"})),r]}):(0,l.BX)(l.HY,{children:[(0,l.BX)(m.tu,{children:[i&&(0,l.tZ)(m.gq,{alignSelf:"start",children:i}),(0,l.tZ)(u.Z,{preset:"h1-serif",children:w}),(0,l.BX)(m.tu,{gap:24,children:[f&&(0,l.tZ)(u.Z,(0,o._)((0,n._)({},S),{preset:"d1-sans-regular"})),r]})]}),b&&(0,l.tZ)(m.gq,{justifyContent:"end",children:b}),t&&(0,l.tZ)("div",{className:g.Z.actions,children:t})]})}),!B&&(0,l.tZ)("div",{className:g.Z.thickRule,children:C}),(0,l.tZ)("div",{className:a()({[g.Z.bodyWrapperTwoMiddleColumns]:"two-middle-columns"===v}),children:Z})]})})]})}},81451:function(e,t,i){i.d(t,{x:()=>l});var n=i(16584),o=i(19081);let l=e=>{let{children:t,paddingTop:i}=e;return(0,n.tZ)(o.tu,{className:"container-Y7VoFt",paddingTop:i,children:t})}},9550:function(e,t,i){i.d(t,{o:()=>b});var n=i(7409),o=i(99282),l=i(16584),r=i(47113),a=i(71665),s=i(62372),d=i(70011),c=i(7523),u=i(24476),p=i(95441),h=i(55480),m=i(98914),g=i(19081),v=i(70379),Z=i(74571),f=i(43905);let b=e=>{let{pub:t,section:i,user:b}=e,{iString:y}=(0,p.M1)(),[_,w]=(0,s.XI)(),[C,B]=(0,s.XI)(),[k,x]=(0,s.XI)(),S=(0,v.pm)(),{feedUrl:P}=(0,Z.fn)({pub:t,user:null!=b?b:null,section:i}),I=(0,f.a9)({pub:t,section:i,spotifySettings:(0,h.pp)({pub:t,section:null!=i?i:null})}),X={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"};return(0,l.BX)(g.gq,{alignItems:"center",gap:12,children:[(0,l.tZ)(c.Z,{preset:"d1-sans-medium",children:"Listen On:"}),(0,l.BX)(g.gq,{alignItems:"center",gap:16,children:[I.spotify_url&&(0,l.tZ)(g.gq,(0,o._)((0,n._)({},w,X),{href:I.spotify_url,children:(0,l.tZ)(d.Z,{fill:_?void 0:u.t.black.hex})})),I.apple_podcasts_url&&(0,l.tZ)(g.gq,(0,o._)((0,n._)({},B,X),{href:I.apple_podcasts_url,children:(0,l.tZ)(r.Z,{size:24,stroke:C?"#B53CD9":u.t.black.hex})})),(0,l.tZ)(g.gq,(0,o._)((0,n._)({},x),{cursor:"pointer",onClick:()=>{S.popToast(e=>(0,l.tZ)(v.FN,(0,o._)((0,n._)({},e),{text:y("RSS feed URL copied")}))),(0,m.vQ)(P)},children:(0,l.tZ)(a.Z,{size:24,stroke:k?"#F88800":u.t.black.hex})}))]})]})}},33636:function(e,t,i){i.d(t,{L:()=>r});var n=i(16584),o=i(7523),l=i(19081);let r=e=>{let{children:t}=e;return(0,n.tZ)(l.gq,{children:(0,n.tZ)(l.gq,{className:"container-f0oiU0",paddingBottom:8,children:(0,n.tZ)(o.Z,{preset:"detail-large",children:t})})})}},4767:function(e,t,i){i.d(t,{E:()=>o});var n=i(16584);let o=e=>{let{children:t}=e;return(0,n.tZ)("div",{className:"container-mcXs8_",children:t})}},58023:function(e,t,i){i.d(t,{Z:()=>d});var n=i(16584),o=i(98661),l=i(39693),r=i.n(l),a=i(61254),s=i(19081);let d=e=>{let{children:t,gap:i=32,includeBottomDivider:l,includeTopDivider:d,paddingTop:c=0}=e,u=o.Children.toArray(t),p=r()(u).flatMap((e,t)=>0!==t||d?[(0,n.tZ)(a.iz,{flex:"auto"}),e]:[e]);return(0,n.BX)(s.tu,{gap:i,paddingTop:c,children:[p,l&&(0,n.tZ)(a.iz,{flex:"auto"})]})}},11183:function(e,t,i){i.d(t,{I:()=>a});var n=i(16584),o=i(42312),l=i(98422),r=i(19081);let a=e=>{let{post:t,pub:i,user:a}=e,{isMobile:s}=(0,l.v9)();return(0,n.BX)(r.gq,{gap:s?16:40,justifyContent:"center",children:[(0,n.tZ)(o.Ck,{cta:s?"Comment":"Make a comment",post:t,pub:i,showCounts:!1,size:"large"}),(0,n.tZ)(o.gV,{cta:s?"Like":"Like article",post:t,pub:i,showCounts:!1,size:"large",user:a}),(0,n.tZ)(o.fA,{cta:s?"Share":"Share article",post:t,pub:i,user:a})]})}},49259:function(e,t,i){i.d(t,{z:()=>h});var n=i(16584),o=i(7523),l=i(98422),r=i(68648),a=i(31883),s=i(17258),d=i(19081),c=i(31377),u=i(84864);let p={verticalDivider:"verticalDivider-JbC7L1"},h=e=>{let{post:t}=e,{isMobile:i}=(0,l.v9)(),{pub:h}=(0,r.ZT)(),m=(0,c.getDurationForPostPreview)({post:t});return(0,n.tZ)(o.Z,{color:"tertiary",preset:"caption",style:{lineHeight:1},children:(0,n.BX)(d.gq,{gap:16,children:[(0,n.tZ)(a.wz,{customFormat:"MMMM D, YYYY",post:t}),(0,n.tZ)("div",{className:p.verticalDivider}),(0,n.tZ)(s.p,{clamp:1,post:t,pub:h}),!!m&&!i&&(0,n.BX)(n.HY,{children:[(0,n.tZ)("div",{className:p.verticalDivider}),(0,u.formatPodcastDuration)(m)]})]})})}},82661:function(e,t,i){i.d(t,{I:()=>d});var n=i(16584),o=i(56378),l=i(74626),r=i(7523),a=i(19081),s=i(98012);let d=e=>{let{liveStream:t,trackingSurface:i}=e,d=(0,s.Z)(t.scheduled_at).format("dddd MMMM D, YYYY"),c=(0,s.Z)(t.scheduled_at).format("h:mm A");return(0,n.BX)(a.tu,{gap:24,children:[(0,n.BX)(a.tu,{gap:8,children:[(0,n.tZ)(r.Z,{preset:"h5-serif",children:t.title}),(0,n.tZ)(r.Z,{preset:"d3-serif",children:t.description}),(0,n.tZ)(r.Z,{preset:"timestamp",children:d}),(0,n.tZ)(r.Z,{preset:"timestamp",children:c})]}),(0,n.tZ)(a.gq,{children:(0,n.tZ)(o.z,{liveStream:t,trackingSurface:i,trigger:(0,n.tZ)("div",{children:(0,n.tZ)(l._,{size:"sm",trailingIcon:"plus",variant:"outline",children:"Add to calendar"})})})})]})}},17781:function(e,t,i){i.d(t,{E:()=>M});var n=i(16584),o=i(30396),l=i(20888),r=i(18582),a=i(9550),s=i(40281),d=i(33636),c=i(82661),u=i(61254),p=i(19081);let h=e=>{let{scheduledLiveStreams:t}=e;return(0,n.BX)(p.tu,{gap:40,children:[(0,n.tZ)(d.L,{children:"Upcoming livestreams"}),(0,n.tZ)(p.tu,{gap:24,children:t.map((e,t)=>(0,n.BX)(n.HY,{children:[0!==t&&(0,n.tZ)(u.iz,{}),(0,n.tZ)(c.I,{liveStream:e,trackingSurface:"section-page"})]}))})]})};var m=i(7409),g=i(99282),v=i(13742),Z=i(74626),f=i(95441),b=i(7882),y=i(70379),_=i(60308),w=i(21292);let C=e=>{let{pub:t,section:i,user:l,freeSignup:r,freeSignupEmail:a}=e,{iString:s}=(0,f.M1)(),{popToast:d}=(0,y.pm)(),[c,u]=(0,o.eJ)(!1),[h,C]=(0,o.eJ)(!1),B=!!l||!!a&&!!r,{refetch:k}=(0,b.ib)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{result:x,refetch:S}=(0,b.ib)({pathname:"/api/v1/subscription",auto:!1});(0,o.d4)(()=>{(async()=>{let e=(0,_.en2)(window.location.href);if((null==e?void 0:e.searchParams.get("subscribe"))==="true"&&B){await k({json:{[i.id]:{setting:"individual"}}});let e=new URL(window.location.href);e.searchParams.delete("subscribe"),window.history.replaceState({},"",e.toString())}B&&await S(),C(!0)})()},[B]),(0,o.d4)(()=>{(null==x?void 0:x.email_settings)&&u("individual"===x.email_settings[i.id])},[x,i.id]);let P=async()=>{if(!B){let e=(0,w.e)(t,{addBase:!0,sectionSlug:i.slug,next:(0,_.n1t)(window.location.href,{subscribe:!0})});window.location.href=e;return}let e=!c;await k({json:{[i.id]:{setting:e?"individual":"disabled"}}}).then(()=>{u(e),d(t=>(0,n.tZ)(y.FN,(0,g._)((0,m._)({},t),{Icon:v.Z,text:e?"Subscription updated!":"Unsubscribed!"})))})};return(0,n.tZ)(p.gq,{justifyContent:"end",children:(0,n.tZ)(Z._,{style:{visibility:h?"visible":"hidden"},variant:"tertiary",onClick:P,children:c?"".concat(s("Subscribed")," ✓"):"".concat(s("Subscribe")," +")})})};var B=i(50225),k=i(11268),x=i(98130),S=i(94778),P=i(98162),I=i(33578),X=i(98422),T=i(17054);let N={sectionImage:"sectionImage-AFt6TD",tabsContainer:"tabsContainer-P8p3c9"},M=e=>{let t,i,d,{freeSignup:c,freeSignupEmail:m,isPodcast:g,isTagPage:v=!1,newPosts:Z,pub:f,scheduledLiveStreams:b,section:y,tag:_,user:M,utm:L}=e,{isMobile:E}=(0,X.v9)(),[q,z]=(0,o.eJ)(null!=b?b:null),{ids:R}=(0,x.L)({pub:f}),{ids:A}=(0,S.c)({pub:f}),F=(0,w.f)({pub:f,section:y});if((0,o.d4)(()=>{let e=async()=>{z(await (0,P.zJ)())};F&&!q&&e()},[F,q]),!y&&!v&&!g)return console.warn("Needs to be a section, tag, or pub-level podcast"),null;let O=!!y&&A.includes(y.id),D=!!y&&R.includes(y.id);if(g){let e=y?(0,T.d_)({pub:f,section:y}):(0,T.jU)({pub:f});t=e.title,i=e.description,d=e.artUrl}else O?(t=null==y?void 0:y.name,i=null==y?void 0:y.description,d=null==y?void 0:y.logo_url):v?(t=(null==_?void 0:_.name)||"Page not found",i=null):(t=null==y?void 0:y.name,i=null==y?void 0:y.description);return(0,n.tZ)(r.q,{belowDescription:g?(0,n.tZ)(a.o,{pub:f,section:y,user:M}):O?(0,n.tZ)(k.b,{pub:f,section:y}):void 0,bodyWrapperVariant:"two-middle-columns",description:i,image:d?(0,n.tZ)(l.e,{className:N.sectionImage,imageIsFixedWidth:!1,maxWidth:540,src:d,useRetinaSizing:!0}):void 0,pageCTA:!y||v||g||O?void 0:(0,n.tZ)(C,{freeSignup:c,freeSignupEmail:m,pub:f,section:y,user:M}),title:t,children:(0,n.BX)(p.tu,{gap:40,children:[q&&q.length>0&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(h,{scheduledLiveStreams:q}),(0,n.tZ)(u.iz,{})]}),(0,n.tZ)(I.O,{hideCommunity:!0,hideTop:v,isPodcast:g&&!y,newPosts:Z,postTagId:null==_?void 0:_.id,pub:f,renderLoading:()=>null,renderTabs:e=>{let{activeTabId:t,tabs:i,onClick:o}=e;return i.length<=1||g?null:(0,n.tZ)(p.tu,{alignItems:"center",className:N.tabsContainer,paddingBottom:E?40:64,children:(0,n.tZ)(B.w,{activeTabId:t,tabs:i,onClick:o})})},sectionId:null==y?void 0:y.id,source:v?"tag-archive":void 0,user:M,utm:L,children:e=>{let{posts:t}=e;return(0,n.tZ)(s.f,{isEvents:D,posts:t})}})]})})}},11268:function(e,t,i){i.d(t,{b:()=>p});var n=i(16584),o=i(7409),l=i(99282),r=i(64515);let a=e=>(0,n.tZ)(r.l,(0,l._)((0,o._)({},e),{name:"YoutubeIcon",svgParams:{height:24,width:24},children:(0,n.tZ)("path",{d:"M21.582 6.07467C21.352 5.21467 20.674 4.53667 19.814 4.30667C18.254 3.88867 12 3.88867 12 3.88867C12 3.88867 5.746 3.88867 4.186 4.30667C3.326 4.53667 2.648 5.21467 2.418 6.07467C2 7.63467 2 11.8887 2 11.8887C2 11.8887 2 16.1427 2.418 17.7027C2.648 18.5627 3.326 19.2407 4.186 19.4707C5.746 19.8887 12 19.8887 12 19.8887C12 19.8887 18.254 19.8887 19.814 19.4707C20.675 19.2407 21.352 18.5627 21.582 17.7027C22 16.1427 22 11.8887 22 11.8887C22 11.8887 22 7.63467 21.582 6.07467ZM10 15.3527V8.42467L16 11.8887L10 15.3527Z"})}));var s=i(7523),d=i(94778),c=i(24476),u=i(19081);let p=e=>{var t;let{pub:i,section:o}=e,{metadata:l}=(0,d.c)({pub:i}),r=null===(t=l[o.id])||void 0===t?void 0:t.youtubeUrl;return r?(0,n.BX)(u.gq,{alignItems:"center",as:"a",gap:8,href:r,rel:"noopener noreferrer",target:"_blank",children:[(0,n.tZ)(s.Z,{preset:"d1-sans-medium",children:"Watch on YouTube"}),(0,n.tZ)(a,{fill:c.t.black.hex,height:30,stroke:"none"})]}):null}},63684:function(e,t,i){i.d(t,{i:()=>k});var n=i(7409),o=i(99282),l=i(16584),r=i(30396),a=i(94697),s=i(45587),d=i(24285),c=i(39693),u=i.n(c),p=i(24350),h=i.n(p),m=i(89734),g=i.n(m),v=i(90470),Z=i(41352),f=i(95441),b=i(15771),y=i(19081),_=i(54278),w=i(17688),C=i(58175),B=i(17054);let k=e=>{let{addLabel:t,hideAdd:i,isValidSection:n,metadata:o,pub:d,renderEditMetadata:c,renderMetadata:p,selectedIds:m,selectedLabel:g,validateMetadata:v,onChangeMetadata:Z,onChangeSelectedIds:f}=e,[b,w]=(0,r.eJ)(null),k=(0,a.Dy)((0,a.VT)(a.we,{activationConstraint:{distance:5}})),I=h()(d.sections,"id"),X=(0,B.jU)({pub:d}),T=u()(m.map(e=>{var t;return -1===e?{id:-1,name:null!==(t=X.title)&&void 0!==t?t:""}:I[e]})),N=e=>{f(m.filter(t=>t!==e))},M=e=>{w(e)};return(0,l.BX)(y.tu,{gap:16,children:[(0,l.tZ)(_.g,{label:g,children:(0,l.tZ)(y.tu,{gap:8,children:m.length?(0,l.tZ)(a.LB,{collisionDetection:a.pE,sensors:k,onDragEnd:e=>{let{active:t,over:i}=e;if(t.id!==i.id){let e=m.findIndex(e=>e===t.id),n=m.findIndex(e=>e===i.id);f((0,s.Rp)(m,e,n))}},children:(0,l.tZ)(s.Fo,{items:T,strategy:s.U2,children:T.map(e=>{var t;return(0,l.tZ)(S,{disableDrag:!!b,id:e.id,children:(0,l.tZ)(P,{isEditing:b===e.id,renderEditMetadata:c,renderMetadata:p,sectionId:e.id,sectionMetadata:null!==(t=null==o?void 0:o[e.id])&&void 0!==t?t:null,sectionName:e.name,validateMetadata:v,onChangeMetadata:Z,onEdit:M,onRemove:N},e.id)},e.id)})})}):(0,l.tZ)(C.xv.B3,{color:"pub-secondary-text",children:"No sections selected"})})}),!i&&(0,l.tZ)(_.g,{label:null!=t?t:"Add section",children:(0,l.tZ)(x,{excludedSectionIds:[...T.map(e=>e.id),...n?d.sections.filter(e=>!n(e)).map(e=>e.id):[]],pub:d,onSelect:e=>{f([...m,e])}})})]})},x=e=>{let{excludedSectionIds:t,pub:i,onSelect:n}=e,{iString:o}=(0,f.M1)(),r=i.sections.filter(e=>!(null==t?void 0:t.includes(e.id)));return(0,l.BX)(w.i,{value:"",onChange:e=>{let t=e.target.value;t&&n(parseInt(t))},children:[(0,l.tZ)(w.d,{children:o("Select a section")}),g()(r,"name").map(e=>(0,l.tZ)("option",{value:e.id,children:e.name}))]})},S=e=>{let{children:t,disableDrag:i,id:r}=e,{attributes:a,isDragging:c,listeners:u,setNodeRef:p,transform:h,transition:m}=(0,s.nB)({id:r}),g={transform:d.ux.Translate.toString(h),transition:m,zIndex:+!!c,cursor:c?"grabbing":"grab"};return i?(0,l.tZ)("div",{children:t}):(0,l.tZ)("div",(0,o._)((0,n._)({ref:p},a,u),{role:"button",style:g,children:t}))},P=e=>{let{isEditing:t,renderEditMetadata:i,renderMetadata:n,sectionId:o,sectionName:a,sectionMetadata:s,validateMetadata:d,onChangeMetadata:c,onEdit:u,onRemove:p}=e,[h,m]=(0,r.eJ)(s),[g,f]=(0,r.eJ)(null);return(0,l.BX)(y.gq,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,l.BX)(y.tu,{children:[(0,l.tZ)(C.xv.B4,{weight:"semibold",children:a}),!t&&n&&(0,l.tZ)("div",{children:n(s)}),t&&i&&(0,l.BX)(y.tu,{alignItems:"start",gap:12,paddingTop:12,children:[i({errors:g,value:h,onChange:m}),c&&(0,l.BX)(y.gq,{gap:8,children:[(0,l.tZ)(b.zx,{size:"sm",onClick:()=>{if(c){if(d){let{isValid:e,message:t}=d(h);if(!e&&t){f([t]);return}f(null)}c({sectionId:o,value:h}),u(null)}},children:"Done"}),(0,l.tZ)(b.zx,{priority:"secondary",size:"sm",onClick:()=>{u(null)},children:"Cancel"})]})]})]}),!t&&(0,l.BX)(y.gq,{alignItems:"center",gap:8,children:[!!i&&(0,l.tZ)(b.hU,{size:"xs",onClick:()=>{u(o)},children:(0,l.tZ)(v.Z,{size:14})}),(0,l.tZ)(b.hU,{size:"xs",onClick:()=>{p(o)},children:(0,l.tZ)(Z.Z,{size:14})})]})]})}},1056:function(e,t,i){i.d(t,{d:()=>a});var n=i(30396),o=i(24350),l=i.n(o),r=i(81977);let a=e=>{let{pub:t}=e,i=l()(t.authorPagesInfo,"user_id"),{setting:o,save:a}=(0,r.m)({key:"about_us_author_ids",fallback:[]}),[s,d]=(0,n.eJ)(o),c=async()=>{await a({setting:s})};return{ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>i[e]))},onSave:c}}},87725:function(e,t,i){i.d(t,{F:()=>p});var n=i(7409),o=i(99282),l=i(30396),r=i(78718),a=i.n(r),s=i(81977),d=i(55480);let c={"Honestly with Bari Weiss":"darkGreen","The Witch Trials of J.K. Rowling":"mediumOrange","Raising Parents with Emily Oster":"brightBlue"},u=["mediumYellow","darkGreen","mediumRed","darkOrange","mediumPurple","mediumBlue"],p=e=>{let{pub:t}=e,i=(0,d.EP)(t),r=i.map(e=>{var t;return null!==(t=e.sectionId)&&void 0!==t?t:-1}),p=i.reduce((e,t,i)=>{var l,r,a;return(0,o._)((0,n._)({},e),{[null!==(l=t.sectionId)&&void 0!==l?l:-1]:{carouselColor:null!==(a=null!==(r=c[t.podcastTitle])&&void 0!==r?r:u[i%u.length])&&void 0!==a?a:"mediumRed"}})},{}),{setting:h,save:m}=(0,s.m)({key:"podcasts_metadata",fallback:{order:r,metadata:p}}),[g,v]=(0,l.eJ)(h.order),[Z,f]=(0,l.eJ)(h.metadata),b=async()=>{await m({setting:{order:g,metadata:a()(Z,g)}})};return{ids:g,metadata:Z,onChangeOrder:e=>{let{ids:t}=e;v(t)},onChangeMetadata:e=>{let{metadata:t}=e;f(t)},onSave:b}}},24476:function(e,t,i){i.d(t,{k:()=>n,t:()=>o});let n=["black","brightOrange","brightBlue","darkGreen","darkOrange","lightGray","mediumBlue","mediumGreen","mediumOrange","mediumPurple","mediumRed","mediumYellow","offWhite"],o={black:{hex:"#161613",invertTextColors:!0},brightOrange:{hex:"#f74701",invertTextColors:!1},brightBlue:{hex:"#0366F3",invertTextColors:!0},darkGreen:{hex:"#3A564B",invertTextColors:!0},darkOrange:{hex:"#d37735",invertTextColors:!1},lightGray:{hex:"#bebdb8",invertTextColors:!1},mediumBlue:{hex:"#005591",invertTextColors:!0},mediumGreen:{hex:"#2db750",invertTextColors:!0},mediumOrange:{hex:"#f69227",invertTextColors:!1},mediumPurple:{hex:"#5358C8",invertTextColors:!0},mediumRed:{hex:"#f2312c",invertTextColors:!0},mediumYellow:{hex:"#F3C82E",invertTextColors:!1},offWhite:{hex:"#f6f4ef",invertTextColors:!1}}},98162:function(e,t,i){i.d(t,{Fv:()=>l,Hm:()=>d,ab:()=>s,h0:()=>a,zJ:()=>c,zQ:()=>r});var n=i(80569),o=i.n(n);let l=async e=>{let{extraText:t,extraLink:i}=e;await o().put("/api/v1/publication_settings").send({homepage_message_text:t,homepage_message_link:i})},r=async e=>{let{slug:t}=e;try{var i;let e=await o().get("/api/v1/posts/".concat(t));return null!==(i=e.body)&&void 0!==i?i:null}catch(e){return null}},a=async e=>{let{postIds:t,pub:i}=e;await o().post("/api/v1/publication/".concat(i.id,"/pin")).send({post_ids:t})},s=async e=>{let{contentBlockId:t,contentBlockPins:i}=e;await o().post("/api/v1/content_block/".concat(t,"/pins")).send({pins:i})},d=async e=>{let{pub:t}=e;try{var i;let e=await o().get("/api/v1/live_streams/active/pub/".concat(t.id));return null!==(i=e.body.activeLiveStream)&&void 0!==i?i:null}catch(e){return null}},c=async()=>{try{var e;let t=await o().get("/api/v1/live_streams/scheduled");return null!==(e=t.body.scheduledLiveStreams)&&void 0!==e?e:[]}catch(e){return[]}}},86603:function(e,t,i){i.d(t,{Z:()=>o});var n=i(30396);function o(){let{root:e=null,threshold:t=0,rootMargin:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return[null,null];let[o,l]=(0,n.eJ)(null),[r,a]=(0,n.eJ)(null),s=(0,n.sO)(new IntersectionObserver(e=>{let[t]=e;return l(t)},{root:e,threshold:t,rootMargin:i}));return(0,n.d4)(()=>{var e;let t=(null==r?void 0:null===(e=r.base)||void 0===e?void 0:e.addEventListener)?r.base:(null==r?void 0:r.addEventListener)?r:null,{current:i}=s;return i.disconnect(),t&&i.observe(t),()=>i.disconnect()},[r]),[a,o]}},39648:function(e,t,i){i.d(t,{Nx:()=>c,O4:()=>s,nA:()=>d});var n=i(16584),o=i(98661),l=i(42441),r=i.n(l),a=i(74312);function s(){return(0,o.useContext)(d)}let d=(0,o.createContext)({open:()=>void 0});function c(e){let{children:t,load:l,pub:s,enableShortcuts:c=!0}=e,[u,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(),[Z,f]=(0,o.useState)();(0,o.useEffect)(()=>{if(!l||!s)return;let e=()=>p(!0);if(c)return r().bind(["/","command+k"],e),()=>{r().unbind(["/"],e),r().unbind(["command+k"],e)}},[]);let b=(0,o.useMemo)(()=>({open:e=>{m(!!(null==e?void 0:e.postsOnly)),v(()=>null==e?void 0:e.onSelectResult),f(()=>null==e?void 0:e.onClose),p(!0)}}),[]);return l&&s?(0,n.BX)(d.Provider,{value:b,children:[t,(0,n.tZ)(a.cr,{module:"@/frontend/substack/search/PublicationSearch",resolve:e=>e.PublicationSearch,isOpen:u,postsOnly:h,pub:s,onClose:()=>{null==Z||Z(),p(!1)},onRequest:()=>Promise.all([i.e("546"),i.e("3691"),i.e("8842"),i.e("3280")]).then(i.bind(i,89724)),onSelectResult:g})]}):(0,n.tZ)(n.HY,{children:t})}},93963:function(e,t,i){i.d(t,{$w:()=>R,l8:()=>A});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(98661),s=i(94184),d=i.n(s),c=i(21465),u=i(66289),p=i(53804),h=i(25226),m=i(95441),g=i(60807),v=i(42375),Z=i(85527),f=i(68833),b=i(7882),y=i(98914),_=i(15771),w=i(19081),C=i(99916),B=i(58175),k=i(15503),x=i(27744),S=i(21972),P=i(81043),I=i(75419),X=i(43681),T=i(39493),N=i(61412),M=i(42886),L=i(63651),E=i(84864),q=i(47929),z=i(54888);function R(e){var t,i;let{item:o,comment:l,disableRestack:a}=e,s=(0,v.rI)(),d=(0,Z.F)(),c=(0,x.I0)(),u=(0,I.i3)(),p=(0,g.aF)(),{requireLogin:h}=(0,P.SJ)(),m=(0,b.ib)({pathname:"/api/v1/comment/".concat(l.id,"/reaction"),method:"POST"}),f=(0,I.oC)(o);if(!o)return null;let{publication:_,post:w}=o,C=!!(w&&_&&!(0,E.commentsEnabledForPost)({publication:_,post:w})),B=a||!!(w&&_&&!(0,E.restacksEnabledForPost)({publication:_,post:w})),S=l.reaction_count||0,X=!!l.reaction,T=()=>{null==h||h()},N=async e=>{if(e.preventDefault(),!p){T();return}let t=!X;c({type:"comment_like",payload:{commentId:l.id,isLiked:t}});try{var i,r;await m.refetch({method:t?"POST":"DELETE",json:(0,n._)({publication_id:(null==_?void 0:_.id)||null,reaction:"❤",tabId:d},t&&"comment_restack"===o.context.type&&{restacking_user_id:null===(r=o.context.users)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.id})})}catch(e){c({type:"comment_like",payload:{commentId:l.id,isLiked:!t}}),alert((0,y.zx)(e));return}(0,k.rw)(o,s,"like",{tabId:d})};return(0,r.BX)(F,{children:[(0,r.tZ)(O,{count:S,active:X,disabled:!1,onClick:N}),(0,r.tZ)(D,{count:null!==(t=l.children_count)&&void 0!==t?t:0,disabled:C,onClick:e=>{var t,i;if(e.preventDefault(),!p){T();return}u.open({feedItem:o,parentPubId:null!==(t=l.publication_id)&&void 0!==t?t:void 0,parentPostId:null!==(i=l.post_id)&&void 0!==i?i:void 0,parentCommentId:l.id,tabId:d,surface:s}),(0,k.rw)(o,s,"comment",{tabId:d,extraEventProps:{reply_requirement:f,reply_locked:!!f}})},replyRequirement:f}),p?(0,r.tZ)(J,{pub:null!=_?_:void 0,post:null!=w?w:void 0,comment:l,feedItem:o,disabled:B,onOpen:e=>(0,k.rw)(o,s,"restack",{tabId:d,extraEventProps:{isRestacked:e}}),surface:s}):(0,r.tZ)(H,{count:null!==(i=l.restacks)&&void 0!==i?i:0,disabled:B,onClick:T}),(0,r.tZ)(W,{publication:null!=_?_:void 0,post:null!=w?w:void 0,comment:l,item:o})]})}function A(e){var t,i,o;let{item:l,pub:a,post:s,onLike:d}=e,c=(0,v.rI)(),u=(0,Z.F)(),p=(0,I.i3)(),h=(0,g.aF)(),{requireLogin:m}=(0,P.SJ)(),f=l&&"mediaClip"in l&&l.mediaClip?l.mediaClip.id:void 0,b=(0,S.B)(s.id,(0,n._)({tabId:u},(null==l?void 0:l.context.type)==="post_restack"&&{restacking_user_id:null===(i=l.context.users)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.id},f&&{mediaClipId:f})),y=(0,S.I)(s),_=!!s.reaction,w=null!==(o=s.child_comment_count)&&void 0!==o?o:0,C=(0,I.oC)(l),B=!a.community_enabled,x=!(0,E.commentsEnabledForPost)({publication:a,post:s}),X=async e=>{if(e.preventDefault(),!h){null==m||m();return}let t=!s.reaction,i=l&&(0,M.D2)(l)&&"post"===l.type&&l.mediaClip?l.mediaClip:void 0;await b(s.id,t,null==i?void 0:i.id)&&(null==d||d(t),l&&(0,k.rw)(l,c,"like",{tabId:u}))},T=e=>{if(null==e||e.preventDefault(),!h){null==m||m();return}let t=l&&(0,M.D2)(l)&&"post"===l.type&&l.mediaClip?l.mediaClip:void 0;p.open((0,n._)({feedItem:l,parentPubId:s.publication_id,parentPostId:s.id,tabId:u,surface:c},t&&{parentMediaClipId:t.id})),l&&(0,k.rw)(l,c,"comment",{tabId:u})};return(0,N.B)({name:"post-comment",action:T}),(0,r.BX)(F,{children:[(0,r.tZ)(O,{count:y,active:_,disabled:B,onClick:X}),(0,r.tZ)(D,{count:w,replyRequirement:C,onClick:T,disabled:x}),(0,r.tZ)(J,{disabled:B,pub:a,post:s,feedItem:l,surface:c}),(0,r.tZ)(W,{publication:a,post:s,item:l,twitterText:(0,E.resolveTwitterShareText)({pub:a,post:s})})]})}function F(e){let{children:t}=e;return(0,r.tZ)(w.hs,{flex:"grow",justifyContent:"start",gap:4,className:z.Z.ufiContainer,children:t})}function O(e){let{count:t,className:i,onClick:n,active:o,disabled:l}=e,[s,c]=(0,a.useState)(!1),{iString:u}=(0,m.M1)();return(0,r.tZ)(j,{onClick:e=>{c(!0),null==n||n(e)},className:d()(i,z.Z.like,s&&z.Z.clickedOnce),count:t,active:o,disabled:l,"aria-label":u("like"),children:(0,r.tZ)(V,{isLiked:null!=o&&o})})}function D(e){let{count:t,className:i,onClick:n,active:o,disabled:l,replyRequirement:a}=e,{iString:s}=(0,m.M1)();return(0,r.tZ)(j,{onClick:n,className:d()(i,z.Z.comment),count:t,active:o,disabled:l,tooltip:"paid_subscriber"===a?"Only paid subscribers can reply.":"free_subscriber"===a?"Only subscribers can reply.":void 0,"aria-label":s("Comment"),children:a?(0,r.tZ)(u.Z,{strokeWidth:1.5}):(0,r.tZ)(c.Z,{})})}let H=(0,a.forwardRef)((e,t)=>{let{count:i,className:n,onClick:o,active:l,disabled:s}=e,[c,u]=(0,a.useState)(!1),{iString:p}=(0,m.M1)();return(0,r.tZ)(j,{onClick:e=>{u(!0),null==o||o(e)},className:d()(n,z.Z.restack,c&&z.Z.clickedOnce),"aria-label":p("Restack menu"),ref:t,count:i,active:l,disabled:s,children:(0,r.tZ)(G,{isRestacked:null!=l&&l})})}),U=(0,a.forwardRef)((e,t)=>{let{count:i,className:n,onClick:o,active:l,disabled:a}=e,{iString:s}=(0,m.M1)();return(0,r.tZ)(j,{className:d()(n,z.Z.share),"aria-label":s("Share menu"),onClick:o,ref:t,count:i,active:l,disabled:a,children:(0,r.tZ)(h.Z,{})})});function J(e){let{pub:t,post:i,comment:n,feedItem:o,onOpen:l,disabled:a,surface:s}=e,d=(0,Z.F)(),{canRestack:c,isRestacked:u,restacks:p,menuItems:h,nuxModal:m}=(0,T.K)({pub:t,post:i,comment:n,feedItem:o,tabId:d,surface:s});return c?(0,r.BX)(r.HY,{children:[m,(0,r.tZ)(C.v2,{trigger:(0,r.tZ)(H,{count:p,"aria-label":"menu",active:u,disabled:a}),onOpen:()=>null==l?void 0:l(u),children:h})]}):null}function W(e){let{publication:t,post:i,comment:n,item:o,twitterText:l}=e,a=(0,v.rI)(),s=(0,Z.F)(),d=(0,g.aF)(),c=d?d.id.toString(36):void 0,u=o&&(0,M.D2)(o)&&"post"===o.type&&o.mediaClip?o.mediaClip:void 0,p=n?(0,L.Sgq)(n,{urlParams:{utm_source:q.b3.notesShareAction,r:c}}):i?(0,L.mx9)(t,i,{urlParams:{utm_source:q.b3.notesShareAction,r:c},mediaClip:u}):null,h=(0,X.wg)({variant:"menu",url:p,twitterText:l,onLinkClicked:e=>{(0,f.j)(f.FP.FEED_ITEM_SHARE_LINK_CLICKED,{type:e,shared_post_id:null==i?void 0:i.id,shared_comment_id:null==n?void 0:n.id})},comment:n});return(0,r.tZ)(C.v2,{trigger:(0,r.tZ)(U,{}),onOpen:()=>{o&&(0,k.rw)(o,a,"share",{tabId:s})},children:h})}let j=(0,a.forwardRef)((e,t)=>{var i,s,{className:c,active:u,disabled:p,count:h,children:m}=e,g=(0,l._)(e,["className","active","disabled","count","children"]);let v=!h||0===h,Z=(0,a.useRef)(null),[f,b]=(0,a.useState)(0);(0,a.useLayoutEffect)(()=>{Z.current&&b(Z.current.offsetWidth)},[h]);let y=h?8:7,C=4*!h,B=null!==(s=null===(i=Z.current)||void 0===i?void 0:i.offsetWidth)&&void 0!==s?s:0,k=v?32:18+6*!!f+f+2*y;return(0,r.tZ)(w.hs,{className:z.Z.buttonContainer,style:{"--button-min-width":"".concat(32,"px"),"--button-icon-width":"".concat(18,"px"),"--button-gap":"".concat(6,"px"),"--button-inner-padding":"".concat(y,"px"),"--button-outer-padding":"".concat(C,"px"),"--button-label-width":"".concat(B,"px"),"--button-final-width":"".concat(k,"px")},children:(0,r.BX)(_.kG,(0,o._)((0,n._)({className:d()(c,z.Z.button,u&&z.Z.active,v&&z.Z.zero),resetCss:!0,ref:t,disabled:p,userSelect:"none"},g),{children:[m,(0,r.tZ)(Y,{count:h,hidden:v,ref:Z})]}))})});function Y(e){let{count:t,hidden:i,ref:n}=e;return(0,r.tZ)(B.xv.B4,{className:d()(z.Z.count,i&&z.Z.hidden),ref:n,children:t?(0,E.numberToRoughShortString)(Math.max(t,1),{plusSignifier:""}):""})}function V(e){let{isLiked:t}=e;return(0,r.BX)("div",{className:d()(z.Z.heartWrapper,z.Z.icon,t&&z.Z.isLiked),children:[(0,r.tZ)("svg",{className:z.Z.heart,viewBox:"0 0 20 20",children:(0,r.tZ)("path",{d:"M5.00002 2.54822C8.00003 2.09722 9.58337 4.93428 10 5.87387C10.4167 4.93428 12 2.09722 15 2.54822C18 2.99923 18.75 5.66154 18.75 7.05826C18.75 9.28572 18.1249 10.9821 16.2499 13.244C14.3749 15.506 10 18.3333 10 18.3333C10 18.3333 5.62498 15.506 3.74999 13.244C1.875 10.9821 1.25 9.28572 1.25 7.05826C1.25 5.66154 2 2.99923 5.00002 2.54822Z"})}),(0,r.tZ)("div",{className:z.Z.sparks,style:"--total-sparks: ".concat(8),children:Array(8).fill(0).map((e,t)=>(0,r.tZ)("div",{className:z.Z.spark,style:"--i: ".concat(t+1,";")}))})]})}function G(e){let{isRestacked:t}=e;return(0,r.tZ)(w.hs,{className:d()(z.Z.restackWrapper,z.Z.icon,t&&z.Z.isRestacked),children:(0,r.tZ)(p.Z,{className:z.Z.restackIcon})})}},12293:function(e,t,i){i.d(t,{j:()=>o});var n=i(95441);let o=()=>{let{iString:e}=(0,n.M1)();return{list:{id:"list",label:e("List"),description:e("A list of posts"),postCount:{desktop:7,tablet:7,mobile:7}},grid:{id:"grid",label:e("Grid"),description:e("A grid of nine posts"),postCount:{desktop:9,tablet:9,mobile:7}},"grid-groups":{id:"grid-groups",label:e("Groups (sections or tags)"),description:e("A grid of nine posts, grouped by section or tag"),postCount:{desktop:9,tablet:9,mobile:7}},custom:{id:"custom",label:e("Custom"),description:e("Custom layout"),postCount:{desktop:0,tablet:0,mobile:0}}}}},79153:function(e,t,i){i.d(t,{i:()=>o});var n=i(30396);let o=e=>{let{key:t,initialValue:i}=e,[o,l]=(0,n.eJ)(i);return(0,n.d4)(()=>{let e=localStorage.getItem(t);null!=e&&l("true"===e)},[t]),[o,e=>{l(e),e?localStorage.setItem(t,"true"):localStorage.removeItem(t)}]}},97794:function(e,t,i){i.d(t,{L:()=>l});var n=i(30396),o=i(48980);let l=e=>{let{pub:t,user:i,preloadedActiveLiveStream:l}=e,[r,a]=(0,n.eJ)(null!=l?l:null);return(0,n.d4)(()=>{i||(0,o.rd)("/api/v1/live_streams/active/pub/".concat(t.id)).then(e=>{let{activeLiveStream:t}=e;return a(t)})},[t,i]),{activeLiveStream:r}}},53030:function(e,t,i){i.d(t,{FI:()=>o,On:()=>l,md:()=>r});var n=i(30396);let o=e=>{var t,i;let o=null==e?void 0:null===(t=e.current)||void 0===t?void 0:t.player,[l,r]=(0,n.eJ)("number"==typeof(null==o?void 0:o.currentTime)?o.currentTime:0),[a,s]=(0,n.eJ)(!!o&&!o.paused);return(0,n.d4)(()=>{var t;let i=null===(t=e.current)||void 0===t?void 0:t.player;if(i){let e=e=>{"number"==typeof e.target.currentTime&&r(e.target.currentTime)},t=()=>s(!0),n=()=>s(!1),o=()=>s(!1);return i.addEventListener("timeupdate",e),i.addEventListener("play",t),i.addEventListener("pause",n),i.addEventListener("ended",o),i.paused||a||s(!0),()=>{i.removeEventListener("timeupdate",e),i.removeEventListener("play",t),i.removeEventListener("pause",n),i.removeEventListener("ended",o)}}},[null==e?void 0:null===(i=e.current)||void 0===i?void 0:i.player]),{currentTime:l,isPlaying:a}},l=e=>r(e.current),r=e=>{let t=null==e?void 0:e.player,[i,o]=(0,n.eJ)(!!t&&!t.paused);return(0,n.d4)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>o(!0),n=()=>o(!1),l=()=>o(!1);return t.addEventListener("play",e),t.addEventListener("pause",n),t.addEventListener("ended",l),t.paused||i||o(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",n),t.removeEventListener("ended",l)}}},[null==e?void 0:e.player]),i}},49526:function(e,t,i){i.d(t,{t:()=>s});var n=i(30396),o=i(84596),l=i.n(o),r=i(60308),a=i(26111);let s=e=>{let{alwaysPersistQuery:t,initialValue:i,key:o,type:s,isArray:d,disable:c}=e,u=(0,a.x)(o),p=i;u&&!c&&(p=d?u.split(",").map(e=>"number"===s?parseInt(e):e):"number"===s?parseInt(u):u);let[h,m]=(0,n.eJ)(p),g=h&&(h!==i||t)?l()(h).join(","):"";return(0,n.d4)(()=>{if(!c){if(g)window.history.replaceState({},"",(0,r.rhs)({[o]:g}));else{let e=new URL(document.location.href);e.searchParams.delete(o),window.history.replaceState({},"",e.toString())}}},[c,o,g]),[h,m]}},10047:function(e,t,i){i.d(t,{J:()=>o,M:()=>l});var n=i(30396);function o(){let e=e=>{var t,i;"https://embed.bsky.app"===e.origin?function(e){if(!e.data.id||!e.data.height)return;let t=document.querySelector('[data-bluesky-id="'.concat(e.data.id,'"]'));t&&(t.style.height="".concat(e.data.height,"px"))}(e):("3pc.supported"===e.data||"3pc.unsupported"===e.data)&&("3pc.supported"===e.data&&Array.from(document.getElementsByClassName("tiktok-wrap outer")).forEach(e=>{var t,i;let n=e.querySelector(".tiktok-iframe");if(!n)return;n.classList.add("visible"),null===(t=e.querySelector(".tiktok-wrap.static"))||void 0===t||t.classList.add("hidden");let o=e.querySelector(".fallback-failure");null==o||o.classList.add("no-border");try{let e=n.contentDocument||(null===(i=n.contentWindow)||void 0===i?void 0:i.document);(null==e?void 0:e.readyState)=="complete"&&(null==o||o.classList.add("visible"))}catch(e){}n.onload=()=>{null==o||o.classList.add("visible")},n.onerror=()=>{null==o||o.classList.add("visible")},n.onabort=()=>{null==o||o.classList.add("visible")}}),null===(i=Array.from(document.getElementsByClassName("third-party-cookie-check-iframe")))||void 0===i||null===(t=i.forEach)||void 0===t||t.call(i,e=>e.remove()))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}function l(){(0,n.d4)(o,[])}},13285:function(e,t,i){i.d(t,{S:()=>l});var n=i(49762),o=i(1835);function l(e){let{publicationSettings:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!0===(0,n.ZP)("gifts_from_substack_feature_available")&&(0,o.Gm)(e)&&!(null==t?void 0:t.gifts_from_substack_disabled)}},27041:function(e,t,i){i.d(t,{Z:()=>I});var n=i(27412),o=i(16584),l=i(6400),r=i(80569),a=i.n(r),s=i(35047),d=i(56219),c=i(9721),u=i(12980),p=i(49995),h=i(58319),m=i(40647),g=i(68833),v=i(49762),Z=i(98914),f=i(23372),b=i(30396),y=i(19081),_=i(9459),w=i(91432);let C=e=>{var t;let{post:i,pub:n,user:l,freeSignup:r}=e,a=i.section_id&&n.sections&&null!==(t=n.sections.find(e=>e.id===i.section_id))&&void 0!==t?t:null,s=(0,b.sO)(null);return(0,o.BX)(y.tu,{className:"post",paddingY:32,children:[(0,o.tZ)(d.mV,{allowEdit:!0,hideAudience:"page"===i.type,hideDate:"page"===i.type,isOnPostPage:!0,post:i,pub:n,showCommentRestack:!n.hide_post_restacks,showLabel:!0,showPhoto:!0,showShare:!0,showSubtitle:!0,user:l}),i.videoUpload&&(0,o.tZ)(_.L,{contentType:"post",disableAutoPlay:!0,entityKey:String(i.id),entityType:"post",isFreeSubscribed:!!((null==l?void 0:l.is_free_subscribed)||r),isSubscribed:!!(null==l?void 0:l.is_subscribed),mediaUpload:i.videoUpload,post:i,pub:n,surface:"publication",variant:"inbox",videoPlayerRef:s,videoType:"post"}),i.podcastUpload&&!i.videoUpload&&(0,o.tZ)(w.lU,{isFreeSubscribed:!!((null==l?void 0:l.is_free_subscribed)||r),isSubscribed:!!(null==l?void 0:l.is_subscribed),post:i,pub:n,section:a,trackingProps:{surface:"media_feed",entityKey:i.id,entityType:"post",contentType:"post"},variant:"notes-full"})]})};var B=i(31377),k=i(60308),x=i(26111),S=i(69332),P=i(47929);class I extends l.Component{async componentDidMount(){this.triggerShareOnLoad(),await this.loadMore()}getBatchSize(){return 5}async loadMore(){this.state.hasMore&&await (0,Z.Se)(this,"loading",async e=>{let{hasMore:t,posts:i}=e;if(t){i=i||[];try{let e=(await a().get("/api/v1/posts").query({limit:this.getBatchSize(),offset:i.length})).body;i=i.concat(e),t=e.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(e),this.setState({posts:i,hasMore:t})}catch(e){console.error(e)}return t}})&&this.loader&&this.loader.checkVisibility()}triggerShareOnLoad(){"share"===(0,x.x)("action")&&(window.history.replaceState({},document.title,(0,k.rhs)({action:null})),this.setState({share_on_load:!0,shareModalOpen:!0}))}makeSureIosCookiesArentBroken(e){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!e||0===e.filter(e=>(0,B.isPaidAudience)(e.audience)&&!e.hidden).length)return;let t="__cookie_checked",i=(0,S.m)(window.location.search);i[t]||(i[t]="true",window.location.search="?".concat((0,k.Y$Q)(i)))}onChange(e){let{post:t}=e||{};if(t){var i;let e=(this.state.posts||[]).map(e=>e.id).indexOf(t&&t.id);-1!==e&&(null===(i=this.state.posts)||void 0===i?void 0:i[e])&&(this.state.posts[e]=t,this.setState({posts:this.state.posts}))}}render(e,t){let{user:i,pub:n,freeSignup:l,freeSignupEmail:r,preloadedPosts:a,hide_intro_popup:d,children:u,blurbs:p,launchWelcomePage:m,skipIntroPopupRender:g,activeLiveStream:v}=e,{posts:Z,hasMore:b,share_on_load:y}=t,_=[];for(let e of Z||a||[]){let t=_[_.length-1];e.hidden?Array.isArray(t)?t.push(e):_.push([e]):_.push(e)}return(0,o.BX)("div",{className:"classic-home-page",children:[!!(null==v?void 0:v.liveStream.id)&&(0,o.tZ)(f.Z,{activeLiveStream:v}),(0,o.tZ)(c.V,{isOpen:!!this.state.shareModalOpen,onClose:()=>this.setState({shareModalOpen:!1}),user:i,pub:n,medium:"web"}),g?null:(0,o.tZ)(s.ZP,{freeSignup:l,freeSignupEmail:r,user:i,post:null,publication:n,hidden:d||y,blurbs:p,launchWelcomePage:m}),(0,o.BX)("div",{className:"post-list",children:[0===_.length&&!b&&(0,o.tZ)("div",{className:"container-border coming-soon",children:(0,o.tZ)("div",{className:"container",children:(0,o.tZ)("p",{children:"Coming soon"})})}),_.map((e,t)=>Array.isArray(e)?this.renderHiddenPosts(e,t):this.renderPost(e)),b?(0,o.tZ)("div",{className:"post-loader",children:(0,o.tZ)("div",{className:"container",children:(0,o.tZ)(h.Z,{ref:this.assignLoader,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore(),children:(0,o.tZ)("p",{children:"Loading more posts…"})})})}):n.has_posts&&Z&&Z.length>0&&(0,o.tZ)("div",{className:"container",children:(0,o.tZ)("a",{className:"archive-link button invis",href:(0,k.nxG)(n),children:"View archive"})})]}),u]})}renderPost(e){return(0,o.tZ)("div",{className:"container-border post-list-post",children:(0,o.tZ)("div",{className:"container",children:"thread"===e.type?(0,o.tZ)(u.H,{post:e,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:!!this.likesEnabled}):"podcast"===e.type||"video"===e.type?(0,o.tZ)(C,{post:e,pub:this.props.pub,user:this.props.user,freeSignup:this.props.freeSignup}):(0,o.tZ)(d.SO,{post:e,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:e=>this.onChange(e),noTitleLink:!!this.props.disableInteractive,disableSubscribePrompt:!0})})})}renderHiddenPosts(e,t){let i,n;return 0===t?(i=e.slice(0,1),n=e.slice(1)):e.length<=3?(i=e,n=[]):(i=e.slice(0,2),n=e.slice(2)),(0,o.tZ)(X,{user:this.props.user,pub:this.props.pub,posts:i,collapsedPosts:n,onChange:e=>this.onChange(e)})}constructor(e,t){super(e,t),(0,n._)(this,"loader",void 0),(0,n._)(this,"assignLoader",e=>{this.loader=e}),(0,n._)(this,"likesEnabled",(0,v.ZP)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1,shareModalOpen:!1},this.props.notify_user&&"undefined"!=typeof window&&(0,p.ZP)(this.props.notify_user)}}(0,n._)(I,"contextType",m.QA);class X extends l.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||(0,g.j)(g.FP.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render(e,t){let{user:i,pub:n,posts:l,collapsedPosts:r,onChange:a}=e,{showing:s}=t;return(0,o.tZ)("div",{className:"container-border post-list-hidden-posts ".concat(s?"showing":""),children:(0,o.BX)("div",{className:"container",children:[l.map(e=>(0,o.tZ)(d.mV,{user:i,pub:n,post:e,onChange:a})),r.length>0&&(0,o.tZ)("div",{className:"collapse-toggle",onClick:()=>this.toggle(),children:s?"hide":"+".concat(r.length," more")}),r.map(e=>(0,o.tZ)(d.mV,{className:"collapsed",user:i,pub:n,post:e,utm_source:P.b3.home,onChange:a}))]})})}}},33578:function(e,t,i){i.d(t,{O:()=>U});var n=i(7409),o=i(99282),l=i(16584),r=i(41352),a=i(87764),s=i(27412),d=i(58865),c=i(6400),u=i(94184),p=i.n(u),h=i(80569),m=i.n(h),g=i(64343),v=i(58319),Z=i(95441),f=i(39648),b=i(40647),y=i(68833),_=i(98914),w=i(98012),C=i(60308),B=i(63651),k=i(84864);function x(){let e=(0,d._)(["Search ",""]);return x=function(){return e},e}class S extends c.Component{componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){"search"===this.state.tab.id&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(e){(e.hideTop!==this.props.hideTop||e.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var e,t,i;let n=[],{iString:o}=this.props,l={id:"new",title:o("Latest"),posts:this.props.newPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.newPosts)};n.push(l),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||n.push({id:"top",title:o("Top"),posts:this.props.topPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.topPosts)}),(null===(e=this.props.pub)||void 0===e?void 0:e.community_enabled)&&(null===(t=this.props.pub)||void 0===t?void 0:t.has_community_content)&&!this.props.hideCommunity&&n.push({id:"community",title:o("Discussions"),posts:this.props.communityPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.communityPosts)})),this.props.postId&&n.push({id:"related",title:o("Related"),posts:this.props.relatedPosts,fullyLoaded:!!this.props.relatedPosts}),n=this.props.sortTabs&&this.props.sortTabs(n)||n,"search"!==this.props.sort&&this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()||n.push({id:"search",title:o("Search"),posts:this.props.searchPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});let r=null!==(i=n.find(e=>e.id===this.props.sort)||this.props.search&&n.find(e=>"search"===e.id)||n[0])&&void 0!==i?i:l;return{tabs:n,tab:r}}getFetchLimit(){return this.props.maxPosts||12}render(e,t){var i,n;let{className:o,emptyMessage:r,filterPostsPredicate:a,hideSearchTab:s,isPodcast:d,maxPosts:c,pinnedPosts:u,pub:h,renderLoading:m,renderPosts:Z,renderTabs:y,renderSeeAll:_,sectionId:w,showMonthDividers:S,user:P,iString:X,iTemplate:T}=e,{tabs:N,tab:M}=t;r=r||X("No posts");let L=S&&(null==M?void 0:M.id)==="new",E=N.find(e=>"search"===e.id),q=N.find(e=>"community"===e.id),z=Array.isArray(M.posts)?M.posts.filter(e=>!(h&&"top"===M.id&&e.top_exclusions.includes(h.id))).filter(e=>null==h||!h.section||null==u||!u.length||!u.find(t=>t.id===e.id)).filter(e=>!k.hidePaidPostsFor.includes(null==h?void 0:h.subdomain)||"everyone"===e.audience||(null==P?void 0:P.is_subscribed)).filter(a||(()=>!0)):[];(null==h?void 0:h.section)&&(null==u?void 0:u.length)&&["new","top"].includes(null!==(i=M.id)&&void 0!==i?i:"")&&(z=[...u,...z]);let R=0===z.length,A=!z&&!M.loadingError,F=c?z.slice(0,c):z,O=Z?Z({posts:F,linkToComments:M===q,onClickPost:e=>{let{event:t,post:i,index:n,source:o}=e;return this.onPostClicked(t,i.id,n,o)},postGroups:L?I(F,h.language):null}):[],D=w&&null!==(n=null==h?void 0:h.sections.find(e=>e.id===w))&&void 0!==n?n:null,H=d?(0,B.QHt)({pub:h,section:D,params:{sort:M.id,search:M.query}}):(0,C.sai)(h,{section:D,params:{sort:M.id,search:M.query}}),U=_?_({url:H}):(0,l.BX)("a",{className:"portable-archive-all",href:H,native:!0,children:[X("See all")," ",(0,l.tZ)(g.Z,{height:12,width:12})]}),J=m?m():null;return(0,l.tZ)(b.QA.Consumer,{children:e=>{let{getConfigFor:t}=e;return(0,l.tZ)(f.nA.Consumer,{children:e=>{let{open:i}=e;return(0,l.BX)("div",{className:p()("portable-archive",o,{"empty-list":R}),children:[y&&y({activeTabId:M.id,isSearching:M===E,showSearch:!!(E&&!s),searchInputProps:{value:null==E?void 0:E.query,onKeyDown:this.onSearchKeyDown,onChange:e=>{"search"===this.state.tab.id&&this.loadTab("search",e)},onBlur:this.onSearchBlur},searchRef:e=>{this.searchInput=e},tabs:N.filter(e=>!e.hidden),onClick:e=>{this.loadTab(e)},onClickSearch:()=>{t("fallback_to_archive_search_on_section_pages")&&w?this.loadTab("search"):i()},onClickSearchClose:()=>{var e;this.loadTab(null===(e=N[0])||void 0===e?void 0:e.id)}}),(0,l.BX)("div",{className:"portable-archive-list",children:[M.loadingError?(0,l.tZ)("p",{className:"portable-archive-empty",children:X("Failed to load posts")}):0!==z.length||M.loading?(0,l.BX)(l.HY,{children:[O,!c&&!A&&!M.loading&&!M.fullyLoaded&&(0,l.tZ)(v.Z,{threshold:640,onVisible:()=>this.loadTab(M.id,M.query)})]}):(0,l.tZ)("p",{className:"portable-archive-empty",children:"search"!==M.id?r:M.query?X("No results"):T(x(),D?D.name:h?h.name:"")}),M.loading||A?J:c&&z.length>=c&&U]})]})}})}})}constructor(e,t){if(super(e,t),(0,s._)(this,"searchInput",void 0),(0,s._)(this,"onTabClick",e=>t=>{t.preventDefault(),this.loadTab(e)}),(0,s._)(this,"onSearchInput",e=>{"search"===this.state.tab.id&&this.loadTab("search",e.currentTarget.value)}),(0,s._)(this,"onSearchKeyDown",e=>{if("search"===this.state.tab.id&&"Escape"===e.key){var t,i,n;null===(i=e.target)||void 0===i||null===(t=i.blur)||void 0===t||t.call(i),this.loadTab(null===(n=this.state.tabs[0])||void 0===n?void 0:n.id)}}),(0,s._)(this,"onPostClicked",(e,t,i,n)=>{(0,y.j)(y.FP.ARCHIVE_PAGE_POST_CLICKED,{post_id:t,tab:this.state.tab.id,rank_in_feed:i,source:null!=n?n:this.props.source})}),(0,s._)(this,"onSearchBlur",e=>{if("search"===this.state.tab.id&&!e.target.value){var t;if(!this.state.tab.fullyLoaded){setTimeout(()=>{var e;null===(e=this.searchInput)||void 0===e||e.focus()},0);return}this.loadTab(null===(t=this.state.tabs[0])||void 0===t?void 0:t.id,"")}}),(0,s._)(this,"loadTab",async(e,t)=>{let i=this.state.tabs.find(t=>t.id===e);if(!i){console.error("couldnot find tab with id [".concat(e,"]"));return}let o=!1;if("search"===i.id&&"string"==typeof t&&i.query!==t&&(o=!0,i.query=t,i.posts=null,i.fullyLoaded=!1,i.loading=!1,i.loadingError=null),i.id!==this.state.tab.id?(this.setState({tab:i},()=>{"search"===i.id&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.rhs)({sort:i.id,search:i.query||null}))):o&&this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,C.rhs)({search:i.query||null})),i.loading)return;if(i.fullyLoaded){this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:i.posts});return}if("search"===i.id&&!i.query){i.posts=[],i.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}let l=(0,k.randomString)();if(i.loading=l,i.loadingError=null,this.setState({tabs:this.state.tabs}),"search"===i.id&&i.query&&(await new Promise(e=>setTimeout(e,300)),i.loading!==l))return;!this.state.tabs.find(e=>e.posts||e.fullyLoaded||e.loading||e.loadingError)&&this.props.delayFirstLoad&&await new Promise(e=>setTimeout(e,this.props.delayFirstLoad));let r=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":"";try{let e,t;let o=this.props.maxPosts?2*this.props.maxPosts:this.getFetchLimit();if("related"===i.id)e=(await m().get("/api/v1/posts/".concat(this.props.postId,"/related")).query({limit:o,offset:(i.posts||[]).length})).body;else{let l=(0,n._)({type:this.props.isPodcast?"podcast":void 0,rss_episodes_only:!!this.props.isPodcast&&!this.props.sectionId||void 0},this.props.authorId&&{author_id:this.props.authorId},this.props.postTagId&&{post_tag_id:this.props.postTagId},this.props.sectionId&&{section_id:this.props.sectionId},this.props.profile&&{profile_user_id:this.props.profile.id});"new"===i.id&&this.props.includePins&&!i.posts&&(t=(await m().get(r).query((0,n._)({sort:"pinned",offset:0,limit:1},l))).body),e=(await m().get(r).query((0,n._)({sort:"search"===i.id?"new":i.id,search:"search"===i.id?i.query:"",offset:(i.posts||[]).length,limit:o},l))).body,e=[...t||[],...e.filter(e=>!(null==t?void 0:t.find(t=>t.id===e.id)))]}if(this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:e}),i.loading!==l)return;i.posts=i.posts?i.posts.concat(e):e,i.fullyLoaded=e.length<o||!!(this.props.maxPosts&&i.posts&&i.posts.length>=this.props.maxPosts)}catch(e){console.error("Failed to load tab:",e),i.loadingError=e}i.loading=!1,this.setState({tabs:this.state.tabs.map(e=>e.id===i.id?i:e),tab:i})}),(0,s._)(this,"onChange",e=>{let{post:t}=e;t&&((0,_.nn)(this,e=>{let i=!1;for(let n of e.tabs.map(e=>e.posts).filter(e=>Array.isArray(e))){let e=null==n?void 0:n.findIndex(e=>e.id===t.id);-1!==e&&n&&(n[null!=e?e:""]=t,i=!0)}i&&this.setState({tabs:e.tabs})}),this.props.onChange&&this.props.onChange(t))}),!(this.props.pub||this.props.profile))throw Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}}let P=(0,Z.fz)(S),I=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n=[];return e.forEach((e,o)=>{let l=(0,w.Z)(e.post_date).locale(i).format("MMMM YYYY");if(l!==t)0===o?n.push({label:"",posts:[e]}):n.push({label:l,posts:[e]}),t=l;else{let t=n[n.length-1];t&&t.posts.push(e)}}),n};var X=i(57391),T=i(56629),N=i(63391),M=i(98422),L=i(68648),E=i(29422),q=i(45262),z=i(15771),R=i(19081),A=i(85930),F=i(15186),O=i(58175),D=i(6070);let H={monthHeader:"monthHeader-nt8KgE"},U=e=>{let{authorId:t,children:i,communityPosts:s,delayFirstLoad:d,filterPostsPredicate:c,hideCommunity:u,hideTop:p,includePins:h,isBelowTheFold:m,isPodcast:g,maxPosts:v,newPosts:f,pinnedPosts:y,postTagId:_,pub:w,renderLoading:C,renderTabs:B,search:x,searchPosts:S,postId:I,sectionId:U,showMonthDividers:J,sort:W,sortTabs:j,source:Y,topPosts:V,user:G,utm:K,variant:Q="list",onPostsLoaded:$}=e,{iString:ee}=(0,Z.M1)(),{isMobile:et}=(0,M.v9)(),{getSettingFor:ei}=(0,T.So)(),en=(0,b.xR)(),eo=(0,k.ensureInList)(ei("post_preview_crop_gravity"),["center","auto"]),el=(0,D.HD)({pub:w}),{getExperimentVariant:er}=(0,X.jc)(),ea="treatment"===er("related_posts_web");return(0,l.tZ)(L.hV,{authorPagesEnabled:!!en.getConfigFor("enable_author_pages"),cropGravity:eo,highlightByline:!!en.getConfigFor("post_preview_highlight_byline"),pub:w,user:G,utm:K,children:(0,l.tZ)(P,{authorId:t,communityPosts:s,delayFirstLoad:d,filterPostsPredicate:c,hideCommunity:u,hideTop:p,includePins:h,isBelowTheFold:m,isPodcast:g,maxPosts:v,newPosts:f,pinnedPosts:y,postId:ea?I:void 0,postTagId:_,pub:w,renderLoading:null!=C?C:()=>(0,l.tZ)(E.b,{postCount:null!=v?v:7,variant:Q}),renderPosts:e=>{let{posts:t,linkToComments:n,onClickPost:o,postGroups:r}=e;return r?r.map(e=>{let{label:t,posts:r}=e;return(0,l.BX)(l.HY,{children:[t&&(0,l.BX)(l.HY,{children:[(0,l.tZ)(N.f,{paddingBottom:8,paddingTop:8}),(0,l.tZ)(O.xv.Meta,{as:"h3",className:H.monthHeader,color:"accent",paddingBottom:24,children:t})]}),i({posts:r,linkToComments:n,onClickPost:o})]})}):i({posts:t,linkToComments:n,onClickPost:o})},renderSeeAll:e=>{let{url:t}=e;return"grid-groups"===Q||el?null:(0,l.tZ)(q.B,{url:t})},renderTabs:null!=B?B:e=>{let{activeTabId:t,isSearching:i,tabs:s,searchInputProps:d,searchRef:c,showSearch:u,onClick:p,onClickSearch:h,onClickSearchClose:m}=e;return"grid-groups"===Q||el?null:i?(0,l.BX)(R.gq,{alignItems:"center",gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!et,children:[(0,l.tZ)(A.M,(0,o._)((0,n._)({},d),{ref:c,autoFocus:!0,flex:"grow",placeholder:ee("Search..."),showClear:!1})),(0,l.tZ)(z.hU,{priority:"tertiary",onClick:m,children:(0,l.tZ)(r.Z,{size:20})})]}):u||s.length>1?(0,l.BX)(R.gq,{alignItems:"center","aria-label":ee("Archive sort tabs"),gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!et,role:"navigation",children:[(0,l.tZ)(F.Z,{tabs:s.map(e=>({value:e.id,label:e.title})),value:t,onChange:p}),u&&(0,l.tZ)(z.hU,{priority:"tertiary",onClick:h,children:(0,l.tZ)(a.Z,{size:20})})]}):null},search:x,searchPosts:S,sectionId:U,showMonthDividers:J,sort:W,sortTabs:j,source:Y,stateInUrl:!0,topPosts:V,user:G,onPostsLoaded:$})})}},63391:function(e,t,i){i.d(t,{f:()=>r});var n=i(16584),o=i(38756),l=i(19081);let r=e=>{let{numColumns:t=4,paddingBottom:i=24,paddingTop:r=24}=e;return(0,n.tZ)(o.A,{variant:4===t?"full-width":3===t?"three-column-width":"two-column-width",children:(0,n.tZ)(l.tu,{paddingBottom:i,paddingTop:r,paddingX:8,children:(0,n.tZ)(l.hs,{borderBottom:"detail-themed"})})})}},63948:function(e,t,i){i.d(t,{U:()=>nl});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(30396),s=i(39693),d=i.n(s),c=i(57557),u=i.n(c),p=i(49995),h=i(98422),m=i(98661),g=i(94184),v=i.n(g),Z=i(58865),f=i(41352),b=i(83034),y=i(51214),_=i(347),w=i(33665),C=i(75744),B=i(57391),k=i(95441),x=i(60807),S=i(68833),P=i(48980),I=i(98914),X=i(51450),T=i(94874),N=i(15771),M=i(19081),L=i(6490),E=i(10510),q=i(58175),z=i(91400),R=i(26111),A=i(63651),F=i(47929);let O={giftModal:"giftModal-CMnn5t",qrCode:"qrCode-MxgyfH",giftBackground:"giftBackground-I9xH3b",headerCloseButton:"headerCloseButton-m0sKZi",giftBackgroundHeader:"giftBackgroundHeader-tb4ks8",guestPassText:"guestPassText-_ibww7",emailInputWrapper:"emailInputWrapper-SzmWNd",emailInput:"emailInput-JqukPr",acceptButton:"acceptButton-TrYdu7",tos:"tos-RHY2Hj"};var D=i(37869);function H(){let e=(0,Z._)(["All of ","'s gifts have been claimed."]);return H=function(){return e},e}function U(){let e=(0,Z._)(["Get your free guest pass to ",""]);return U=function(){return e},e}function J(){let e=(0,Z._)(["My scene is on Substack and I want you in it. Get your first "," days free on me."]);return J=function(){return e},e}function W(){let e=(0,Z._)([""," gifted you "," free days of ","."]);return W=function(){return e},e}function j(){let e=(0,Z._)(["Gift from ",""]);return j=function(){return e},e}function Y(){let e=(0,Z._)(["Gift from someone"]);return Y=function(){return e},e}function V(){let e=(0,Z._)(["Gift from ",""]);return V=function(){return e},e}function G(){let e=(0,Z._)(["","-Day Guest Pass ("," value)"]);return G=function(){return e},e}function K(){let e=(0,Z._)(["","-Day Guest Pass"]);return K=function(){return e},e}function Q(){let e=(0,Z._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return Q=function(){return e},e}function $(){let e=(0,Z._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return $=function(){return e},e}function ee(){let e=(0,Z._)(["Accept ","'s gift"]);return ee=function(){return e},e}function et(){let e=(0,Z._)(["Accept gift"]);return et=function(){return e},e}function ei(){let e=(0,Z._)(["Accept ","'s gift"]);return ei=function(){return e},e}let en=e=>{var t,i,o;let{isOpen:l,onClose:s,pub:d,giftCard:c,abTestingId:u,variant:p}=e,{iString:h,iTemplate:m}=(0,k.M1)(),g=(0,z.XA)(),Z=(0,x.aF)(),{freeSignup:B,freeSignupEmail:en}=(0,a.qp)(X.p),[eo,el]=(0,a.eJ)((null==Z?void 0:Z.email)||en||""),[er,ea]=(0,a.eJ)(!1),[es,ed]=(0,a.eJ)(!1),[ec,eu]=(0,a.eJ)(null),[ep,eh]=(0,a.eJ)(null),em=(null==Z?void 0:Z.is_free_subscribed)||B,eg=d.author_photo_url||d.logo_url;if(null==c?void 0:c.expired)return(0,r.tZ)(L.u_,{isOpen:l,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":O.giftModal,children:(0,r.BX)(M.tu,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!em,paddingBottom:24*!em,children:[(0,r.tZ)(N.hU,{rounded:!0,onClick:s,"aria-label":h("Close"),priority:"tertiary",tabIndex:-1,style:{position:"absolute",top:"12px",right:"12px"},children:(0,r.tZ)(f.Z,{size:20})}),(0,r.BX)(M.tu,{alignItems:"center",gap:16,children:[eg&&(0,r.tZ)(T.qE,{size:80,photoUrl:eg}),(0,r.tZ)(M.tu,{alignItems:"center",gap:2,children:(0,r.tZ)(q.xv.B2,{textAlign:"center",translated:!0,children:"Sorry, this gift has already expired."})})]}),(0,r.BX)(M.tu,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,r.tZ)(w.Z,{pub:d,user:Z,freeSignup:B,freeSignupEmail:en,isStatic:!1,source:"viral-gift-fallback"}),!em&&(0,r.tZ)(C.fJ,{publication:d})]})]})});if(null==Z?void 0:Z.is_subscribed){let e=(0,A.W1P)(d,{params:{utm_source:F.b3.viralGiftModal,gift:!0}});return(0,r.tZ)(L.u_,{isOpen:l,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":O.giftModal,children:(0,r.tZ)(M.tu,{alignItems:"center",padding:24,gap:24,children:(0,r.BX)(M.tu,{alignItems:"center",gap:16,children:[eg&&(0,r.tZ)(T.qE,{size:80,photoUrl:eg}),(0,r.BX)(M.tu,{alignItems:"center",gap:2,children:[(0,r.BX)(q.xv.H4,{textAlign:"center",translated:!0,children:["Give a gift to ",I18N.p(d.name)]}),(0,r.BX)(q.xv.B3,{textAlign:"center",translated:!0,children:["You currently have an active paid subscription to ",I18N.p(d.name),", so you're not able to accept a gift. Would you like to give a gift instead?"]})]}),(0,r.tZ)(N.zx,{href:e,localNavigation:!1,children:h("Give a gift")})]})})})}if(!c||!(null==c?void 0:c.days)){if(null==c?void 0:c.gifter){let e=c.gifter.name||c.gifter.handle&&"@".concat(c.gifter.handle);return(0,r.tZ)(L.u_,{isOpen:l,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":O.giftModal,children:(0,r.BX)(M.tu,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!em,paddingBottom:24*!em,children:[(0,r.BX)(M.tu,{alignItems:"center",gap:16,children:[eg&&(0,r.tZ)(T.qE,{size:80,photoUrl:eg}),(0,r.BX)(M.tu,{alignItems:"center",gap:2,children:[(0,r.BX)(q.xv.H4,{textAlign:"center",translated:!0,children:["Subscribe to ",I18N.p(d.name)]}),(0,r.tZ)(q.xv.B3,{textAlign:"center",children:e?m(H(),e):h("All of your friend's gifts have been claimed.")})]})]}),(0,r.BX)(M.tu,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,r.tZ)(w.Z,{pub:d,user:Z,freeSignup:B,freeSignupEmail:en,isStatic:!1,source:"viral-gift-fallback"}),!em&&(0,r.tZ)(C.fJ,{publication:d})]})]})})}return null}let ev=c.gifter&&c.gifter.id!==d.author_id,eZ=(null===(t=c.gifter)||void 0===t?void 0:t.name)||(null===(i=c.gifter)||void 0===i?void 0:i.handle)&&"@".concat(null===(o=c.gifter)||void 0===o?void 0:o.handle),ef=async()=>{if(!eo){eu("Please enter your email");return}ed(!0);try{var e,t;(0,S.j)(S.FP.ACCEPT_GIFT_MODAL_CTA_CLICKED,{variant:p,gifter_user_id:null===(e=c.gifter)||void 0===e?void 0:e.id,has_sender_token:!!(0,R.x)(window._preloads.original_url,"senderToken")});let i=await (0,P.rd)("/api/v1/viral_gifts/create_for_email",{method:"POST",json:(0,n._)({email:eo},ev&&(0,R.x)(window._preloads.original_url,"senderToken")&&{senderToken:(0,R.x)(window._preloads.original_url,"senderToken")})}),o=null==i?void 0:null===(t=i.gift)||void 0===t?void 0:t.id;if(o)eh(o),ea(!0),eu(null),g&&setTimeout(()=>{window.location.href=(0,A.Hs2)({giftId:o}),s()},1e3);else throw Error()}catch(e){(0,I.zx)(e)?eu((0,I.zx)(e)):eu("Something went wrong. Please try again.")}ed(!1)},eb=er?h("Finish activating your guest pass in the Substack app"):ev?m(U(),d.name):"author_focused"===p?m(J(),c.days):m(W(),d.author_name,c.days,d.name),ey=(0,r.BX)(r.HY,{children:[ev?(0,r.tZ)(T.qE,{user:c.gifter,size:80}):"author_focused"===p&&d.author_photo_url?(0,r.tZ)(T.qE,{user:{photo_url:d.author_photo_url},size:80}):(0,r.tZ)(E.wk,{logoUrl:d.logo_url,size:64,radius:"sm"}),(0,r.tZ)(q.xv.H3,{textAlign:"center",fontWeight:"heavy",color:"white",paddingTop:12,children:ev?eZ?m(j(),eZ):m(Y()):"author_focused"===p?m(V(),d.author_name||d.name):d.name}),(0,r.tZ)(q.xv.B3,{className:O.guestPassText,children:c.value?m(G(),c.days,c.value):m(K(),c.days)})]});return(0,r.tZ)(L.u_,{isOpen:l,onClose:s,width:g?360:500,position:g?"bottom":"default",className:g?"":O.giftModal,children:(0,r.BX)(M.tu,{alignItems:"stretch",paddingBottom:48*!g,children:[!g&&(0,r.tZ)(M.tu,{className:v()(O.giftBackground,O.giftBackgroundHeader),children:(0,r.BX)(M.tu,{justifyContent:"center",alignItems:"center",gap:4,children:[ey,(0,r.tZ)(N.hU,{rounded:!0,onClick:s,"aria-label":h("Close"),priority:"tertiary",className:O.headerCloseButton,children:(0,r.tZ)(f.Z,{size:20})})]})}),(0,r.tZ)(M.tu,{alignItems:"stretch",maxWidth:g?void 0:400,style:{margin:"auto"},children:(0,r.BX)(M.tu,{paddingTop:24,paddingX:{mobile:24,desktop:0},paddingBottom:{mobile:24,desktop:0},gap:8,children:[g&&(0,r.tZ)(M.tu,{className:O.giftBackground,justifyContent:"center",alignItems:"center",gap:4,children:ey}),(0,r.tZ)(q.xv.H4,{weight:"semibold",fontStyle:"normal",textAlign:"center",children:eb}),(0,r.tZ)(q.xv.B3,{color:"secondary",align:"center",paddingBottom:16,children:g?em?h("Download the Substack app to claim your guest pass"):ev?m(Q(),c.days):h("Subscribe and download the Substack app to claim your guest pass"):er?h("Available for iOS and Android"):ev?m($(),c.days):h("Subscribe free to claim your guest pass")}),em||er?!g&&er&&ep?(0,r.tZ)(M.tu,{alignItems:"center",gap:16,children:(0,r.tZ)(M.hs,{className:O.qrCode,padding:20,children:(0,r.tZ)(b.AppStoreQrCode,{size:142,utm_campaign:"accept_gift",utm_source:"accept_gift_modal",abTestingId:u,openUrl:(0,A.Hs2)({giftId:ep})})})}):er?(0,r.BX)(M.gq,{gap:8,alignItems:"center",justifyContent:"center",children:[(0,r.tZ)(y.Z,{isStatic:!0,height:24,fill:"#187F22",stroke:"#187F22"}),(0,r.tZ)(q.xv.B3,{color:"secondary",align:"center",translated:!0,children:"Subscribed"})]}):(0,r.tZ)(_.h,{children:(0,r.tZ)(N.zx,{priority:"primary",onClick:ef,disabled:es,children:ev?eZ?m(ee(),eZ):m(et()):m(ei(),d.author_name)})}):(0,r.BX)(M.tu,{gap:24,className:O.emailInputWrapper,children:[(0,r.BX)(M.gq,{justifyContent:"center",alignItems:"center",gap:0,style:{borderRadius:8},children:[(0,r.tZ)("input",{className:v()("pencraft",D.Z.emailInput,O.emailInput),style:{border:"1px solid var(--color-utility-detail)"},type:"text",value:eo,onInput:e=>el(e.currentTarget.value),placeholder:h("Your email"),tabIndex:-1}),(0,r.tZ)(N.zx,{disabled:es,className:O.acceptButton,priority:"primary",onClick:ef,children:h("Accept gift")})]}),(0,r.tZ)(C.fJ,{className:O.tos,publication:d})]}),ec&&(0,r.tZ)(q.xv.B4,{align:"center",style:{color:"red"},children:ec})]})})]})})};var eo=i(31122),el=i(42695),er=i(90470),ea=i(8971),es=i(80569),ed=i.n(es),ec=i(74626),eu=i(13561),ep=i(7523),eh=i(14952),em=i(40647),eg=i(49688),ev=i(7882),eZ=i(17391),ef=i(89263),eb=i(60308);let ey={container:"container-liQ2Od",open:"open-NsIljP",chevronButton:"chevronButton-xCmt1F",subscribeButton:"subscribeButton-KC1zy_"},e_=()=>{let[e,t]=(0,a.eJ)({hedDesktop:"Support independent journalism",hedMobile:"Support independent journalism",dekDesktop:"Join *The Free Press* today for unlimited access",dekMobile:"Join *The Free Press* today for unlimited access",ctaCopy:"Subscribe now",ctaLink:"/subscribe",isBlueTheme:!1,enabledForNonPaid:!0}),[i,n]=(0,a.eJ)(!0),{result:o,refetch:l}=(0,ev.ib)({pathname:"/api/v1/islands/client/config",query:{key:"toaster_data"},auto:!0});return(0,a.d4)(()=>{var e;(null==o?void 0:null===(e=o.config)||void 0===e?void 0:e.value)&&(t(o.config.value),n(!1))},[o]),{hedDesktop:e.hedDesktop,hedMobile:e.hedMobile,dekDesktop:e.dekDesktop,dekMobile:e.dekMobile,ctaCopy:e.ctaCopy,ctaLink:e.ctaLink,isBlueTheme:e.isBlueTheme,enabledForNonPaid:e.enabledForNonPaid,refetch:l,isLoading:i}},ew=e=>{var t;let{isOpen:i,onClose:n,onSave:o,currentValues:l}=e,[s,d]=(0,a.eJ)(l.hedDesktop),[c,u]=(0,a.eJ)(l.dekDesktop),[p,h]=(0,a.eJ)(l.hedMobile),[m,g]=(0,a.eJ)(l.dekMobile),[v,Z]=(0,a.eJ)(l.isBlueTheme),[f,b]=(0,a.eJ)(l.ctaCopy),[y,_]=(0,a.eJ)(l.ctaLink),[w,C]=(0,a.eJ)(null===(t=l.enabledForNonPaid)||void 0===t||t),[B,k]=(0,a.eJ)(!1),x=(0,a.sO)(null),S=async e=>{e.preventDefault(),k(!0);try{await ed().put("/api/v1/islands/client/config?key=toaster_data").send({value:{hedDesktop:s,hedMobile:p,dekDesktop:c,dekMobile:m,ctaCopy:f,ctaLink:y,isBlueTheme:v,enabledForNonPaid:w}}),o(),n()}catch(e){console.error("Failed to save toaster config:",e),alert("Failed to save changes. Please try again.")}finally{k(!1)}};return(0,a.d4)(()=>{var e;d(l.hedDesktop),u(l.dekDesktop),h(l.hedMobile),g(l.dekMobile),Z(l.isBlueTheme),b(l.ctaCopy),_(l.ctaLink),C(null===(e=l.enabledForNonPaid)||void 0===e||e)},[l]),(0,r.tZ)(eu.A,{initialFocus:x,isOpen:i,width:500,onClose:n,children:(0,r.BX)(M.tu,{gap:24,padding:32,children:[(0,r.tZ)(M.gq,{alignItems:"center",justifyContent:"space-between",children:(0,r.tZ)(ep.Z,{preset:"h4-serif",children:"Edit Footer Banner"})}),(0,r.tZ)("form",{onSubmit:S,children:(0,r.BX)(M.tu,{gap:20,children:[(0,r.tZ)(ef.n,{inputRef:x,label:"Heading",placeHolder:"Support independent journalism",value:s,onChange:d}),(0,r.tZ)(ef.n,{label:"Description",placeHolder:"Join *The Free Press* today for unlimited access",value:c,onChange:u}),(0,r.tZ)(ef.n,{label:"Heading (mobile)",placeHolder:"Support independent journalism",value:p,onChange:h}),(0,r.tZ)(ef.n,{label:"Description (mobile)",placeHolder:"Join *The Free Press* today for unlimited access",value:m,onChange:g}),(0,r.tZ)(ef.n,{label:"Button Text",placeHolder:"Subscribe now",value:f,onChange:b}),(0,r.tZ)(ef.n,{label:"Button Link",placeHolder:"/subscribe",value:y,onChange:_}),(0,r.tZ)(eZ.j,{label:"Blue Theme",value:v,onChange:Z}),(0,r.tZ)(eZ.j,{label:"Enable for non-paid users",value:w,onChange:C}),(0,r.BX)(M.gq,{gap:12,justifyContent:"end",children:[(0,r.tZ)(N.zx,{disabled:B,priority:"secondary",onClick:n,children:"Cancel"}),(0,r.tZ)(N.zx,{disabled:B,priority:"primary",type:"submit",children:B?"Saving...":"Save Changes"})]})]})})]})})},eC=()=>{let[e,t]=(0,a.eJ)(!0),[i,o]=(0,a.eJ)(!1),[l,s]=(0,a.eJ)(!1),{hedDesktop:d,dekDesktop:c,isBlueTheme:u,hedMobile:p,dekMobile:m,ctaCopy:g,ctaLink:v,enabledForNonPaid:Z,refetch:f,isLoading:b}=e_(),y=(0,x.aF)(),_=(0,eh.Ij)(),{isMobile:w}=(0,h.v9)(),{getConfigFor:C}=(0,em.xR)(),B=C("thefp_enable_dynamic_toaster"),k=w?p:d,{markdownProps:S}=(0,eg.V)(w?m:c),P=(null==y?void 0:y.is_admin)&&!l,I=!(null==y?void 0:y.is_subscribed),X=null==y?void 0:y.is_admin;if(!(Z&&I&&(!b||X))&&!(null==y?void 0:y.is_admin)||!B)return null;let T=()=>(0,r.tZ)(N.hU,{priority:"tertiary",size:"sm",style:{position:"fixed",left:16,bottom:16,zIndex:10,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)"},title:"Preview toaster",onClick:()=>s(!l),children:(0,r.tZ)(el.Z,{size:20})});if(P)return(0,r.tZ)(T,{});let L=!e,E="h5-sans";e||(E="lg-preview-byline");let q=_&&"undefined"!=typeof window?(0,eb.W1P)(_,{addBase:!0,next:(0,eb.n1t)(window.location.href,{follow:!0}),utm_source:F.b3.fixedFooterPaywall,utm_medium:F.lP.web}):"/subscribe";return(0,r.BX)(r.HY,{children:[(null==y?void 0:y.is_admin)&&(0,r.tZ)(T,{}),(0,r.BX)("div",{className:"".concat(ey.container," ").concat(e?ey.open:""),style:{backgroundColor:u?"var(--color-blue)":"white"},children:[(0,r.BX)(M.hs,{alignItems:"center",direction:w?"column":"row",gap:w?8:24,justifyContent:"center",style:{width:w?"100%":"auto"},children:[(0,r.BX)(M.tu,{gap:8*!!w,children:[(0,r.tZ)(ep.Z,{align:w?"center":"left",color:u?"white":"primary",preset:E,children:k}),e&&(0,r.tZ)(ep.Z,(0,n._)({align:w?"center":"left",color:u?"white":"primary",preset:"d3-serif"},S))]}),(0,r.tZ)(ec._,{className:ey.subscribeButton,href:"/subscribe"===v?q:v,native:!0,size:"md",style:{width:w?"100%":"auto",textDecoration:L?"underline":"none",color:L?u?"white":"var(--color-accent-themed)":void 0,padding:L?"0":void 0},variant:L?"tertiary":"primary-accent",children:g})]}),(null==y?void 0:y.is_admin)&&(0,r.tZ)(N.hU,{priority:"tertiary",size:"sm",style:{position:"absolute",right:0,bottom:0},title:"Edit footer banner",onClick:()=>o(!0),children:(0,r.tZ)(er.Z,{size:20,style:{color:u?"white":"var(--color-primary)"}})}),(0,r.tZ)(N.kG,{className:ey.chevronButton,onClick:()=>t(!e),children:(0,r.tZ)(ea.Z,{style:{transform:e?"rotate(0deg)":"rotate(180deg)",color:u?"white":"var(--color-primary)"}})})]}),(null==y?void 0:y.is_admin)&&(0,r.tZ)(ew,{currentValues:{hedDesktop:d,dekDesktop:c,hedMobile:p,dekMobile:m,ctaCopy:g,ctaLink:v,isBlueTheme:u,enabledForNonPaid:Z},isOpen:i,onClose:()=>o(!1),onSave:()=>{f()}})]})};var eB=i(61264),ek=i(14773),ex=i(17043);let eS=e=>{let{posts:t}=e,{isMobile:i,isTablet:l}=(0,h.v9)();return(0,r.BX)("div",{className:v()("container-d4zBPi",{"containerTablet-tpTBc6":l,"containerMobile-VpmHH6":i}),children:[(0,r.BX)(M.gq,{paddingLeft:20,position:"relative",children:[(0,r.tZ)("div",{className:"latestArrowEndContainer-gx613b",children:(0,r.tZ)("img",{className:"latestArrowEnd-kWO5qL",src:(0,ex.zF)("".concat((0,ek.ZJ)(),"/img/thefp/more-arrow-end-3.svg"),430)})}),(0,r.tZ)("img",{className:"latestArrow-Z7Zn2b",src:(0,ex.zF)("".concat((0,ek.ZJ)(),"/img/thefp/more-arrow.svg"),430)})]}),t.map((e,t)=>(0,r.tZ)(M.gq,(0,o._)((0,n._)({},i?{borderTop:0===t?void 0:"detail-themed"}:{borderLeft:"detail-themed"}),{paddingX:20,paddingY:i?16:24,children:(0,r.tZ)(eB.X,{hideUfi:!0,post:e,variant:"mini"})})))]})};var eP=i(4767),eI=i(58023),eX=i(38756),eT=i(68648),eN=i(74312);let eM={container:"container-8llGPE",editButtonContainer:"editButtonContainer-PKbNaQ",introModule:"introModule-WDoR9y",introModuleText:"introModuleText-tL6vMV",introModuleImage:"introModuleImage-b5tjpb"},eL=e=>{let{posts:t,showIntroModule:n=!1}=e,{isMobile:o,isTablet:l}=(0,h.v9)(),[s,d]=(0,a.eJ)(!1),{pub:c,user:u}=(0,eT.ZT)(),p=t.slice(6,6+(l?3:5)),m="top-layout-container";return o?(0,r.tZ)(ez,{posts:t,showIntroModule:n}):(0,r.BX)(M.tu,{className:eM.container,gap:64,paddingBottom:l?40:64,children:[(null==u?void 0:u.is_admin)&&(0,r.tZ)("div",{className:eM.editButtonContainer,children:(0,r.tZ)(N.hU,{priority:"primary-mono",size:"sm",onClick:()=>{d(!0)},children:(0,r.tZ)(er.Z,{size:16})})}),(0,r.tZ)("div",{id:m,children:(0,r.tZ)(eq,{posts:t,showIntroModule:n})}),(0,r.tZ)(eS,{posts:p}),s&&(0,r.tZ)(eN.cr,{module:"@/frontend/components/thefp/EditPinsModal",posts:t.slice(0,6),pub:c,renderPreview:e=>{let{posts:t,showIntroModule:i}=e;return(0,r.tZ)(eq,{posts:t,showIntroModule:i})},resolve:e=>e.EditPinsForHomepageHeroModal,topLayoutContainerId:m,whileLoading:(0,r.tZ)("div",{}),onClose:()=>{d(!1)},onRequest:()=>i.e("9314").then(i.bind(i,91076))})]})},eE=()=>(0,r.BX)("a",{className:eM.introModule,href:"/intro-to-tfp",native:!0,children:[(0,r.tZ)("img",{alt:"The Free Press",className:eM.introModuleImage,src:(0,eb.zF4)("".concat((0,ek.ZJ)(),"/img/thefp/fp-flag-red.png"))}),(0,r.tZ)(ep.Z,{align:"center",className:eM.introModuleText,preset:"h7-serif",children:"An\xa0Introduction\xa0to The\xa0Free\xa0Press"})]}),eq=e=>{let{posts:t,showIntroModule:i=!1}=e,{isTablet:l,isDesktop:a}=(0,h.v9)(),s={align:"center"};return(0,r.BX)(eX.A,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,r.BX)(eI.Z,{children:[(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{align:"center",post:t[0],variant:"large"})),l&&(0,r.BX)(M.gq,{gap:40,children:[t[1]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideImage:!0,post:t[1],variant:"square"})),t[3]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideImage:!0,post:t[3],variant:"square"}))]})]}),l&&(0,r.BX)(eI.Z,{children:[i?(0,r.tZ)(eE,{}):t[2]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideDescription:!0,post:t[2],variant:"square"})),t[4]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{post:t[4],variant:"square"})),t[5]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{post:t[5],variant:"square"}))]}),a&&(0,r.BX)(eI.Z,{paddingTop:40,children:[t[1]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideDescription:!0,hideImage:!0,post:t[1],variant:"square"})),i?(0,r.tZ)(eE,{}):t[2]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideDescription:!0,post:t[2],variant:"square"})),t[3]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{hideImage:!0,post:t[3],variant:"square"}))]}),a&&(0,r.BX)(eI.Z,{paddingTop:40,children:[t[4]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{post:t[4],variant:"square"})),t[5]&&(0,r.tZ)(eB.X,(0,o._)((0,n._)({},s),{post:t[5],variant:"square"}))]})]})},ez=e=>{let{posts:t,showIntroModule:i=!1}=e,n=t.slice(6,11);return(0,r.BX)(M.tu,{gap:32,paddingBottom:64,children:[t[0]&&(0,r.tZ)(eB.X,{align:"left",post:t[0],variant:"large"}),i?(0,r.tZ)(eE,{}):t[2]&&(0,r.tZ)(eB.X,{post:t[2],variant:"square"}),(0,r.BX)(eP.E,{children:[t[1]&&(0,r.tZ)(eB.X,{post:t[1],variant:"square"}),t[3]&&(0,r.tZ)(eB.X,{post:t[3],variant:"square"}),t[4]&&(0,r.tZ)(eB.X,{post:t[4],variant:"mini"}),t[5]&&(0,r.tZ)(eB.X,{post:t[5],variant:"mini"})]}),(0,r.tZ)(eS,{posts:n})]})};var eR=i(56629),eA=i(97794);let eF="column-HNiwn6",eO=e=>{let{leftContent:t,rightContent:i,mobileContent:n}=e,{isMobile:o}=(0,h.v9)();return o&&n?n:(0,r.BX)("div",{className:"container-dOq2Em",children:[(0,r.tZ)("div",{className:v()(eF,"left-jXwsmK"),children:t}),(0,r.tZ)(M.gq,{borderRight:"detail",style:{margin:"8px 0"}}),(0,r.tZ)("div",{className:v()(eF,"right-koj6uE"),children:i})]})};var eD=i(80542),eH=i(15400),eU=i(62841);let eJ=eU.zM.feature.postCount.desktop,eW=e=>{let{noFirstImage:t,posts:i,pub:l,user:a,utm:s,onChange:d}=e;return(0,r.tZ)(eH.B,(0,o._)((0,n._)({},{pub:l,user:a,utm:s,onChange:d}),{hideHorizontalDividers:!0,posts:i,variant:t?"two-three-two":"five-up"}))},ej=e=>(0,r.tZ)(eW,(0,o._)((0,n._)({},e),{noFirstImage:!0})),eY=e=>{let{children:t,href:i,testid:n,onClick:o}=e;return(0,r.tZ)(q.xv.Meta,{as:"a",className:"link-dTkJzr",color:"pub-primary-text","data-testid":n,href:i,native:!0,onClick:o?e=>{e.preventDefault(),o()}:void 0,children:t})};var eV=i(17836),eG=i(6070);let eK={pillarTitle:"pillarTitle-JAEuZo"},eQ=e=>{let{isLatestPosts:t,pub:i}=e,{iString:n}=(0,k.M1)(),o=(0,eG.kb)({pub:i}),l=n(t?"Latest":"Most Popular");return(0,r.BX)(M.gq,{alignItems:"baseline",justifyContent:"space-between",paddingX:8,children:[o?(0,r.tZ)("div",{className:eK.pillarTitle,children:l}):(0,r.tZ)(eV.R,{children:l}),!t&&(0,r.tZ)(eY,{href:(0,eb.sai)(i,t?void 0:{params:{sort:"top"}}),children:n("View all")})]})};var e$=i(60885);let e0=e=>{let{noFirstImage:t,posts:i,replaceTopPostsWithLatest:n,topPosts:o}=e,{isTablet:l,isMobile:a}=(0,h.v9)(),{pub:s}=(0,eT.ZT)();if(a)return null;let d=t?5:3,c=n?i.slice(0,d):i,u=n?i.slice(d):o;return(0,r.BX)(eX.A,{showContentBelowOnMobile:!0,variant:"full-width-with-border-and-sidebar",children:[(0,r.tZ)(eH.B,{flex:"grow",hideHorizontalDividers:!0,posts:c,variant:t?"two-small-three-medium":"two-small-one-large"}),u&&(0,r.tZ)(e$.QI,{pub:s,showPubPins:!1,showSectionPins:!1,children:(0,r.BX)(M.tu,{gap:12,paddingTop:8,children:[(0,r.tZ)(eQ,{isLatestPosts:n,pub:s}),(0,r.tZ)(eH.B,{hideHorizontalDividers:!0,posts:u.slice(0,l?3:6),variant:l?"mini-row":(0,eG.kb)({pub:s})?"one-column-list-flex":"one-column-list"})]})})]})},e1=e=>(0,r.tZ)(e0,(0,o._)((0,n._)({},e),{noFirstImage:!0}));var e4=i(61254);let e2=e=>{let{posts:t}=e;return t.length?(0,r.BX)(M.tu,{gap:12,children:[t[0]&&(0,r.tZ)(eD.G,{post:t[0],variant:"mobile-hero"}),t.length>1&&(0,r.BX)(M.tu,{paddingX:16,children:[(0,r.tZ)(e4.iz,{paddingY:4}),(0,r.tZ)(eH.B,{posts:t.slice(1),variant:"two-column-list"})]})]}):null},e8=e=>{let{isSmall:t,posts:i}=e;return i.length&&i[0]?(0,r.tZ)(eX.A,{variant:t?"three-column-width":"full-width",children:(0,r.tZ)(eD.G,{post:i[0],variant:t?"jumbo-small":"jumbo"})}):null},e6=e=>(0,r.tZ)(e8,(0,o._)((0,n._)({},e),{isSmall:!0}));var e9=i(74805),e3=i(70647),e5=i(51213);let e7={magaziney:e0,"magazine-5":eW,newspaper:e8,feature:e=>{let{posts:t}=e,{isTablet:i}=(0,h.v9)();return(0,r.tZ)(eO,{leftContent:t[0]?(0,r.tZ)(eD.G,{imageAspectRatio:"wide",post:t[0],variant:"large"}):(0,r.tZ)("div",{}),mobileContent:(0,r.tZ)(eH.B,{posts:t.slice(0,eJ),variant:"two-column-list"}),rightContent:(0,r.tZ)(eH.B,{hideHorizontalDividers:!0,posts:t.slice(1,eJ),variant:i?"one-column-list":"two-column-list"})})},podcast:e=>{var t,i,n;let{columns:o,hasMiniPostsRowUnderneath:l,heroAlignment:a,posts:s,showPodcastLinks:d,user:c}=e,{isMobile:u}=(0,h.v9)(),{pub:p}=(0,eT.ZT)(),m=p.podcast_description,g=p.podcast_art_url,v=p.podcast_title,Z=l?24:40;return u?(0,r.tZ)(M.tu,{paddingBottom:24,children:(0,r.tZ)(e5.W,{description:m,imageUrl:g,name:v,post:null!==(t=s[0])&&void 0!==t?t:null,pub:p,section:null,showPodcastLinks:d,user:c})}):"center"===a?(0,r.tZ)(M.tu,{paddingBottom:Z,children:(0,r.tZ)(e3.p,{description:m,imageUrl:g,name:v,post:null!==(i=s[0])&&void 0!==i?i:null,pub:p,section:null,showPodcastLinks:d,user:c})}):(0,r.tZ)(M.tu,{paddingBottom:Z,children:(0,r.tZ)(e9.a,{columns:o,description:m,imageUrl:g,name:v,post:null!==(n=s[0])&&void 0!==n?n:null,pub:p,section:null,showPodcastLinks:d,user:c})})}},te=e=>{var{firstPostMissingImage:t,bodyVariant:i,isMobile:o,variant:a}=e,s=(0,l._)(e,["firstPostMissingImage","bodyVariant","isMobile","variant"]);let d=e7[a],c={};return(o&&"podcast"!==a?d=e2:"newspaper"===a&&"list"===i?d=e6:"magaziney"===a&&t?d=e1:"magazine-5"===a&&t?d=ej:"podcast"===a&&(c.columns="list"===i?3:4),d)?(0,r.tZ)(d,(0,n._)({},s,c)):(console.error("Component not found, add one to HomeHero"),null)};var tt=i(12293);let ti=["list","grid","grid-groups","custom"],tn=()=>{let e=(0,tt.j)();return ti.reduce((t,i)=>(0,o._)((0,n._)({},t),{[i]:e[i].postCount}),{})};var to=i(33578),tl=i(7739),tr=i.n(tl),ta=i(89734),ts=i.n(ta),td=i(77705);let tc=e=>{let{homepageLinks:t,pub:i,renderGroup:n,renderLink:o}=e,l=tr()(t,"group"),a=ts()(Object.keys(l),e=>l[e][0].rank);return(0,r.tZ)(r.HY,{children:a.map(e=>(0,r.tZ)(tu,{group:e,items:l[e],newTab:!0,pub:i,renderGroup:n,renderLink:o}))})},tu=e=>{let{group:t,items:i,newTab:l,pub:a,renderGroup:s,renderLink:d}=e,c=[],u=null;l&&(u="_blank",c.push("noopener")),(!a||(null==a?void 0:a.no_follow))&&c.push("ugc nofollow");let p={rel:c.join(" "),target:u},h=(0,r.tZ)(r.HY,{children:i.map(e=>{let{title:t,url:i,subtitle:l,subtitleUrl:a,edit:s,className:c}=e;return d?d({title:t,url:i,subtitle:l,linkProps:p}):(0,r.BX)("div",{className:v()("home-right-col",c),children:[s?(0,r.BX)("div",{className:"home-right-col-editable",children:[(0,r.tZ)("a",{className:"home-right-col-title",href:i,native:!0,children:t}),(0,r.tZ)(N.hU,{href:s,priority:"quaternary",size:"sm",title:"edit",children:(0,r.tZ)(td.Z,{size:20})})]}):(0,r.tZ)("a",(0,o._)((0,n._)({className:"home-right-col-title",href:i,native:!0},p),{children:t})),l&&(0,r.tZ)("a",(0,o._)((0,n._)({className:"home-right-col-sub",href:a||i,native:!0},p),{children:l}))]})})});return s?s({title:t,links:h}):(0,r.BX)("div",{className:"home-right-group",children:[(0,r.tZ)("div",{className:"home-right-group-title",children:t}),h]})};var tp=i(71897),th=i(71068),tm=i(65433);let tg=e=>{var{body:t,clampTitle:i,image:a,linkProps:s,pub:d,subtitle:c,title:u,url:p}=e,h=(0,l._)(e,["body","clampTitle","image","linkProps","pub","subtitle","title","url"]);let{size:m,lineHeight:g}=(0,tp.A)({preset:"sm",pub:d}),v="undefined"==typeof window,Z=(0,r.tZ)(tm.J,{hoverBackground:"light",padding:8,radius:"sm",children:(0,r.BX)(M.gq,(0,o._)((0,n._)({},h),{gap:16,children:[a&&(0,r.tZ)(th.xu,{alignSelf:"start",children:a}),(0,r.BX)(M.tu,{alignSelf:"stretch",gap:8,justifyContent:"center",children:[(0,r.BX)(M.tu,{gap:2,style:{wordBreak:"break-word"},children:[(0,r.tZ)(q.xv,{clamp:i,color:"pub-primary-text",font:"pub-headings",style:{fontSize:m,lineHeight:"".concat(g,"px")},children:v?(0,r.tZ)("a",(0,o._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:u})):u}),c&&(0,r.tZ)(q.xv.B4,{clamp:3,color:"pub-secondary-text",size:12,children:c})]}),t&&(0,r.tZ)("div",{children:t})]})]}))});return v?Z:(0,r.tZ)("a",(0,o._)((0,n._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:Z}))},tv=e=>{let{linkProps:t,pub:i,subtitle:l,title:a,url:s}=e,{isMobile:d}=(0,h.v9)(),{size:c,lineHeight:u}=(0,tp.A)({preset:"sm",pub:i});return(0,r.tZ)("a",(0,o._)((0,n._)({className:"homepageLink-cE_DZ1",href:s},t),{children:(0,r.tZ)(M.tu,{gap:8,paddingX:8*!d,children:(0,r.BX)(M.tu,{style:{wordBreak:"break-word"},children:[(0,r.tZ)(q.xv,{className:"title-QddVTB",color:"pub-primary-text",font:"pub-body",style:{fontSize:c,lineHeight:"".concat(u,"px")},children:a}),l&&(0,r.tZ)(q.xv.B4,{clamp:3,color:"pub-secondary-text",size:12,children:l})]})})}))},tZ=e=>{let{hideHeaderBorder:t}=e,{homepageLinks:i}=(0,a.qp)(X.p),{pub:n}=(0,eT.ZT)(),{isMobile:o}=(0,h.v9)();return i&&0!==i.length?(0,r.tZ)(M.tu,{"data-testid":"homepage-links",gap:24,children:(0,r.tZ)(tc,{homepageLinks:i,pub:n,renderGroup:e=>{let{title:i,links:n}=e;return(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(M.gq,{alignItems:"center",paddingX:8*!o,children:(0,r.tZ)(M.gq,{borderBottom:t?void 0:"detail-themed",flex:"grow",paddingBottom:t?void 0:8,children:(0,r.tZ)(eV.R,{children:i})})}),(0,r.tZ)(M.tu,{gap:12,children:n})]})},renderLink:e=>{let{linkProps:t,subtitle:i,title:o,url:l}=e;return(0,r.tZ)(tv,{linkProps:t,pub:n,subtitle:i,title:o,url:l})}})}):null},tf=()=>{let{iString:e}=(0,k.M1)();return(0,r.tZ)(th.xu,{className:"container-bP27QM",flex:"grow",paddingX:16,paddingY:20,radius:"sm",children:(0,r.tZ)(q.xv.B4,{color:"pub-secondary-text",children:e("Coming soon")})})};var tb=i(79408);function ty(){let e=(0,Z._)(["View all ",""]);return ty=function(){return e},e}let t_=e=>{let{showEmptyState:t,hideHeaderBorder:i}=e,{iString:l,iTemplate:s}=(0,k.M1)(),{numRecommendations:d,recommendations:c}=(0,a.qp)(X.p),{pub:u,user:p}=(0,eT.ZT)(),{isMobile:m}=(0,h.v9)();return c&&(0!==c.length||t)?(0,r.tZ)(tb.C,{numRecommendations:d,pub:u,recommendations:c,render:e=>{let{recommendations:t,canManage:n,manageUrl:o,hasMore:a,hasMoreUrl:c,recommendationsCount:u}=e;return(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(M.gq,{paddingX:8*!m,children:(0,r.BX)(M.gq,{alignItems:"baseline",borderBottom:i?void 0:"detail-themed",flex:"grow",justifyContent:"space-between",paddingBottom:i?void 0:8,children:[(0,r.tZ)(eV.R,{children:l("Recommendations")}),n?(0,r.tZ)(eY,{href:o,children:l("Manage")}):a?(0,r.tZ)(eY,{href:c,testid:"homepage-recommendations-view-all",children:s(ty(),null!=u?u:0)}):null]})}),(0,r.tZ)(M.tu,{"data-testid":"homepage-recommendations",gap:4,children:0===d?(0,r.tZ)(M.gq,{paddingX:8,children:(0,r.tZ)(tf,{})}):t})]})},renderRecommendation:e=>{let{url:t,onClick:i,pubAvatarProps:l,pubName:a,pubAuthor:s}=e;return(0,r.tZ)(tg,{"data-testid":"homepage-recommendation",image:(0,r.tZ)(E.jM,(0,o._)((0,n._)({},l),{size:40})),linkProps:{onClick:i,target:"_blank",rel:"noopener"},pub:u,subtitle:s,title:a,url:t})},user:p}):null},tw={container:"container-rEYFE5",pubLogo:"pubLogo-DpnXOb"},tC=()=>{let{freeSignup:e,freeSignupEmail:t}=(0,a.qp)(X.p),{pub:i,user:n}=(0,eT.ZT)(),{isMobile:o}=(0,h.v9)();return(0,r.BX)(M.tu,{className:tw.container,gap:24,paddingX:8*!o,children:[(0,r.BX)(M.tu,{gap:8,children:[i.logo_url&&(0,r.tZ)("img",{alt:i.name,className:tw.pubLogo,"data-testid":"homepage-sidebar-pub-logo",src:(0,eb.zF4)(i.logo_url,88)}),(0,r.BX)(M.tu,{gap:2,children:[(0,r.tZ)(eV.R,{children:i.name}),i.hero_text&&(0,r.tZ)(q.xv,{color:"pub-secondary-text",font:"text",lineHeight:20,size:12,children:i.hero_text})]})]}),(0,r.tZ)(w.Z,{align:"left",expectTruncation:!0,freeSignup:e,freeSignupEmail:t,isStatic:!1,pub:i,source:"magaziney-home-page",user:n})]})},tB=()=>{let{pub:e}=(0,eT.ZT)(),{isMobile:t}=(0,h.v9)();return(0,r.BX)(M.tu,{gap:40,children:[!t&&(0,r.tZ)(tC,{}),e.show_recs_on_homepage&&(0,r.tZ)(t_,{}),(0,r.tZ)(tZ,{})]})};var tk=i(18446),tx=i.n(tk),tS=i(27057),tP=i(86603),tI=i(29422);let tX={homePageGroupsGrid:"homePageGroupsGrid-dfyTM6",emptyRowsView:"emptyRowsView-Yo2IhI",emptyGroupView:"emptyGroupView-kLS4e3",emptyContentIcon:"emptyContentIcon-mKbS2t"},tT=e=>"email_from_name"in e,tN=e=>{var t;let[i,s]=(0,a.eJ)(null!==(t=e.postsByGroupId)&&void 0!==t?t:{}),[d,c]=(0,a.eJ)(!1),{posts:u,bodyPostGroups:p,hasEmptyGroupOptions:h,setHasInvalidGroupSelection:m}=e,g=(0,l._)(e,["posts","bodyPostGroups","hasEmptyGroupOptions","setHasInvalidGroupSelection"]);(0,a.d4)(()=>{let e=async e=>{let t=(0,n._)({},i);for(let i of e){let e={limit:6};if(tT(i)?e.section_id=i.id:e.post_tag_id=i.id,!t[i.id]){let{body:n}=await ed().get("/api/v1/archive").query(e);t[i.id]=n}}tx()(t,i)||(s(t),c(!1))};0===Object.keys(i).length&&p&&(null==p?void 0:p.length)>0&&(c(!0),e(p))},[p,s,i]);let v=(0,a.I4)(e=>{var t;let l=null!==(t=e.post_tag_id)&&void 0!==t?t:e.section_id;if(!l)throw Error("Must supply section_id or post_tag_id");(!i||!i[l])&&ed().get("/api/v1/archive").query((0,n._)({limit:3},e)).then(e=>{let{body:t}=e;s((0,o._)((0,n._)({},i),{[l]:t}))})},[i,s]),Z=(0,a.I4)(e=>{var t;return i&&(!i||0!==Object.keys(i).length)&&i[e]?null===(t=i[e])||void 0===t?void 0:t.slice(0,3):null},[i]);return h||!p||(null==p?void 0:p.length)===0?m?(m(!0),(0,r.tZ)(tM,{message:"No groups selected"})):(0,r.BX)(M.tu,{children:[(0,r.tZ)(tL,{pub:e.pub}),(0,r.tZ)(eH.B,(0,o._)((0,n._)({},g),{posts:u.slice(0,3),variant:"three-column-grid"}))]}):(0,r.BX)("div",{className:tX.homePageGroupsGrid,children:[p.map(t=>{let i=Z(t.id);return(0,r.BX)(M.tu,{paddingBottom:24,children:[(0,r.tZ)(tL,{pub:e.pub,row:t}),(0,r.tZ)(tE,(0,o._)((0,n._)({},g),{groupModel:t,loadingSync:d,posts:u,postsForId:i,setHasInvalidGroupSelection:m,onIntersectCallback:()=>{v(tT(t)?{section_id:t.id}:{post_tag_id:t.id})}}))]})}),p.length<3?(0,r.BX)(M.tu,{children:[(0,r.tZ)(tL,{pub:e.pub}),(0,r.tZ)(eH.B,(0,o._)((0,n._)({},g),{posts:u.slice(0,3),variant:"three-column-grid"}))]}):null]})},tM=e=>{let{groupModel:t,message:i}=e;return(0,r.tZ)(th.xu,{paddingBottom:40,paddingTop:8,children:(0,r.BX)(M.tu,{alignItems:"center",className:v()(tX.homePageGroupsGrid,t?tX.emptyGroupView:tX.emptyRowsView),justifyContent:"center",children:[(0,r.tZ)(tS.Z,{className:tX.emptyContentIcon}),i&&(0,r.tZ)(q.xv.B4,{color:"pub-secondary-text",paddingTop:20,weight:"semibold",children:i}),t&&(0,r.BX)(q.xv.B4,{color:"pub-secondary-text",paddingTop:4,children:["Add posts to this ",tT(t)?"section":"tag"," to include it on your homepage."]})]})})},tL=e=>{var t;let{row:i,pub:n}=e,{isMobile:o}=(0,h.v9)(),l="/archive";return i&&(l=tT(i)?(0,A.Ucy)(n,{section:i}):(0,A.Mk9)(n,i)),(0,r.tZ)(M.tu,{paddingBottom:12,paddingX:8*!o,children:(0,r.BX)(M.gq,{alignItems:"center",justifyContent:"space-between",children:[(0,r.tZ)(q.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"Recent posts"}),(0,r.tZ)(eY,{href:l,children:"See all"})]})})},tE=e=>{let{onIntersectCallback:t,groupModel:i,loadingSync:s,postsForId:d,setHasInvalidGroupSelection:c}=e,u=(0,l._)(e,["onIntersectCallback","groupModel","loadingSync","postsForId","setHasInvalidGroupSelection"]),[p,h]=(0,tP.Z)();return((0,a.d4)(()=>{(null==h?void 0:h.isIntersecting)&&!s&&t()},[null==h?void 0:h.isIntersecting,t,s]),d)?0===d.length?c?(c(!0),(0,r.tZ)(tM,{groupModel:i})):(0,r.tZ)(eH.B,(0,o._)((0,n._)({},u),{posts:u.posts.slice(0,3),variant:"three-column-grid"})):(0,r.tZ)(eH.B,(0,o._)((0,n._)({},u),{posts:d,variant:"three-column-grid"})):(0,r.tZ)(tI.b,{ref:p,postCount:3,variant:"grid-groups"})};var tq=i(12620),tz=i(84864);function tR(e){let{className:t=""}=e,{iString:i,language:l}=(0,k.M1)(),{freeSignup:s,freeSignupEmail:d}=(0,a.qp)(X.p),{pub:c,user:u}=(0,eT.ZT)();return(0,r.BX)("div",{className:v()("home-sitemap",t),children:[(0,r.tZ)("h4",{className:"home-sitemap-title",children:c.name}),s||u&&u.is_free_subscribed?!(u&&u.is_subscribed)&&c.plans?(0,r.tZ)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:(0,eb.W1P)(c,{utm_source:F.b3.homeSitemap}),native:!0,children:(0,tz.getSubscribeText)(c,{language:l})}):null:(0,r.tZ)(th.xu,{paddingTop:20,children:(0,r.tZ)(tq.Z,{className:"home-sitemap-signup-form",freeSignup:s,freeSignupEmail:d,pub:c,source:"home-sitemap",user:u,onSuccess:e=>{e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,eb.n1t)("/account/login",{redirect:document.location.href,email:e.body.email})},30):c.plans?document.location.href=(0,eb.n1t)("/subscribe",(0,o._)((0,n._)({next:document.location.href,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(null==c?void 0:c.payments_state)==="enabled"?()=>null:void 0})}),(0,r.BX)("div",{className:"home-sitemap-links",children:[(0,r.tZ)("a",{href:(0,eb.d6h)(c),native:!1,children:i("About")}),(0,r.tZ)("a",{href:(0,eb.nxG)(c),children:i("Archive")}),c.has_recommendations&&(0,r.tZ)("a",{href:(0,eb.kfT)(c),native:!0,children:i("Recommendations")}),c.can_have_sitemap&&(0,r.tZ)("a",{href:(0,eb.Xbg)(c),native:!0,children:i("Sitemap")})]})]})}let tA={grid:"full-width-with-sidebar","grid-groups":"full-width-with-sidebar",list:"three-column-width-with-sidebar"},tF={grid:"three-column-grid",list:"two-column-list"},tO={grid:"full-width","grid-groups":"full-width",list:"three-column-width"},tD=e=>{var{hideImagesFromList:t,posts:i,pub:a,showSiteMap:s,source:d,user:c,variant:u,bodyPostGroups:p,postsByGroupId:m}=e,g=(0,l._)(e,["hideImagesFromList","posts","pub","showSiteMap","source","user","variant","bodyPostGroups","postsByGroupId"]);let{isMobile:v,breakpoint:Z}=(0,h.v9)(),f=tn()[u][Z],b="list"===u&&(t||i.slice(0,f).every(e=>!e.cover_image));return(0,r.BX)(e$.QI,{pub:a,showPubPins:!0,showSectionPins:!1,children:[i.length>0&&(0,r.BX)(eX.A,{showContentBelowOnMobile:!0,variant:tA[u],children:[(0,r.tZ)(to.O,(0,o._)((0,n._)({},g),{maxPosts:f,newPosts:i,pub:a,user:c,variant:u,children:e=>{let{posts:t,linkToComments:i,onClickPost:l}=e,s={hideImages:b,linkToComments:i,posts:t,pub:a,source:d,user:c,onClickPost:l};return"grid-groups"===u?(0,r.tZ)(tN,(0,o._)((0,n._)({},s),{bodyPostGroups:p,hasEmptyGroupOptions:g.hasEmptyGroupOptions,postsByGroupId:m,setHasInvalidGroupSelection:g.setHasInvalidGroupSelection})):(0,r.tZ)(eH.B,(0,o._)((0,n._)({},s),{variant:tF[u]}))}})),(0,r.tZ)(tB,{})]}),s&&(0,r.tZ)(eX.A,{variant:tO[u],children:(0,r.tZ)(M.tu,{paddingX:8*!v,children:(0,r.tZ)(tR,{})})})]})};var tH=i(17807);let tU=()=>(0,r.tZ)(th.xu,{className:"container-eQ3i2p",paddingX:16,paddingY:48,radius:"sm",children:(0,r.tZ)(q.xv.B4,{align:"center",color:"pub-secondary-text",children:"No posts found"})});var tJ=i(87764),tW=i(39648);let tj={pillarHeader:"pillarHeader-EpU7EL",pillarTitle:"pillarTitle-Eyi3Nu"},tY=e=>{var t;let{pub:i,showSearch:n,title:o,viewAllUrl:l}=e,a=(0,eG.kb)({pub:i}),{isMobile:s}=(0,h.v9)(),{iString:d}=(0,k.M1)(),{open:c}=(0,tW.O4)();return(0,r.BX)(M.gq,{alignItems:"center",borderBottom:a?"detail-themed":void 0,className:v()({[null!==(t=tj.pillarHeader)&&void 0!==t?t:""]:a}),justifyContent:"space-between",paddingBottom:s?12:16,paddingX:8*!s,children:[a?(0,r.tZ)("div",{className:tj.pillarTitle,children:o}):s?(0,r.tZ)(eV.R,{children:o}):(0,r.tZ)(q.xv.H3,{color:"pub-primary-text",font:"pub-headings",children:o}),l&&(0,r.BX)(M.gq,{alignItems:"center",gap:16,children:[n&&(0,r.tZ)(_.h,{children:(0,r.tZ)(N.hU,{priority:"tertiary",onClick:e=>{e.preventDefault(),c()},children:(0,r.tZ)(tJ.Z,{size:20})})}),(0,r.tZ)(eY,{href:l,children:d("View all")})]})]})},tV=eU.zM.feature.postCount.desktop,tG=e=>{let{posts:t,pub:i,showEmptyState:n,showSearch:o,title:l,viewAllUrl:a}=e,{isTablet:s}=(0,h.v9)();return n||0!==t.length?(0,r.BX)(r.HY,{children:[l&&(0,r.tZ)(tY,{pub:i,showSearch:o,title:l,viewAllUrl:a}),t.length?(0,r.tZ)(eO,{leftContent:t[0]?(0,r.tZ)(eD.G,{imageAspectRatio:"wide",post:t[0],variant:"large"}):(0,r.tZ)("div",{}),mobileContent:(0,r.tZ)(eH.B,{posts:t.slice(0,tV),variant:"two-column-list"}),rightContent:(0,r.tZ)(eH.B,{hideHorizontalDividers:!0,posts:t.slice(1,tV),variant:s?"one-column-list":"two-column-list"})}):(0,r.tZ)(tU,{})]}):null};var tK=i(20435),tQ=i(45262),t$=i(65191),t0=i(63391),t1=i(95561);let t4=e=>{var t;let{contributor:i,latestPost:n}=e;return n?(0,r.tZ)(tm.J,{hoverBackground:"light",href:n.canonical_url,padding:8,radius:"sm",children:(0,r.BX)(M.gq,{alignItems:"center",gap:16,children:[(0,r.BX)(M.tu,{flex:"grow",children:[(0,r.tZ)(q.xv.Meta,{color:"accent",children:i.name}),(0,r.tZ)(t1.F,{post:n,preset:"sm"})]}),(0,r.tZ)(M.hs,{flex:"auto",children:(0,r.tZ)(T.qE,{photoUrl:null!==(t=i.photo_url)&&void 0!==t?t:void 0,size:48})})]})}):null};var t2=i(12900);function t8(){let e=(0,Z._)(["Show less"]);return t8=function(){return e},e}function t6(){let e=(0,Z._)(["Show "," more"]);return t6=function(){return e},e}let t9=()=>{let{iString:e,iTemplate:t}=(0,k.M1)(),{contributors:i,latestPostByContributorId:n}=(0,a.qp)(X.p),[o,l]=(0,a.eJ)(!1);if(!i)return null;let s=i.filter(e=>e.name&&(null==n?void 0:n[e.id])),d=s.slice(0,10),c=s.slice(10);return(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(M.gq,{paddingX:8,children:(0,r.tZ)(eV.R,{children:e("The latest from")})}),(0,r.BX)(M.tu,{gap:4,children:[d.length?d.map(e=>(0,r.tZ)(t4,{contributor:e,latestPost:null==n?void 0:n[e.id]})):(0,r.tZ)(tf,{}),(0,r.tZ)(t2.H,{expanded:o,children:(0,r.tZ)(M.tu,{gap:4,children:c.map(e=>(0,r.tZ)(t4,{contributor:e,latestPost:null==n?void 0:n[e.id]}))})}),c.length>0&&(0,r.tZ)(M.gq,{paddingX:8,paddingY:4,children:(0,r.tZ)(eY,{onClick:()=>{l(!o)},children:o?t(t8()):t(t6(),c.length)})})]})]})},t3={logo:"logo-ulupBr","logo-64":"logo-64-VEaVRL","logo-72":"logo-72-fFbpYn","logo-auto":"logo-auto-l6jK_D",logoPlaceholder:"logoPlaceholder-RbJEuS"},t5=e=>{let{altText:t="Section logo",size:i=64,url:n,showPlaceholder:o}=e;return n?(0,r.tZ)("img",{alt:t,className:v()(t3.logo,{[t3["logo-64"]]:64===i,[t3["logo-72"]]:72===i,[t3["logo-auto"]]:"auto"===i}),src:(0,eb.zF4)(n,"auto"===i?200:2*i)}):o?(0,r.tZ)("div",{className:v()(t3.logo,t3.logoPlaceholder,{[t3["logo-64"]]:64===i,[t3["logo-72"]]:72===i,[t3["logo-auto"]]:"auto"===i})}):null},t7=()=>{let{iString:e}=(0,k.M1)(),{pub:t}=(0,eT.ZT)(),i=t.sections.filter(e=>(0,tz.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:t})||!e.is_podcast),n=i.some(e=>e.logo_url);return(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(M.gq,{paddingX:8,children:(0,r.tZ)(eV.R,{children:e("Newsletters")})}),(0,r.tZ)(M.tu,{gap:4,children:i.length?i.map(e=>(0,r.tZ)(tg,{image:e.logo_url||n?(0,r.tZ)(t5,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:t,subtitle:e.description,title:e.name,url:(0,A.Ucy)(t,{section:e,addBase:!0})})):(0,r.tZ)(tf,{})})]})};var ie=i(30998),it=i.n(ie);function ii(){let e=(0,Z._)(["Logo for ",""]);return ii=function(){return e},e}let io=e=>{let{latestPost:t,podcastArtUrl:i,podcastTitle:n,podcastUrl:o,showPlaceholder:l}=e,{iString:a,iTemplate:s}=(0,k.M1)();return(0,r.tZ)(tm.J,{hoverBackground:"light",href:t?t.canonical_url:o,padding:8,radius:"sm",children:(0,r.BX)(M.gq,{alignItems:"start",gap:16,children:[(i||l)&&(0,r.tZ)(M.hs,{flex:"auto",children:(0,r.tZ)(t5,{altText:s(ii(),n),showPlaceholder:!0,size:64,url:i})}),(0,r.BX)(M.tu,{flex:"grow",children:[(0,r.tZ)(q.xv.Meta,{color:"accent",children:n}),t?(0,r.tZ)(t1.F,{noIcons:!0,post:t,preset:"sm"}):(0,r.tZ)(q.xv.B4,{color:"pub-secondary-text",paddingTop:8,style:{fontStyle:"italic"},children:a("Coming soon")})]})]})})};var il=i(1835);let ir=()=>{let{iString:e}=(0,k.M1)(),{pub:t}=(0,eT.ZT)(),{latestPodcastPosts:i}=(0,a.qp)(X.p),n=ts()((0,il.FV)(t),e=>{var i;return e.section_id?null!==(i=it()(t.navigationBarItems,t=>t.section_id===e.section_id))&&void 0!==i?i:999:-1}),o=n.some(e=>e.podcast_art_url);return(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(M.gq,{paddingX:8,children:(0,r.tZ)(eV.R,{children:e("Podcasts")})}),(0,r.tZ)(M.tu,{gap:4,children:n.length?n.map(e=>{var t,n;let l=e.section_id?null!==(t=null==i?void 0:i.sectionPodcasts[e.section_id])&&void 0!==t?t:null:null!==(n=null==i?void 0:i.pubPodcast)&&void 0!==n?n:null;return(0,r.tZ)(io,{latestPost:l,podcastArtUrl:e.podcast_art_url,podcastSubtitle:e.subtitle,podcastTitle:e.title,podcastUrl:e.url,showPlaceholder:o})}):(0,r.tZ)(tf,{})})]})},ia=()=>{let{iString:e}=(0,k.M1)(),{topPosts:t}=(0,a.qp)(X.p);return t?(0,r.BX)(M.tu,{gap:16,children:[(0,r.tZ)(eV.R,{children:e("Top posts")}),(0,r.tZ)(eH.B,{posts:t.slice(0,5),variant:"one-column-list"})]}):null},is=e=>{let{ids:t}=e,i=d()(t.map(e=>"subscribe"===e?(0,r.tZ)(tC,{}):"recommendations"===e?(0,r.tZ)(t_,{hideHeaderBorder:!0,showEmptyState:!0}):"links"===e?id(tZ,{hideHeaderBorder:!0}):"contributors"===e?(0,r.tZ)(t9,{}):"podcasts"===e?(0,r.tZ)(ir,{}):"newsletters"===e?(0,r.tZ)(t7,{}):"top-posts"===e?(0,r.tZ)(ia,{}):null));return(0,r.tZ)(M.tu,{children:i.map((e,t)=>(0,r.BX)(r.HY,{children:[e,t<i.length-1&&(0,r.tZ)(t0.f,{})]}))})},id=(e,t)=>{let i=(0,r.tZ)(e,(0,n._)({},t));return"function"==typeof i.type&&null===i.type(t)?null:i},ic=e=>{let t,i,n,{numPosts:o,posts:l,pub:a,showEmptyState:s,showSearch:d,showSeeAllLink:c,sidebarLeft:u,sidebarRight:p,title:m,viewAllUrl:g}=e,{isDesktop:v,isTablet:Z}=(0,h.v9)();if(!s&&0===l.length)return null;let f=u&&u.length>0,b=p&&p.length>0;v?(t=f?(0,r.tZ)(is,{ids:u}):void 0,i=b?(0,r.tZ)(is,{ids:p}):void 0,n=4-+!!b-+!!f):Z?b?(i=(0,r.tZ)(is,{ids:[...p,...null!=u?u:[]]}),n=2):f?(t=(0,r.tZ)(is,{ids:u}),n=2):n=3:n=1;let y=(0,r.BX)(r.HY,{children:[m&&(0,r.tZ)(tY,{pub:a,showSearch:d,title:m,viewAllUrl:g}),l.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(t$.B,{numColumns:n,posts:l.slice(0,o)}),c&&g&&(0,r.tZ)(tQ.B,{url:g})]}):(0,r.tZ)(tU,{})]});return(0,r.tZ)(tK.s,{leftContent:t,mainContent:y,rightContent:i,stretchToFullWidth:!0})},iu=e=>{let t,i,{numPosts:n,posts:o,pub:l,showEmptyState:a,showSearch:s,showSeeAllLink:d,sidebarLeft:c,sidebarRight:u,title:p,viewAllUrl:m}=e,{isTablet:g,isDesktop:v}=(0,h.v9)();if(!a&&0===o.length)return null;let Z=c&&c.length>0,f=u&&u.length>0,b=(0,r.BX)(r.HY,{children:[p&&(0,r.tZ)(tY,{pub:l,showSearch:s,title:p,viewAllUrl:m}),o.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eH.B,{posts:o.slice(0,n),variant:"two-column-list"}),d&&m&&(0,r.tZ)(tQ.B,{url:m})]}):(0,r.tZ)(tU,{})]});return v?(t=Z?(0,r.tZ)(is,{ids:c}):void 0,i=f?(0,r.tZ)(is,{ids:u}):void 0):g&&(f?i=(0,r.tZ)(is,{ids:[...u,...null!=c?c:[]]}):Z&&(t=(0,r.tZ)(is,{ids:c}))),(0,r.tZ)(tK.s,{leftContent:t,mainContent:b,rightContent:i})};var ip=i(24791);let ih={outerContainer:"outerContainer-cCKm5T",thebulwark:"thebulwark-dw_07J",innerContainer:"innerContainer-hMBAPa",logoContainer:"logoContainer-iUK1Lv",ctaContainer:"ctaContainer-WOl42W",message:"message-IKztq4"},im=e=>{let{contentBlock:t}=e,{iString:i}=(0,k.M1)(),{freeSignup:n}=(0,a.qp)(X.p),{pub:o,user:l}=(0,eT.ZT)(),s=(0,em.xR)(),d=(0,eR.So)(),{isMobile:c}=(0,h.v9)(),u=(0,eG.VL)({pub:o,includeTheRampart:!0}),p=n||(null==l?void 0:l.is_free_subscribed),m=null==l?void 0:l.is_pledged,g=!s.getConfigFor("pledges_disabled")&&!!d.getSettingFor("payment_pledges_enabled"),{cta:Z,message:f}=ig({contentBlock:t,freeSignup:n,pub:o,pubSettings:d,siteConfigs:s,user:l}),b=(0,A.W1P)(o,{params:{utm_source:F.b3.subscribeContentBlock,gift:!0,next:document.location.href}}),y=(0,A.W1P)(o,{addBase:!0,user:l,params:{utm_source:F.b3.subscribeContentBlock,simple:!0,next:document.location.href,referring_pub_ids:(0,R.x)("referring_pub_ids")}}),_=(0,A.yRy)({pub:o,user:l,params:{utm_source:F.b3.subscribeContentBlock,next:document.location.href}}),w=(0,A.sR2)({pub:o});return(0,r.tZ)("div",{className:v()(ih.outerContainer,{[ih.thebulwark]:u}),children:(0,r.tZ)(th.xu,{className:ih.innerContainer,paddingY:u?40:c?40:48,children:(0,r.BX)(M.gq,{alignItems:"center",direction:c?"column":"row",gap:c?u?16:24:40,justifyContent:u?"space-between":"center",paddingX:8,children:[u&&(0,r.BX)(M.gq,{alignItems:"center",className:ih.logoContainer,gap:4,children:[(0,r.tZ)(E.jM,{pub:o,size:u||c?56:80}),u&&!c&&(0,r.tZ)(q.xv,{color:"pub-primary-text",font:"pub-headings",nowrap:!0,size:20,children:"The Bulwark +"})]}),f&&(0,r.tZ)(M.gq,{alignItems:"center",direction:c?"column":"row",gap:8,children:(0,r.tZ)(q.xv,{align:c||u?"center":"left",className:ih.message,color:"pub-primary-text",font:"pub-headings",lineHeight:30,size:u?20:24,children:(0,tz.preventOrphans)(f)})}),Z&&(0,r.tZ)(th.xu,{className:ih.ctaContainer,flex:"auto",children:"subscribe"===Z||"upgrade"===Z?(0,r.tZ)(N.zx,{href:y,localNavigation:!1,priority:"primary",children:u?"Join Bulwark +":(0,tz.getSubscribeText)(o,{isFreeSubscribed:p,isPledged:m,pledgesEnabled:g})}):"upgrade_founding"===Z?(0,r.tZ)(N.zx,{href:_,localNavigation:!1,priority:"primary",children:i("Upgrade to founding")}):"pledge"===Z?(0,r.tZ)(N.zx,{href:y,localNavigation:!1,priority:"primary",children:i("Pledge your support")}):"gift"===Z?u?(0,r.tZ)(N.zx,{href:w,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):(0,r.tZ)(N.zx,{href:b,localNavigation:!1,priority:"primary",children:i("Gift a subscription")}):null})]})})})},ig=e=>{let{contentBlock:t,freeSignup:i,pub:n,pubSettings:o,siteConfigs:l,user:r}=e,a=i||(null==r?void 0:r.is_free_subscribed),s="enabled"===n.payments_state,d=!l.getConfigFor("pledges_disabled")&&!!o.getSettingFor("payment_pledges_enabled"),c=null==r?void 0:r.is_subscribed,u=null==r?void 0:r.is_founding,p=(0,ip.SY)(n);return{cta:a?s?c?!u&&p?"upgrade_founding":"gift":"upgrade":d?"pledge":null:"subscribe",message:u&&p?t.attrs.founding_member_message:c&&s?t.attrs.paid_subscriber_message:a?t.attrs.free_subscriber_message:t.attrs.non_subscriber_message}},iv=e=>{let{pub:t,user:i}=e,{freeSignup:n}=(0,a.qp)(X.p),o=(0,eR.So)(),l=(0,em.xR)();return{canRender:e=>{let{contentBlock:r}=e,{cta:a,message:s}=ig({contentBlock:r,freeSignup:n,pub:t,pubSettings:o,siteConfigs:l,user:i});return!!(a||s)}}};var iZ=i(1152),ib=i(58401);let iy=e=>{let{posts:t,title:i,viewAllUrl:n}=e,{isMobile:o,isTablet:l}=(0,h.v9)();return o?(0,r.tZ)(i_,{posts:t,title:i,viewAllUrl:n}):(0,r.BX)(M.tu,{gap:40,children:[(0,r.tZ)(ib.l,{title:i,titlePreset:"st2"}),(0,r.BX)(M.tu,{gap:32,children:[t[0]&&(0,r.tZ)(eB.X,{post:t[0],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}),(0,r.tZ)(M.gq,{gap:40,children:t.slice(1,l?3:4).map(e=>(0,r.tZ)(M.tu,{borderTop:"detail-themed",flex:"grow",paddingTop:32,children:(0,r.tZ)(eB.X,{post:e,variant:"mini"})}))})]})]})},i_=e=>{let{posts:t,title:i,viewAllUrl:n}=e;return(0,r.BX)(M.tu,{gap:20,children:[(0,r.tZ)(ib.l,{title:i,titlePreset:"st2",viewAllUrl:n}),(0,r.BX)(M.tu,{gap:32,children:[t[0]&&(0,r.tZ)(eB.X,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.tZ)(M.tu,{children:t.slice(1,4).map(e=>(0,r.tZ)(M.tu,{borderTop:"detail-themed",paddingY:16,children:(0,r.tZ)(eB.X,{post:e,variant:"mini"})}))})]})]})};var iw=i(98814),iC=i(64998),iB=i(20888),ik=i(87725),ix=i(94778),iS=i(24476),iP=i(55480),iI=i(72019);let iX={container:"container-opjHc4",track:"track-bJrNCJ",panel:"panel-K8JY99",navButton:"navButton-hcrBJt",videoPanelContentDesktop:"videoPanelContentDesktop-ecA07Z",podcastPanelContentDesktop:"podcastPanelContentDesktop-NIL93C",videoPanelContentMobile:"videoPanelContentMobile-r5D1RZ",podcastPanelContentMobile:"podcastPanelContentMobile-En_Ak9",primaryButton:"primaryButton-AbjjpI",secondaryButton:"secondaryButton-GUipKK",podcastArt:"podcastArt-U81yKg"},iT=e=>{var t,i,n,o,l,s,d,c,u,p,m,g;let{contentBlock:v}=e,{isMobile:Z}=(0,h.v9)(),{pub:f}=(0,eT.ZT)(),{sections:b,metadata:y}=(0,ix.c)({pub:f}),{ids:_,metadata:w}=(0,ik.F)({pub:f}),{latestPodcastPosts:C}=(0,a.qp)(X.p),[B,k]=(0,a.eJ)(2),[x,S]=(0,a.eJ)(!1),[P,I]=(0,a.eJ)(0),T=(0,a.sO)(null),N=(0,a.sO)(null),L=(0,a.sO)(null),E=(0,a.sO)(null),q=(null===(i=v.attrs)||void 0===i?void 0:null===(t=i.media_carousel)||void 0===t?void 0:t.variant)==="videos"?"videos":"podcasts",z=(0,iP.EP)(f).filter(e=>!!e.sectionId),R=ts()(z,e=>{var t;return _.indexOf(null!==(t=e.sectionId)&&void 0!==t?t:-1)}),A="podcasts"===q?R.length:b.length,F=[...R.slice(-2),...R,...R.slice(0,2)],O=[...b.slice(-2),...b,...b.slice(0,2)],D=()=>{k(e=>e+1)},H=()=>{k(e=>e-1)};return((0,a.d4)(()=>{1===B?setTimeout(()=>{S(!0),k(A+1),setTimeout(()=>{S(!1)},100)},300):B===A+2&&setTimeout(()=>{S(!0),k(2),setTimeout(()=>{S(!1)},100)},300)},[B,A]),0===A)?null:1===A?"podcasts"===q&&R[0]?(0,r.tZ)(iM,{colorString:null!==(s=null===(n=w[null!==(l=R[0].sectionId)&&void 0!==l?l:"pub"])||void 0===n?void 0:n.carouselColor)&&void 0!==s?s:"black",podcast:R[0],post:R[0].sectionId?null!==(d=null==C?void 0:null===(o=C.sectionPodcasts)||void 0===o?void 0:o[R[0].sectionId])&&void 0!==d?d:null:null!==(c=null==C?void 0:C.pubPodcast)&&void 0!==c?c:null}):"videos"===q&&b[0]?(0,r.tZ)(iN,{colorString:null!==(m=null===(u=y[b[0].id])||void 0===u?void 0:u.carouselColor)&&void 0!==m?m:"black",post:null!==(g=null==C?void 0:null===(p=C.sectionPodcasts)||void 0===p?void 0:p[b[0].id])&&void 0!==g?g:null,section:b[0]}):null:(0,r.BX)(M.tu,{gap:16,children:[Z&&(0,r.tZ)(ep.Z,{align:"center",preset:"st2",children:"podcasts"===q?"Listen to Our Latest":"Scroll Through Our Shows"}),(0,r.BX)(M.tu,{className:iX.container,children:[!Z&&(0,r.tZ)("div",{className:iX.navButton,role:"button",onClick:H,children:(0,r.tZ)(iw.Z,{size:32,strokeWidth:1.5})}),(0,r.tZ)(M.gq,{className:iX.track,style:{transform:"translateX(calc(".concat(Z?32+64*B:80+160*B,"px - ").concat(100*B,"% + ").concat(P,"px))"),transition:x||0!==P?"none":Z?"transform 0.15s ease-out":"transform 0.3s ease-in-out"},onTouchEnd:Z?()=>{if(null===T.current||null===L.current||null===N.current||null===E.current){I(0);return}let e=L.current-T.current;Math.abs(e)>Math.abs(E.current-N.current)&&Math.abs(e)>50&&(e>0?H():D()),I(0)}:void 0,onTouchMove:Z?e=>{var t,i,n,o;if(L.current=null!==(n=null===(t=e.touches[0])||void 0===t?void 0:t.clientX)&&void 0!==n?n:null,E.current=null!==(o=null===(i=e.touches[0])||void 0===i?void 0:i.clientY)&&void 0!==o?o:null,null!==T.current&&null!==N.current&&null!==L.current&&null!==E.current){let t=L.current-T.current;Math.abs(t)>Math.abs(E.current-N.current)&&(e.preventDefault(),I(t))}}:void 0,onTouchStart:Z?e=>{var t,i,n,o;T.current=null!==(n=null===(t=e.touches[0])||void 0===t?void 0:t.clientX)&&void 0!==n?n:null,N.current=null!==(o=null===(i=e.touches[0])||void 0===i?void 0:i.clientY)&&void 0!==o?o:null,L.current=null,E.current=null,I(0)}:void 0,children:"podcasts"===q?F.map(e=>{var t,i,n,o,l,a;return(0,r.tZ)("div",{className:iX.panel,children:(0,r.tZ)(iM,{colorString:null!==(o=null===(t=w[null!==(n=e.sectionId)&&void 0!==n?n:-1])||void 0===t?void 0:t.carouselColor)&&void 0!==o?o:"black",podcast:e,post:e.sectionId?null!==(l=null==C?void 0:null===(i=C.sectionPodcasts)||void 0===i?void 0:i[e.sectionId])&&void 0!==l?l:null:null!==(a=null==C?void 0:C.pubPodcast)&&void 0!==a?a:null})})}):O.map(e=>{var t,i,n,o;return(0,r.tZ)("div",{className:iX.panel,children:(0,r.tZ)(iN,{colorString:null!==(n=null===(t=y[e.id])||void 0===t?void 0:t.carouselColor)&&void 0!==n?n:"black",post:null!==(o=null==C?void 0:null===(i=C.sectionPodcasts)||void 0===i?void 0:i[e.id])&&void 0!==o?o:null,section:e})})})}),!Z&&(0,r.tZ)("div",{className:iX.navButton,role:"button",onClick:D,children:(0,r.tZ)(iC.Z,{size:32,strokeWidth:1.5})})]})]})},iN=e=>{var t;let{colorString:i,post:n,section:o}=e,{pub:l}=(0,eT.ZT)(),{isMobile:a}=(0,h.v9)(),s=(0,A.Ucy)(l,{section:o}),d=null!==(t=iS.t[i])&&void 0!==t?t:iS.t.black,c=d.hex;return(0,r.tZ)(M.tu,{style:{backgroundColor:c,height:"100%"},children:a?(0,r.tZ)(M.tu,{alignItems:"center",className:iX.videoPanelContentMobile,paddingX:16,paddingY:24,children:(0,r.tZ)(iE,{image:n&&(0,r.tZ)(iI.P,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n}),isInverted:d.invertTextColors,post:n,sectionName:o.name,sectionOrPodcastUrl:s})}):(0,r.BX)(M.gq,{alignItems:"center",className:iX.videoPanelContentDesktop,paddingX:64,paddingY:32,children:[(0,r.tZ)(iL,{isInverted:d.invertTextColors,isVideo:!0,post:n,sectionTitle:o.name,sectionUrl:s}),(0,r.tZ)(M.tu,{flex:"grow",paddingRight:8,children:n&&(0,r.tZ)(iI.P,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:n})})]})})},iM=e=>{var t,i,n;let{colorString:o,podcast:l,post:a}=e,{isMobile:s}=(0,h.v9)(),{pub:d}=(0,eT.ZT)(),c=(0,eb.UVC)({pub:d,section:l.sectionId&&null!==(n=d.sections.find(e=>e.id===l.sectionId))&&void 0!==n?n:null}),u=null===(t=iS.t[o])||void 0===t?void 0:t.hex,p=null===(i=iS.t[o])||void 0===i?void 0:i.invertTextColors;return(0,r.tZ)(M.tu,{style:{backgroundColor:u,height:"100%"},children:s?(0,r.tZ)(M.tu,{alignItems:"center",className:iX.podcastPanelContentMobile,paddingX:16,paddingY:24,children:(0,r.tZ)(iE,{image:l.artUrl?(0,r.tZ)(iB.e,{className:iX.podcastArt,maxWidth:360,src:l.artUrl}):null,isInverted:p,post:a,sectionName:l.podcastTitle,sectionOrPodcastUrl:c})}):(0,r.BX)(M.gq,{alignItems:"center",className:iX.podcastPanelContentDesktop,gap:40,justifyContent:"center",paddingX:64,paddingY:32,children:[l.artUrl&&(0,r.tZ)(iB.e,{className:iX.podcastArt,maxWidth:300,src:l.artUrl}),(0,r.tZ)(iL,{isInverted:p,isVideo:!1,post:a,sectionTitle:l.podcastTitle,sectionUrl:c})]})})},iL=e=>{let{isInverted:t,isVideo:i,post:n,sectionTitle:o,sectionUrl:l}=e,a=t?"white":"primary";return(0,r.BX)(M.tu,{gap:24,paddingLeft:8,style:{width:426},children:[(0,r.tZ)(M.tu,{paddingBottom:8,style:{borderBottom:"1px solid ".concat(t?"white":"var(--color-fg-primary-themed)")},children:(0,r.tZ)(ep.Z,{color:a,preset:"h6-serif",children:o})}),(0,r.BX)(M.tu,{gap:24,children:[n&&(0,r.BX)(M.tu,{gap:12,children:[(0,r.tZ)(ep.Z,{clamp:2,color:a,preset:"h6-sans",children:n.title}),(0,r.tZ)(ep.Z,{clamp:3,color:a,preset:"d3-serif",children:n.description})]}),(0,r.BX)(M.gq,{alignItems:"center",gap:16,children:[n&&(0,r.tZ)(ep.Z,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,r.tZ)(M.gq,{className:iX.primaryButton,padding:16,children:i?"Watch now":"Listen now"})}),(0,r.tZ)(ep.Z,{as:"a",className:iX.secondaryButton,color:a,href:l,preset:"detail-large",children:"View all episodes"})]})]})]})},iE=e=>{let{image:t,isInverted:i,post:n,sectionName:o,sectionOrPodcastUrl:l}=e,a=i?"white":"primary";return(0,r.BX)(M.tu,{alignItems:"center",gap:16,children:[(0,r.tZ)(ep.Z,{color:a,preset:"h6-serif",children:o}),(0,r.BX)(M.tu,{gap:32,children:[n&&(0,r.BX)(M.tu,{alignItems:"center",gap:28,children:[t,(0,r.BX)(M.tu,{gap:8,children:[(0,r.tZ)(ep.Z,{align:"center",clamp:2,color:a,preset:"h4-sans-condensed",children:n.title}),(0,r.tZ)(ep.Z,{align:"center",clamp:3,color:a,preset:"d3-serif",children:n.description})]})]}),(0,r.BX)(M.tu,{alignItems:"center",gap:16,children:[n&&(0,r.tZ)(ep.Z,{as:"a",href:n.canonical_url,preset:"detail-large",children:(0,r.tZ)(M.gq,{className:iX.primaryButton,padding:16,children:"Watch now"})}),(0,r.tZ)(ep.Z,{as:"a",className:iX.secondaryButton,color:a,href:l,preset:"detail-large",children:"View all episodes"})]})]})]})},iq={container:"container-YOdLMp",podcastEpisodeContainer:"podcastEpisodeContainer-nd115M",plusThreeContainer:"plusThreeContainer-VOEUMx",miniPost:"miniPost-O80hP6"},iz=e=>{let{posts:t}=e,{latestPostFromSections:i}=(0,a.qp)(X.p),{isMobile:n}=(0,h.v9)(),{pub:o}=(0,eT.ZT)(),l=(0,eG.$H)({pub:o}),s=d()(l.map(e=>null==i?void 0:i[e]));return n?(0,r.tZ)(iR,{posts:t,sectionPosts:s}):(0,r.BX)("div",{className:iq.container,children:[(0,r.BX)(M.gq,{className:iq.podcastEpisodeContainer,gap:20,children:[t[0]&&(0,r.tZ)(eB.X,{post:t[0],variant:"content-block-episode"}),(0,r.tZ)(M.tu,{children:(0,r.tZ)(eI.Z,{gap:24,children:s.map(e=>(0,r.tZ)(eB.X,{hideUfi:!0,post:e,showStar:!0,variant:"mini"}))})})]}),(0,r.BX)("div",{className:iq.plusThreeContainer,children:[t[1]&&(0,r.tZ)(eB.X,{post:t[1],titlePreset:"h6-sans",variant:"content-block-listing"}),(0,r.BX)(M.gq,{gap:40,children:[t[2]&&(0,r.tZ)("div",{className:iq.miniPost,children:(0,r.tZ)(eB.X,{post:t[2],showDescription:!0,variant:"mini"})}),t[3]&&(0,r.tZ)("div",{className:iq.miniPost,children:(0,r.tZ)(eB.X,{post:t[3],showDescription:!0,variant:"mini"})})]})]})]})},iR=e=>{let{posts:t,sectionPosts:i}=e;return(0,r.BX)(M.tu,{gap:32,children:[t[0]&&(0,r.tZ)(eB.X,{post:t[0],variant:"content-block-episode"}),(0,r.tZ)(eI.Z,{gap:24,includeBottomDivider:!0,includeTopDivider:!0,children:i.map(e=>(0,r.tZ)(eB.X,{post:e,showStar:!0,variant:"mini"}))}),t[1]&&(0,r.tZ)(eB.X,{post:t[1],variant:"content-block-listing"}),(0,r.BX)(M.gq,{gap:24,children:[t[2]&&(0,r.tZ)(M.gq,{flex:"grow",children:(0,r.tZ)(eB.X,{post:t[2],variant:"mini"})}),t[3]&&(0,r.tZ)(M.gq,{flex:"grow",children:(0,r.tZ)(eB.X,{post:t[3],variant:"mini"})})]})]})},iA=e=>{let{posts:t}=e;return t[0]?(0,r.tZ)(M.tu,{className:"container-nYRgUV",children:(0,r.tZ)(eB.X,{post:t[0],variant:"content-block-single-large"})}):null};var iF=i(53645);let iO=()=>{let{isMobile:e,isTablet:t}=(0,h.v9)(),{freeSignup:i,freeSignupEmail:n}=(0,a.qp)(X.p),{pub:o,user:l}=(0,eT.ZT)();return(0,r.BX)(M.tu,{alignItems:"center",className:"container-liQ2Vy",gap:24,justifyContent:"center",paddingX:t?16:40,style:{backgroundImage:"url(".concat((0,ex.zF)("".concat((0,ek.ZJ)(),"/img/thefp/fp-subscribe-block-bg.jpg"),304),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"multiply"},children:[(0,r.tZ)(ep.Z,{align:"center",color:"white",preset:e?"lg-preview-byline":"h6-sans",children:(null==l?void 0:l.is_subscribed)?(0,r.BX)(r.HY,{children:["Share ",(0,r.tZ)("em",{children:"The Free Press"})," with other free thinkers."]}):(null==l?void 0:l.is_free_subscribed)?"Become a Paid Subscriber to access our comments section, special columns, and more.":(0,r.BX)(r.HY,{children:["Sign up for your daily window into the world of ",(0,r.tZ)("em",{children:"The Free Press"}),"—and our take on the world at large"]})}),(0,r.tZ)("div",{children:(null==l?void 0:l.is_subscribed)?(0,r.tZ)(ec._,{href:(0,eb.W1P)(o,{utm_source:F.b3.subscribeContentBlock,gift:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Send Gift"}):(null==l?void 0:l.is_free_subscribed)?(0,r.tZ)(ec._,{href:(0,eb.W1P)(o,{utm_source:F.b3.freePressPromoBox,simple:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Upgrade"}):(0,r.tZ)(w.Z,{align:"left",expectTruncation:!0,freeSignup:i,freeSignupEmail:n,isStatic:!1,pub:o,source:"the-fp-subscribe-block",user:l})})]})};var iD=i(43905);let iH={container:"container-Q2UekY",containerMobile:"containerMobile-op5rRO",promoContainer:"promoContainer-M2SbsD",merchContainer:"merchContainer-rvwMsY",merchSocks:"merchSocks-lut01J",podcastImage:"podcastImage-tqEnIM"},iU=()=>{let{isMobile:e}=(0,h.v9)();return(0,r.BX)("div",{className:v()(iH.container,{[iH.containerMobile]:e}),children:[(0,r.tZ)(iJ,{}),(0,r.tZ)(iW,{}),(0,r.tZ)(iO,{})]})},iJ=()=>(0,r.tZ)("a",{className:v()(iH.promoContainer,iH.merchContainer),href:"https://shop.thefp.com/",rel:"noopener noreferrer",target:"_blank",children:(0,r.BX)(M.tu,{justifyContent:"space-between",padding:32,children:[(0,r.BX)(ep.Z,{color:"white",preset:"h5-serif",children:["Get (or give!) a",(0,r.tZ)("br",{}),"Free Press hat,",(0,r.tZ)("br",{}),"tote, or TGIF socks."]}),(0,r.BX)(M.gq,{alignItems:"center",gap:8,children:[(0,r.tZ)(ep.Z,{color:"white",preset:"detail-large",children:"Shop Merch"}),(0,r.tZ)(iF.Z,{size:16,stroke:"white"})]}),(0,r.tZ)("img",{alt:"Socks",className:iH.merchSocks,src:(0,ex.zF)("".concat((0,ek.ZJ)(),"/img/thefp/thefp-socks.png"))})]})}),iW=()=>{var e,t,i;let{isMobile:n,isDesktop:o}=(0,h.v9)(),{latestPodcastPosts:l}=(0,a.qp)(X.p),{pub:s}=(0,eT.ZT)(),d=null!==(e=s.sections.find(e=>"honestly"===e.slug))&&void 0!==e?e:null,{artUrl:c}=(0,iD.Mv)({pub:s,section:d}),u=(0,eb.UVC)({pub:s,section:d}),p=null!==(i=null==l?void 0:l.sectionPodcasts[null!==(t=null==d?void 0:d.id)&&void 0!==t?t:""])&&void 0!==i?i:null,m=(0,eb.uRy)(s,p,{noBase:!0});return(0,r.BX)(M.gq,{children:[c&&(0,r.tZ)("a",{href:u,children:(0,r.tZ)(iB.e,{className:iH.podcastImage,loading:"lazy",maxWidth:440,src:c})}),(0,r.BX)(M.tu,{as:"a",flex:"grow",gap:o?40:16,href:null!=m?m:u,justifyContent:"center",paddingX:16,style:{backgroundColor:"#fa3409",borderLeft:"1px solid var(--web_bg_color)",textDecoration:"none"},children:[p&&(0,r.tZ)(ep.Z,{clamp:n?4:5,color:"white",preset:"h6-serif",children:p.title}),(0,r.BX)(M.gq,{alignItems:"center",gap:8,children:[(0,r.tZ)(ep.Z,{color:"white",preset:"detail-large",children:o?"Listen now":"Listen"}),(0,r.tZ)(iF.Z,{size:16,stroke:"white"})]})]})]})},ij=e=>{var t,i,n,o;let{contentBlock:l,posts:a,pub:s,showEmptyState:d,showSearch:c=!1,showSeeAllLink:u,title:p,viewAllUrl:m}=e,{breakpoint:g}=(0,h.v9)(),v=(0,eG.HD)({pub:s});if("list"===l.block_type)return(0,r.tZ)(iu,{numPosts:null!==(t=l.num_posts)&&void 0!==t?t:eU.di.posts.default,posts:a,pub:s,showEmptyState:d,showSearch:c,showSeeAllLink:u,sidebarLeft:l.secondary_sidebar_modules,sidebarRight:l.primary_sidebar_modules,title:p,viewAllUrl:m});if("grid"===l.block_type){let e=(0,eU.eP)({contentBlock:l,breakpoint:g});return(0,r.tZ)(ic,{numPosts:e,posts:a,pub:s,showEmptyState:d,showSearch:c,showSeeAllLink:u,sidebarLeft:l.secondary_sidebar_modules,sidebarRight:l.primary_sidebar_modules,title:p,viewAllUrl:m})}return"feature"===l.block_type?v?(0,r.tZ)(iZ.M,{posts:a,title:(null===(i=l.attrs.feature)||void 0===i?void 0:i.title)||p,variant:null!==(o=null===(n=l.attrs.feature)||void 0===n?void 0:n.variant)&&void 0!==o?o:"special-feature",viewAllUrl:m}):(0,r.tZ)(tG,{posts:a,pub:s,showEmptyState:d,showSearch:c,title:p,viewAllUrl:m}):"subscribe"===l.block_type?(0,r.tZ)(im,{contentBlock:l}):"podcast_plus_three"===l.block_type?(0,r.tZ)(iz,{posts:a}):"subscribe_plus_five"===l.block_type?(0,r.tZ)(iU,{}):"single_post"===l.block_type?(0,r.tZ)(iA,{posts:a}):"half_feature"===l.block_type?(0,r.tZ)(iy,{posts:a,title:p,viewAllUrl:m}):"media_carousel"===l.block_type?(0,r.tZ)(iT,{contentBlock:l}):null},iY=()=>(0,r.tZ)(th.xu,{paddingBottom:120,children:(0,r.tZ)(tK.s,{leftContent:(0,r.tZ)("div",{children:"\xa0"}),mainContent:(0,r.tZ)(tI.b,{animated:!1,postCount:4,variant:"list"}),rightContent:(0,r.tZ)("div",{children:"\xa0"})})}),iV={halfWidthContainer:"halfWidthContainer-OZxoCR",pillarContentBlocks:"pillarContentBlocks-pkmgrG",contentBlockContainer:"contentBlockContainer-BNIIae",contentBlockEditButton:"contentBlockEditButton-g_2FSh"},iG=["media_carousel","subscribe","subscribe_plus_five"],iK=e=>{var t,n;let{contentBlocks:o,postsBySectionId:l,postsByTagId:s,postsForContentBlockPins:d,recentPosts:c,showEmptyStates:u}=e,{isMobile:p,breakpoint:m}=(0,h.v9)(),{pub:g,user:Z}=(0,eT.ZT)(),f=(0,eG.kb)({pub:g}),b=(0,eG.HD)({pub:g}),{canRender:y}=iv({pub:g,user:Z}),[_,w]=(0,a.eJ)(null),C=!1,B=o.filter(e=>"latest"===e.post_source).length>1,k=o.filter(e=>"subscribe"!==e.block_type||y({contentBlock:e})),x=k.findIndex(e=>e.id===_),S=-1!==x?k[x]:null,P=(0,eU.ne)({contentBlocks:k,breakpoint:m,isTheFP:b,recentPosts:c,postsBySectionId:l,postsByTagId:s,postsForContentBlockPins:d});if(!k.length&&u)return(0,r.tZ)(iY,{});let I=i$({contentBlocks:k});return(0,r.BX)(M.tu,{paddingBottom:40,children:[I.map(e=>{var t,i;let{groupType:n,contentBlocks:o}=e;return(0,r.tZ)("div",{className:v()({[null!==(t=iV.halfWidthContainer)&&void 0!==t?t:""]:"half-width"===n&&!p,[null!==(i=iV.pillarContentBlocks)&&void 0!==i?i:""]:f}),children:o.map((e,t)=>{var i,n,o;let l=null!==(o=null===(i=P[e.id])||void 0===i?void 0:i.posts)&&void 0!==o?o:[],{title:a,viewAllUrl:s}=iQ({contentBlock:e,hideRecentPostsTitle:B&&!b,pub:g}),d=!1,c=t<k.length-1?k[t+1]:null,h="subscribe"===e.block_type||(null==c?void 0:c.block_type)==="subscribe"||b||f,m=k.slice(t+1),v="latest"===e.post_source&&m.every(e=>"latest"!==e.post_source);return"latest"!==e.post_source||C||(d=!0,C=!0),(0,r.BX)(e$.QI,{pub:g,showPubPins:"latest"===e.post_source,showSectionPins:!1,children:[(0,r.BX)(M.tu,{className:iV.contentBlockContainer,id:"block-".concat(e.id),paddingBottom:b?p?64:80:0,style:{scrollMarginTop:48},children:[!iG.includes(e.block_type)&&b&&(null==Z?void 0:Z.is_admin)&&(0,r.tZ)("div",{className:iV.contentBlockEditButton,children:(0,r.tZ)(N.hU,{priority:"primary-mono",size:"sm",onClick:()=>{w(e.id)},children:(0,r.tZ)(er.Z,{size:16})})}),"media_carousel"===e.block_type&&(null==Z?void 0:Z.is_admin)&&(0,r.tZ)("div",{className:iV.contentBlockEditButton,children:(0,r.tZ)(tH.r,{pub:g,sectionType:(null===(n=e.attrs.media_carousel)||void 0===n?void 0:n.variant)==="videos"?"video":"podcast",user:Z})}),(0,r.tZ)(ij,{contentBlock:e,posts:l,pub:g,showEmptyState:u,showSearch:d,showSeeAllLink:v,title:a,viewAllUrl:s})]}),t<k.length-1&&!h&&(0,r.tZ)(t0.f,{})]})})})}),S&&b&&(0,r.tZ)(eN.cr,{containerId:"block-".concat(S.id),contentBlock:S,module:"@/frontend/components/thefp/EditPinsModal",pinnedPosts:d,posts:null!==(n=null===(t=P[S.id])||void 0===t?void 0:t.postsWithoutPins)&&void 0!==n?n:[],renderPreview:e=>{let{posts:t}=e,{title:i}=iQ({contentBlock:S,hideRecentPostsTitle:!1,pub:g});return(0,r.tZ)(ij,{contentBlock:S,posts:t,pub:g,showEmptyState:u,showSearch:!1,showSeeAllLink:!1,title:i})},resolve:e=>e.EditContentBlockPinsModal,whileLoading:(0,r.tZ)("div",{}),onClose:()=>{w(null)},onRequest:()=>i.e("9314").then(i.bind(i,91076))})]})},iQ=e=>{let t,{contentBlock:i,hideRecentPostsTitle:n,pub:o}=e,l="";if("latest"===i.post_source)l=n?"":"Recent posts",t=(0,eb.nxG)(o);else if("section"===i.post_source&&i.section){let e=i.section;l=(null==e?void 0:e.name)||"",t=e?(0,A.Ucy)(o,{section:e}):null}else if("tag"===i.post_source&&i.postTag){let e=i.postTag;l=(null==e?void 0:e.name)||"",t=e?(0,A.Mk9)(o,e):null}return{title:l,viewAllUrl:t}},i$=e=>{let{contentBlocks:t}=e,i=[],n=[],o="full-width";for(let e of t)"half_feature"===e.block_type?"full-width"===o&&(n.length&&(i.push({groupType:"full-width",contentBlocks:n}),n=[]),o="half-width"):"half-width"===o&&(n.length&&(i.push({groupType:"half-width",contentBlocks:n}),n=[]),o="full-width"),n.push(e);return n.length&&i.push({groupType:o,contentBlocks:n}),i};var i0=i(26176);let i1=e=>{let{posts:t,pub:i,user:n,utm:o}=e,{isMobile:l}=(0,h.v9)();if(!t.length||!t[0])return null;let a=t[0],s=a.section_id?i.sections.find(e=>e.id===a.section_id):void 0,d=(0,ip.uo)({post:a,section:null!=s?s:null,pub:i});return(0,r.tZ)(M.tu,{cursor:"pointer",paddingX:16*!!l,onClick:()=>{let e=a.canonical_url;"video"===a.type?e=(0,eb.rhs)(a.canonical_url,{autoPlay:!0}):o&&(e=(0,eb.n1t)(a.canonical_url,{utm:o})),(0,I.uX)(e)},children:(0,r.tZ)(i0.Y,{columns:4,highlightPost:!0,isPodcast:!d,post:t[0],pub:i,section:s,user:null!=n?n:null})})};var i4=i(23372);let i2=e=>{let{columns:t=4,posts:i,pub:n}=e,{isMobile:o}=(0,h.v9)();return o?null:(0,r.tZ)(eX.A,{variant:3===t?"three-column-width":"full-width",children:(0,r.BX)(M.tu,{gap:12,children:[(0,r.tZ)(eQ,{pub:n}),(0,r.tZ)(eH.B,{posts:i,variant:3===t?"three-column-mini-row":"mini-row"})]})})};var i8=i(51622),i6=i(22560),i9=i(34806);let i3=e=>{let{pub:t,user:i}=e,[n,o]=(0,a.eJ)(!0),{isMobile:l}=(0,h.v9)(),{changeSetting:s}=(0,x.SE)(),{refetch:d}=(0,ev.ib)({pathname:"/api/v1/subscription/sections/email?utm_source=newsletters-modal",auto:!1,method:"PATCH"}),c=async()=>{await s("hasSeenOnboardingNewslettersScreen",!0),o(!1)},u=async(e,t)=>{try{let i=Object.fromEntries([...e.map(e=>[e,{setting:"individual"}]),...t.map(e=>[e,{setting:"disabled"}])]);await d({json:i}),await c()}catch(e){console.error("Failed to update newsletter preferences:",e)}};return(0,r.tZ)(r.HY,{children:(0,r.BX)(eu.A,{isOpen:n,width:894,onClose:c,stretchModal:l,fullscreenMobile:!0,children:[l&&(0,r.BX)(M.gq,{style:{width:"100%"},children:[(0,r.tZ)("div",{className:i9.Z.topBorder}),(0,r.tZ)(i8.B,{logoOnly:!0,pub:t,user:i,activeLiveStream:null,freeSignup:!1,showCustomerSupportModeModal:!1}),(0,r.tZ)(N.kG,{className:i9.Z.closeButton,onClick:c,children:(0,r.tZ)(f.Z,{size:24})})]}),(0,r.tZ)(i6.o,{isNewSubscriber:!1,pub:t,fullScreen:!1,onSkip:c,onSubmit:u})]})})};var i5=i(98012);let i7={container:"container-LSZllu",bodyContainer:"bodyContainer-GD8kK4","container--empty":"container--empty-D_rgwk",liveStreamContainer:"liveStreamContainer-t0i18u"},ne=(0,m.memo)(e=>{var t,i,s,c;let{activeLiveStream:u,bodyPostGroups:p,freeSignup:m,freeSignupEmail:g,homepageData:Z,pub:f,showEmptyStates:y,showSiteMap:w,theme:C,user:k,utm:P,giftCard:T,abTestingId:N}=e,L=(0,l._)(e,["activeLiveStream","bodyPostGroups","freeSignup","freeSignupEmail","homepageData","pub","showEmptyStates","showSiteMap","theme","user","utm","giftCard","abTestingId"]),E=(0,a.Ye)(()=>(0,eG.HD)({pub:f})&&Z?d()(Object.values(Z.contentBlockData.latestPostFromSections).map(e=>null==e?void 0:e.id)):[],[Z,f]),q=(0,a.Ye)(()=>{var e,t,i;let n=new Set([...(null!==(e=null==Z?void 0:Z.pinnedPosts)&&void 0!==e?e:[]).map(e=>e.id),...E]);return(null!==(t=null==Z?void 0:Z.pinnedPosts)&&void 0!==t?t:[]).concat((null!==(i=null==Z?void 0:Z.newPosts)&&void 0!==i?i:[]).filter(e=>!n.has(e.id)))},[null==Z?void 0:Z.newPosts,null==Z?void 0:Z.pinnedPosts,E]),{activeLiveStream:z}=(0,eA.L)({pub:f,user:k,preloadedActiveLiveStream:u}),{breakpoint:A,isMobile:O,isDesktop:D}=(0,h.v9)(),{getSettingFor:H}=(0,eR.So)(),U=(0,tz.ensureInList)(H("post_preview_crop_gravity"),["center","auto"]),J=(0,em.xR)(),{open:W,modal:j}=(0,b.useAppModal)({utm_campaign:(null==T?void 0:null===(t=T.gifter)||void 0===t?void 0:t.id)===f.author_id?F.VX.viralGiftAppIncentiveFromPub:F.VX.viralGiftAppIncentive,utm_source:F.b3.substack,giftCard:T,pub:f,abTestingId:N}),{open:Y,modal:V}=function(e){let{pub:t,abTestingId:i,startingOpen:n,giftCard:o}=e,[l,s]=(0,a.eJ)(null!=n&&n),[d,c]=(0,a.eJ)(o),[u,p]=(0,a.eJ)("pub_focused"),{getExperimentVariant:h,exposeExperiment:m}=(0,B.jc)(),g=(0,a.I4)(e=>{c(e),s(!0),(0,S.j)(S.FP.ACCEPT_GIFT_MODAL_OPENED,{has_sender_token:!!(0,R.x)(window._preloads.original_url,"senderToken"),starting_open:n})},[]),v=(0,a.I4)(()=>{s(!1)},[]);return(0,a.d4)(()=>{if(l){m("accept_gift_modal_framing");let e=h("accept_gift_modal_framing");e&&p("author_focused"===e?"author_focused":"pub_focused")}},[l,m,h]),{open:g,modal:(0,r.tZ)(en,{isOpen:l,onClose:v,pub:t,giftCard:d,abTestingId:i,variant:u})}}({pub:f,abTestingId:N,startingOpen:!!(0,R.x)("accepting_gift"),giftCard:T}),G=(0,eG.HD)({pub:f}),K=(0,eG.kb)({pub:f}),Q=K&&"magaziney"===C.home_hero,{userSettings:$}=(0,x.SE)(),ee=G&&k&&(null==$?void 0:$.hasSeenOnboardingNewslettersScreen)!==!0;(0,a.d4)(()=>{(0,R.x)("accepting_gift")?((0,I.iO)("accepting_gift"),(0,I.iO)("senderToken"),Y(T)):T&&f&&(T.expired?Y(T):W())},[]);let et=q[0],ei=(0,a.Ye)(()=>{var e;return null==Z?void 0:null===(e=Z.topPosts)||void 0===e?void 0:e.filter(e=>!et||e.id!==et.id)},[et,null==Z?void 0:Z.topPosts]);if(!Z)return(0,r.tZ)(M.tu,{alignItems:"center",className:v()(i7.container,i7["container--empty"]),justifyContent:"center",children:(0,r.tZ)("div",{className:"more-loader"})});if(0===q.length)return(0,r.tZ)(nt,{});let el=!(null===(i=q[0])||void 0===i?void 0:i.cover_image),{numPostsInHero:er,effectiveHero:ea}=ni({breakpoint:A,firstPostMissingImage:el,heroVariant:C.home_hero,numTotalPosts:q.length,pub:f,replaceTopPostsWithLatestInHero:Q}),es="podcast"===ea,ed=["newspaper","podcast"].includes(ea)&&"list"===C.home_posts,ec=0===er||q.length>=er||"custom"===C.home_posts,eu=ec?q.slice(er):q,ep=!!(ec&&C.home_show_top_posts&&ei&&"magaziney"!==ea&&!O),eh=ec&&q.length>er;"custom"===C.home_posts&&(null==Z?void 0:null===(s=Z.contentBlockData.contentBlocks[0])||void 0===s?void 0:s.block_type)==="subscribe"&&(eh=!1),["feature-media","podcast"].includes(ea)&&!ep&&(eh=!1),(G||K)&&(eh=!1);let eg=!1;return G&&(eg=null!==(c=f.showIntroModule)&&void 0!==c&&c),(0,r.tZ)(eT.hV,{authorPagesEnabled:!!J.getConfigFor("enable_author_pages"),cropGravity:U,highlightByline:!!J.getConfigFor("post_preview_highlight_byline"),pub:f,showSectionOrTag:(0,eG.kb)({pub:f}),user:k,utm:P,children:(0,r.tZ)(X.p.Provider,{value:{contributors:Z.contentBlockData.contributors,freeSignup:m,freeSignupEmail:g,homepageLinks:Z.homepageLinks,latestPodcastPosts:Z.contentBlockData.latestPodcastPosts,latestPostByContributorId:Z.contentBlockData.latestPostByContributorId,latestPostFromSections:Z.contentBlockData.latestPostFromSections,numRecommendations:Z.numRecommendations,recommendations:Z.recommendations,topPosts:Z.topPosts},children:(0,r.BX)(_.h,{children:[!G&&(null==z?void 0:z.liveStream.id)&&(0,i5.Z)(z.liveStream.started_streaming_at).isBefore((0,i5.Z)().subtract(1,"minute"))?z.liveStreamInformation.desktopPlaybackUrl&&"autoPlay"===H("live_stream_homepage_style")?(0,r.tZ)(M.tu,{alignItems:"center",paddingTop:24,children:(0,r.tZ)(th.xu,{className:i7.liveStreamContainer,position:"relative",children:(0,r.tZ)(eo.Y,{activeLiveStream:z,fromPub:!0})})}):(0,r.tZ)(i4.Z,{activeLiveStream:z}):null,ee&&(0,r.tZ)(i3,{pub:f,user:k}),V,j,(0,r.BX)(M.tu,{className:i7.container,paddingTop:es||G?0:16,children:[(0,r.tZ)(M.tu,{paddingTop:G?D?56:28:!ec&&O?24:0,children:(0,r.BX)(M.tu,{children:[ec&&(G?(0,r.tZ)(e$.QI,{pub:f,showPubPins:!0,showSectionPins:!1,children:(0,r.tZ)(eL,{posts:q.slice(0,er),showIntroModule:eg})}):"feature-media"===ea?(0,r.tZ)(M.tu,{paddingBottom:O||ep?24:40,paddingTop:O?16:8,children:(0,r.tZ)(i1,{posts:q,pub:f,user:k,utm:P})}):(0,r.tZ)(e$.QI,{pub:f,showPubPins:!0,showSectionPins:!1,children:(0,r.tZ)(te,{bodyVariant:C.home_posts,firstPostMissingImage:el,hasMiniPostsRowUnderneath:ep,heroAlignment:C.home_hero_alignment,isMobile:O,posts:q.slice(0,er),replaceTopPostsWithLatest:Q,showPodcastLinks:C.home_hero_show_podcast_links,topPosts:ei,variant:ea})})),ep&&ei&&!G&&(0,r.BX)(r.HY,{children:[!["feature-media","podcast"].includes(ea)&&(0,r.tZ)(t0.f,{numColumns:ed?3:4,paddingBottom:20,paddingTop:20}),(0,r.tZ)(i2,{columns:ed?3:4,posts:ei,pub:f})]})]})}),(0,r.BX)(M.tu,{className:i7.bodyContainer,id:"modular-home-posts",children:[eh&&(0,r.tZ)(t0.f,{numColumns:ed?3:4,paddingTop:ep?8:void 0}),(0,r.BX)("div",{id:"home-body",style:{scrollMarginTop:48,paddingTop:K?O?40:64:void 0},children:["custom"!==C.home_posts&&(0,r.tZ)(tD,(0,o._)((0,n._)({},L),{bodyPostGroups:p,hasEmptyGroupOptions:e.hasEmptyGroupOptions,hideImagesFromList:C.hide_images_from_list,posts:eu,postsByGroupId:Z.postsByGroupId,pub:f,showSiteMap:w,source:"".concat(C.home_hero,"-").concat(C.home_posts,"-home"),user:k,variant:C.home_posts})),"custom"===C.home_posts&&(0,r.tZ)(iK,{contentBlocks:Z.contentBlockData.contentBlocks,postsBySectionId:Z.contentBlockData.postsBySectionId,postsByTagId:Z.contentBlockData.postsByTagId,postsForContentBlockPins:Z.contentBlockData.postsForContentBlockPins,recentPosts:eu,showEmptyStates:y})]})]})]}),G&&(0,r.tZ)(eC,{})]})})})}),nt=()=>{let{iString:e}=(0,k.M1)();return(0,r.tZ)(M.tu,{alignItems:"center",className:v()(i7.container,i7["container--empty"]),justifyContent:"center",children:e("Coming Soon")})},ni=e=>{let{breakpoint:t,heroVariant:i,firstPostMissingImage:n,numTotalPosts:o,pub:l,replaceTopPostsWithLatestInHero:r}=e,a=eU.zM[i].postCount[t],s=i;return n&&["magaziney","magazine-5"].includes(i)&&["desktop","tablet"].includes(t)&&(a+=2),r&&"magaziney"===i&&(a+="tablet"===t?3:5),o<a&&(s="newspaper",a=1),(0,eG.HD)({pub:l})&&(a=11,"tablet"===t&&(a-=2)),{numPostsInHero:a,effectiveHero:s}};var nn=i(95050),no=i(75801);let nl=e=>{var t,{blurbs:i,freeSignup:s,freeSignupEmail:c,hasEmptyGroupOptions:m,hide_intro_popup:g,homepageData:v,notify_user:Z,pub:f,referralCode:b,showEmptyStates:y,showWelcome:_,user:w,postTags:C,launchWelcomePage:B,skipIntroPopupRender:k}=e,x=(0,l._)(e,["blurbs","freeSignup","freeSignupEmail","hasEmptyGroupOptions","hide_intro_popup","homepageData","notify_user","pub","referralCode","showEmptyStates","showWelcome","user","postTags","launchWelcomePage","skipIntroPopupRender"]);let S=(0,h.qU)({preloadedHomepageData:v});(0,a.d4)(()=>{Z&&"undefined"!=typeof window&&(0,p.ZP)(Z)},[Z]);let P=!!((null==S?void 0:S.newPosts)&&(null==S?void 0:S.newPosts.length)>0),I=(0,a.Ye)(()=>{var e,t;return d()(null===(t=f.theme)||void 0===t?void 0:null===(e=t.body_post_groups)||void 0===e?void 0:e.map(e=>{var t,i,n,o,l;return e.tag_id?null!==(i=null!==(t=e.post_tag)&&void 0!==t?t:null==C?void 0:C.find(t=>t.id===e.tag_id))&&void 0!==i?i:null:e.section_id&&null!==(l=null!==(o=e.section)&&void 0!==o?o:null===(n=f.sections)||void 0===n?void 0:n.find(t=>t.id===e.section_id))&&void 0!==l?l:null}))},[C,f.sections,null===(t=f.theme)||void 0===t?void 0:t.body_post_groups]);return f.theme?(0,r.BX)("div",{className:"home-page home-page--modular",children:[(0,r.tZ)(nn.PageMetaData,{isHomepage:!0,pub:f}),(0,r.tZ)(ne,(0,o._)((0,n._)({},u()(x,"matches")),{bodyPostGroups:I,freeSignup:s,freeSignupEmail:c,hasEmptyGroupOptions:m,homepageData:S,pub:f,showEmptyStates:!!y,showSiteMap:P,theme:f.theme,user:w})),k?null:(0,r.tZ)(no.L,{blurbs:i,freeSignup:s,freeSignupEmail:c,hide_intro_popup:g,launchWelcomePage:B,pub:f,referralCode:b,showWelcome:_,user:w})]}):null}},38756:function(e,t,i){i.d(t,{A:()=>s});var n=i(16584),o=i(94184),l=i.n(o),r=i(19081);let a={container:"container-k4OAt1","full-width":"full-width-zjiPxJ",fullWidth:"full-width-zjiPxJ","full-width-with-sidebar":"full-width-with-sidebar-epMpKX",fullWidthWithSidebar:"full-width-with-sidebar-epMpKX","show-below":"show-below-NE36A8",showBelow:"show-below-NE36A8","full-width-with-border-and-sidebar":"full-width-with-border-and-sidebar-aSAAEB",fullWidthWithBorderAndSidebar:"full-width-with-border-and-sidebar-aSAAEB","vertical-divider":"vertical-divider-Z42nad",verticalDivider:"vertical-divider-Z42nad","three-column-width":"three-column-width-gNtKSr",threeColumnWidth:"three-column-width-gNtKSr","three-column-width-with-sidebar":"three-column-width-with-sidebar-cRFEVE",threeColumnWidthWithSidebar:"three-column-width-with-sidebar-cRFEVE","two-column-width":"two-column-width-f6IAWT",twoColumnWidth:"two-column-width-f6IAWT","one-column-two-column":"one-column-two-column-dAuMkN",oneColumnTwoColumn:"one-column-two-column-dAuMkN","two-column-one-column-one-column":"two-column-one-column-one-column-GnEn49",twoColumnOneColumnOneColumn:"two-column-one-column-one-column-GnEn49","one-column-two-column-one-column":"one-column-two-column-one-column-g_nrA3",oneColumnTwoColumnOneColumn:"one-column-two-column-one-column-g_nrA3","one-column-one-column-two-column":"one-column-one-column-two-column-e79cH1",oneColumnOneColumnTwoColumn:"one-column-one-column-two-column-e79cH1","one-column-three-columns":"one-column-three-columns-lf36oo",oneColumnThreeColumns:"one-column-three-columns-lf36oo"},s=e=>{let{children:t,hideVerticalDividers:i,showContentBelowOnMobile:o,stretchVertically:s,variant:d}=e,c=i?void 0:"detail-themed";return"none"===d?(0,n.tZ)("div",{children:t}):(0,n.tZ)("div",{style:s?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,n.BX)("div",{className:l()(a.container,a[d],{[a["show-below"]]:o}),children:[t,"full-width-with-border-and-sidebar"===d&&(0,n.tZ)(r.hs,{borderRight:c,className:a["vertical-divider"]}),["two-column-one-column-one-column","one-column-two-column-one-column","one-column-one-column-two-column"].includes(d)&&(0,n.BX)(n.HY,{children:[(0,n.tZ)(r.hs,{borderRight:c,className:a["vertical-divider"]}),(0,n.tZ)(r.hs,{borderRight:c,className:a["vertical-divider"]})]}),"one-column-two-column"===d&&(0,n.tZ)(r.hs,{borderRight:c,className:a["vertical-divider"]})]})})}},20435:function(e,t,i){i.d(t,{s:()=>d});var n=i(16584),o=i(94184),l=i.n(o),r=i(98422),a=i(71068);let s={outerContainer:"outerContainer-p1amnX",container:"container-uYF5Qm",column:"column-O67nhJ",column1:"column1-pd0Ws0",column2:"column2-jVKqxY",column3:"column3-Brgr2S",column4:"column4-Z0B2N_"},d=e=>{let{leftContent:t,mainContent:i,rightContent:o,stretchToFullWidth:d}=e,{isMobile:c,isTablet:u,isDesktop:p}=(0,r.v9)(),h=2;return d&&(p?h=4-+!!t-+!!o:u&&(h=3-(t||o?1:0))),c&&(h=1),(0,n.tZ)("div",{className:s.outerContainer,children:(0,n.BX)("div",{className:s.container,children:[t&&(0,n.tZ)(a.xu,{className:l()(s.column,s.column1),paddingTop:8,children:t}),(0,n.tZ)(a.xu,{className:l()(s.column,{[s.column2]:2===h,[s.column3]:3===h,[s.column4]:4===h}),children:i}),o&&(0,n.tZ)(a.xu,{className:l()(s.column,s.column1),paddingTop:8,children:o})]})})}},23372:function(e,t,i){i.d(t,{Z:()=>s});var n=i(16584),o=i(19081),l=i(58175),r=i(63651),a=i(47929);let s=e=>{let{activeLiveStream:t}=e;return(0,n.tZ)(o.gq,{className:"liveStreamBanner-Petbnm",justifyContent:"center",children:(0,n.tZ)("a",{href:(0,r.bHR)({liveStreamId:t.liveStream.id,utm_source:a.b3.web,utm_campaign:a.VX.liveStreamPubBanner}),style:{textDecoration:"none"},children:(0,n.BX)(o.gq,{alignItems:"center",gap:8,padding:12,paddingTop:{desktop:12,mobile:16},children:[(0,n.tZ)("div",{className:"liveBadge-f3ITqf",children:(0,n.tZ)(l.xv.B5,{color:"white",translated:!0,weight:"semibold",children:"Live"})}),(0,n.BX)(l.xv.B3,{color:"white",translated:!0,weight:"semibold",children:[(0,n.tZ)("span",{style:{textTransform:"uppercase"},children:"Live Video"}),": ",I18N.p(t.liveStream.title)]})]})})})}},10743:function(e,t,i){i.d(t,{x:()=>a});var n=i(16584),o=i(19081);let l=e=>{let{children:t,paddingTop:i,paddingBottom:l}=e;return(0,n.tZ)("div",{className:"container-FJSDzM",children:(0,n.tZ)(o.tu,{paddingBottom:l,paddingTop:i,paddingX:16,children:t})})};var r=i(98422);let a=e=>{let{children:t}=e,{isMobile:i}=(0,r.v9)();return(0,n.tZ)(o.tu,{bg:"secondary",className:"container-_aNEvf",paddingY:i?32:64,children:(0,n.tZ)(l,{children:t})})}},74805:function(e,t,i){i.d(t,{a:()=>h});var n=i(16584),o=i(20888),l=i(38756),r=i(10743),a=i(11353),s=i(71068),d=i(19081),c=i(58175),u=i(60308),p=i(63651);let h=e=>{var t,i;let{columns:h,description:m,imageUrl:g,name:v,post:Z,pub:f,section:b,showPodcastLinks:y,user:_}=e,w=(0,s.oB)({radius:"lg",shadow:"xl"}),C=null===(t=f.sponsorship_campaigns)||void 0===t?void 0:t.find(e=>"podcast"===e.campaign_type);return(0,n.tZ)(r.x,{children:(0,n.tZ)(l.A,{variant:4===h?"full-width-with-sidebar":"three-column-width",children:(0,n.BX)(d.gq,{alignItems:"center",gap:40,paddingX:8,children:[g&&(0,n.tZ)(o.e,{className:w,imageIsFixedWidth:!0,maxWidth:250,src:g,useRetinaSizing:!0}),(0,n.BX)(d.tu,{gap:16,children:[(0,n.BX)(d.tu,{gap:8,children:[(0,n.tZ)(c.xv.H2,{color:"pub-primary-text",font:"pub-headings",children:v}),(0,n.tZ)(c.xv.B2,{color:"pub-secondary-text",children:m}),C&&(0,n.tZ)(d.gq,{justifyContent:"end",children:(0,n.BX)(d.gq,{alignItems:"center",as:"a",gap:16,href:(0,u.l5Q)({campaignId:C.id,medium:"podcast",pubId:f.id,url:C.link_url,postId:null==Z?void 0:Z.id}),target:"_blank",children:[(0,n.tZ)(c.xv.Digit,{color:"pub-secondary-text",weight:"regular",children:C.short_text}),C.image_url&&(0,n.tZ)("img",{alt:null!==(i=C.image_alt_text)&&void 0!==i?i:"",src:(0,p.zF4)(C.image_url,250),style:{width:"auto",height:16}})]})})]}),y&&(0,n.tZ)(a.h,{post:Z,pub:f,section:b,user:_})]})]})})})}},70647:function(e,t,i){i.d(t,{p:()=>p});var n=i(16584),o=i(20888),l=i(98422),r=i(38756),a=i(10743),s=i(11353),d=i(71068),c=i(19081),u=i(58175);let p=e=>{let{description:t,imageUrl:i,name:p,post:h,pub:m,section:g,showPodcastLinks:v,user:Z}=e,{isMobile:f}=(0,l.v9)(),b=(0,d.oB)({radius:"sm",shadow:"lg"});return(0,n.tZ)(a.x,{children:(0,n.tZ)(r.A,{variant:"two-column-width",children:(0,n.BX)(c.tu,{alignItems:"center",gap:24,paddingX:8*!f,children:[i&&(0,n.tZ)(o.e,{className:b,imageIsFixedWidth:!0,maxWidth:100,src:i,useRetinaSizing:!0}),(0,n.BX)(c.tu,{gap:8,children:[(0,n.tZ)(u.xv.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:p}),(0,n.tZ)(u.xv.B2,{align:"center",color:"pub-secondary-text",children:t})]}),v&&(0,n.tZ)(s.h,{align:"center",post:h,pub:m,section:g,user:Z})]})})})}},51213:function(e,t,i){i.d(t,{W:()=>p});var n=i(16584),o=i(20888),l=i(10743),r=i(11353),a=i(71068),s=i(19081),d=i(58175),c=i(60308),u=i(63651);let p=e=>{var t,i;let{description:p,imageUrl:h,name:m,post:g,pub:v,section:Z,showPodcastLinks:f,user:b}=e,y=(0,a.oB)({radius:"lg",shadow:"xl",width:160}),_=null===(t=v.sponsorship_campaigns)||void 0===t?void 0:t.find(e=>"podcast"===e.campaign_type);return(0,n.tZ)(l.x,{children:(0,n.BX)(s.tu,{alignItems:"center",gap:24,children:[h&&(0,n.tZ)("div",{children:(0,n.tZ)(o.e,{className:y,imageIsFixedWidth:!0,maxWidth:160,src:h,useRetinaSizing:!0})}),(0,n.BX)(s.tu,{gap:16,children:[(0,n.BX)(s.tu,{gap:8,children:[(0,n.tZ)(d.xv.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:m}),(0,n.tZ)(d.xv.B2,{align:"center",color:"pub-secondary-text",children:p}),_&&(0,n.tZ)(s.gq,{justifyContent:"center",paddingY:8,children:(0,n.BX)(s.gq,{alignItems:"center",as:"a",gap:16,href:(0,c.l5Q)({campaignId:_.id,medium:"podcast",pubId:v.id,url:_.link_url,postId:null==g?void 0:g.id}),target:"_blank",children:[(0,n.tZ)(d.xv.Digit,{color:"pub-secondary-text",weight:"regular",children:_.short_text}),_.image_url&&(0,n.tZ)("img",{alt:null!==(i=_.image_alt_text)&&void 0!==i?i:"",src:(0,u.zF4)(_.image_url,250),style:{width:"auto",height:16}})]})})]}),f&&(0,n.tZ)(r.h,{limit:2,post:g,pub:v,section:Z,stretch:!0,user:b})]})]})})}},11353:function(e,t,i){i.d(t,{h:()=>C});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(98661),s=i(30396),d=i(86374),c=i(347),u=i(49995),p=i(95441),h=i(68833),m=i(55480),g=i(98914),v=i(15771),Z=i(19081),f=i(99916),b=i(74571),y=i(91668),_=i(43905),w=i(60308);let C=e=>{let{align:t="left",limit:i=4,post:n,pub:o,section:l,stretch:a,user:v}=e,{iString:C}=(0,p.M1)(),{feedUrl:k,isLoaded:x}=(0,b.fn)({pub:o,section:l,user:v}),[S,P]=(0,s.eJ)(!1),I=n?i-1:i,X=(0,_.a9)({pub:o,section:l,spotifySettings:(0,m.pp)({pub:o,section:null!=l?l:null})}),T=(0,_.bf)({feedUrl:k,isApple:(0,g.V5)()||(0,g.L)(),isMobile:!1,showLinks:X,userIsSubscribed:!!(null==v?void 0:v.is_subscribed)}),N=T.length+ +!!k>I;(0,s.d4)(()=>{x&&P(!0)},[x]);let M=()=>{(0,h.j)(h.FP.PODCAST_FEED_URL_COPIED,{feedUrl:k}),(0,u.ZP)("RSS feed URL copied"),(0,g.vQ)(k)},L=e=>{let{label:t,url:i}=e;return()=>{(0,h.j)(h.FP.PODCAST_APP_LINK_CLICK,{appName:t,feedUrl:k,url:i}),window.open(i,"_blank")}};return(0,r.tZ)(c.h,{children:(0,r.BX)(Z.gq,{gap:8,justifyContent:"center"===t?"center":void 0,opacity:100*!!S,wrap:"wrap",children:[n&&(0,r.BX)(B,{stretch:a,onClick:L({label:"Substack",url:(0,w.K8_)(o.subdomain,n.slug,{redirect:"app-marketing",source:"podcast-player-link"})}),children:[(0,r.tZ)(y.S,{platformKey:"substack"}),"Substack"]}),T.slice(0,I).map(e=>{let{label:t,platform:i,url:n}=e;return(0,r.BX)(B,{stretch:a,onClick:L({label:t,url:n}),children:[(0,r.tZ)(y.S,{platformKey:i}),t]})}),k&&!N&&(0,r.BX)(B,{stretch:a,onClick:M,children:[(0,r.tZ)(y.S,{platformKey:"rss"}),C("RSS feed")]}),N&&(0,r.BX)(f.v2,{trigger:(0,r.BX)(B,{children:[C("More"),(0,r.tZ)(d.Z,{})]}),children:[T.slice(I).map(e=>{let{label:t,platform:i,url:n}=e;return(0,r.tZ)(f.sN,{leading:(0,r.tZ)(y.S,{platformKey:i}),onClick:L({label:t,url:n}),children:t})}),(0,r.tZ)(f.sN,{leading:(0,r.tZ)(y.S,{platformKey:"rss"}),onClick:M,children:C("RSS feed")})]})]})})},B=(0,a.forwardRef)((e,t)=>{var{children:i,stretch:a,onClick:s}=e,d=(0,l._)(e,["children","stretch","onClick"]);return(0,r.tZ)(v.zx,(0,o._)((0,n._)({ref:t},d,a?{flex:"grow",justifyContent:"center"}:null),{className:"podcast-player-button",priority:"secondary",onClick:s,children:i}))})},66500:function(e,t,i){i.d(t,{S:()=>c});var n=i(16584),o=i(68835),l=i(66784),r=i(19081),a=i(58175);let s={audio:o.Z,video:l.Z},d={audio:"Audio",video:"Video"},c=e=>{let{medium:t}=e,i=s[t];return(0,n.BX)(r.gq,{alignItems:"center",bg:"secondary",color:"pub-secondary-text",gap:4,paddingX:6,radius:"sm",children:[(0,n.tZ)(i,{size:12}),(0,n.tZ)(a.xv,{font:"text",lineHeight:20,size:12,weight:"semibold",children:d[t]})]})}},29422:function(e,t,i){i.d(t,{b:()=>u});var n=i(16584),o=i(98661),l=i(94184),r=i.n(l),a=i(33870),s=i(19081),d=i(17564);let c=(0,o.forwardRef)((e,t)=>{let{animated:i=!0,variant:o}=e;return["grid","grid-groups"].includes(o)?(0,n.BX)(s.tu,{ref:t,gap:12,children:[(0,n.tZ)(d.S,{animated:i,aspectRatio:a.Hw}),(0,n.BX)(s.tu,{gap:8,children:[(0,n.tZ)(d.S,{animated:i,height:24,width:"70%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"90%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"50%"})]})]}):"list"===o?(0,n.BX)(s.tu,{ref:t,gap:8,children:[(0,n.tZ)(d.S,{animated:i,height:28,width:"60%"}),(0,n.tZ)(d.S,{animated:i,height:24,width:"80%"}),(0,n.tZ)(d.S,{animated:i,height:20,width:"20%"})]}):null}),u=(0,o.forwardRef)((e,t)=>{let{animated:i=!0,postCount:o,variant:l}=e;return(0,n.tZ)("div",{ref:t,className:r()({"loadingContainerGrid-ydRZVl":["grid","grid-groups"].includes(l),"loadingContainerList-gZ_Mu2":"list"===l}),children:Array.from(Array(o)).map(()=>(0,n.tZ)(c,{animated:i,variant:l}))})})},45262:function(e,t,i){i.d(t,{B:()=>d});var n=i(16584),o=i(64998),l=i(95441),r=i(98422),a=i(15771),s=i(19081);let d=e=>{let{url:t}=e,{isMobile:i}=(0,r.v9)(),{iString:d}=(0,l.M1)();return(0,n.tZ)(s.gq,{paddingTop:16,paddingX:8*!i,children:(0,n.tZ)(a.zx,{"data-testid":"archive-view-all",href:t,priority:"secondary",trailing:(0,n.tZ)(o.Z,{size:20}),children:d("See all")})})}},65191:function(e,t,i){i.d(t,{B:()=>u});var n=i(16584),o=i(94184),l=i.n(o),r=i(8400),a=i.n(r),s=i(98422),d=i(80542),c=i(19081);let u=e=>{let{hideDescriptions:t,posts:i,numColumns:o,onClickPost:r}=e,{isMobile:u}=(0,s.v9)(),p=i.every(e=>!e.cover_image),h=a()(i,o);return(0,n.tZ)(c.tu,{gap:u?28:4,children:h.map(e=>(0,n.tZ)(c.gq,{className:"postRow-schahZ",children:e.map(e=>{var i,a,s;return(0,n.tZ)("div",{className:l()("postContainer-okMiTM",{[(i="postContainerTwoColumn-OPvMmL",void 0!==i)?i:""]:2===o,[(a="postContainerThreeColumn-W6tLrW",void 0!==a)?a:""]:3===o,[(s="postContainerFourColumn-WylYbU",void 0!==s)?s:""]:4===o}),children:(0,n.tZ)(d.G,{hideDescription:t,hideImage:p,post:e,variant:"square",onClick:r})})})}))})}},15400:function(e,t,i){i.d(t,{B:()=>h});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(94184),s=i.n(a),d=i(38756),c=i(80542),u=i(19081);let p={container:"container-O1YsI6",divider:"divider-QOeHtM",dividerVertical:"dividerVertical-pPOkXS","long-divider":"long-divider-CDn5cl",longDivider:"long-divider-CDn5cl","two-small-one-large":"two-small-one-large-QUGVE5",twoSmallOneLarge:"two-small-one-large-QUGVE5","two-column-grid":"two-column-grid-h3GUav",twoColumnGrid:"two-column-grid-h3GUav","three-column-grid":"three-column-grid-tc6QOt",threeColumnGrid:"three-column-grid-tc6QOt","four-column-grid":"four-column-grid-IPXx88",fourColumnGrid:"four-column-grid-IPXx88","one-column-list":"one-column-list-YqnT5h",oneColumnList:"one-column-list-YqnT5h","one-column-list-flex":"one-column-list-flex-kqNmJm",oneColumnListFlex:"one-column-list-flex-kqNmJm","large-listing-listing-column":"large-listing-listing-column-feCdFL",largeListingListingColumn:"large-listing-listing-column-feCdFL","square-square-column":"square-square-column-b5mOve",squareSquareColumn:"square-square-column-b5mOve","two-column-list":"two-column-list-BLHtzo",twoColumnList:"two-column-list-BLHtzo","two-column-list--with-dividers":"two-column-list--with-dividers-cHfR0M",twoColumnListWithDividers:"two-column-list--with-dividers-cHfR0M","five-up":"five-up-H_hegz",fiveUp:"five-up-H_hegz","vertical-divider":"vertical-divider-GcHWq8",verticalDivider:"vertical-divider-GcHWq8","mini-row":"mini-row-KFztmA",miniRow:"mini-row-KFztmA","three-column-mini-row":"three-column-mini-row-ep3LFs",threeColumnMiniRow:"three-column-mini-row-ep3LFs"},h=e=>{var t;let{flex:i,hideImages:o,hideHorizontalDividers:l,hideVerticalDividers:a,linkToComments:d,posts:h,source:f,variant:b,onClickPost:y}=e;if("two-three-two"===b)return(0,r.tZ)(g,(0,n._)({},e));if("two-small-three-medium"===b)return(0,r.tZ)(m,(0,n._)({},e));if(["mini-row","three-column-mini-row"].includes(b))return(0,r.tZ)(v,(0,n._)({},e));let _=a?void 0:"detail-themed",w=l?void 0:"detail-themed";return(0,r.tZ)("div",{style:"grow"===i?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,r.tZ)("div",{className:s()(p.container,p[b],{[null!==(t=p["two-column-list--with-dividers"])&&void 0!==t?t:""]:"two-column-list"===b&&!l}),children:h.map((e,t)=>(0,r.BX)(r.HY,{children:[t>0&&["one-column-list","two-column-list","two-column-grid","three-column-grid","four-column-grid","large-listing-listing-column"].includes(b)&&(0,r.tZ)(u.gq,{borderBottom:w,className:p.divider}),t%2==0&&t>0&&["two-column-grid"].includes(b)&&(0,r.tZ)(u.gq,{borderBottom:w,className:p["long-divider"]}),t%4==0&&t>0&&["four-column-grid"].includes(b)&&(0,r.tZ)(u.gq,{borderBottom:w,className:p["long-divider"]}),(0,r.tZ)(c.G,{hideImage:o,linkToComments:d,post:e,testid:["large-listing-listing-column","two-small-one-large"].includes(b)?"magazine-spot-".concat(t+1):void 0,variant:Z(b,t),onClick:y&&f?i=>{let{event:n}=i;y({event:n,post:e,index:t,source:f})}:void 0}),"five-up"===b&&t===h.length-1&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.gq,{borderBottom:w,className:p.divider}),(0,r.tZ)(u.gq,{borderBottom:w,className:p.divider}),(0,r.tZ)(u.gq,{borderRight:_,className:p["vertical-divider"]}),(0,r.tZ)(u.gq,{borderRight:_,className:p["vertical-divider"]})]}),"two-small-one-large"===b&&t===h.length-1&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(u.gq,{borderBottom:w,className:p.divider}),(0,r.tZ)(u.gq,{borderRight:_,className:p["vertical-divider"]})]}),"square-square-column"===b&&1===t&&(0,r.tZ)(u.gq,{borderBottom:w,className:p.divider})]}))})})},m=e=>{let{posts:t,hideVerticalDividers:i}=e,a=(0,l._)(e,["posts","hideVerticalDividers"]),s=t.slice(0,3),c=t.slice(3);return(0,r.BX)(d.A,{hideVerticalDividers:i,stretchVertically:!0,variant:"one-column-two-column",children:[(0,r.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,r.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"}))]})},g=e=>{let{hideVerticalDividers:t,posts:i}=e,a=(0,l._)(e,["hideVerticalDividers","posts"]),s=i.slice(0,3),c=i.slice(3,5),u=i.slice(5);return(0,r.BX)(d.A,{hideVerticalDividers:t,variant:"one-column-two-column-one-column",children:[(0,r.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,r.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"})),(0,r.tZ)(h,(0,o._)((0,n._)({},a),{flex:"grow",hideImages:!1,posts:u,variant:"square-square-column"}))]})},v=e=>{let{linkToComments:t,posts:i,source:n,variant:o,onClickPost:l}=e;return(0,r.tZ)("div",{children:(0,r.tZ)("div",{className:s()(p.container,p[o]),children:i.slice(0,"mini-row"===o?4:3).map((e,i)=>(0,r.BX)(r.HY,{children:[i>0&&(0,r.tZ)(u.gq,{alignItems:"center",className:s()(p.divider,p.dividerVertical),paddingY:8,children:(0,r.tZ)(u.gq,{borderLeft:"detail-themed"})}),(0,r.tZ)(c.G,{linkToComments:t,post:e,variant:Z(o,i),onClick:l&&n?t=>{let{event:o}=t;l({event:o,post:e,index:i,source:n})}:void 0})]}))})})},Z=(e,t)=>"square-square-column"===e?"square":"large-listing-listing-column"===e?0===t?"large":"listing":"two-small-one-large"===e?0===t?"large":"square":"two-column-list"===e?"listing":"five-up"===e?0===t?"large":"square":["mini-row","three-column-mini-row","one-column-list","one-column-list-flex"].includes(e)?"mini":"square"},15612:function(e,t,i){i.d(t,{t:()=>G});var n=i(7409),o=i(99282),l=i(16584),r=i(30396),a=i(347),s=i(17781),d=i(49995),c=i(33578),u=i(20888),p=i(46234),h=i(98422),m=i(66500),g=i(19081),v=i(58175),Z=i(6070),f=i(47929);let b={logo:"logo-vqxCjr"},y=e=>{let{description:t,logoUrl:i,name:n,pub:o,section:r,user:a}=e,{isMobile:s}=(0,h.v9)(),d=(0,Z.VL)({pub:o,includeTheRampart:!0});return(0,l.BX)(g.gq,{alignItems:"center",direction:s?"column":"row",gap:32,paddingBottom:24,paddingTop:16,paddingX:8*!s,children:[i&&(0,l.tZ)(u.e,{alt:n,className:b.logo,imageIsFixedWidth:!0,maxWidth:300,src:i,useRetinaSizing:!0}),(0,l.BX)(g.tu,{gap:16,children:[(0,l.BX)(g.tu,{children:[d&&(null==a?void 0:a.is_subscribed)&&(0,Z.hx)({sectionId:null==r?void 0:r.id})&&(0,l.tZ)(v.xv.Meta,{color:"accent",paddingBottom:8,children:"+ Member-Only"}),(0,l.tZ)(v.xv.H1,{color:"pub-primary-text",font:"pub-headings",children:n}),d&&(0,l.tZ)(g.gq,{alignItems:"center",gap:8,paddingBottom:12,paddingTop:8,children:(0,Z.rM)({sectionId:null==r?void 0:r.id}).map(e=>(0,l.tZ)(m.S,{medium:e}))}),t&&(0,l.tZ)(g.tu,{gap:8,children:t.split("\n").map(e=>(0,l.tZ)(v.xv.B3,{color:"pub-secondary-text",children:e}))})]}),d&&(0,l.tZ)(p.B,{pub:o,section:r,trackingSource:f.b3.sectionPage,variant:(null==a?void 0:a.is_subscribed)?"default":"member-only"})]})]})};var _=i(95441),w=i(55480),C=i(74571),B=i(85923),k=i(43905);let x=e=>{let{firstPodcastPost:t,pub:i,user:n,section:o=null}=e,{iString:r}=(0,_.M1)(),{isMobile:a}=(0,h.v9)(),{feedUrl:s}=(0,C.fn)({pub:i,user:n,section:o}),d=(0,k.a9)({pub:i,section:o,spotifySettings:(0,w.pp)({pub:i,section:null!=o?o:null})});return(0,l.tZ)(g.hs,{paddingX:8*!a,children:(0,l.tZ)(B.y,{description:r("Add this podcast to your player of choice:"),feedUrl:s,post:null!=t?t:null,pub:i,section:o,showLinks:d,user:n})})};var S=i(63391),P=i(95050),I=i(15400),X=i(30733),T=i(84864);let N=e=>{var t,i,n,o;let{newPosts:r,pinnedPosts:s,podcastSettings:d,pub:u,search:p,section:m,sort:g,user:v,utm:Z,welcomeAndShareElement:f}=e,{isMobile:b}=(0,h.v9)(),_=(0,T.sectionIsSpecificallyMarkedAsNewsletter)({pub:u,section:m});return(0,l.tZ)(a.h,{children:(0,l.BX)(X.N,{columns:3,children:[(0,l.tZ)(P.PageMetaData,{isPodcast:!0,pub:u,section:m}),(0,l.tZ)(y,{description:null!==(t=d.description)&&void 0!==t?t:"",logoUrl:(null==v?void 0:v.is_subscribed)&&null!==(i=d.paidEpisodeArtUrl)&&void 0!==i?i:d.artUrl,name:null!==(n=d.title)&&void 0!==n?n:"",pub:u,section:m,user:v}),!b&&(0,l.tZ)(S.f,{numColumns:4}),(0,l.BX)("div",{className:"bodyContainer-P2vZHh",children:[(0,l.tZ)(c.O,{isPodcast:!_,maxPosts:7,newPosts:r,pinnedPosts:s,pub:u,search:p,sectionId:null==m?void 0:m.id,sort:g,user:v,utm:Z,variant:"list",children:e=>{var t;let{posts:i,linkToComments:n,onClickPost:o}=e;return(0,l.tZ)(I.B,{hideImages:null===(t=u.theme)||void 0===t?void 0:t.hide_images_from_list,linkToComments:n,posts:i,variant:"two-column-list",onClickPost:o})}}),(0,l.tZ)(x,{firstPodcastPost:null!==(o=null==r?void 0:r.filter(e=>"podcast"===e.type)[0])&&void 0!==o?o:null,pub:u,section:m,user:v})]}),f]})})};var M=i(94184),L=i.n(M),E=i(38756),q=i(20435),z=i(71068);let R=e=>{var t;let{align:i,columns:n,description:o,imageUrl:r,name:a,pub:s}=e,{isMobile:d}=(0,h.v9)(),c=(0,z.oB)({radius:"md",width:80}),p=(0,l.BX)(g.tu,{paddingTop:16,children:[(0,l.BX)(g.tu,{alignItems:"center"===i?"center":void 0,gap:12,paddingX:8*!d,children:[r&&(0,l.tZ)(u.e,{className:c,imageIsFixedWidth:!0,maxWidth:80,src:r,useRetinaSizing:!0}),(0,l.tZ)(v.xv.H1,{className:L()({[(t="pillarHeader-Bn88EX",void 0!==t)?t:""]:(0,Z.kb)({pub:s})}),color:"pub-primary-text",font:"pub-headings",children:a}),(0,l.tZ)(v.xv.B2,{align:i,color:"pub-secondary-text",children:o})]}),(0,l.tZ)(S.f,{paddingBottom:0,paddingTop:32})]});return 2===n?(0,l.tZ)(q.s,{mainContent:p}):(0,l.tZ)(E.A,{variant:"three-column-width",children:p})};var A=i(74805),F=i(70647),O=i(51213),D=i(26176),H=i(63651);let U=e=>{var t;let{columns:i,podcastSettings:n,firstPost:o,heroAlignment:r,pub:a,section:s,showPodcastLinks:d,user:c,utm:u,variant:p}=e,{isMobile:m}=(0,h.v9)(),v=null!==(t=n?n.description:null==s?void 0:s.description)&&void 0!==t?t:"",Z=n?n.artUrl:null==s?void 0:s.logo_url,f=n?n.title:null==s?void 0:s.name,b=(0,H.lsY)(Z);return"feature-media"===p&&2!==i?o?(0,l.tZ)(g.tu,{paddingTop:m?16:24,children:(0,l.tZ)(D.Y,{columns:i,hideLogo:!Z||b,isPodcast:!!n,post:o,pub:a,section:s,showPodcastLinks:d,user:null!=c?c:null,utm:u})}):null:"podcast"===p&&m?(0,l.tZ)(O.W,{description:v,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&"center"===r?(0,l.tZ)(F.p,{description:v,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&n?(0,l.tZ)(A.a,{columns:Math.max(i,3),description:v,imageUrl:Z,name:f,post:o,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):(0,l.tZ)(R,{align:r,columns:Math.min(i,3),description:v,imageUrl:b?null:Z,name:f,pub:a})};var J=i(68648),W=i(60885);let j=e=>{let{columns:t,isPodcast:i,newPosts:n,pinnedPosts:o,pub:r,search:a,section:s,sort:d,user:u,utm:p,variant:h,onChangeFirstPost:m}=e,g=7;"grid"===h&&(4===t&&(g=8),3===t&&(g=9));let v=(0,l.tZ)(c.O,{includePins:!(i&&!s),isPodcast:i,maxPosts:g,newPosts:n,pinnedPosts:o,pub:r,search:a,sectionId:null==s?void 0:s.id,sort:d,user:u,utm:p,variant:h,onPostsLoaded:e=>{var t;let{posts:i}=e;m({post:null!==(t=i[0])&&void 0!==t?t:null})},children:e=>{var i;let{posts:n,linkToComments:o,onClickPost:a}=e;return(0,l.tZ)(W.QI,{pub:r,showPubPins:!1,showSectionPins:!0,children:(0,l.tZ)(I.B,{hideHorizontalDividers:"grid"===h,hideImages:null===(i=r.theme)||void 0===i?void 0:i.hide_images_from_list,linkToComments:o,posts:n,variant:function(e){let{columns:t,variant:i}=e;return"list"===i?"two-column-list":4===t?"four-column-grid":"three-column-grid"}({columns:t,variant:h}),onClickPost:a})})}});return"list"===h?(0,l.tZ)(q.s,{mainContent:v}):(0,l.tZ)(E.A,{variant:function(e){let{columns:t}=e;return 4===t?"full-width":"three-column-width"}({columns:t}),children:v})};var Y=i(75801),V=i(17054);let G=e=>{var t,i,c,u,p,m,v,f,b,y,_,w;let{blurbs:C,freeSignup:B,freeSignupEmail:k,hide_intro_popup:x,isPodcast:S,newPostsForPubPodcast:I,notify_user:T,pageTheme:M,pub:L,referralCode:E,search:q,slug:z,sort:R,showWelcome:A,user:F,utm:O,launchWelcomePage:D,sectionPageData:H,skipIntroPopupRender:W}=e,{isMobile:G,isTablet:Q}=(0,h.v9)(),$=z?L.sections.find(e=>e.slug===z):void 0,ee=S&&!$,et=null!==(u=null!=M?M:ee?null===(t=L.pageThemes)||void 0===t?void 0:t.podcast:null==$?void 0:$.pageTheme)&&void 0!==u?u:null,ei=S&&!$?I:null==H?void 0:null===(i=H[null!==(p=null==$?void 0:$.id)&&void 0!==p?p:0])||void 0===i?void 0:i.newPosts,en=null==H?void 0:null===(c=H[null!==(m=null==$?void 0:$.id)&&void 0!==m?m:0])||void 0===c?void 0:c.pinnedPosts,eo=null!==(v=[...null!=en?en:[],...null!=ei?ei:[]][0])&&void 0!==v?v:null,[el,er]=(0,r.eJ)(eo?{[$?$.id:"pubPodcast"]:eo}:{}),[ea,es]=(0,r.eJ)(!1),ed=null!==(f=el[$?$.id:"pubPodcast"])&&void 0!==f?f:null,ec=(0,r.I4)(e=>{let{post:t}=e;ed||(t?(er(e=>(0,o._)((0,n._)({},e),{[$?$.id:"pubPodcast"]:t})),es(!1)):es(!0))},[ed,$]);if((0,r.d4)(()=>{T&&"undefined"!=typeof window&&(0,d.ZP)(T)},[T]),!$&&!S)return console.warn("Should be either a section or podcast or both"),null;let eu=null;if((S||(null==$?void 0:$.is_podcast))&&(eu=$?(0,V.d_)({pub:L,section:$}):(0,V.jU)({pub:L})),(0,Z.HD)({pub:L})&&(S||$))return(0,l.tZ)(s.E,{freeSignup:B,freeSignupEmail:k,isPodcast:!!S,newPosts:ei,pub:L,scheduledLiveStreams:null==H?void 0:null===(b=H[null!==(y=null==$?void 0:$.id)&&void 0!==y?y:0])||void 0===b?void 0:b.scheduledLiveStreams,section:null!=$?$:null,user:F,utm:O},null!==(_=null==$?void 0:$.id)&&void 0!==_?_:-1);let ep=(0,Z.VL)({pub:L,includeTheRampart:!0})&&eu,eh=(0,l.tZ)(Y.L,{blurbs:C,freeSignup:B,freeSignupEmail:k,hide_intro_popup:x,isPodcast:S,launchWelcomePage:D,pub:L,referralCode:E,showWelcome:A,user:F});if(ep&&eu&&$)return(0,l.tZ)(N,{newPosts:ei,pinnedPosts:en,podcastSettings:eu,pub:L,search:q,section:$,sort:R,user:F,utm:O,welcomeAndShareElement:W?null:eh});let em=et;em||(em=((null==$?void 0:$.is_podcast)||S)&&!ea?{hero_alignment:"left",page_hero:"feature-media",page_posts:"grid",show_podcast_links:!1}:{hero_alignment:"left",page_hero:"default",page_posts:"list",show_podcast_links:!1}),em.page_hero=K(em.page_hero);let eg=2,ev="grid"===em.page_posts?3:2;return"feature-media"===em.page_hero?"grid"===em.page_posts?eg=ev=Q?3:4:"list"===em.page_posts&&(eg=3,ev=2):eg=ev,(0,l.tZ)(J.hV,{pub:L,children:(0,l.tZ)(a.h,{children:(0,l.BX)(X.N,{columns:4,paddingTop:"podcast"===em.page_hero||"feature-media"===em.page_hero?0:void 0,children:[(0,l.tZ)(P.PageMetaData,{isPodcast:S,pub:L,section:$}),(0,l.tZ)(U,{columns:eg,firstPost:ed,heroAlignment:em.hero_alignment,podcastSettings:eu,pub:L,section:$,showPodcastLinks:em.show_podcast_links,user:F,utm:O,variant:em.page_hero}),(0,l.tZ)(g.tu,{opacity:"feature-media"!==em.page_hero||ed?100:0,paddingBottom:32,paddingTop:G?24:32,children:(0,l.tZ)(j,{columns:ev,isPodcast:!!S,newPosts:ei,pinnedPosts:en,pub:L,search:q,section:$,sort:R,user:F,utm:O,variant:em.page_posts,onChangeFirstPost:ec},null!==(w=null==$?void 0:$.id)&&void 0!==w?w:-1)}),!W&&eh]})})})},K=e=>e?"podcast-with-post"===e?"podcast":e:"default"},75801:function(e,t,i){i.d(t,{L:()=>m});var n=i(16584),o=i(30396),l=i(35047),r=i(9721),a=i(36808);let s=["astralcodexten","thecoddlingmovie","bariweiss","theprepress"];var d=i(26111),c=i(84864);let u=e=>{let{pub:t,user:i,freeSignup:n}=e,o=new Date(Date.now()-864e5);if((0,d.x)("no_cover")||(0,d.x)("hide_intro_popup"))return!0;if((0,d.x)("showWelcome"))return!1;if("share"===(0,d.x)("action")||(0,d.x)("accepting_gift")||!t||s.includes(t.subdomain)||n||i&&(i.is_free_subscribed||i.is_subscribed||i.is_contributor))return!0;let l=a.get("intro_popup_last_hidden_at");return!!(l&&new Date(l)>=o||"undefined"!=typeof navigator&&(0,c.isSearchEngineCrawlerQuick)(navigator.userAgent))};var p=i(98914),h=i(60308);let m=e=>{let{blurbs:t,freeSignup:i,freeSignupEmail:a,hide_intro_popup:s,pub:c,referralCode:m,showWelcome:g,user:v,launchWelcomePage:Z}=e,[f,b]=(0,o.eJ)(!1),y=u({pub:c,user:v,freeSignup:i});return(0,o.d4)(()=>{"share"===(0,d.x)("action")&&(window.history.replaceState({},document.title,(0,h.rhs)({action:null})),b(!0)),"undefined"!=typeof window&&g&&(0,p.iO)("showWelcome")},[g]),(0,n.BX)(n.HY,{children:[(0,n.tZ)(r.V,{isOpen:f,medium:"web",pub:c,user:v,onClose:()=>b(!1)}),(0,n.tZ)(l.ZP,{blurbs:t,freeSignup:i,freeSignupEmail:a,hidden:s||f||y,launchWelcomePage:Z,publication:c,referralCode:m,showOnMount:g,user:v})]})}},71897:function(e,t,i){i.d(t,{A:()=>r});var n=i(7409);let o={sm:{size:15,lineHeight:20},md:{size:19,lineHeight:26},lg:{size:30,lineHeight:38},mobileMd:{size:17,lineHeight:24},mobileLg:{size:30,lineHeight:38}},l={sinocism:{sm:{size:13,lineHeight:20},md:{size:16,lineHeight:24},lg:{size:27,lineHeight:36},mobileMd:{size:16,lineHeight:24},mobileLg:{size:27,lineHeight:36}},thepillar:{sm:{size:16,lineHeight:20,fontFamily:"Georgia, serif"},md:{size:22,lineHeight:28,fontFamily:"Georgia, serif"},lg:{size:36,lineHeight:42,fontFamily:"Georgia, serif"},mobileMd:{size:20,lineHeight:26,fontFamily:"Georgia, serif"},mobileLg:{size:28,lineHeight:36,fontFamily:"Georgia, serif"}}},r=e=>{let{preset:t,pub:i}=e;return(i?(0,n._)({},o,l[i.subdomain]):o)[t]}},1152:function(e,t,i){i.d(t,{M:()=>b});var n=i(7409),o=i(99282),l=i(16584),r=i(94184),a=i.n(r),s=i(4767),d=i(58023),c=i(7523),u=i(49762),p=i(58401),h=i(98422),m=i(38756),g=i(61264),v=i(19081),Z=i(63651),f=i(16823);let b=e=>{let{posts:t,title:i,variant:r,viewAllUrl:a,headerVariant:s="align-left-with-see-all"}=e,d={posts:t,title:i,viewAllUrl:a,headerVariant:s};switch(r){case"special-feature":return(0,l.tZ)(y,(0,n._)({},d));case"large-in-middle":return(0,l.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"middle"}));case"large-on-left":return(0,l.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"left"}));case"large-on-right":return(0,l.tZ)(C,(0,o._)((0,n._)({},d),{largeColumnPosition:"right"}));default:return null}},y=e=>{let{posts:t,title:i}=e,{isMobile:n,isTablet:o,isDesktop:r}=(0,h.v9)();return n?(0,l.tZ)(_,{posts:t,title:i}):(0,l.BX)("div",{children:[(0,l.tZ)(w,{title:i}),(0,l.BX)(m.A,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,l.tZ)(g.X,{align:r?"center":"left",post:t[0],showImageLast:r,titlePreset:"h2-serif",variant:"large"}),(0,l.tZ)(d.Z,{paddingTop:64*!!r,children:t.slice(1,o?5:3).map(e=>(0,l.tZ)(g.X,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),r&&(0,l.tZ)(d.Z,{paddingTop:64,children:t.slice(3,5).map(e=>(0,l.tZ)(g.X,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))})]}),(0,l.tZ)("div",{className:f.Z.threeColumnContainer,children:t.slice(5,8).map(e=>(0,l.tZ)(v.tu,{borderTop:"detail-themed",paddingTop:24,children:(0,l.tZ)(g.X,{align:"center",hideDescription:!0,hideImage:!0,post:e,variant:"square"})}))})]})},_=e=>{let{title:t,posts:i}=e;return(0,l.BX)("div",{children:[(0,l.tZ)(w,{title:t}),(0,l.BX)(v.tu,{gap:32,children:[i[0]&&(0,l.tZ)(g.X,{align:"left",post:i[0],titlePreset:"h2-serif",variant:"large"}),(0,l.tZ)(s.E,{children:i.slice(1,5).map(e=>(0,l.tZ)(g.X,{hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),(0,l.tZ)(d.Z,{gap:16,includeTopDivider:!0,children:i.slice(5,8).map(e=>(0,l.tZ)(g.X,{post:e,variant:"mini"}))})]})]})},w=e=>{let{title:t}=e,{isMobile:i}=(0,h.v9)(),n=(0,u.ZP)("thefp_enable_america_250"),o="America at 250"===t&&n;return(0,l.BX)(v.gq,{alignItems:"center",className:f.Z.specialFeatureHeaderContainer,gap:20,paddingBottom:i?28:56,children:[(0,l.tZ)("div",{className:o?a()(f.Z.thickRule,f.Z.a250Rule):f.Z.thickRule}),o?(0,l.tZ)("a",{className:f.Z.america250HomepageHeader,href:"/america250",children:(0,l.tZ)("img",{className:f.Z.a250Logo,src:(0,Z.zF4)("".concat((0,Z.ZJn)(),"/img/thefp/a250_homepage.png"),500,{quality:"auto:good",crop:"limit"}),width:446})}):(0,l.tZ)(c.Z,{color:"accent",preset:"st3",children:t}),(0,l.tZ)("div",{className:o?a()(f.Z.thickRule,f.Z.a250Rule):f.Z.thickRule})]})},C=e=>{let{largeColumnPosition:t,posts:i,title:n,viewAllUrl:o,headerVariant:r}=e,{isMobile:a,isTablet:s,isDesktop:c}=(0,h.v9)();return a?(0,l.tZ)(B,{headerVariant:r,posts:i,title:n,viewAllUrl:o}):(0,l.BX)(v.tu,{gap:28,children:[(0,l.tZ)(p.l,{title:n,titlePreset:"st2",variant:r,viewAllUrl:o}),(0,l.BX)(m.A,{hideVerticalDividers:!0,variant:{middle:"one-column-two-column-one-column",left:"two-column-one-column-one-column",right:"one-column-one-column-two-column"}[t],children:[i[0]&&(0,l.tZ)(g.X,{align:"left",post:i[0],titlePreset:"h3-condensed",variant:"large"}),(0,l.tZ)(d.Z,{paddingTop:40*!!c,children:i.slice(1,s?5:3).map(e=>(0,l.tZ)(g.X,{hideDescription:s,post:e,variant:"square"}))}),c&&(0,l.tZ)(d.Z,{paddingTop:40,children:i.slice(3,5).map(e=>(0,l.tZ)(g.X,{post:e,variant:"square"}))})]})]})},B=e=>{let{posts:t,title:i,viewAllUrl:n,headerVariant:o}=e;return(0,l.BX)(v.tu,{gap:20,children:[(0,l.tZ)(p.l,{title:i,titlePreset:"st2",variant:o,viewAllUrl:n}),(0,l.BX)(v.tu,{gap:32,children:[t[0]&&(0,l.tZ)(g.X,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,l.tZ)(s.E,{children:t.slice(1,5).map(e=>(0,l.tZ)(g.X,{hideDescription:!0,post:e,variant:"square"}))})]})]})}},58401:function(e,t,i){i.d(t,{l:()=>p});var n=i(7409),o=i(98848),l=i(16584),r=i(74626),a=i(7523),s=i(95441),d=i(98422),c=i(19081),u=i(16823);let p=e=>{var{variant:t="align-left-with-see-all"}=e,i=(0,o._)(e,["variant"]);return"align-left-with-see-all"===t?(0,l.tZ)(h,(0,n._)({},i)):(0,l.tZ)(m,(0,n._)({},i))},h=e=>{let{titlePreset:t,title:i,viewAllUrl:n}=e,{iString:o}=(0,s.M1)(),{isMobile:p}=(0,d.v9)();return(0,l.BX)(c.gq,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,l.tZ)(a.Z,{preset:t,children:i}),(0,l.BX)(c.gq,{alignItems:"end",flex:"grow",children:[(0,l.tZ)("div",{className:u.Z.mediumRule}),n&&(p?(0,l.tZ)(c.gq,{className:u.Z.headerButtonMobile,position:"absolute",children:(0,l.tZ)(r._,{href:n,size:"md",trailingIcon:"chevron-right",variant:"tertiary",children:o("See all")})}):(0,l.tZ)(r._,{href:n,trailingIcon:"chevron-right",children:o("See all")}))]})]})},m=e=>{let{titlePreset:t,title:i}=e;return(0,l.BX)(c.gq,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,l.tZ)("div",{className:u.Z.mediumRule}),(0,l.tZ)(a.Z,{preset:t,children:i})]})}},51450:function(e,t,i){i.d(t,{p:()=>n});let n=(0,i(6400).createContext)({activeLiveStream:void 0,latestPostByContributorId:void 0,latestPodcastPosts:void 0,latestPostFromSections:void 0,contributors:void 0,freeSignup:void 0,freeSignupEmail:void 0,homepageLinks:void 0,numRecommendations:void 0,recommendations:void 0,topPosts:void 0})},68648:function(e,t,i){i.d(t,{ZT:()=>p,hV:()=>u,re:()=>c});var n=i(7409),o=i(99282),l=i(16584),r=i(6400),a=i(30396),s=i(14293),d=i.n(s);let c=(0,r.createContext)({authorPagesEnabled:!1,cropGravity:"center",disableInteractive:!1,hideUfi:!1,highlightByline:!1,linkToComments:!1,pub:null,modifiedPosts:{},showPinForPostIds:new Set,user:null,onChangePost:()=>void 0,onUnpinPost:()=>void 0}),u=e=>{let{actionsClassName:t,authorPagesEnabled:i,children:r,cropGravity:s,disableInteractive:u,hideUfi:p,highlightByline:h,linkToComments:m,postPreviewUrl:g,pub:v,showPinForPostIds:Z,showSectionOrTag:f,user:b,utm:y,onClickPost:_,onToggleMenu:w,onUnpinPost:C}=e,B=(0,a.qp)(c),[k,x]=(0,a.eJ)({}),S=(0,a.I4)(e=>{let{post:t}=e;x(e=>(0,o._)((0,n._)({},e),{[t.id]:t}))},[]);return(0,l.tZ)(c.Provider,{value:(0,o._)((0,n._)({},B,d()(t)?null:{actionsClassName:t},d()(i)?null:{authorPagesEnabled:i},d()(s)?null:{cropGravity:s},d()(u)?null:{disableInteractive:u},d()(p)?null:{hideUfi:p},d()(h)?null:{highlightByline:h},d()(m)?null:{linkToComments:m},d()(g)?null:{postPreviewUrl:g},d()(v)?null:{pub:v},d()(Z)?null:{showPinForPostIds:Z},d()(f)?null:{showSectionOrTag:f},d()(b)?null:{user:b},d()(y)?null:{utm:y},d()(_)?null:{onClickPost:_},d()(w)?null:{onToggleMenu:w},d()(C)?null:{onUnpinPost:C}),{modifiedPosts:k,onChangePost:S}),children:r})},p=()=>{let e=(0,a.qp)(c);if(!e.pub)throw Error("No pub provided to PostPreviewContext");return e}},80542:function(e,t,i){i.d(t,{G:()=>J});var n=i(7409),o=i(99282),l=i(98848),r=i(58865),a=i(16584),s=i(30396),d=i(94184),c=i.n(d),u=i(95441),p=i(98914),h=i(98422),m=i(68648),g=i(94442),v=i(19081),Z=i(84864);let f=e=>{let{justified:t,post:i}=e,{actionsClassName:n,pub:o,user:l,onChangePost:r,onToggleMenu:s}=(0,m.ZT)(),d="restack"===i.type;return d?null:(0,a.tZ)(v.tu,{className:n,children:(0,a.tZ)(g._2,{allowEdit:!d,editButtonIsLast:!0,hideComments:!(0,Z.showCommentsOnPost)({publication:o,post:i}),hideReactions:!o.community_enabled,hideShare:d,isStatic:!1,justified:t,labelStyle:"counts-or-none",position:"pub-preview",post:i,pub:o,showRestackButton:!0,style:"compressed",user:l,onChange:r,onToggleMenu:s})})};var b=i(31883),y=i(49733),_=i(58175),w=i(93903),C=i(6070);let B=e=>{let{align:t,clamp:i,lineHeight:n=20,maxLength:o=152,paddingBottom:l,post:r,size:s=14,textWrap:d}=e,{postPreviewUrl:c,pub:u}=(0,m.ZT)();return(0,a.tZ)(v.tu,{paddingBottom:l,children:(0,a.tZ)(_.xv,{align:t,as:"a",clamp:i,color:"primary",font:"text",href:c,lineHeight:n,size:s,style:(0,C.kb)({pub:u})?{fontFamily:"Georgia, serif"}:void 0,textWrap:d,children:(0,w.Z)((0,Z.truncateWords)(r.description,o))})})};var k=i(24350),x=i.n(k),S=i(20042),P=i(63651);let I=e=>{var t,i;let{paddingBottom:n,post:o}=e,{pub:l,showSectionOrTag:r}=(0,m.ZT)();if(!r)return null;let s=null,d=null;if(o.section_id){let e=l.sections.find(e=>e.id===o.section_id);e&&(s=e.name,d=(0,P.Ucy)(l,{section:e}))}else if(null===(t=o.postTags)||void 0===t?void 0:t.length){let e=x()(l.navigationBarItems.filter(e=>e.postTag).map(e=>e.postTag),"id"),t=null===(i=o.postTags)||void 0===i?void 0:i.find(t=>e[t.id]);t&&(s=t.name,d=(0,P.Mk9)(l,t))}return s&&d?(0,a.tZ)(v.hs,{paddingBottom:n,children:(0,a.tZ)(_.xv.Meta,{as:"a",color:"primary",href:d,onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,S.route)(d)},children:s})}):null};var X=i(95561),T=i(33870),N=i(31377);let M={container:"container-m3tNBN",containerNoImage:"containerNoImage-bRvPTc",image:"image-e4U1t2",content:"content-jHL69Q"},L=e=>{let{isSmall:t,post:i}=e,{hideUfi:n}=(0,m.ZT)(),{isTablet:o}=(0,h.v9)(),l=!!(0,N.getCoverImageUrl)(i);return(0,a.BX)("div",{className:c()(M.container,{[M.containerNoImage]:!l}),children:[l&&(0,a.tZ)(y.X,{className:M.image,imageAspectRatio:t?T.Hw:T.YU,imageWidth:1280,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.BX)(v.tu,{alignItems:"center",className:M.content,justifyContent:"center",paddingBottom:64*!l,paddingTop:l?24:64,paddingX:l?32:64,children:[(0,a.tZ)(I,{paddingBottom:4,post:i}),(0,a.tZ)(X.F,{align:"center",clamp:3,paddingBottom:8,post:i,preset:o?"mobileLg":"lg",preventOrphans:!0}),(0,a.tZ)(B,{align:"center",clamp:3,lineHeight:24,paddingBottom:8,post:i,size:17}),(0,a.tZ)(b.vo,{post:i}),!n&&(0,a.tZ)(v.tu,{paddingTop:8,children:(0,a.tZ)(f,{post:i})})]})]})},E={image:"image-QTMr_S"},q={container:"container-Qnseki","container--no-image":"container--no-image-zKZVLo",image:"image-tkPTAj"};var z=i(68833),R=i(98750),A=i(85685),F=i(98012);let O={image:"image-vqosjM"},D={image:"image-Ac018u"};function H(){let e=(0,r._)(["Post preview for ",""]);return H=function(){return e},e}let U={jumbo:L,"jumbo-small":e=>(0,a.tZ)(L,(0,o._)((0,n._)({},e),{isSmall:!0})),large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:o}=e,{hideUfi:l,pub:r}=(0,m.ZT)();return(0,a.BX)(v.tu,{children:[!i&&(0,a.tZ)(y.X,{className:E.image,imageAspectRatio:"wide"===n?T.YU:T.Hw,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:o,squareImageSize:"large"}),(0,a.BX)(v.tu,{alignItems:"center"===t?"center":"start",flex:"grow",justifyContent:(0,C.kb)({pub:r})?"start":"center",paddingBottom:0,paddingTop:32,paddingX:16*("left"!==t),children:[(0,a.tZ)(I,{paddingBottom:4,post:o}),(0,a.tZ)(X.F,{align:t,clamp:4,paddingBottom:8,post:o,preset:"lg",preventOrphans:!0,textWrap:"balance"}),(0,a.tZ)(B,{align:t,clamp:2,lineHeight:(0,C.kb)({pub:r})?28:24,paddingBottom:8,post:o,size:(0,C.kb)({pub:r})?20:17,textWrap:"balance"}),(0,a.tZ)(b.vo,{post:o}),!l&&(0,a.tZ)(v.tu,{paddingTop:8,children:(0,a.tZ)(f,{post:o})})]})]})},listing:e=>{let{hideImage:t,post:i}=e,{hideUfi:n,pub:o}=(0,m.ZT)(),{isMobile:l}=(0,h.v9)(),r=!!o.community_enabled;return t&&!l&&(r=!1),(0,a.BX)("div",{className:c()(q.container,{[q["container--no-image"]]:t}),children:[(0,a.BX)(v.tu,{flex:"grow",gap:4,position:"relative",children:[(0,a.tZ)(I,{post:i}),(0,a.tZ)(X.F,{clamp:3,post:i,preset:l?"mobileMd":"md"}),!(0,C.kb)({pub:o})&&(0,a.tZ)(B,{clamp:2,lineHeight:t?24:20,post:i,size:15}),(0,a.tZ)(b.vo,{post:i}),!n&&(0,a.tZ)(f,{justified:r,post:i})]}),!t&&(i.cover_image?(0,a.tZ)("div",{children:(0,a.tZ)(y.X,{className:q.image,imageAspectRatio:l?1:T.Hw,imageWidth:l?150:320,isBelowTheFold:!0,playButtonSize:l?32:40,post:i,squareImageSize:"small"})}):(0,a.tZ)("div",{}))]})},mini:e=>{let{post:t}=e,{hideUfi:i,pub:n}=(0,m.ZT)(),o=!!n.community_enabled;return(0,a.BX)(v.tu,{gap:4,children:[(0,a.BX)(v.gq,{gap:12,children:[(0,a.BX)(v.tu,{flex:"grow",gap:4,children:[(0,a.tZ)(I,{post:t}),(0,a.tZ)(X.F,{clamp:2,post:t,preset:"sm"}),(0,a.tZ)(b.vo,{clamp:1,post:t})]}),(0,a.tZ)(y.X,{className:"image-tBOtsv",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t})]}),!i&&(0,a.tZ)(f,{justified:o,post:t})]})},"mini-episode":e=>{let{post:t}=e,i=(0,s.sO)(null);return(0,R.UM)(i,()=>{(0,z.j)(z.FP.RECENT_EPISODE_ITEM_SEEN,{post_id:t.id})}),(0,a.BX)(v.gq,{ref:i,gap:16,children:[(0,a.tZ)(y.X,{className:"image-UySkN_",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t}),(0,a.BX)(v.tu,{flex:"grow",children:[(0,a.tZ)(X.F,{clamp:2,paddingBottom:4,post:t,preset:"sm"}),(0,a.tZ)(b.vo,{clamp:1,post:t})]})]})},"mini-video":e=>{let{post:t}=e;return(0,a.BX)(v.gq,{gap:16,children:[(0,a.BX)(v.tu,{flex:"grow",gap:4,children:[(0,a.tZ)(_.xv.Meta,{color:"secondary",children:(0,F.Z)(t.post_date).locale("en").format("MMM DD")}),(0,a.tZ)(_.xv.B3,{clamp:2,color:"primary",weight:"semibold",children:t.title}),(0,a.tZ)(_.xv.Meta,{color:"secondary",children:t.publishedBylines.map((e,t)=>(0,a.BX)(a.HY,{children:[t>0?", ":null,(0,a.tZ)(A.ProfileHoverCard,{disabled:!1,subject:e,utmSource:"byline",children:(0,a.tZ)(_.xv,{as:"a",decoration:"hover-underline",children:e.name})})]}))})]}),(0,a.tZ)(y.X,{className:"image-XZMKsB",hidePlaceholder:!0,hideTimestampIcon:!0,imageAspectRatio:T.Hw,imageWidth:120,isBelowTheFold:!1,playButtonSize:null,post:t})]})},"mobile-hero":e=>{let{hidePlaceholder:t,post:i}=e,{hideUfi:n,pub:o}=(0,m.ZT)(),l=!!o.community_enabled;return(0,a.BX)(v.tu,{children:[i.cover_image&&(0,a.tZ)(y.X,{className:O.image,hidePlaceholder:t,imageAspectRatio:T.YU,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:i,squareImageSize:"large"}),(0,a.BX)(v.tu,{flex:"grow",justifyContent:"center",paddingTop:16,paddingX:16,children:[(0,a.tZ)(I,{paddingBottom:4,post:i}),(0,a.BX)(v.tu,{gap:8,paddingBottom:12,children:[(0,a.tZ)(X.F,{clamp:3,post:i,preset:"mobileLg",preventOrphans:!0}),(0,a.tZ)(B,{clamp:3,lineHeight:20,post:i,size:15}),(0,a.tZ)(b.vo,{post:i})]}),!n&&(0,a.tZ)(f,{justified:l,post:i})]})]})},square:e=>{let{hideDescription:t,hideImage:i,post:n}=e,{hideUfi:o,pub:l}=(0,m.ZT)(),r=!!l.community_enabled,s=t||(0,C.kb)({pub:l});return(0,a.BX)(v.tu,{gap:12,children:[!i&&(0,a.tZ)(y.X,{className:c()(D.image),imageAspectRatio:T.Hw,imageWidth:600,isBelowTheFold:!0,playButtonSize:56,post:n,squareImageSize:"medium"}),(0,a.BX)(v.tu,{flex:"grow",gap:4,children:[(0,a.tZ)(I,{post:n}),(0,a.tZ)(X.F,{clamp:3,post:n,preset:"md"}),!s&&(0,a.tZ)(B,{clamp:1,post:n}),(0,a.tZ)(b.vo,{post:n}),!o&&(0,a.tZ)(f,{justified:r,post:n})]})]})}},J=e=>{var t,{linkToComments:i,post:r,testid:d,variant:g,onClick:Z}=e,f=(0,l._)(e,["linkToComments","post","testid","variant","onClick"]);let{iTemplate:b}=(0,u.M1)(),{isMobile:y}=(0,h.v9)(),{disableInteractive:_,pub:w,modifiedPosts:B,utm:k}=(0,m.ZT)(),x=null!==(t=B[r.id])&&void 0!==t?t:r,[S,P]=(0,s.eJ)(!1),[I,X]=(0,s.eJ)(!1),N=(0,s.I4)(e=>{let{active:t}=e;P(!!t)},[]),M=U[g];if(!M)return console.warn("PostPreview: ".concat(g," not implemented")),null;let L=(0,T.zV)({linkToComments:!!i,post:x,pub:w,utm:k});return(0,a.tZ)(m.hV,{actionsClassName:c()("actions-YFg47u",{"actions--menu-open-bDkeVH":S||I}),hideUfi:(0,C.kb)({pub:w}),postPreviewUrl:L,onToggleMenu:N,children:(0,a.tZ)(T.em.Provider,{value:{setIsOnboarding:X},children:(0,a.tZ)(v.tu,{"aria-label":b(H(),x.title),className:c()("container-H2dyKk",{"container--menu-open-RRT2Fw":S}),"data-testid":d,padding:8*!y,position:"relative",radius:"sm",role:"article",onClick:e=>{Z&&Z({event:e,post:x}),_||(0,p.uX)(L,{event:e})},children:(0,a.tZ)(M,(0,o._)((0,n._)({},f),{post:x}))})})})}},31883:function(e,t,i){i.d(t,{wz:()=>S,vo:()=>k});var n=i(7409),o=i(99282),l=i(58865),r=i(16584),a=i(24350),s=i.n(a),d=i(30143),c=i(7703),u=i(94442),p=i(85685),h=i(95441),m=i(40647),g=i(68648),v=i(60885),Z=i(58175),f=i(98012),b=i(6070),y=i(31377),_=i(60308),w=i(84864);let C={date:"date-rtYe1v",icon:"icon-cvHqCn",link:"link-HFGLqU",notLink:"notLink-oAjaXn",dividerChar:"dividerChar-SbAJEi"};function B(){let e=(0,l._)(["Published on ",""]);return B=function(){return e},e}let k=e=>{let{clamp:t,hideLock:i,post:n}=e,{iTemplate:o}=(0,h.M1)(),{getPubPinInfo:l,getSectionPinInfo:a}=(0,v.DE)(),{highlightByline:s,pub:u,user:p}=(0,g.ZT)(),{showPin:m}=l({post:n}),{showPin:f}=a({post:n}),_=(m||f)&&(!(0,b.kb)({pub:u})||!!(null==p?void 0:p.is_contributor)),k=!i&&(0,y.isPaidAudience)(n.audience)&&!(0,b.lp)({post:n})&&!(0,b.kb)({pub:u}),P=(0,w.getBylineUsers)(n);return(0,r.BX)(Z.xv.Meta,{clamp:t,color:"pub-secondary-text",display:"inline",children:[_&&(0,r.tZ)("div",{className:C.icon,children:(0,r.tZ)(d.Z,{size:12})}),k&&(0,r.tZ)("div",{className:C.icon,children:(0,r.tZ)(c.Z,{audience:n.audience,size:12})}),n.restacked_pub_name?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{children:o(B(),n.restacked_pub_name)}),"\xa0",(0,r.tZ)("span",{className:C.dividerChar,children:"•"}),"\xa0"]}):null,(0,r.tZ)(S,{post:n}),"restack"!==n.type&&P.length>0&&u.bylines_enabled&&(0,r.BX)(r.HY,{children:["\xa0",(0,r.tZ)("span",{className:C.dividerChar,children:"•"}),"\xa0",(0,r.tZ)(Z.xv,{as:"span",color:s?"accent":void 0,children:(0,r.tZ)(x,{clamp:t,post:n,pub:u})})]})]})},x=e=>{let{post:t,clamp:i,pub:l}=e,a=(0,w.getBylineUsers)(t),{getConfigFor:d}=(0,m.xR)(),c=!!d("enable_author_pages"),u=s()(l.contributors,"user_id"),h=e=>{let t=c?(0,_.rfk)({userId:e.id,pub:l}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:c?{href:void 0,onClick:void 0}:{href:(0,_.LwU)(e,l),onClick:e=>e.stopPropagation()}},g=e=>{var t,i,n;return null!==(n=null!==(i=null===(t=u[e.id])||void 0===t?void 0:t.name)&&void 0!==i?i:e.name)&&void 0!==n?n:""};return(0,r.tZ)(r.HY,{children:(0,w.oxfordComma)(a.map(e=>i?(0,r.tZ)("a",(0,o._)((0,n._)({className:C.link},h(e)),{children:g(e)})):(0,r.tZ)(p.ProfileHoverCard,{disabled:c,subject:e,utmSource:"byline",children:h(e).href?(0,r.tZ)("a",(0,o._)((0,n._)({className:C.link},h(e)),{children:g(e)})):(0,r.tZ)("span",{className:C.notLink,children:g(e)})})),{noBreakSpace:!0})})},S=e=>{let{customFormat:t="MM.DD.YY",post:i}=e,{language:n}=(0,h.M1)(),{pub:o}=(0,g.ZT)();return(0,r.tZ)("time",{className:C.date,dateTime:(0,f.Z)(i.post_date).toISOString(),children:(0,b.HD)({pub:o})?(0,f.Z)(i.post_date).format(t):(0,b.kb)({pub:o})?(0,f.Z)(i.post_date).format("MMMM D, YYYY"):(0,u.fh)({post:i,showDatetime:!1,language:n})})}},26176:function(e,t,i){i.d(t,{Y:()=>P});var n=i(16584),o=i(6400),l=i(30396),r=i(66784),a=i(68835),s=i(82701),d=i(94442),c=i(95441),u=i(98914),p=i(98422),h=i(38756),m=i(11353),g=i(49733),v=i(33870),Z=i(71068),f=i(15771),b=i(19081),y=i(58175),_=i(18618),w=i(3486),C=i(43905),B=i(31377),k=i(84864);let x={container:"container-pFhu3n",containerNoImage:"containerNoImage-W5VZl3",videoLayer:"videoLayer-gwRrVN",contentLayer:"contentLayer-OGm4Y9",content:"content-iO1vNE",imageContainer:"imageContainer-ddA7f9",image:"image-deX_la",flippedImageContainer:"flippedImageContainer-rBB6TZ",flippedImage:"flippedImage-rChY0M",blurOverlay:"blurOverlay-xN2HYo",darkOverlay:"darkOverlay-jsLZzF",postTitleMobile:"postTitleMobile-ut7sIL"},S=(0,Z.E7)({position:"absolute",inset:0,radius:"sm",pointerEvents:"none"}),P=e=>{let{columns:t,hideLogo:i,highlightPost:o=!1,isPodcast:r,post:a,pub:s,section:c,showPodcastLinks:Z,user:f,utm:_}=e,k=(0,l.sO)(null),{isMobile:P}=(0,p.v9)(),T=(0,B.getDurationForPostPreview)({post:a}),{title:N,description:M}=(0,C.Mv)({pub:s,podcastUpload:a.podcastUpload,section:null!=c?c:null}),L=o?a.title:N,E=o?a.subtitle:M,q=e=>{let t=(0,v.zV)({linkToComments:!1,post:a,pub:s,utm:_});(0,u.uX)(t,{event:e})};return P?(0,n.BX)(b.tu,{gap:12,children:[(0,n.tZ)(b.tu,{onClick:q,children:(0,n.BX)(b.gq,{ref:k,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.BX)(b.gq,{className:x.videoLayer,direction:"column",position:"absolute",radius:"sm",children:[(0,n.tZ)(b.gq,{flex:"grow",position:"relative",style:{width:"100%"},children:(0,n.tZ)(g.X,{className:x.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(b.gq,{className:x.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.tZ)(g.X,{className:x.flippedImage,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(S,{className:x.darkOverlay}),(0,n.tZ)(b.gq,{className:x.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.tZ)(b.gq,{className:x.contentLayer,pointerEvents:"none",position:"absolute",children:(0,n.tZ)(b.gq,{flex:"grow",children:(0,n.BX)(b.tu,{gap:16,padding:16,paddingBottom:24,children:[!i&&!o&&(0,n.tZ)(w.p,{post:a,pub:s,section:null!=c?c:null,size:48,useSection:!r}),(0,n.BX)(b.tu,{gap:8,children:[(0,n.tZ)(y.xv.H4,{color:"white",font:"pub-headings",children:L}),(0,n.tZ)(y.xv.B4,{clamp:2,className:x.descriptionMobile,color:"white",children:E}),(0,n.tZ)(b.gq,{flex:"grow"})]}),a.videoUpload||a.podcastUpload||a.podcast_url?(0,n.tZ)(I,{duration:T,highlightPost:o,post:a}):(0,n.tZ)(X,{highlightPost:o,post:a})]})})})]})}),Z&&r&&(0,n.tZ)(m.h,{limit:2,post:a,pub:s,section:null!=c?c:null,stretch:!0,user:f})]}):(0,n.tZ)(h.A,{variant:4===t?"full-width":"three-column-width",children:(0,n.BX)(b.tu,{gap:12,children:[(0,n.tZ)(b.tu,{paddingX:8,onClick:q,children:(0,n.BX)(b.gq,{ref:k,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,n.tZ)(b.gq,{position:"absolute",style:{bottom:16,right:16,zIndex:1},children:(0,n.tZ)(d._2,{allowEdit:!0,hideComments:!0,hideFeedRestackButton:!0,hideReactions:!0,hideSavePost:!0,hideShare:!0,isStatic:!1,labelStyle:"counts-or-none",post:a,pub:s,style:"compressed",user:f,onChange:()=>void 0})}),(0,n.BX)(b.gq,{position:"absolute",radius:"sm",style:{width:"100%",height:"100%"},children:[(0,n.tZ)(b.gq,{flex:"grow",position:"relative",children:(0,n.tZ)(b.gq,{className:x.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,n.tZ)(g.X,{className:x.flippedImage,disableVideoHover:!0,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})})}),(0,n.tZ)(b.gq,{className:x.imageContainer,position:"relative",children:(0,n.tZ)(g.X,{className:x.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:a,presenceRef:k,squareImageSize:"large"})}),(0,n.tZ)(S,{className:x.darkOverlay}),(0,n.tZ)(b.gq,{className:x.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,n.BX)(b.gq,{pointerEvents:"none",position:"absolute",style:{width:"100%",height:"100%"},children:[(0,n.tZ)(b.gq,{flex:"grow",children:(0,n.tZ)(b.tu,{justifyContent:i||o?"end":"center",padding:48,children:(0,n.BX)(b.tu,{gap:24,children:[!i&&!o&&(0,n.tZ)(w.p,{post:a,pub:s,section:null!=c?c:null,size:76,useSection:!r}),(0,n.BX)(b.tu,{gap:8,children:[(0,n.tZ)(y.xv.H2,{clamp:3,color:"white",font:"pub-headings",children:L}),(0,n.tZ)(y.xv.B4,{clamp:3,color:"white",children:E}),(0,n.tZ)(b.gq,{flex:"grow"})]}),a.videoUpload||a.podcastUpload||a.podcast_url?(0,n.tZ)(I,{duration:T,highlightPost:o,post:a}):(0,n.tZ)(X,{highlightPost:o,post:a})]})})}),(0,n.tZ)(b.gq,{flex:"grow",pointerEvents:"none"})]})]})}),Z&&r&&(0,n.tZ)(b.tu,{paddingX:8,children:(0,n.tZ)(m.h,{post:a,pub:s,section:null!=c?c:null,stretch:!0,user:f})})]})})},I=e=>{let{duration:t,highlightPost:i,post:l}=e,{iString:s}=(0,c.M1)(),{isMobile:d}=(0,p.v9)();return(0,n.BX)(b.gq,{alignItems:"center",gap:d?16:24,pointerEvents:"auto",children:[(0,n.tZ)(b.gq,{flex:"auto",children:(0,n.tZ)(_.fI,{isPlaying:!1,size:d?56:72})}),(0,n.tZ)(b.gq,{alignItems:"center",children:(0,n.BX)(b.tu,{children:[(0,n.BX)(b.gq,{alignItems:"center",gap:4,children:[(0,n.tZ)(b.gq,{gap:4,width:16,children:l.videoUpload?(0,n.tZ)(r.Z,{size:14,stroke:"white"}):(0,n.tZ)(a.Z,{size:14,stroke:"white"})}),(0,n.tZ)(y.xv.Meta,{color:"white",children:s("LATEST")}),t>0&&(0,n.BX)(o.Fragment,{children:[(0,n.tZ)(y.xv.Meta,{color:"white",children:"\xb7"}),(0,n.tZ)(y.xv.Meta,{color:"white",children:(0,k.secondsToHHMMSS)(t)})]})]}),!i&&(0,n.tZ)(y.xv.Meta,{color:"white",children:l.title})]})})]})},X=e=>{let{highlightPost:t,post:i}=e,{iString:o}=(0,c.M1)();return(0,n.BX)(b.gq,{alignItems:"center",gap:16,pointerEvents:"auto",children:[(0,n.tZ)(f.hU,{rounded:!0,size:"md",children:(0,n.tZ)(s.Z,{size:20})}),(0,n.BX)(b.tu,{children:[(0,n.tZ)(y.xv.Meta,{color:"white",children:o(t?"READ THE LATEST":"LATEST")}),!t&&(0,n.tZ)(y.xv.B2,{clamp:1,color:"white",weight:"semibold",children:i.title})]})]})}},97505:function(e,t,i){i.d(t,{Z:()=>d});var n=i(16584),o=i(30396),l=i(60807),r=i(33870),a=i(74312),s=i(41233);let d=e=>{let{displaySignInModal:t,onCloseSignInModal:d,isStatic:c,entry:u}=e,{setIsOnboarding:p}=(0,o.qp)(r.em),h=(0,o.sO)(null),{user:m,setUser:g}=(0,l.SE)();return c?null:(0,n.BX)(n.HY,{children:[(0,n.tZ)(s.fA,{isOpen:!!t,onCancel:d,onSignup:()=>{var e;d(),null===(e=h.current)||void 0===e||e.open()},onSuccess:()=>{document.location.reload()},onUserCreated:e=>{var t;d(),g(e),null===(t=h.current)||void 0===t||t.open()}}),(0,n.tZ)(a.W,{entry:u||"post-preview",innerRef:h,module:"@/frontend/reader/onboarding",noCloseButton:!!m,noExit:!!m,resolve:e=>e.ReaderOnboardingModal,skipRedirectOnExit:!0,user:m,onBeforeOpen:()=>{p&&p(!0)},onClose:()=>{m&&document.location.reload()},onRequest:()=>Promise.all([i.e("6855"),i.e("925"),i.e("2860")]).then(i.bind(i,78118))})]})}},95561:function(e,t,i){i.d(t,{F:()=>m});var n=i(7409),o=i(99282),l=i(16584),r=i(34293),a=i(71897),s=i(68648),d=i(19081),c=i(58175),u=i(6070),p=i(84864);let h={icon:"icon-cUpv7d"},m=e=>{let{align:t,clamp:i,maxLength:m=140,noIcons:g,paddingBottom:v,post:Z,preset:f,preventOrphans:b,textWrap:y}=e,{linkToComments:_,postPreviewUrl:w,pub:C}=(0,s.ZT)(),{lineHeight:B,size:k,fontFamily:x}=(0,a.A)({preset:f,pub:C}),S=(0,u.kb)({pub:C}),P=k>=28;return(0,l.tZ)(d.tu,{paddingBottom:v,children:(0,l.BX)(c.xv,(0,o._)((0,n._)({},w?{as:"a",href:w}:null),{align:t,clamp:S?void 0:i,color:"pub-primary-text","data-testid":"post-preview-title",font:"pub-headings",style:{fontSize:k,lineHeight:"".concat(B,"px"),fontFamily:x},textWrap:y,children:["thread"===Z.type&&!g&&(0,l.tZ)(r.Z,{className:h.icon,height:P?26:17}),_&&"thread"!==Z.type&&"Comments on: ",b?(0,p.preventOrphans)((0,p.truncateWords)(Z.title,m)):(0,p.truncateWords)(Z.title,m)]}))})}},17258:function(e,t,i){i.d(t,{p:()=>m});var n=i(7409),o=i(99282),l=i(16584),r=i(94184),a=i.n(r),s=i(24350),d=i.n(s),c=i(40647),u=i(60308),p=i(84864);let h={container:"container-Mw45dL",containerSingleLine:"containerSingleLine-xWghSN",link:"link-iknc0_",notLink:"notLink-U0WbwD"},m=e=>{let{post:t,clamp:i,pub:r}=e,s=(0,p.getBylineUsers)(t),{getConfigFor:m}=(0,c.xR)(),g=!!m("enable_author_pages"),v=d()(r.contributors,"user_id"),Z=e=>{let t=g?(0,u.rfk)({userId:e.id,pub:r}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:g?{href:void 0,onClick:void 0}:{href:(0,u.LwU)(e,r),onClick:e=>e.stopPropagation()}},f=e=>{var t,i,n;return null!==(n=null!==(i=null===(t=v[e.id])||void 0===t?void 0:t.name)&&void 0!==i?i:e.name)&&void 0!==n?n:""};return(0,l.tZ)("div",{className:a()(h.container,{[h.containerSingleLine]:1===i}),children:(0,p.oxfordComma)(s.map(e=>Z(e).href?(0,l.tZ)("a",(0,o._)((0,n._)({className:h.link},Z(e)),{children:f(e)})):(0,l.tZ)("span",{className:h.notLink,children:f(e)})),{noBreakSpace:!0})})}},61264:function(e,t,i){i.d(t,{X:()=>R});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(94184),s=i.n(a),d=i(30143),c=i(26118),u=i(98914),p=i(68648),h=i(49259),m=i(98422),g=i(72019),v=i(7523),Z=i(19081),f=i(93903),b=i(84864);let y=e=>{let{align:t="left",clamp:i,color:n,paddingBottom:o,post:l,preset:a}=e,{postPreviewUrl:s}=(0,p.ZT)();return(0,r.tZ)(Z.tu,{paddingBottom:o,children:(0,r.tZ)(v.Z,{align:t,as:"a",clamp:i,color:n,href:s,preset:a,wrap:"center"===t?"balance":"pretty",children:(0,f.Z)((0,b.truncateWords)(l.subtitle,152))})})},_=e=>{var{align:t="left",clamp:i,color:a,paddingBottom:d,post:c,preset:u}=e,h=(0,l._)(e,["align","clamp","color","paddingBottom","post","preset"]);let{postPreviewUrl:m}=(0,p.ZT)();return(0,r.tZ)(Z.tu,{paddingBottom:d,children:(0,r.tZ)(v.Z,(0,o._)((0,n._)({},h,m?{as:"a",href:m}:null),{align:t,clamp:i,className:s()("post-preview-title","title-vqpS7B",{"hoverColor-w9y2tS":"white"!==a}),color:a,preset:u,wrap:"center"===t?"balance":"pretty",children:(0,b.preventOrphans)((0,b.truncateWords)(c.title,140))}))})};var w=i(42312);let C=e=>{let{post:t}=e,{pub:i,user:n,onChangePost:o}=(0,p.ZT)(),l=(0,b.showCommentsOnPost)({publication:i,post:t}),a=i.community_enabled,s=!!(null==n?void 0:n.is_contributor);return"restack"===t.type?null:(0,r.BX)(Z.gq,{alignItems:"center",gap:6,children:[l&&(0,r.tZ)(w.Ck,{post:t,pub:i,size:"small"}),a&&(0,r.tZ)(w.gV,{post:t,pub:i,size:"small",user:n,onChange:o}),s&&(0,r.tZ)(w.ND,{context:"post-preview",post:t,pub:i,user:n})]})};var B=i(31883),k=i(17258);let x=e=>{let{align:t="left",color:i,paddingBottom:n,post:o,preset:l}=e,{pub:a}=(0,p.ZT)();return(0,r.tZ)(Z.tu,{paddingBottom:n,children:(0,r.BX)(v.Z,{align:t,color:null!=i?i:"sm-preview-byline"===l?"accent":void 0,preset:l,children:[(0,r.tZ)(k.p,{post:o,pub:a})," — ",(0,r.tZ)(B.wz,{post:o})]})})};var S=i(33870);let P={image:"image-EaGmDd"},I=e=>{let{align:t,hideDescription:i,hideImage:n,post:o,titlePreset:l}=e;return(0,r.BX)(Z.tu,{children:[!n&&(0,r.tZ)(g.P,{className:P.image,imageAspectRatio:S.YU,imageWidth:600,isBelowTheFold:!0,post:o}),(0,r.BX)(Z.tu,{gap:4,paddingTop:8*!n,children:[(0,r.tZ)(_,{align:t,post:o,preset:null!=l?l:n?"h5-serif":"h7-serif"}),!i&&(0,r.tZ)(y,{align:t,clamp:3,post:o,preset:"d4-serif"}),(0,r.tZ)(Z.tu,{alignItems:"center"===t?"center":"start",paddingY:4,children:(0,r.tZ)(C,{post:o})}),(0,r.tZ)(x,{align:t,post:o,preset:"sm-preview-byline"})]})]})},X={image140:"image140-mQ92WN",image220:"image220-p05U5w"};var T=i(62372);let N=e=>{let{post:t}=e;return(0,r.BX)(Z.tu,{alignItems:"center",children:[(0,r.tZ)(Z.tu,{alignSelf:"stretch",paddingBottom:32,children:(0,r.tZ)(g.P,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t})}),(0,r.tZ)(_,{align:"center",color:"white",paddingBottom:32,post:t,preset:"h2-serif"}),(0,r.tZ)(y,{align:"center",color:"white",paddingBottom:32,post:t,preset:"d1-sans-medium"}),(0,r.tZ)(x,{color:"white",post:t,preset:"lg-preview-byline"})]})},M={image:"image-v6H72k"};var L=i(60308),E=i(14773);let q={container:"container-r9Uobv",pinContainer:"pinContainer-waOJ8r",unpinIcon:"unpinIcon-vVpw5q",pinIcon:"pinIcon-Ad2m5R"},z={archive:e=>{let{forceShowPlayButton:t,post:i}=e,{isMobile:n}=(0,m.v9)();return(0,r.BX)(Z.gq,{gap:n?24:40,children:[(0,r.tZ)(Z.tu,{flex:"auto",children:(0,r.tZ)(g.P,{className:"image-YTYBVT",forceShowPlayButton:t,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!0,post:i})}),(0,r.BX)(Z.tu,{gap:8*!n,overflow:"hidden",children:[(0,r.tZ)(_,{post:i,preset:"h5-serif"}),(0,r.tZ)(Z.tu,{flex:n?void 0:"grow",paddingBottom:16*!!n,children:(0,r.tZ)(y,{clamp:3,post:i,preset:"d3-serif"})}),(0,r.tZ)(h.z,{post:i})]})]})},"content-block-episode":e=>{let{post:t}=e,{isMobile:i}=(0,m.v9)();return i?(0,r.tZ)(I,{align:"left",post:t,titlePreset:"h4-sans-condensed"}):(0,r.BX)(Z.gq,{gap:20,children:[(0,r.tZ)(g.P,{className:"image-Vu2JCA",imageAspectRatio:22/31,imageWidth:440,isBelowTheFold:!0,post:t}),(0,r.BX)(Z.tu,{flex:"grow",gap:8,children:[(0,r.tZ)(_,{post:t,preset:"h4-sans-condensed"}),(0,r.BX)(Z.tu,{gap:8,children:[(0,r.tZ)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,r.tZ)(C,{post:t}),(0,r.tZ)(x,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-listing":e=>{let{post:t,titlePreset:i="h6-sans"}=e,n="h4-sans-condensed"===i;return(0,r.BX)(Z.gq,{gap:20,children:[(0,r.tZ)(Z.tu,{flex:"auto",children:(0,r.tZ)(g.P,{className:n?X.image220:X.image140,imageAspectRatio:1,imageWidth:300,isBelowTheFold:!0,post:t})}),(0,r.BX)(Z.tu,{gap:n?8:4,children:[(0,r.tZ)(_,{post:t,preset:i}),(0,r.BX)(Z.tu,{gap:8,children:[(0,r.tZ)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,r.tZ)(C,{post:t}),(0,r.tZ)(x,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-single-large":e=>{let{post:t}=e,{isMobile:i}=(0,m.v9)(),[l,a]=(0,T.XI)();return i?(0,r.tZ)(N,{post:t}):(0,r.BX)(Z.gq,{alignItems:"center",gap:40,children:[(0,r.BX)(Z.tu,{alignItems:"center",flex:"grow",children:[(0,r.tZ)(x,{color:"white",paddingBottom:56,post:t,preset:"lg-preview-byline"}),(0,r.tZ)(_,(0,o._)((0,n._)({},a),{align:"center",color:"white",paddingBottom:40,post:t,preset:"h2-serif"})),(0,r.tZ)(Z.tu,{width:360,children:(0,r.tZ)(y,{align:"center",color:"white",post:t,preset:"d1-sans-medium"})})]}),(0,r.tZ)(Z.tu,{flex:"grow",children:(0,r.BX)(Z.tu,(0,o._)((0,n._)({},a),{className:"imageContainer-LhpEMl",position:"relative",children:[(0,r.tZ)(g.P,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t}),(0,r.tZ)(Z.gq,{className:"imageContainerOverlay-L73_9b",inset:0,position:"absolute",style:{opacity:+!!l}})]}))})]})},"event-page":e=>{let{post:t}=e;return(0,r.BX)(Z.tu,{gap:20,children:[(0,r.tZ)(_,{post:t,preset:"h4-sans-regular"}),(0,r.tZ)(g.P,{className:"image-J1_9gh",imageAspectRatio:16/9,imageWidth:660,isBelowTheFold:!0,post:t})]})},large:e=>{let{align:t="center",hideImage:i,imageAspectRatio:n="standard",post:o,showImageLast:l,titlePreset:a="h3-compressed"}=e,{isMobile:s}=(0,m.v9)(),d=!i&&(0,r.tZ)(g.P,{className:M.image,imageAspectRatio:"wide"===n?S.YU:S.Hw,imageWidth:1250,isBelowTheFold:!1,post:o});return(0,r.BX)(Z.tu,{children:[!l&&d,(0,r.BX)(Z.tu,{alignItems:"center"===t?"center":"start",justifyContent:"center",paddingBottom:8*!!l,paddingTop:l?0:s?16:32,paddingX:16*("left"!==t),children:[(0,r.tZ)(_,{align:t,paddingBottom:8,post:o,preset:a}),l&&(0,r.tZ)(Z.tu,{alignSelf:"stretch",paddingBottom:8,children:d}),(0,r.BX)(Z.tu,{alignItems:"center"===t?"center":"start",gap:s?8:12,children:[(0,r.tZ)(y,{align:t,post:o,preset:"d2-serif"}),(0,r.tZ)(C,{post:o}),(0,r.tZ)(x,{align:t,post:o,preset:"lg-preview-byline"})]})]})]})},mini:e=>{let{clampTitle:t,hideUfi:i,post:n,showDescription:o,showStar:l}=e;return(0,r.BX)(Z.gq,{alignItems:"start",gap:16,children:[l&&(0,r.tZ)("img",{alt:"star",height:24,src:(0,L.zF4)("".concat((0,E.ZJ)(),"/img/thefp/thefp-star.svg")),width:24}),(0,r.BX)(Z.tu,{gap:4,children:[(0,r.tZ)(_,{clamp:t,post:n,preset:"h6-serif"}),o&&(0,r.tZ)(y,{clamp:3,post:n,preset:"d4-serif"}),!i&&(0,r.tZ)(Z.tu,{paddingY:4,children:(0,r.tZ)(C,{post:n})}),(0,r.tZ)(x,{post:n,preset:"sm-preview-byline"})]})]})},square:I},R=e=>{var t,i,a,{linkToComments:h,post:m,testid:g,variant:v,onClick:f}=e,b=(0,l._)(e,["linkToComments","post","testid","variant","onClick"]);let{cropGravity:y,disableInteractive:_,pub:w,modifiedPosts:C,showPinForPostIds:B,utm:k,onClickPost:x,onUnpinPost:P}=(0,p.ZT)(),I=null!==(i=C[m.id])&&void 0!==i?i:m,X=!!(null==B?void 0:B.has(I.id)),T=null!==(a=null===(t=I.postTheme)||void 0===t?void 0:t.post_preview_crop_gravity)&&void 0!==a?a:y,N=z[v];if(!N)return console.warn("PostPreview: ".concat(v," not implemented")),null;let M=(0,S.zV)({linkToComments:!!h,post:I,pub:w,utm:k});return(0,r.tZ)(p.hV,{cropGravity:T,linkToComments:h,postPreviewUrl:M,children:(0,r.BX)(Z.tu,{className:s()(q.container,"post-preview-container"),"data-testid":g,position:"relative",radius:"sm",onClick:e=>{f&&f({event:e,post:I}),x&&x({event:e,post:I}),_||(0,u.uX)(M,{event:e})},children:[(0,r.tZ)(N,(0,o._)((0,n._)({},b),{post:I})),X&&(0,r.BX)(Z.gq,{bg:"white",className:q.pinContainer,padding:8,position:"absolute",radius:"xs",onClick:e=>{e.stopPropagation(),P({postId:I.id})},children:[(0,r.tZ)(d.Z,{className:q.pinIcon,size:20}),(0,r.tZ)(c.Z,{className:q.unpinIcon,size:20})]})]})})}},72019:function(e,t,i){i.d(t,{P:()=>b});var n=i(16584),o=i(30396),l=i(94184),r=i.n(l),a=i(82016),s=i(1055),d=i(20888),c=i(98422),u=i(68648),p=i(93029),h=i(53394),m=i(19081),g=i(74571),v=i(31377),Z=i(60308);let f={container:"container-XQwt8c",fpPodcastOverlay:"fpPodcastOverlay-F_ObU8",fpPodcastOverlayHover:"fpPodcastOverlayHover-j8gEjt",image:"image-wHmpR_",redPlayContainer:"redPlayContainer-gIeqLa"},b=e=>{var t,i,l,b,y,_;let{className:w,disableVideoHover:C,disableVideoHoverFade:B,forceShowPlayButton:k,hidePlaceholder:x,imageAspectRatio:S,imageWidth:P,isBelowTheFold:I,post:X,videoPlayIconVariant:T="default"}=e,{cropGravity:N,pub:M}=(0,u.ZT)(),{isMobile:L}=(0,c.v9)(),E=(0,o.sO)(null),[q]=(0,g.i5)(E),z=!!X.videoUpload,R=!!(!z&&"podcast"===X.type),A=(0,v.getCoverImageUrl)(X);!A&&((null===(b=X.videoUpload)||void 0===b?void 0:b.thumbnail_id)?A=(0,Z.kOB)(X.videoUpload):(null===(y=X.podcastUpload)||void 0===y?void 0:y.thumbnail_id)&&(A=(0,Z.kOB)(X.podcastUpload,{post:X})));let F=P<=640;if(!A&&x)return null;let O=P||S?S:1.32,D=P||336,H=!!(null===(t=X.videoUpload)||void 0===t?void 0:t.live_stream_id);return(0,n.BX)("div",{ref:E,className:r()(w,f.container,"post-preview-image",{"post-preview-cover-image-container--empty":!A}),style:"aspect-ratio: ".concat(O),children:[(R||z||k)&&(0,n.tZ)(m.gq,{alignItems:"center",className:r()(f.fpPodcastOverlay,{[null!==(_=f.fpPodcastOverlayHover)&&void 0!==_?_:""]:!B}),inset:0,justifyContent:"center",position:"absolute",children:"default"===T?(0,n.tZ)(a.Z,{fill:"white",height:36,stroke:"none"}):(0,n.tZ)("div",{className:f.redPlayContainer,children:(0,n.tZ)(s.Z,{fill:"white",height:L?12:20,stroke:"none"})})}),z&&(F?(0,n.tZ)(p.Z,{aspectRatio:(null===(i=X.videoUpload)||void 0===i?void 0:i.width)&&(null===(l=X.videoUpload)||void 0===l?void 0:l.height)?X.videoUpload.width/X.videoUpload.height:O,containerRef:E,post:X,size:P>320?"large":"medium"}):(0,n.tZ)(h.Z,{isHovered:q&&!C,post:X,pub:M})),A?(0,n.tZ)(d.e,{alt:"",className:f.image,imageProps:O?{height:Math.round(D/O),smartCrop:!0,gravity:H?"auto":N}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:I?"lazy":void 0,maxWidth:D,src:A,style:{aspectRatio:"".concat(O)}}):null]})}},33870:function(e,t,i){i.d(t,{Hw:()=>a,YU:()=>s,em:()=>r,zV:()=>d});var n=i(6400),o=i(60308),l=i(60836);let r=(0,n.createContext)({setIsOnboarding:null}),a=1.5,s=16/9,d=e=>{let{linkToComments:t,post:i,pub:n,utm:r}=e;return t?(0,l.uR)(n,i,{comments:!0,urlParams:{utm:r}}):"video"===i.type?(0,o.rhs)(i.canonical_url,{autoPlay:!0,utm:r}):r?(0,o.n1t)(i.canonical_url,{utm:r}):i.canonical_url}},17836:function(e,t,i){i.d(t,{R:()=>l});var n=i(16584),o=i(58175);let l=e=>{let{align:t,children:i}=e;return(0,n.tZ)(o.xv.B2,{align:t,color:"pub-primary-text",font:"pub-headings",weight:"bold",children:i})}},17540:function(e,t,i){i.d(t,{Ct:()=>f,PZ:()=>k,bE:()=>I,w:()=>T,zY:()=>S});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(94184),s=i.n(a),d=i(12706),c=i(53957),u=i(20144),p=i(19081),h=i(10510),m=i(58175),g=i(33555),v=i(75031),Z=i(66327);let f=e=>{let t;var{content:i,children:o}=e,a=(0,l._)(e,["content","children"]);return t=i?"number"==typeof i?(0,r.tZ)(C,(0,n._)({number:i},a)):"string"==typeof i?(0,r.tZ)(w,(0,n._)({text:i},a)):(0,r.tZ)(B,(0,n._)({icon:i},a)):(0,r.tZ)(_,(0,n._)({},a)),(0,r.tZ)(b,{badge:t,children:o})},b=e=>{let{children:t,badge:i}=e;return(0,r.BX)(p.hs,{position:"relative",className:v.Z.container,children:[t,i]})},y=e=>{let{priority:t="primary",theme:i="accent",placement:n="top-right",shape:o="circle",radius:l="full",className:a,children:d,style:c}=e;return(0,r.tZ)(p.hs,{alignItems:"center",justifyContent:"center",position:"absolute",userSelect:"none",sizing:"border-box",radius:l,className:s()(v.Z.badge,v.Z["placement_".concat(n)],v.Z["shape_".concat(o)],Z.Z["theme_".concat(i)],Z.Z["priority_".concat(t)],a),style:c,children:d})},_=e=>{var{className:t}=e,i=(0,l._)(e,["className"]);return(0,r.tZ)(y,(0,o._)((0,n._)({},i),{className:s()(v.Z.dot,t)}))},w=e=>{var{text:t,className:i}=e,a=(0,l._)(e,["text","className"]);let d=1===t.length;return(0,r.tZ)(y,(0,o._)((0,n._)({},a),{className:s()(v.Z.text,d&&v.Z.singleElement,i),children:(0,r.tZ)(m.xv.Meta,{as:"span",color:"inherit",children:t})}))},C=e=>{var{number:t,className:i}=e,a=(0,l._)(e,["number","className"]);let d=1===t.toString().length;return(0,r.tZ)(y,(0,o._)((0,n._)({},a),{className:s()(v.Z.text,d&&v.Z.singleElement,i),children:(0,r.tZ)(m.xv.Meta,{as:"span",color:"inherit",children:t})}))},B=e=>{var{icon:t,fillIcon:i,className:a,style:d}=e,c=(0,l._)(e,["icon","fillIcon","className","style"]);return(0,r.tZ)(y,(0,o._)((0,n._)({},c),{className:s()(v.Z.singleElement,i&&v.Z.fillIcon,a),style:d,children:t}))},k=e=>{var{children:t,placement:i="bottom-right",tier:o}=e,a=(0,l._)(e,["children","placement","tier"]);let s=(0,r.tZ)(x,(0,n._)({placement:i,tier:o},a));return o?(0,r.tZ)(b,{badge:s,children:t}):(0,r.tZ)(r.HY,{children:t})},x=e=>{var{userId:t,tier:i,className:a}=e,d=(0,l._)(e,["userId","tier","className"]);return(0,r.tZ)(y,(0,o._)((0,n._)({},d),{className:s()(v.Z.singleElement,v.Z.empty,a),children:(0,r.tZ)(g.UserBadge,{tier:i,userId:t,size:"sm"})}))},S=e=>{var{children:t,placement:i="bottom-right"}=e,o=(0,l._)(e,["children","placement"]);let a=(0,r.tZ)(P,(0,n._)({placement:i},o));return(0,r.tZ)(b,{badge:a,children:t})},P=e=>{var{tier:t,fgOverride:i,bgOverride:o}=e,a=(0,l._)(e,["tier","fgOverride","bgOverride"]);return"author"===t?(0,r.tZ)(B,(0,n._)({theme:"accent",fillIcon:!0,icon:(0,r.tZ)(u.Z,{size:12}),style:(0,n._)({},o&&{"--color-tag-bg":o}||{},i&&{"--color-tag-fg":i}||{})},a)):"founding"===t?(0,r.tZ)(B,(0,n._)({theme:"default",priority:"secondary",icon:(0,r.tZ)(d.Z,{size:12})},a)):"paid"===t?(0,r.tZ)(B,(0,n._)({theme:"default",priority:"secondary",icon:(0,r.tZ)(c.Z,{size:12})},a)):null},I=e=>{var{children:t}=e,i=(0,l._)(e,["children"]);return(0,r.tZ)(b,{badge:(0,r.tZ)(X,(0,n._)({},i)),children:t})},X=e=>{var{badge:t,placement:i="bottom-right",className:a}=e,d=(0,l._)(e,["badge","placement","className"]);return(0,r.tZ)(y,(0,o._)((0,n._)({},d),{placement:i,className:s()(v.Z.singleElement,v.Z.empty,a),children:(0,r.tZ)(g.UserBadge,{userBadge:t,size:"sm"})}))},T=e=>{var{pub:t,children:i,placement:o="bottom-right"}=e,a=(0,l._)(e,["pub","children","placement"]);let s=(0,r.tZ)(N,(0,n._)({pub:t,placement:o},a));return t?(0,r.tZ)(b,{badge:s,children:i}):(0,r.tZ)(r.HY,{children:i})},N=e=>{var{pub:t,className:i}=e,a=(0,l._)(e,["pub","className"]);return(0,r.tZ)(y,(0,o._)((0,n._)({},a),{radius:"xs",className:s()(v.Z.singleElement,v.Z.empty,i),children:(0,r.tZ)(h.wk,{pub:t,size:16,radius:"xs"})}))}},66109:function(e,t,i){i.d(t,{N:()=>f});var n=i(7409),o=i(99282),l=i(16584),r=i(27506),a=i(58017),s=i(94184),d=i.n(s),c=i(98661),u=i(30428),p=i(76720),h=i(95280),m=i(84450),g=i(80026),v=i(43336),Z=i(68686);function f(e){let{options:t,value:i,onChange:s,placeholder:f,max:y,disabled:_,onCreate:w,isCreateOptionValid:C}=e,B=null!=y&&i.length>=y,{inputValue:k,trimmedInputValue:x,filteredOptions:S,handleInputChange:P,showCreateOption:I,noResults:X,processSelectionValue:T}=(0,m.K)({options:t,onCreate:w,isCreateOptionValid:C,hasReachedMax:B}),{refs:N,floatingStyles:M,context:L}=(0,r.YF)(h.fs),E=(0,r.KK)(L),{getReferenceProps:q,getFloatingProps:z}=(0,r.NI)([E]),R=(0,c.useRef)(null),A=new Map(t.map(e=>[e.value,e.label])),F=new Set(i),O=i.length>0,D=e=>{var t;s(i.filter(t=>e!==t)),null===(t=R.current)||void 0===t||t.focus()},H=e=>{let t=""===k&&i.length>0;"Backspace"===e.key&&t&&(e.preventDefault(),s(i.slice(0,-1)))},U=async e=>{(null==y||!(e.length>y))&&T(e[e.length-1],t=>{null!==t&&s(e.filter(e=>!(0,h.Wv)(e)))})};return(0,l.tZ)(a.h,{multiple:!0,value:i,onChange:U,disabled:_,children:e=>{let{open:t}=e;return(0,l.BX)(g.X2,{position:"relative",children:[(0,l.BX)(g.X2,(0,o._)((0,n._)({ref:N.setReference},q()),{flex:"grow",alignItems:"center",className:d()(v.Z.inputBox,Z.Z.input,Z.Z.inputText,O&&v.Z.hasChips,_&&v.Z.disabled),onClick:()=>{var e;null===(e=R.current)||void 0===e||e.focus()},children:[i.map(e=>(0,l.tZ)(b,{children:(0,l.tZ)(p.A,{onClick:()=>D(e),trailing:(0,l.tZ)(u.Z,{color:"var(--color-fg-tertiary)"}),disabled:_,children:A.get(e)})},String(e))),(0,l.tZ)(a.h.Input,{ref:R,className:d()("pencraft",v.Z.input,_&&v.Z.disabled),onChange:P,onKeyDown:H,value:k,placeholder:O?void 0:f}),(0,l.tZ)(h.YS,{})]})),t&&(0,l.BX)(a.h.Options,(0,o._)((0,n._)({ref:N.setFloating,style:M},z()),{static:!0,className:d()(v.Z.options,X&&v.Z.empty),children:[S.slice(0,h.qU).map(e=>{let t=B&&!F.has(e.value),i=F.has(e.value);return(0,l.tZ)(h.O2,{option:e,isDisabled:t,isSelected:i},String(e.value))}),I&&(0,l.tZ)(h.tw,{inputString:x})]}))]})}})}let b=(0,g.zo)({display:"flex",alignItems:"center",maxHeight:20})},17391:function(e,t,i){i.d(t,{j:()=>a});var n=i(16584),o=i(82402),l=i(19081),r=i(58175);let a=e=>{let{contentBelow:t,details:i,disabled:a,label:s,name:d,paddingBottom:c,paddingTop:u,testid:p,track:h,value:m,onChange:g,usePublicationTheme:v}=e;return(0,n.BX)(l.gq,{as:"label",gap:8,cursor:"pointer",paddingBottom:c,paddingTop:u,children:[(0,n.tZ)(o.X,{checked:m,name:null!=d?d:p,"data-track-input":h,disabled:a,size:"sm",onChange:g}),(0,n.BX)(l.tu,{flex:"grow",children:[(0,n.tZ)(r.xv.B4,{as:"span",color:a?v?"pub-secondary-text":"secondary":v?"pub-primary-text":"primary",children:s}),i&&(0,n.tZ)(r.xv.B5,{color:v?"pub-secondary-text":"secondary",children:i}),t]})]})}},65433:function(e,t,i){i.d(t,{J:()=>p});var n=i(7409),o=i(99282),l=i(98848),r=i(16584),a=i(98661),s=i(94184),d=i.n(s),c=i(71068);let u={container:"container-xlqXTa",containerHoverLight:"containerHoverLight-pv1hHj"},p=(0,a.forwardRef)((e,t)=>{var{children:i,className:a,disable:s,href:p,hoverBackground:h,onClick:m}=e,g=(0,l._)(e,["children","className","disable","href","hoverBackground","onClick"]);let v=s?void 0:m,Z="undefined"==typeof window?void 0:p;return(0,r.tZ)(c.xu,(0,o._)((0,n._)({},g,Z?{as:"a",href:Z}:{}),{ref:t,className:d()(a,!s&&u.container,{[u.containerHoverLight]:"light"===h&&!s}),role:v?"button":void 0,onClick:v,children:i}))})},14944:function(e,t,i){i.d(t,{B:()=>c});var n=i(16584),o=i(6400),l=i(98661),r=i(19081),a=i(1844),s=i(68709),d=i(51776);let c=e=>{let{className:t,children:i,detail:r,label:a,alignment:s="vertical",error:d=!1}=e;return(0,n.tZ)("vertical"===s?u:p,{className:t,detail:r,error:d,label:a,children:l.Children.map(i,e=>(0,l.isValidElement)(e)?(0,o.cloneElement)(e,{error:d}):e)})},u=e=>{let{children:t,className:i,detail:o,error:l,label:r}=e;return(0,n.BX)(d.fv,{className:i,children:[(0,n.tZ)(s.__,{weight:"semibold",color:l?"error":"primary",children:r}),t,o?(0,n.tZ)(a.p6,{children:o}):l?(0,n.tZ)(a.y,{children:l}):null]})},p=e=>{let{children:t,className:i,detail:o,error:l,label:c}=e;return(0,n.BX)(r.gq,{className:i,justifyContent:"space-between",alignItems:"start",gap:12,children:[(0,n.BX)(d.fv,{children:[c&&(0,n.tZ)(s.__,{children:c}),o&&(0,n.tZ)(a.p6,{children:o}),l&&(0,n.tZ)(a.y,{children:l})]}),t]})}},4135:function(e,t,i){i.d(t,{T:()=>l});var n=i(68833),o=i(60308);let l=e=>{let{feedUrl:t,pub:i,post:l}=e;(0,n.j)(n.FP.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:t}),document.location.href=(0,o.K8_)(null==i?void 0:i.subdomain,null==l?void 0:l.slug,{redirect:"app-marketing",source:"podcast-dropdown"})}},58325:function(e,t,i){i.d(t,{m:()=>b});var n=i(16584),o=i(30890),l=i(2922),r=i(98661),a=i(95441),s=i(71068),d=i(15771),c=i(19081),u=i(6490),p=i(98248),h=i(63474),m=i(15186),g=i(6190),v=i(59321);let Z=[{value:"card",label:"Card"},{value:"poster",label:"Poster"},{value:"split",label:"Split"},{value:"overlay",label:"Overlay"},{value:"title",label:"Title"},{value:"app",label:"App"},{value:"solid",label:"Solid"}],f={card:["composed","sticker","background"],poster:["composed","sticker","background"],split:["composed"],overlay:["composed"],title:["composed","sticker","background"],app:["composed"],solid:["composed"]};function b(e){var t;let{isOpen:i,onClose:h,post:b}=e,{iString:_}=(0,a.M1)(),[B,k]=(0,r.useState)("card"),[x,S]=(0,r.useState)("composed"),[P,I]=(0,r.useState)("stories"),[X,T]=(0,r.useState)("light"),[N,M]=(0,r.useState)(!1);(0,r.useEffect)(()=>{M(!1)},[B,x,P]),(0,r.useEffect)(()=>{f[B].includes(x)||S("composed")},[B,x]);let{width:L,height:E}=(0,g.ET)(P),q="/api/v1/press_kit/asset/".concat(b.id,"/").concat(B,"/").concat(x,"?aspectRatio=").concat(P,"&mode=").concat(X,"&contentType=text/html"),z="/api/v1/press_kit/asset/".concat(b.id,"/").concat(B,"/").concat(x,"?aspectRatio=").concat(P,"&mode=").concat(X,"&contentType=image/png"),R="".concat(null===(t=b.title)||void 0===t?void 0:t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_").concat(B,"_").concat(x,"_").concat(X,".png"),A="composed"===x?w:C,F=[{value:"stories",label:(0,n.tZ)(m.j,{children:(0,n.tZ)(o.Z,{size:20})})},{value:"grid",label:(0,n.tZ)(m.j,{children:(0,n.tZ)(l.Z,{size:20})})}],O=[{value:"light",label:(0,n.tZ)(y,{backgroundColor:"var(--color-light-bg-primary)"})},{value:"dark",label:(0,n.tZ)(y,{backgroundColor:"var(--color-dark-bg-primary)"})},{value:"accent",label:(0,n.tZ)(y,{backgroundColor:"var(--color-accent)"})}];return(0,n.BX)(u.u_,{isOpen:i,onClose:h,width:500,children:[(0,n.tZ)(u.xB,{title:_("Social assets"),showClose:!0,onClose:h,showDivider:!0}),(0,n.tZ)(u.fe,{children:(0,n.BX)(c.sg,{gap:20,children:[(0,n.BX)(c.X2,{justifyContent:"center",gap:12,children:[(0,n.tZ)(m.Z,{tabs:F,value:P,onChange:I}),"solid"===B&&(0,n.tZ)(m.Z,{tabs:O,value:X,onChange:T})]}),(0,n.tZ)(c.M5,{children:(0,n.BX)(A,{style:{width:L,height:E},children:[!N&&(0,n.tZ)(p.$j,{className:v.Z.spinner}),(0,n.tZ)(s.xu,{as:"iframe",src:q,onLoad:()=>{M(!0)},style:{width:L,height:E},border:"unset"})]})}),(0,n.tZ)(c.M5,{children:(0,n.tZ)(m.Z,{tabs:Z,value:B,onChange:k})})]})}),(0,n.tZ)(u.mz,{direction:"column",primaryButton:(0,n.tZ)(d.ZP,{priority:"primary",href:z,download:R,children:_("Download")})})]})}function y(e){let{backgroundColor:t}=e;return(0,n.tZ)(_,{children:(0,n.tZ)(s.xu,{height:20,width:20,style:{backgroundColor:t}})})}let _=(0,h.zo)({height:20,width:20,radius:"xs",overflow:"hidden",border:"detail"}),w=(0,h.zo)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",bg:"secondary"}),C=(0,h.zo)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",className:v.Z.transparent})},37759:function(e,t,i){i.d(t,{C:()=>d,R:()=>c});var n=i(7409),o=i(99282),l=i(30396),r=i(7882),a=i(63018);let s="/api/v1/messages/suggestions/search";function d(){let[e,t]=(0,l.eJ)(""),i=(0,a._I)(s,{query:{query:e},deps:[e]}),d=(0,r.Kt)(e=>{t(e)},100,[]);return(0,o._)((0,n._)({},i),{query:e,handleSearch:d})}function c(){(0,a.OV)(s,{query:{query:""},deps:[""]})}},91668:function(e,t,i){i.d(t,{S:()=>d});var n=i(16584),o=i(94184),l=i.n(o),r=i(56953);let a={emailIcon:"emailIcon-VHOnI0","icon-20":"icon-20-rna120","icon-40":"icon-40-EI6f0n"},s={apple_podcasts:"/img/shows_app_icons/apple_podcasts.svg?v=1",overcast:"/img/shows_app_icons/overcast.svg?v=1",pocket_casts:"/img/shows_app_icons/pocket_casts.svg?v=1",rss:"/img/shows_app_icons/rss.svg?v=1",spotify:"/img/shows_app_icons/spotify.svg?v=1",spotify_for_paid_users:"/img/shows_app_icons/spotify.svg?v=1",spotify_open_access:"/img/shows_app_icons/spotify.svg?v=1",substack:"/img/shows_app_icons/substack.svg?v=1",youtube:"/img/shows_app_icons/youtube.svg?v=1",youtube_music:"/img/shows_app_icons/youtube_music.svg?v=1"},d=e=>{let{platformKey:t,size:i=20}=e;return"email"===t?(0,n.tZ)(r.Z,{className:l()(a.emailIcon,{[a["icon-20"]]:20===i,[a["icon-40"]]:40===i})}):(0,n.tZ)("img",{className:l()({[a["icon-20"]]:20===i,[a["icon-40"]]:40===i}),src:s[t]})}},85923:function(e,t,i){i.d(t,{y:()=>b});var n=i(16584),o=i(30396),l=i(94184),r=i.n(l),a=i(80569),s=i.n(a),d=i(49995),c=i(95441),u=i(68833),p=i(98914),h=i(17836),m=i(19081),g=i(58175),v=i(4135),Z=i(91668),f=i(43905);let b=e=>{let{description:t,feedUrl:i,pub:o,post:l,section:r,showLinks:a,user:s}=e,{iString:d}=(0,c.M1)();return(0,n.BX)(m.tu,{gap:t?8:16,"data-testid":"shows-listen-on",role:"region","aria-label":d("Listen on"),"aria-hidden":!0,children:[(0,n.tZ)(h.R,{children:d("Listen on")}),t&&(0,n.tZ)(g.xv.B3,{color:"pub-secondary-text",paddingBottom:8,children:t}),(0,n.BX)(m.gq,{gap:8,wrap:"wrap",children:[l&&(0,n.tZ)(y,{platformKey:"substack",label:d("Substack App"),onClick:()=>{(0,v.T)({feedUrl:i,pub:o,post:l})}}),(0,f.U6)({feedUrl:i,isApple:(0,p.V5)(),isMobile:!1,showLinks:a,user:s,render:e=>{let{label:t,key:i,onClick:o}=e;return(0,n.tZ)(y,{label:t,platformKey:i,onClick:o})}}),(null==s?void 0:s.is_subscribed)&&(0,n.tZ)(_,{section:r})]})]})},y=e=>{let{disabled:t,label:i,platformKey:o,onClick:l}=e;return(0,n.BX)(m.gq,{alignItems:"center",bg:"secondary",className:r()("listen-on-item-yiZDJR",{"listen-on-item--disabled-S4EzSi":t}),gap:8,paddingX:12,radius:"sm",onClick:t?void 0:l,children:[(0,n.tZ)(m.hs,{opacity:t?40:100,children:(0,n.tZ)(Z.S,{platformKey:o})}),(0,n.tZ)(g.xv.B4,{weight:"semibold",color:"pub-secondary-text",opacity:t?80:100,nowrap:!0,children:i})]})},_=e=>{let{section:t}=e,{iString:i}=(0,c.M1)(),[l,r]=(0,o.eJ)(!1),a=async()=>{try{(0,u.j)(u.FP.PODCAST_EMAIL_LINK_CLICKED),await s().post("/api/v1/subscription/send_podcast_email").send({section_id:null==t?void 0:t.id}),(0,d.ZP)(i("Email sent")),r(!0)}catch(e){(null==e?void 0:e.status)===429?((0,d.ZP)(i("Email already sent")),r(!0)):(0,d.ZP)(i("Something went wrong sending email"))}};return(0,n.tZ)(y,{disabled:l,label:l?i("Email sent"):i("Email mobile setup link"),platformKey:"email",onClick:()=>{a()}})}},39430:function(e,t,i){i.d(t,{o:()=>tL});var n=i(7409),o=i(99282),l=i(16584),r=i(98661),a=i(30396),s=i(80569),d=i.n(s),c=i(61649),u=i(89074),p=i(56219),h=i(90311),m=i(94442),g=i(11183),v=i(24658),Z=i(40647),f=i(60807),b=i(57952),y=i(53030),_=i(68833),w=i(55480),C=i(98914),B=i(98422),k=i(19081);let x={backdrop:"backdrop-_YQndu",backdropHidden:"backdropHidden-pg_NJc",backdropVisible:"backdropVisible-eL7zZp"},S=e=>{let{visible:t,className:i,style:n={}}=e,[o,r]=(0,a.eJ)(!1),[s,d]=(0,a.eJ)(t);return((0,a.d4)(()=>{t?(d(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{r(!0)})})):r(!1)},[t]),(0,a.d4)(()=>{t&&d(!0)},[t]),s)?(0,l.tZ)("div",{className:"".concat(x.backdrop," ").concat(o?x.backdropVisible:x.backdropHidden," ").concat(i),onTransitionEnd:function(){t||d(!1)},style:n}):null};var P=i(74571),I=i(94184),X=i.n(I),T=i(91432),N=i(6070);let M=e=>{let{audioPlayerRef:t,hasPaywall:i,feedUrl:n,isPrivateFeed:o,isServingFreePodcastUrl:r,post:a,pub:s,section:d,user:c,onChange:u,onCommentsClick:p,freeSignup:h,reaction_token:g}=e,{isMobile:v}=(0,B.v9)(),Z=(0,N.HD)({pub:s});return(0,l.tZ)("div",{className:X()("player-wrapper-outer-eAOhcD",{"playerWrapperOuterFP-bKWoVB":Z}),children:(0,l.tZ)("div",{className:X()("player-wrapper-inner-KUdif0",{"playerWrapperInnerFP-Cm0O_q":Z}),children:(0,l.tZ)(T.Fb,{audioPlayerRef:t,explicitHeight:Z?340:void 0,feedUrl:n,hasPaywall:i,isPrivateFeed:o,isServingFreePodcastUrl:r,post:a,pub:s,radius:Z&&v?"none":void 0,section:d,user:c,freeSignup:h,ufiComponent:Z?null:(0,l.tZ)(m._2,{isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:a,pub:s,style:"large-on-dark",user:c,onChange:u,onCommentsClick:p}),reaction_token:g})})})};var L=i(3862),E=i(347),q=i(74626),z=i(9550),R=i(49259),A=i(7523),F=i(11268),O=i(68648),D=i(61254),H=i(58175),U=i(67884),J=i(97742),W=i(95441),j=i(15771),Y=i(6490),V=i(63474),G=i(70379),K=i(4135),Q=i(91668),$=i(43905),ee=i(81821);let et=e=>{let{feedUrl:t,isStandaloneVideo:i,eligibleForPodcast:n,post:o,pub:a,showLinks:s,user:d,onTranscriptClick:c}=e,{iString:u}=(0,W.M1)(),[p,h]=(0,r.useState)(!1);return(0,l.BX)(l.HY,{children:[(0,l.BX)(k.gq,{gap:8,overflowX:"auto",className:"horizontalScrolling-CUpSMl",children:[(0,l.tZ)(j.zx,{leading:(0,l.tZ)(J.Z,{height:18,style:{stroke:"none"}}),priority:"secondary",onClick:()=>(0,K.T)({feedUrl:t,pub:a,post:o}),children:u("Open in app")}),c&&(0,l.tZ)(j.zx,{leading:(0,l.tZ)(U.Z,{size:20}),priority:"secondary",onClick:c,children:u("Transcript")}),!i&&n&&(0,l.tZ)(j.zx,{priority:"secondary",onClick:()=>{h(!0)},children:u("Listen via...")})]}),(0,l.tZ)(ei,{isModalOpen:p,setIsModalOpen:h,feedUrl:t,showLinks:s,user:d})]})},ei=e=>{let{isModalOpen:t,setIsModalOpen:i,feedUrl:r,showLinks:a,user:s}=e,{iString:d}=(0,W.M1)(),c=(0,G.pm)();return(0,l.BX)(Y.u_,{isOpen:t,onClose:()=>i(!1),children:[(0,l.tZ)(Y.xB,{title:d("Listen via..."),description:d("Select your favorite podcast app from the list below."),showClose:!0,showDivider:!0,onClose:()=>i(!1)}),(0,l.tZ)(Y.fe,{children:(0,l.tZ)(k.tu,{gap:20,children:a&&(0,$.U6)({feedUrl:r,isApple:(0,ee.s)(),isMobile:!0,showLinks:a,user:s,render:e=>{let{key:t,label:i,url:n,onClick:o}=e;return(0,l.tZ)(en,{platformKey:t,label:i,url:n,onClick:o})}})})}),(0,l.tZ)(Y.mz,{direction:"column",secondaryButton:(0,l.tZ)(j.zx,{priority:"secondary",onClick:()=>{c.popToast(e=>(0,l.tZ)(G.FN,(0,o._)((0,n._)({},e),{text:d("Copied link to clipboard")}))),(0,C.vQ)(r)},children:d("Copy RSS feed URL")})})]})},en=e=>{let{platformKey:t,label:i,url:n,onClick:o}=e;return(0,l.tZ)(V.A0,{href:n,children:(0,l.BX)(k.gq,{alignItems:"center",gap:12,onClick:o,children:[(0,l.tZ)(Q.S,{platformKey:t,size:40}),(0,l.tZ)(H.xv.B3,{weight:"bold",children:i})]})})};var eo=i(60308),el=i(63651),er=i(59961);let ea=e=>{var t,i;let{feedUrl:n,isStandaloneVideo:o,eligibleForPodcast:r,post:a,pub:s,magicToken:d,section:c,showLinks:u,user:p,onChange:h,onCommentsClick:g,onToggleRestackModal:v,onTranscriptClick:Z}=e,{isMobile:f}=(0,B.v9)(),b=null===(t=s.sponsorship_campaigns)||void 0===t?void 0:t.find(e=>"podcast"===e.campaign_type);return(0,N.HD)({pub:s})?(0,l.tZ)(es,{post:a,pub:s,section:c,user:p}):(0,l.tZ)(E.h,{children:(0,l.BX)(k.tu,{gap:16,children:[f&&(0,l.tZ)(et,{feedUrl:n,isStandaloneVideo:o,eligibleForPodcast:r,post:a,pub:s,showLinks:u,user:p,onTranscriptClick:Z}),f&&b&&(0,l.BX)(k.tu,{as:"a",gap:8,href:(0,eo.l5Q)({campaignId:b.id,medium:"podcast",pubId:s.id,url:b.link_url,postId:a.id}),target:"_blank",justifyContent:"center",alignItems:"center",paddingY:8,children:[(0,l.tZ)(H.xv.Digit,{color:"pub-secondary-text",weight:"regular",children:b.episode_short_text}),b.image_url&&(0,l.tZ)("img",{alt:null!==(i=b.image_alt_text)&&void 0!==i?i:"",src:(0,el.zF4)(b.image_url,250),style:{flexGrow:0,width:"auto",height:16}})]}),(0,l.BX)(k.tu,{gap:8,children:[(0,l.tZ)(H.xv.H2,{color:"pub-primary-text",font:"pub-headings",dir:"auto",className:er.Z.title,children:a.title}),a.subtitle&&(0,l.tZ)(H.xv.B2,{color:"pub-secondary-text",font:"pub-headings",weight:"regular",dir:"auto",className:er.Z.subtitle,children:a.subtitle})]}),(0,l.tZ)(L.E,{variant:"shows",post:a,pub:s}),!f&&(0,l.tZ)(m.Mp,{post:a,pub:s,user:p,onChange:h,postReactionToken:d,onCommentsClick:g,onToggleRestackModal:v,onTranscriptClick:Z})]})})},es=e=>{let{post:t,pub:i,section:n,user:o}=e,{isMobile:r}=(0,B.v9)(),a=(0,eo.UVC)({pub:i,section:n}),s=!!t.videoUpload;return(0,l.tZ)(O.hV,{pub:i,children:(0,l.tZ)(E.h,{children:(0,l.BX)(k.tu,{gap:24,children:[(0,l.BX)(k.tu,{gap:12,children:[(0,l.BX)(k.tu,{gap:8,children:[(0,l.tZ)(A.Z,{preset:"h4-serif",children:t.title}),(0,l.tZ)(R.z,{post:t})]}),t.subtitle&&(0,l.tZ)(A.Z,{preset:"d3-serif",children:t.subtitle})]}),!s&&(0,l.BX)(k.hs,{alignItems:r?"start":"center",direction:r?"column":"row",gap:24,justifyContent:"space-between",children:[(0,l.tZ)(z.o,{pub:i,section:n,user:o}),(0,l.tZ)(q._,{href:a,variant:"tertiary",size:"md",trailingIcon:"chevron-right",children:"View all episodes"})]}),s&&n&&(0,N.HD)({pub:i})&&(0,l.BX)(k.hs,{direction:r?"column":"row",justifyContent:"space-between",children:[(0,l.tZ)(F.b,{pub:i,section:n}),(0,l.tZ)(q._,{href:(0,el.Ucy)(i,{section:n}),variant:"tertiary",size:"md",trailingIcon:"chevron-right",children:"View all episodes"})]}),(0,l.tZ)(D.iz,{})]})})})};var ed=i(17836),ec=i(94874),eu=i(17540);let ep=e=>{let{bylines:t,variant:i}=e;return(0,l.tZ)(k.hs,(0,o._)((0,n._)({},"shows"===i?{direction:"row",gap:12,wrap:"wrap"}:{direction:"column",gap:24}),{children:t.map(e=>(0,l.BX)(k.gq,{alignItems:"center",gap:8,children:[(0,l.tZ)(eu.PZ,{tier:e.bestseller_tier,children:(0,l.tZ)(ec.xV,{user:e,utmSource:"author-byline-face-podcast",size:32})}),(0,l.BX)(k.tu,{children:[(0,l.tZ)(H.xv.B4,{color:"pub-primary-text",children:e.name}),e.primaryPublicationName&&(e.primaryPublicationUrl?(0,l.BX)(H.xv.B4,{color:"pub-secondary-text",translated:!0,children:["Writes"," ",(0,l.tZ)("a",{style:{textDecoration:"none"},href:e.primaryPublicationUrl,children:I18N.p(e.primaryPublicationName)})," ",(0,l.tZ)("a",{href:"".concat(e.primaryPublicationUrl,"/subscribe"),children:"Subscribe"})]}):(0,l.BX)(H.xv.B4,{color:"pub-secondary-text",translated:!0,children:["Writes ",I18N.p(e.primaryPublicationName)]}))]})]}))}))},eh=e=>{let{bylines:t,isStandaloneVideo:i,eligibleForPodcast:n}=e,{iString:o}=(0,W.M1)();return(0,l.BX)(k.tu,{gap:16,"aria-label":"Appears in episode",role:"region",children:[(0,l.tZ)(ed.R,{children:o(i||!n?"Authors":"Appears in episode")}),(0,l.tZ)(ep,{bylines:t,variant:"shows"})]})};var em=i(33665),eg=i(66500),ev=i(3486);let eZ={container:"container-MuztBl","subscribe-container":"subscribe-container-_pmqCv",description:"description-ij0plp"},ef=e=>{let{post:t,pub:i,section:n,user:o,isStandaloneVideo:r}=e,{title:a,description:s,url:d}=(0,$.Mv)({pub:i,section:n,useSection:r});return(0,l.BX)(k.tu,{border:"detail-themed",className:eZ.container,gap:24,paddingX:16,paddingY:24,radius:"md",shadow:"lg",onClick:()=>{window.location.href=d},children:[(0,l.BX)(k.tu,{gap:8,alignItems:"center",children:[(0,l.tZ)(ev.p,{post:t,pub:i,section:n,useSection:r}),a&&(0,l.tZ)(ed.R,{align:"center",children:a}),(0,N.VL)({pub:i,includeTheRampart:!0})&&(0,l.tZ)(k.gq,{alignItems:"center",gap:8,children:(0,N.rM)({sectionId:null==n?void 0:n.id}).map(e=>(0,l.tZ)(eg.S,{medium:e}))}),s&&(0,l.BX)(k.tu,{gap:8,children:[s.split("\n").map(e=>(0,l.tZ)(H.xv.B4,{className:eZ.description,color:"pub-secondary-text",align:"center",children:e})),(0,l.tZ)("span",{hidden:!0,"data-testid":"podcast-description",children:s})]})]}),!(null==o?void 0:o.is_subscribed)&&(0,l.tZ)("div",{className:eZ["subscribe-container"],onClick:e=>{e.stopPropagation()},children:(0,l.tZ)(em.Z,{expectTruncation:!0,pub:i,source:"episode-page-sidebar",user:o})})]})};var eb=i(85923),ey=i(80542);let e_=e=>{let{isStandaloneVideo:t,pub:i,recentEpisodes:n,user:o}=e,{iString:r}=(0,W.M1)(),{isMobile:a}=(0,B.v9)();return(0,l.tZ)(O.hV,{pub:i,user:o,children:(0,l.BX)(k.tu,{gap:a?12:8,"aria-label":r("Recent episodes"),role:"region",children:[(0,l.tZ)(ed.R,{children:r(t?"Recent Posts":"Recent Episodes")}),(0,l.tZ)(k.tu,{gap:12,style:{margin:a?void 0:"0 -8px"},"aria-label":r("Recent episodes"),role:"region",children:n.map(e=>(0,l.tZ)(ey.G,{post:e,variant:"mini-episode",onClick:()=>{(0,_.j)(_.FP.RECENT_EPISODE_ITEM_CLICKED,{post_id:e.id})}}))})]})})};var ew=i(84864);let eC=e=>{var t,i,o;let{feedUrl:r,isStandaloneVideo:s,eligibleForPodcast:c,post:u,pub:p,recentEpisodes:h,section:m,showLinks:g,user:v}=e,{iString:Z}=(0,W.M1)(),{isMobile:f}=(0,B.v9)(),[b,y]=(0,a.eJ)(h),_=(0,a.Ye)(()=>{var e;return null!==(e=null==b?void 0:b.filter(e=>e.id!==u.id))&&void 0!==e?e:null},[b,u.id]),w=null===(t=p.sponsorship_campaigns)||void 0===t?void 0:t.find(e=>"podcast"===e.campaign_type),C=(0,ew.getBylineUsers)(u).sort((e,t)=>e.id===p.author_id?-1:t.id===p.author_id?1:e.is_guest&&!t.is_guest?-1:!e.is_guest&&t.is_guest?1:(e.name||"").localeCompare(t.name||""));return(0,a.d4)(()=>{let e=async()=>{var e,t;y(null!==(t=(await d().get("/api/v1/recent_posts").query((0,n._)({rss_episodes_only:!(null===(e=u.podcastFields)||void 0===e?void 0:e.hide_from_feed)},(null==m?void 0:m.id)?{section_id:m.id}:{}))).body)&&void 0!==t?t:[])};h||e()},[u.id,null===(i=u.podcastFields)||void 0===i?void 0:i.hide_from_feed,h,p.id,null==m?void 0:m.id]),(0,l.BX)(k.tu,{gap:w?24:32,"aria-label":Z("Sidebar content"),role:"complementary",children:[w&&!f&&(0,l.BX)(k.tu,{justifyContent:"center",as:"a",gap:8,href:(0,eo.l5Q)({campaignId:w.id,medium:"podcast",pubId:p.id,url:w.link_url,postId:u.id}),target:"_blank",alignItems:"center",children:[(0,l.tZ)(H.xv.Digit,{color:"pub-secondary-text",weight:"regular",children:w.episode_short_text}),w.image_url&&(0,l.tZ)("img",{alt:null!==(o=w.image_alt_text)&&void 0!==o?o:"",src:(0,el.zF4)(w.image_url,250),style:{flexGrow:0,width:"auto",height:16}})]}),!f&&(0,l.tZ)(ef,{post:u,pub:p,section:m,user:v,isStandaloneVideo:s}),(0,l.BX)(k.tu,{gap:32,children:[!f&&!s&&c&&(0,l.tZ)(eb.y,{feedUrl:r,showLinks:g,post:u,pub:p,section:m,user:v}),!f&&p.bylines_enabled&&C.length>0&&(0,l.tZ)(eh,{bylines:C,isStandaloneVideo:s,eligibleForPodcast:c}),_&&_.length>0&&(0,l.tZ)(e_,{isStandaloneVideo:s,pub:p,recentEpisodes:_,user:v})]})]})};var eB=i(6400),ek=i(1777),ex=i(52906),eS=i(41352),eP=i(72508),eI=i(62718),eX=i(71068);let eT={"transcription-chunk":"transcription-chunk-YeZNdv",transcriptionWords:"transcriptionWords-u5CRAD","transcription-chunk--active":"transcription-chunk--active-HnAU7N","transcription-timestamp":"transcription-timestamp-mDeQkH","transcription-text-align-left":"transcription-text-align-left-V7cht2","transcription-full-body-container":"transcription-full-body-container-LXFSNv",sticky:"sticky-zutBDd"},eN=e=>{let{activeRowIndex:t,isPlaying:i,postId:n,row:o,rowIndex:r,showSpeaker:s,speakerName:d,words:c,onPause:u,onPlay:p}=e,{searchTerm:h,focusedItemStart:m}=(0,b.pH)(),g=(0,a.sO)(null),v=h&&o.text.toLowerCase().includes(h.toLowerCase());(0,a.d4)(()=>{if(m&&g.current&&o.start===m){var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"center"})}},[m,o.start]);let Z=()=>v?(0,l.tZ)(eI.J,{isFocused:o.start===m,searchTerm:h,rowIndex:r,text:o.text.trim()}):(0,l.tZ)(eX.xu,{display:"inline",className:eT.transcriptionWords,lineHeight:20,radius:"sm","data-chunk-index":r,children:((null==c?void 0:c.length)?c.map(e=>e.word).join(" "):o.text).trim()});return(0,l.tZ)("div",{ref:g,children:(0,l.tZ)(eP.sZ,{onPlay:p,onPause:u,postId:n,isActiveRow:t==r,isPlaying:i,row:o,rowIndex:r,className:eT["transcription-chunk"],activeClassName:eT["transcription-chunk--active"],children:d&&s?(0,l.BX)(k.tu,{paddingTop:2,children:[(0,l.BX)(k.gq,{alignItems:"baseline",gap:12,children:[(0,l.tZ)(H.xv.B4,{className:X()(eT["transcription-timestamp"],eT["transcription-text-align-left"]),color:"pub-secondary-text",children:d?(0,ew.secondsToHHMMSS)(o.start):""}),(0,l.tZ)(H.xv.Meta,{padding:2,paddingTop:4,color:"accent",weight:"semibold",children:d})]}),(0,l.BX)(k.gq,{alignItems:"baseline",gap:12,"data-chunk-index":r,children:[(0,l.tZ)(H.xv.B4,{className:X()(eT["transcription-timestamp"],eT["transcription-text-align-left"]),color:"pub-secondary-text",children:d?"":(0,ew.secondsToHHMMSS)(o.start)}),(0,l.tZ)(eX.xu,{display:"inline",className:eT.transcriptionWords,lineHeight:20,padding:2,radius:"sm","data-chunk-index":r,children:Z()})]})]}):(0,l.BX)(k.gq,{alignItems:"baseline",gap:12,"data-chunk-index":r,children:[(0,l.tZ)(H.xv.B4,{className:X()(eT["transcription-timestamp"],eT["transcription-text-align-left"]),color:"pub-secondary-text",children:d?"":(0,ew.secondsToHHMMSS)(o.start)}),(0,l.tZ)(eX.xu,{display:"inline",className:eT.transcriptionWords,padding:2,radius:"sm","data-chunk-index":r,children:Z()})]})})},r)},eM=e=>{let{post:t,playerRef:i,transcription:r,fullWidth:s,onClose:d,onExpand:c,onCollapse:u}=e,{isMobile:p}=(0,B.v9)(),[h,m]=(0,a.eJ)(0),g=(0,a.sO)(null),[v,Z]=(0,a.eJ)(!1),[f,y]=(0,a.eJ)(0),{searchTerm:_}=(0,b.pH)(),w=()=>{if(g.current){let e=g.current.getBoundingClientRect().top,t=window.scrollY||window.scrollY;t>f&&e<=0?Z(!0):t<=f&&Z(!1)}};return(0,a.d4)(()=>{let e=g.current,t=()=>{e&&!v&&y(e.offsetTop)};t();let i=new ResizeObserver(t);return e&&i.observe(e),window.addEventListener("scroll",w),()=>{e&&i.unobserve(e),window.removeEventListener("scroll",w)}},[v]),(0,l.tZ)(E.h,{children:(0,l.BX)(k.tu,{gap:24,flex:"grow",children:[(0,l.BX)(k.gq,{gap:8,alignItems:"center",children:[(0,l.tZ)(k.gq,{flex:"grow",ref:g,className:v?eT.sticky:"",display:!_&&v?"none":void 0,children:(0,l.tZ)(k.gq,{paddingLeft:p&&v?8:0,children:(0,l.tZ)(b.Rq,{postId:t.id,closeAlwaysVisible:!1})})}),!p&&(0,l.BX)(eB.Fragment,{children:[!s&&(0,l.tZ)(j.hU,{onClick:c,children:(0,l.tZ)(ek.Z,{})}),s&&(0,l.tZ)(j.hU,{onClick:u,children:(0,l.tZ)(ex.Z,{})})]}),(0,l.tZ)(j.hU,{onClick:d,children:(0,l.tZ)(eS.Z,{})})]}),(0,l.tZ)("div",{className:eT["transcription-full-body-container"],children:(0,l.tZ)(eP.ZP,{player:i,postId:t.id,renderTranscriptionChunk:e=>(0,l.tZ)(eN,(0,o._)((0,n._)({},e),{activeRowIndex:h,postId:t.id})),transcription:r,onUpdateActiveRowIndex:m})})]})})};var eL=i(27412),eE=i(98848),eq=i(10120),ez=i(12281),eR=i(46543),eA=i(59488),eF=i(79153),eO=i(49526),eD=i(8746),eH=i(18618),eU=i(86657),eJ=i(20888),eW=i(4158),ej=i(70958),eY=i(61527),eV=i(17054);let eG=e=>{var t,i,n,o;let{alternateAudioSource:r,audioPlayerRef:s,hideControls:d,isIdle:c,post:u,pub:p,showPaywall:h,onFinishAudio:m,onSetAudioIsPlaying:g}=e,{iString:v}=(0,W.M1)(),{isMobile:Z}=(0,B.v9)(),f=(0,y.On)(s),b=u.section_id&&null!==(t=p.sections.find(e=>e.id===u.section_id))&&void 0!==t?t:null,{artUrl:_}=b?(0,eV.d_)({pub:p,section:b}):(0,eV.jU)({pub:p}),w=b?null!==(i=b.podcastPalette)&&void 0!==i?i:null:null!==(n=p.podcastPalette)&&void 0!==n?n:null,C=["extra_audio_preview","alternate_audio_preview"].includes(r.type);return(0,a.d4)(()=>{g(f)},[f,g]),(0,l.tZ)(eU.Z,{ref:s,src:r.url,updateOnEveryFrame:(null!==(o=u.podcast_duration)&&void 0!==o?o:0)<300,onFinishAudio:m,trackingProps:{contentType:"post",entityKey:u.id,entityType:"post",surface:"post"},render:e=>{let{duration:t,isPlaying:i,togglePlayback:n}=e,o=e=>e.stopPropagation();return(0,l.BX)(k.tu,{alignItems:"center",bg:"primary",flex:"grow",justifyContent:"center",position:"relative",overflow:Z?"auto":"hidden",onClick:()=>{n()},children:[(0,l.tZ)(eW.z,{backgroundUrl:_,blurAmount:40,isBlurred:!0,palette:w,radius:"none"}),(0,l.tZ)(k.gq,{className:"darkenBottom-zaTJyO",position:"absolute",inset:0}),(0,l.BX)(k.gq,{position:"relative",children:[_&&!h&&(0,l.tZ)(eJ.e,{imageIsFixedWidth:!0,maxWidth:Z?160:340,radius:"md",src:_,useRetinaSizing:!0}),(0,l.tZ)(k.gq,{alignItems:"center",inset:0,justifyContent:"center",position:"absolute",children:(0,l.tZ)(k.gq,{onClick:o,opacity:100*!d,children:(0,l.tZ)(eH.fI,{isPlaying:null!=i&&i,size:Z?56:72,onTogglePlayback:n})})})]}),(0,l.tZ)(k.gq,{onClick:o,children:(0,l.tZ)(eY.Vo,{disableShortcuts:!0,disableTooltips:!0,duration:t,handle:null,isActive:(!i||!c)&&!h,isAudio:!0,isFocused:!1,post:u,pub:p,mediaUpload:null,mediaRef:s,showPaywall:!1})}),C&&(0,l.tZ)(k.gq,{position:"absolute",style:{top:12,left:12},children:(0,l.tZ)(ej.l,{avoidBackgroundBlur:!0,children:v("Preview")})})]})}})};var eK=i(28226),eQ=i(66784),e$=i(68835),e0=i(87077);let e1={unselectedButton:"unselectedButton-LnSrSa"},e4="switcher-audio-button",e2=e=>{let{selected:t,sourceType:i,onSelect:n}=e,{iString:o}=(0,W.M1)(),{isMobile:r}=(0,B.v9)(),a={alternate_audio_preview:o("Switch to audio"),alternate_full_audio:o("Switch to audio"),extra_audio_preview:o("Switch to the audio preview"),free_podcast_url:o("Switch to the full ad-supported audio")}[i];return(0,l.BX)(k.tu,{bg:"glass-inverted-medium",gap:4*!r,padding:4,pointerEvents:r?"none":"auto",radius:"full",children:[(0,l.tZ)(e0.u,{disabled:r,placement:"right",text:o("Switch to video"),children:(0,l.tZ)(j.GI,{className:X()({[e1.unselectedButton]:"video"!==t}),rounded:!0,size:r?"sm":"md",onClick:()=>{null==n||n("video")},children:(0,l.tZ)(eQ.Z,{size:r?18:20})})}),(0,l.tZ)(k.gq,{position:"relative",className:e1.audioButtonContainer,children:(0,l.tZ)(e0.u,{disabled:r,placement:"right",text:a,children:(0,l.tZ)(j.GI,{id:e4,className:X()({[e1.unselectedButton]:"audio"!==t}),rounded:!0,size:r?"sm":"md",onClick:()=>{null==n||n("audio")},children:(0,l.tZ)(e$.Z,{size:r?16:18})})})})]})},e8=(0,eB.createContext)({containerRef:{current:null},clearSelection:()=>void 0,finishedSelection:null,isSelecting:!1,selectionBegin:null,selectionFinish:null,selectionRef:{current:null}}),e6=e=>{let{children:t}=e,i=(0,a.sO)(null),n=(0,a.sO)(null),[o,r]=(0,a.eJ)(!1),[s,d]=(0,a.eJ)(!1),[c,u]=(0,a.eJ)(null),[p,h]=(0,a.eJ)(null),m=c&&p&&(p.rowIndex<c.rowIndex||p.rowIndex===c.rowIndex&&p.wordIndex<c.wordIndex),g=m?p:c,v=m?c:p,Z=(0,a.Ye)(()=>s&&g&&v?{begin:g,finish:v}:null,[g,v,s]);(0,a.d4)(()=>{if(!i.current)return;let e=i.current,t=e=>{s&&(d(!1),r(!1),u(null),h(null));let t=Number(e.target.dataset.rowIndex),i=Number(e.target.dataset.wordIndex);isNaN(t)||isNaN(i)||u({rowIndex:t,wordIndex:i})},n=e=>{if(!c||s)return;o||r(!0);let t=e.target.dataset;if("true"===t.inBetween){let e=Number(t.prevRowIndex),i=Number(t.prevWordIndex),n=Number(t.nextRowIndex),o=Number(t.nextWordIndex);if(isNaN(e)||isNaN(i)||isNaN(n)||isNaN(o))return;c.rowIndex<e||c.rowIndex===e&&c.wordIndex<i?h({rowIndex:e,wordIndex:i}):h({rowIndex:n,wordIndex:o});return}let i=Number(t.rowIndex),n=Number(t.wordIndex);isNaN(i)||isNaN(n)||h({rowIndex:i,wordIndex:n})},l=()=>{d(!0)};return e.addEventListener("mousedown",t),e.addEventListener("mousemove",n),e.addEventListener("mouseup",l),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",n),e.removeEventListener("mouseup",l)}},[i,s,o,c]);let f=(0,a.I4)(()=>{d(!1),r(!1),u(null),h(null);let e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},[]);return(0,l.tZ)(e8.Provider,{value:{clearSelection:f,finishedSelection:Z,isSelecting:o,containerRef:i,selectionBegin:g,selectionFinish:v,selectionRef:n},children:t})},e9=()=>(0,a.qp)(e8);var e3=i(74691),e5=i.n(e3),e7=i(14293),te=i.n(e7),tt=i(23493),ti=i.n(tt),tn=i(61749),to=i(76998),tl=i(29032),tr=i(33224),ta=i(57649),ts=i(1864),td=i(18029),tc=i.n(td),tu=i(17015),tp=i(93370);let th={textContainerFadedShows:"textContainerFadedShows-pHGywl",hideSelectionBackground:"hideSelectionBackground-vjEoVj",word:"word-IefdhU",wordSelectedShows:"wordSelectedShows-Tf85j5",textHidden:"textHidden-zukLlK",searchResult:"searchResult-cbPSuC",isFocused:"isFocused-wy1BKg"},tm=(0,r.memo)(e=>{var t,i;let{clipWordEnd:r,clipWordStart:s,isFinishedSelecting:d,focusedItemStart:c,isClipping:u,isFaded:p,isFirstInSelection:h,isMeasuring:m,isScrolling:g,isSelecting:v,listContainerRef:Z,postId:f,rowIndex:b,rows:y,searchTerm:w,selectedWordEnd:C,selectionRef:B,selectedWordStart:x,speakerMap:S,onClickRow:P,onCreateClip:I}=e,T=(0,a.sO)(null),N=y[b];N||console.error("Transcript row at index ".concat(b," is missing"));let M=0===b?null:y[b-1],L=b===y.length-1?null:y[b+1],E=0===b?null:y[b-1],q=(!E||E.speaker!==N.speaker)&&N.speaker?null!==(t=S[N.speaker])&&void 0!==t?t:function(e){if(!e)return"Unknown Speaker";let t=e.split("_"),i=parseInt(t[1]);return"".concat(tc()(t[0])," ").concat(i+1)}(N.speaker):null,z=w&&N.text.toLowerCase().includes(w.toLowerCase()),R=M?{"data-in-between":!0,"data-prev-row-index":b-1,"data-prev-word-index":M.words.length-1,"data-next-row-index":b,"data-next-word-index":0}:{},A=L?{"data-in-between":!0,"data-prev-row-index":b,"data-prev-word-index":N.words.length-1,"data-next-row-index":b+1,"data-next-word-index":0}:{};return(0,l.BX)(k.gq,{alignItems:"start",gap:12,paddingX:16,"data-transcript-row-index":b,onClick:()=>{var e;(null===(e=window.getSelection())||void 0===e||!e.toString())&&P&&f&&((0,_.j)(_.FP.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:f,timestamp:(0,tp.DL)(N.start)}),P({rowIndex:b}))},style:m?{overflowY:"scroll"}:void 0,children:[(0,l.tZ)(k.gq,{bg:"glass-inverted-medium",paddingX:4,radius:"sm",userSelect:"none",children:(0,l.tZ)(H.xv.Meta,{color:"white",lineHeight:20,children:(0,ew.secondsToHHMMSS)(N.start)})}),(0,l.BX)(k.tu,{flex:"grow",gap:2,children:[q&&(0,l.tZ)(H.xv.Meta,(0,o._)((0,n._)({color:"white",opacity:60,userSelect:"none",weight:"semibold"},R),{children:q})),(0,l.BX)(k.tu,{position:"relative",children:[z&&(0,l.tZ)(tg,{isFocused:N.start===c,searchTerm:w,text:N.text.trim()}),(0,l.BX)(k.tu,{ref:T,position:"relative",children:[(0,l.tZ)(H.xv.B3,(0,o._)((0,n._)({className:X()(th.hideSelectionBackground,{[null!==(i=th.textContainerFadedShows)&&void 0!==i?i:"undefined"]:p}),cursor:"pointer",lineHeight:20,paddingBottom:12},A),{children:!N.words.length||g&&!u&&te()(x)&&te()(C)?N.text:N.words.map((e,t)=>{var i;let n=!te()(x)&&!te()(C)&&t>=x&&t<=C,o=h&&t===x,a=u&&!v&&!te()(r)&&!te()(s)&&t>=s&&t<=r;return(0,l.BX)(l.HY,{children:[(0,l.tZ)("span",{ref:o?B:null,className:X()(th.word,{[null!==(i=th.wordSelectedShows)&&void 0!==i?i:"undefined"]:a||n}),"data-row-index":b,"data-word-index":t,children:e.word})," "]})})})),h&&d&&I&&Z&&!u&&(0,l.tZ)(tZ,{firstWordRef:B,listContainerRef:Z,rowElemRef:T,children:(0,l.tZ)(tf,{onClick:I})})]})]})]})]})}),tg=e=>{let{searchTerm:t,isFocused:i,text:n}=e,o=RegExp("(".concat(t,")"),"gi"),r=n.split(o);return(0,l.tZ)(H.xv.B3,{className:th.textHidden,position:"absolute",inset:0,children:r.map(e=>{var t;return e.match(o)?(0,l.tZ)("span",{className:X()(th.searchResult,{[null!==(t=th.isFocused)&&void 0!==t?t:"undefined"]:i}),children:e}):(0,l.tZ)("span",{children:e})})})},tv=(0,r.memo)(e=>{let{style:t,index:i,data:n,isScrolling:o}=e,{activeRowIndex:r,listContainerRef:a,postId:s,rows:d,speakerMap:u,onClickRow:p,onCreateClip:h}=n,{finishedSelection:m,isSelecting:g,selectionBegin:v,selectionFinish:Z,selectionRef:f}=e9(),{searchTerm:y,focusedItemStart:_}=(0,b.pH)(),{clipTimes:w,isClipping:C}=(0,c.Sr)(),B=d[i];B||console.error("Transcript row at index ".concat(i," is missing"));let k=!!(v&&v.rowIndex===i),x=null,S=null;if(v&&Z){let e=i===v.rowIndex&&i===Z.rowIndex,t=i===v.rowIndex,n=i===Z.rowIndex,o=i>v.rowIndex&&i<Z.rowIndex;e?(x=v.wordIndex,S=Z.wordIndex):t?(x=v.wordIndex,S=B.words.length-1):n?(x=0,S=Z.wordIndex):o&&(x=0,S=B.words.length-1)}let P=null,I=null;if(C&&w)for(let e=0;e<B.words.length;e++){let t=B.words[e];!te()(t)&&t.end>w.start&&t.start<w.end&&(null===P&&(P=e),I=e)}return(0,l.tZ)("div",{className:th.hideSelectionBackground,style:t,children:(0,l.tZ)(tm,{clipWordStart:P,clipWordEnd:I,focusedItemStart:_,isClipping:C,isFaded:!C&&"number"==typeof r&&r!==i,isFinishedSelecting:!!m,isFirstInSelection:k,isScrolling:o,isSelecting:g,listContainerRef:a,postId:s,rows:d,rowIndex:i,searchTerm:y,selectionRef:f,selectedWordStart:x,selectedWordEnd:S,speakerMap:u,onClickRow:p,onCreateClip:h})})},ts.wy),tZ=e=>{let{children:t,firstWordRef:i,listContainerRef:n,rowElemRef:o}=e;if(!(null==i?void 0:i.current)||!o.current||!n.current)return null;let r=i.current.offsetTop,{top:a}=o.current.getBoundingClientRect(),{top:s,height:d}=n.current.getBoundingClientRect(),c=e5()(r-8,s-a+8+32,s+d-a-8);return(0,l.tZ)(k.tu,{position:"absolute",style:{top:c,left:"45%",transform:"translate(-50%, -100%)"},onClick:tb,onMouseDown:tb,onMouseMove:tb,onMouseUp:tb,userSelect:"none",zIndex:1,children:t})},tf=e=>{let{onClick:t}=e,{iString:i}=(0,W.M1)();return(0,l.tZ)(j.zx,{leading:(0,l.tZ)(tu.Z,{size:16}),priority:"secondary",onClick:t,children:i("Create clip")})},tb=e=>{e.stopPropagation()},ty=e=>{let{activeRowIndex:t,height:i,id:n,listContainerRef:o,listRef:r,postId:s,rows:d,speakerMap:c,width:u,onClickRow:p,onCreateClip:h,onScroll:m}=e,[g,v]=(0,a.eJ)(null);(0,a.bt)(()=>{if(g||!u)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.width="".concat(u,"px"),e.style.pointerEvents="none",e.style.visibility="hidden",v(e),document.body.appendChild(e)},[g,u]);let Z=(0,a.I4)(e=>g?(g.innerHTML=(0,ta.Dq)((0,l.tZ)(tm,{isMeasuring:!0,isScrolling:!1,rows:d,rowIndex:e,selectedWordEnd:null,selectedWordStart:null,speakerMap:c})),g.clientHeight||0):0,[g,d,c]),f=(0,a.Ye)(()=>({activeRowIndex:t,listContainerRef:o,postId:s,rows:d,speakerMap:c,onClickRow:p,onCreateClip:h}),[t,o,s,d,c,p,h]);return g?(0,l.tZ)("div",{id:n,children:(0,l.tZ)(ts.S_,{ref:r,itemCount:d.length,itemSize:Z,height:i,width:u,itemData:f,outerElementType:t_,useIsScrolling:!0,onScroll:m,children:tv})}):null},t_=(0,r.forwardRef)((e,t)=>{var{style:i}=e,r=(0,eE._)(e,["style"]);return(0,l.tZ)("div",(0,n._)({ref:t,style:(0,o._)((0,n._)({},i),{overflowY:"scroll"})},r))});var tw=i(61468);let tC="video-transcription",tB=e=>{let{isClipping:t,playerRef:i,postId:o,transcription:s,onClose:d,surface:u}=e,{iString:p}=(0,W.M1)(),{clipTimes:h,virtualizedListRef:m,onStartClipping:g}=(0,c.Sr)(),v=(0,a.sO)(null),{containerRef:Z,finishedSelection:f,clearSelection:w,isSelecting:C}=e9(),{rows:B,speakerMap:x}=(0,P.Oi)({transcription:s,processAlignedRows:tw.Ap}),{isPlaying:S,currentTime:I}=(0,y.FI)(i),{setItems:X,focusedItemStart:T,searchTerm:N}=(0,b.pH)(),[M,L]=(0,a.eJ)(null),[E,q]=(0,a.eJ)(!1),{width:z,height:R}=(0,eD.y)({containerRef:v}),[A,F]=(0,a.eJ)("in-view"),[O,D]=(0,a.eJ)("in-view"),[U,J]=(0,a.eJ)("in-view"),Y=!!(null==N?void 0:N.trim()),V=S&&!Y&&!t&&!f,G=h&&tk(B,h.start),K=h&&tk(B,h.end);(0,r.useEffect)(()=>{X(B)},[B,X]),(0,r.useEffect)(()=>{var e,t,n,o;!C||(null===(t=i.current)||void 0===t?void 0:null===(e=t.player)||void 0===e?void 0:e.paused)||null===(o=i.current)||void 0===o||null===(n=o.player)||void 0===n||n.pause()},[C,i]),(0,r.useEffect)(()=>{if(E)return;let e=B.findIndex(e=>e.start<=I&&e.end>I);-1!==e&&e!==M&&L(e)},[M,I,E,B]),(0,r.useEffect)(()=>{if(!Y||!(null==m?void 0:m.current))return;let e=B.findIndex(e=>e.start===T);m.current.scrollToItem(e,"start")},[T,Y,B,m]),(0,r.useEffect)(()=>{var e,t;if(!V||!(null==m?void 0:m.current))return;let i=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(M,'"]'));if(!i)return;let n=i.parentElement,o=document.querySelector("#".concat(tC," > div")),l=null!==(e=null==o?void 0:o.children[0])&&void 0!==e?e:null;if(!o||!n||!l)return;let r=l.offsetHeight-o.offsetHeight,a=parseInt(null!==(t=n.style.top.split("px")[0])&&void 0!==t?t:""),s=o.scrollTop,d=e5()(a-32,0,r);(0,tr.ld)({virtualizedListRef:m,start:s,end:d,duration:300})},[M,V,m]);let Q=(0,a.I4)(ti()(()=>{if("number"!=typeof M)return;if(document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(M,'"]'))){F("in-view");return}let e=document.querySelector("#".concat(tC," [data-transcript-row-index]"));e&&F(((null==e?void 0:e.dataset.transcriptRowIndex)?parseInt(e.dataset.transcriptRowIndex):-1)>M?"is-before":"is-after")},100),[M]),$=(0,a.I4)(ti()(()=>{if(te()(G)||te()(K))return;let e=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(G,'"]')),t=document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(K,'"]')),i=document.querySelector("#".concat(tC," [data-transcript-row-index]"));if(!i)return;let n=(null==i?void 0:i.dataset.transcriptRowIndex)?parseInt(i.dataset.transcriptRowIndex):-1;if(e||t||n>G&&n<K){D("in-view");return}D(n>G?"is-before":"is-after")},100),[K,G]),ee=(0,a.I4)(ti()(()=>{if(!f)return;let e=f.begin.rowIndex;if(document.querySelector("#".concat(tC,' [data-transcript-row-index="').concat(e,'"]'))){J("in-view");return}let t=document.querySelector("#".concat(tC," [data-transcript-row-index]"));t&&J(((null==t?void 0:t.dataset.transcriptRowIndex)?parseInt(t.dataset.transcriptRowIndex):-1)>e?"is-before":"is-after")}),[f]),et=(0,a.I4)(e=>{let{scrollUpdateWasRequested:i}=e;i||(f?ee():t?$():Q())},[f,t,Q,$,ee]);(0,r.useEffect)(()=>{S&&Q()},[S,Q]),(0,r.useEffect)(()=>{if(!h||!(null==m?void 0:m.current))return;let e=tk(B,h.start);m.current.scrollToItem(Math.max(e,0),"smart"),D("in-view")},[h,B,$,m]);let ei=(0,a.I4)(()=>{(null==m?void 0:m.current)&&(m.current.scrollToItem(M,"start"),F("in-view"))},[M,m]),en=(0,a.I4)(()=>{(null==m?void 0:m.current)&&(m.current.scrollToItem(G,"start"),D("in-view"))},[G,m]),eo=(0,a.I4)(()=>{if(!f||!B)return;let{start:e,end:t}=(0,tr.up)({finishedSelection:f,transcriptionRows:B});w(),(0,_.j)(_.FP.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"post transcript",surface:u}),g({start:e,end:t,source:"side-by-side-transcript",title:null})},[w,f,g,B,u]);(0,r.useEffect)(()=>{f&&(t?eo():ee())},[f,eo,t,ee]);let el=(0,a.I4)(async e=>{var n;let{rowIndex:o}=e;if(null===(n=i.current)||void 0===n?void 0:n.player){if(t){let e=B[o];g({start:e.start,end:e.end,source:"side-by-side-transcript",title:null});return}if(S&&o===M){i.current.player.pause();return}i.current.player.currentTime=B[o].start,L(o),q(!0),await i.current.player.play(),q(!1)}},[M,t,S,g,i,B]);return(0,l.tZ)(tl.C,{children:(0,l.BX)(k.tu,{inset:0,position:"absolute",style:{backgroundColor:"#161718"},children:[(0,l.BX)(k.gq,{alignItems:"center",justifyContent:"space-between",padding:16,children:[(0,l.tZ)(H.xv.B2,{color:"primary",weight:"semibold",children:p(t?"Create clip":"Transcript")}),d&&(0,l.tZ)(j.hU,{priority:"secondary",size:"sm",onClick:d,children:(0,l.tZ)(eS.Z,{size:20})})]}),(0,l.tZ)(k.gq,{paddingX:16,paddingBottom:16,onKeyDown:e=>{e.stopPropagation()},children:(0,l.tZ)(b.Rq,{postId:o,closeAlwaysVisible:!1})}),(0,l.BX)(k.tu,{ref:v,flex:"grow",position:"relative",children:[(0,l.tZ)(k.tu,{ref:Z,position:"absolute",inset:0,children:!!z&&(0,l.tZ)(ty,{activeRowIndex:S?M:null,height:R,id:tC,listContainerRef:v,listRef:m,postId:o,rows:B,speakerMap:x,width:z,onClickRow:el,onCreateClip:eo,onScroll:et})}),V&&"in-view"!==A&&(0,l.tZ)(k.tu,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===A?{top:0}:{bottom:16}),children:(0,l.tZ)(j.zx,{leading:"is-before"===A?(0,l.tZ)(tn.Z,{size:16}):(0,l.tZ)(to.Z,{size:16}),priority:"secondary",onClick:ei,children:p("Back to current time")})}),t&&!C&&"in-view"!==O&&(0,l.tZ)(k.tu,{position:"absolute",style:(0,n._)({left:16,right:16},"is-before"===O?{top:0}:{bottom:16}),children:(0,l.tZ)(j.zx,{leading:"is-before"===O?(0,l.tZ)(tn.Z,{size:16}):(0,l.tZ)(to.Z,{size:16}),priority:"secondary",onClick:en,children:p("Back to clipped segment")})}),f&&"in-view"!==U&&!t&&(0,l.tZ)(k.gq,{position:"absolute",justifyContent:"center",style:(0,n._)({left:0,right:0},"is-before"===U?{top:0}:{bottom:16}),children:(0,l.tZ)(tf,{onClick:eo})})]})]})})},tk=(e,t)=>{for(let i=0;i<e.length;i++){if(e[i].start<=t&&e[i].end>=t)return i;if(t<e[i].start)return i>0?i-1:0}return e.length-1},tx={container:"container-dlhqPD","video-wrapper":"video-wrapper-lforaE","video-full-screen":"video-full-screen-K4tmIj","preview-label-container":"preview-label-container-RuWmAN",sidebar:"sidebar-NzGH2W","sidebar-right":"sidebar-right-ktL8if","sidebar-left":"sidebar-left-K3vrOP","sidebar--hidden":"sidebar--hidden-xMFnhp","sidebar-icons":"sidebar-icons-YDR6ix",postPreview:"postPreview-mgizmD"};class tS extends ez.Z{constructor(...e){super(...e),(0,eL._)(this,"playbackEnabled",()=>!!this.props.showPreview)}}let tP=e=>{var t,i,s,d,u,p,h,g,v,Z,{alternateAudioSource:f,audioIsPlaying:y,audioPlayerHasMounted:w,audioPlayerRef:C,containerRef:x,disableShortcuts:S,hasPaywall:I,isIdle:T,isPostPreview:M,mediaUpload:L,post:E,pub:q,selectedMedium:z,showAudioPaywall:R,showVideoPaywall:A,style:F,transcription:O,user:D,videoIsPlaying:H,videoPlayerRef:U,onChange:J,onCommentsClick:j,onFinishAudio:Y,onSelectMedium:V,onSetAudioIsPlaying:G}=e,K=(0,eE._)(e,["alternateAudioSource","audioIsPlaying","audioPlayerHasMounted","audioPlayerRef","containerRef","disableShortcuts","hasPaywall","isIdle","isPostPreview","mediaUpload","post","pub","selectedMedium","showAudioPaywall","showVideoPaywall","style","transcription","user","videoIsPlaying","videoPlayerRef","onChange","onCommentsClick","onFinishAudio","onSelectMedium","onSetAudioIsPlaying"]);let{iString:Q}=(0,W.M1)(),$=(0,N.HD)({pub:q}),{isClipping:ee,onCancelClipping:et}=(0,c.Sr)(),[ei,en]=(0,a.eJ)(!1),eo=(0,eq.r)(),el=(0,a.sO)(null),{width:er}=(0,eD.y)({containerRef:el}),[ea,es]=(0,a.eJ)(eo.active&&"undefined"!=typeof window?window.innerWidth:null!==(p=null===(t=el.current)||void 0===t?void 0:t.offsetWidth)&&void 0!==p?p:1100),[ed,ec]=(0,eF.i)({key:"video_player:show_transcript",initialValue:!1}),eu=(ed||ee)&&!!O,{isMobile:ep}=(0,B.v9)(),eh=(0,P.Ml)(x),em=(null!==(h=L.preview_duration)&&void 0!==h?h:0)>0,[eg,ev]=(0,a.eJ)(!1),eZ=eu?(ea-360-36)/ea:1,ef="post";return(0,r.useEffect)(()=>{ee&&(0,_.j)(_.FP.MEDIA_CLIP_CREATE_MODAL_OPENED,{video_upload_id:L.id,post_id:null==E?void 0:E.id,is_post_editor:!1,source:"create",surface:ef})},[ee,L.id,null==E?void 0:E.id]),(0,r.useEffect)(()=>{eo.active&&"undefined"!=typeof window?setTimeout(()=>{es(window.innerWidth)},10):es(null!=er?er:1100)},[eo.active,er]),(0,l.BX)("div",{ref:el,className:X()(tx["video-wrapper"],{[tx["video-full-screen"]]:eo.active}),style:F,children:[(0,l.BX)("div",{style:{visibility:"audio"===z?"hidden":void 0},children:[(0,l.tZ)(eq.I,{handle:eo,children:(0,l.BX)(k.gq,{justifyContent:"center",position:"relative",overflow:ee?"visible":"hidden",style:{width:"100%",height:"100%",backgroundColor:"#000"},children:[(0,l.tZ)(k.gq,{flex:"grow",position:"relative",style:{transform:"scale(".concat(eZ,")"),transformOrigin:"0 50%",transition:"transform 0.15s ease-in-out",zIndex:ee?1:void 0},children:(0,l.tZ)(tS,(0,o._)((0,n._)({},K),{ref:U,doNotResetOnEnd:!0,hidePlayButton:A,isClipping:ee,mediaUpload:L,podcastUpload:E.podcastUpload,showPreview:!I||em,noControls:!0,noKeyboardShortcuts:!0,post:E,pub:q,renderPlayButton:()=>(0,l.tZ)(eH.fI,{isPlaying:!1,size:ep?56:72}),usePreview:I&&em,videoType:"post",onAutoplayMuted:()=>ev(!0)}))}),(0,l.tZ)(k.gq,{position:"absolute",style:{left:0,right:0,bottom:0,width:"".concat(100*eZ,"%"),transition:"width 0.15s ease-in-out"},children:(0,l.tZ)(eY.Vo,{disableShortcuts:S,handle:eo,hasPaywall:I,hasTranscript:!!O,hideNextVideoButton:M||$,isActive:null!==(g=ei||!T||ee)&&void 0!==g&&g,isFocused:eh,mediaRef:U,mediaUpload:L,podcastUpload:null!==(v=null===(i=E.videoUpload)||void 0===i?void 0:i.extractedAudio)&&void 0!==v?v:E.podcastUpload,post:E,pub:q,showPaywall:A,showTranscript:eu,onShareMenuClose:()=>en(!1),onShareMenuOpen:()=>en(!0),onToggleShowTranscript:()=>{ec(!eu)},autoPlayMuted:eg})}),O&&(0,l.tZ)(k.gq,{color:"white",opacity:100*!!eu,overflow:"auto",pointerEvents:eu?"auto":"none",position:"absolute",style:{top:0,bottom:0,right:0,transform:eu?"translateX(0)":"translateX(20%)",transition:eu?"transform 0.1s ease-in-out 0.05s, opacity 0.1s ease-in-out 0.05s":"transform 0.15s ease-in-out, opacity 0.15s ease-in-out",width:360,zIndex:ee?1:void 0},children:(0,l.tZ)(b._F,{children:(0,l.tZ)(e6,{children:(0,l.tZ)(tB,{isClipping:null!=ee&&ee,playerRef:U,postId:E.id,transcription:O,onClose:()=>{if(ee){var e;(0,_.j)(_.FP.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:E.id,surface:ef}),H&&(null===(e=U.current)||void 0===e?void 0:e.player)&&U.current.player.pause(),et()}else ec(!1)},surface:ef})})})})]})}),em&&I&&!A&&(0,l.tZ)("div",{className:tx["preview-label-container"],children:(0,l.tZ)(ej.l,{children:Q("Preview")})}),(null===(s=U.current)||void 0===s?void 0:s.player)&&(0,l.tZ)(eR.i,{containerRef:x,post:E,pub:q,visible:ee,videoPlayerRef:U,videoUpload:L,surface:ef})]}),("audio"===z||w)&&f&&(0,l.tZ)(k.hs,{inset:0,position:"absolute",style:{visibility:"audio"!==z?"hidden":void 0},children:(0,l.tZ)(eG,{alternateAudioSource:f,audioPlayerRef:C,isIdle:T,hideControls:(H||y)&&T,post:E,pub:q,showPaywall:R,onFinishAudio:Y,onSetAudioIsPlaying:G})}),!ep&&!A&&!M&&!$&&(0,l.tZ)("div",{className:X()(tx.sidebar,tx["sidebar-right"],{[tx["sidebar--hidden"]]:(H||y)&&T}),children:(0,l.tZ)(k.hs,{className:X()(tx["sidebar-icons"]),bg:"glass-inverted-thick",paddingX:8,paddingY:16,children:(0,l.tZ)(m._2,{hideSavePost:!0,initialShareTimestamp:null!==(Z=null===(u=U.current)||void 0===u?void 0:null===(d=u.player)||void 0===d?void 0:d.currentTime)&&void 0!==Z?Z:0,isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:E,pub:q,showClipping:!!E.videoUpload,style:"large-on-dark",user:D,onChange:J,onCommentsClick:j})})}),f&&!$&&(0,l.tZ)("div",{className:X()(tx.sidebar,tx["sidebar-left"],{[tx["sidebar--hidden"]]:(H||y)&&T}),style:{zIndex:A?1:void 0},children:(0,l.tZ)(e2,{selected:z,sourceType:f.type,onSelect:V})})]})},tI=e=>{var t,i;let{audioPlayerRef:s,hasPaywall:d,isPostPreview:c,mediaUpload:u,post:p,pub:h,user:m,videoIsPlaying:g,videoPlayerRef:v,onFinishVideo:Z,freeSignup:f,reaction_token:b}=e,y=(0,eE._)(e,["audioPlayerRef","hasPaywall","isPostPreview","mediaUpload","post","pub","user","videoIsPlaying","videoPlayerRef","onFinishVideo","freeSignup","reaction_token"]),{isMobile:w}=(0,B.v9)(),{iString:C}=(0,W.M1)(),x=(0,N.HD)({pub:h}),S=(0,$.wq)({post:p,pub:h,user:m}),[P,I]=(0,a.eJ)(!1),[T,M]=(0,a.eJ)(!1),[L,E]=(0,a.eJ)(!1),q=(null!==(i=u.preview_duration)&&void 0!==i?i:0)>0,z=!!S&&!q&&d,[R,A]=(0,eO.t)({initialValue:z?"audio":"video",key:"initial_medium",type:"string",isArray:!1,disable:!S}),[F,O]=(0,a.eJ)(z),D=(0,a.sO)(null),{isIdle:H}=(0,eA.c)({idleAfter:2e3,element:D.current}),U="video"===R&&d&&(!q||T),J="audio"===R&&d&&P&&!!S&&"free_podcast_url"!==S.type,j=!w;(0,r.useEffect)(()=>{var e;let t=null===(e=v.current)||void 0===e?void 0:e.player;if(t&&!w){let e=()=>{t.paused?t.play():t.pause()};return t.addEventListener("click",e),()=>{t.removeEventListener("click",e)}}},[w,v,null===(t=v.current)||void 0===t?void 0:t.player]);let Y=e=>{var t,i;if(e===R)return;let n=(e,t)=>5>Math.abs(e-t),o=null===(t=v.current)||void 0===t?void 0:t.player,l=null===(i=s.current)||void 0===i?void 0:i.player;"audio"===e&&(null==o?void 0:o.currentTime)&&l?o.currentTime>0&&n(l.duration,o.duration)&&(l.currentTime=o.currentTime,o.paused||l.play()):"video"===e&&(null==l?void 0:l.currentTime)&&o&&l.currentTime>0&&n(l.duration,o.duration)&&(o.currentTime=l.currentTime,l.paused||o.play()),g&&(null==o||o.pause()),"video"===e&&l&&l.pause(),T&&(M(!1),o&&(o.currentTime=0)),"audio"!==e||F||O(!0),(0,_.j)(_.FP.AUDIO_VIDEO_SWITCHER_CLICKED,{post_id:p.id,selected:e}),A(e)},V=()=>{I(!0)};return(0,l.BX)("div",{className:X()(tx.container,{[tx.postPreview]:c}),ref:D,children:[j?(0,l.tZ)(tP,(0,o._)((0,n._)({},e),{alternateAudioSource:S,audioIsPlaying:L,audioPlayerHasMounted:F,audioPlayerRef:s,containerRef:D,isIdle:H,selectedMedium:R,showAudioPaywall:J,showVideoPaywall:U,videoIsPlaying:g,onFinishAudio:V,onFinishVideo:()=>{if((null==S?void 0:S.type)==="free_podcast_url"){var e,t;null===(t=document.getElementById(e4))||void 0===t||null===(e=t.parentNode)||void 0===e||e.dispatchEvent(new Event("mouseenter"))}M(!0)},onSelectMedium:Y,onSetAudioIsPlaying:E})):(0,l.BX)("div",{className:X()(tx["video-wrapper"]),children:[(0,l.tZ)(tS,(0,o._)((0,n._)({},y),{ref:v,doNotResetOnEnd:!0,hidePlayButton:U,mediaUpload:u,podcastUpload:p.podcastUpload,showPreview:!d||q,noControls:U&&!d,post:p,pub:h,renderPlayButton:()=>(0,l.tZ)(eH.fI,{isPlaying:!1,size:w?56:72}),usePreview:d&&q,onFinishVideo:Z,style:{visibility:"audio"===R?"hidden":void 0}})),q&&d&&!U&&"video"===R&&(0,l.tZ)("div",{className:tx["preview-label-container"],children:(0,l.tZ)(ej.l,{children:C("Preview")})}),("audio"===R||F)&&S&&(0,l.tZ)(k.gq,{position:"absolute",inset:0,style:{visibility:"audio"===R?"visible":"hidden"},children:(0,l.tZ)(eG,{alternateAudioSource:S,audioPlayerRef:s,hideControls:!1,isIdle:H,post:p,pub:h,showPaywall:J,onFinishAudio:V,onSetAudioIsPlaying:E})}),S&&!x&&(0,l.tZ)(k.gq,{position:"absolute",padding:12,onClick:()=>{Y("audio"===R?"video":"audio")},style:{top:"50%",left:0,transform:"translateY(-50%)",visibility:"video"===R&&g&&H?"hidden":"visible"},children:(0,l.tZ)(e2,{selected:R,sourceType:S.type,onSelect:null})})]}),U&&(0,l.tZ)(eK.Y,{disableButtons:c,isFreeSubscribed:!!((null==m?void 0:m.is_free_subscribed)||f),medium:"video",post:p,pub:h,variant:"dialog",onRestart:q?()=>{var e;(null===(e=v.current)||void 0===e?void 0:e.player)&&(M(!1),v.current.player.currentTime=0,v.current.player.play())}:void 0,magicToken:b}),J&&(0,l.tZ)(eK.Y,{disableButtons:c,isFreeSubscribed:!!((null==m?void 0:m.is_free_subscribed)||f),medium:"audio",post:p,pub:h,variant:"dialog",onRestart:()=>{var e;(null===(e=s.current)||void 0===e?void 0:e.player)&&(I(!1),s.current.player.currentTime=0,s.current.player.play())},magicToken:b})]})};var tX=i(24791),tT=i(69332);let tN={"main-content-and-sidebar":"main-content-and-sidebar-fw1PHW",mainContentFP:"mainContentFP-GnDHcW","main-content":"main-content-qKkUCg","main-content-full-width":"main-content-full-width-eYkBTb",postContentWrapper:"postContentWrapper-MYe7fH",sidebar:"sidebar-RUDMha"},tM=(0,r.forwardRef)((e,t)=>{var i;let{isServingFreePodcastUrl:r,paywall:s,post:x,pub:I,reaction_token:X,recentEpisodes:T,showComments:L,user:E,videoPlayerRef:q,onChange:z,freeSignup:R}=e,{getConfigFor:A}=(0,Z.xR)(),F=(0,f.Fl)().autoPlayVideo,{isMobile:O}=(0,B.v9)(),[D,H]=(0,a.eJ)(null),[U,J]=(0,a.eJ)(null),[W,j]=(0,a.eJ)(!1),[Y,V]=(0,a.eJ)(!1),[G,K]=(0,a.eJ)(!1),Q=(0,a.sO)(null),{isClipping:ee,onStartClipping:et}=(0,c.Sr)(),ei=(0,tX.LH)(x),en=(null==ei?void 0:ei.approved_at)&&!s,{isPlaying:eo}=(0,y.FI)(q),el=(0,N.HD)({pub:I}),er=e=>{(0,_.j)(_.FP.TRANSCRIPTION_TOGGLED,{state:e?"expanded":"collapsed",post_id:x.id,transcript_as_content:!0}),j(e)};(0,a.d4)(()=>{("undefined"!=typeof window?(0,tT.m)(window.location.href):{}).clippingMode&&(setTimeout(()=>{et({source:"query-param",title:null})},10),(0,C.iO)("clippingMode"))},[et]);let es=x.section_id&&null!==(i=I.sections.find(e=>e.id===x.section_id))&&void 0!==i?i:null,{feedUrl:ed,isPrivateFeed:ec}=(0,P.fn)({pub:I,magicToken:X,user:null!=E?E:null,section:es}),eu=(0,$.a9)({pub:I,section:es,spotifySettings:(0,w.pp)({pub:I,section:es})}),ep=(0,tX.uo)({post:x,section:es,pub:I}),eh=(0,tX.dC)({post:x,section:es,pub:I}),em=!!D&&D.length>0,eg=e=>{e.preventDefault(),(0,_.j)(_.FP.COMMENTS_CLICKED,{post_id:x.id});let t=document.getElementById($.nK);t&&t.scrollIntoView({behavior:"smooth"})};(0,a.d4)(()=>{(async()=>{let e=await d().get("/api/v1/post/".concat(x.id,"/facepile"));H(e.body.reactors),J(e.body.restackers)})()},[x.id]);let ev=!1;return"undefined"!=typeof window&&(ev=new URLSearchParams(window.location.search).has("postPreview")),(0,l.tZ)(p.SO,(0,o._)((0,n._)({},e),{ref:t,isShowsPost:!0,renderContent:e=>{let{comments:t,crossPostInfo:i,postContent:n}=e;return(0,l.BX)("div",{children:[(0,l.tZ)(S,{visible:ee,style:{zIndex:1}}),x.videoUpload?(0,l.tZ)(tI,{audioPlayerRef:Q,autoPlay:F,disableShortcuts:G||ee,duration:x.videoUpload.duration,hasPaywall:null!=s&&s,isClipping:ee,isPostPreview:ev,mediaUpload:x.videoUpload,post:x,pub:I,freeSignup:R,reaction_token:X,restorePlaybackLocation:!ev,transcription:en?ei:null,user:null!=E?E:null,videoIsPlaying:eo,videoPlayerRef:q,onChange:z,onCommentsClick:eg,surface:"post",entityKey:x.id,entityType:"post",contentType:"post"}):(0,l.tZ)(M,{audioPlayerRef:Q,feedUrl:ed,hasPaywall:null!=s&&s,isPrivateFeed:ec,isServingFreePodcastUrl:r,post:x,pub:I,section:es,user:null!=E?E:null,freeSignup:R,onChange:z,onCommentsClick:eg,reaction_token:X}),(0,l.BX)("div",{className:el?tN.mainContentFP:tN["main-content-and-sidebar"],children:[(0,l.BX)("div",{className:el?"":Y?tN["main-content-full-width"]:tN["main-content"],children:[!W&&(0,l.BX)(k.tu,{gap:16,children:[(0,l.tZ)(ea,{feedUrl:ed,isStandaloneVideo:ep,eligibleForPodcast:eh,magicToken:X,post:x,pub:I,section:es,showLinks:eu,user:null!=E?E:null,onChange:z,onCommentsClick:eg,onToggleRestackModal:K,onTranscriptClick:en?()=>{er(!0)}:void 0}),el&&(0,l.tZ)(v.R,{post:x,pub:I,user:null!=E?E:null,variant:"shows-post"}),i&&(0,l.tZ)(u.F,{crossPostInfo:i,postType:x.type}),(0,l.BX)("div",{className:tN.postContentWrapper,children:[n,el?(0,l.tZ)(k.tu,{paddingTop:40,paddingBottom:20,children:(0,l.tZ)(g.I,{post:x,pub:I,user:E})}):A("like_posts_enabled")&&I.community_enabled&&em&&!s&&(0,l.tZ)(k.hs,{borderTop:"detail-themed",paddingY:16,children:(0,l.tZ)(h.fB,{post:x,pub:I,user:E,reactors:D,secondaryFaces:U})}),!s&&L&&t]})]}),W&&en&&(0,l.tZ)(k.gq,{paddingTop:Y?32:void 0,children:(0,l.tZ)(b._F,{children:(0,l.tZ)(eM,{fullWidth:Y,playerRef:x.videoUpload?q:Q,post:x,transcription:ei,onClose:()=>{er(!1),V(!1)},onCollapse:()=>V(!1),onExpand:()=>V(!0)})})})]}),!Y&&!el&&(0,l.tZ)(k.tu,{className:tN.sidebar,borderLeft:O?void 0:"detail-themed",children:(0,l.tZ)(eC,{feedUrl:ed,isStandaloneVideo:ep,eligibleForPodcast:eh,post:x,pub:I,recentEpisodes:null!=T?T:null,section:es,showLinks:eu,user:null!=E?E:null})})]}),O&&!el&&(0,l.tZ)(m.mt,{allowEdit:null==E?void 0:E.is_contributor,hideComments:!L,isStatic:!1,post:x,postReactionToken:X,pub:I,user:E,onCommentsClick:eg,onChange:z})]})}}))}),tL=(0,r.forwardRef)((e,t)=>{let i=(0,a.sO)(null),r=(0,a.sO)(null);return(0,l.tZ)(c.BY,{postId:e.post.id,videoPlayerRef:i,virtualizedListRef:r,children:(0,l.tZ)(tM,(0,o._)((0,n._)({},e),{ref:t,videoPlayerRef:i}))})})},74571:function(e,t,i){i.d(t,{Kr:()=>Z,LW:()=>_,Ml:()=>b,Oi:()=>y,fn:()=>g,i5:()=>v,lg:()=>f});var n=i(7409),o=i(99282),l=i(30396),r=i(39693),a=i.n(r),s=i(7654),d=i.n(s),c=i(44908),u=i.n(c),p=i(80569),h=i.n(p),m=i(60308);let g=e=>{let{pub:t,magicToken:i,section:r,user:a}=e,[s,d]=(0,l.eJ)((0,m.fw6)({pub:(0,o._)((0,n._)({},t),{section:r}),token:i})),[c,u]=(0,l.eJ)(!1),p=!a||!a.is_subscribed&&!a.is_free_subscribed,[g,v]=(0,l.eJ)(p);return(0,l.d4)(()=>{!p&&(async()=>{try{var e;let t=await h().get("/api/v1/subscription/podcast_rss_url").query({token:i,section_id:null!==(e=null==r?void 0:r.id)&&void 0!==e?e:null});t.body.podcast_rss_url&&(d(t.body.podcast_rss_url),u(!0)),v(!0)}catch(e){v(!0)}})()},[i,r,p]),{feedUrl:s,isPrivateFeed:c,isLoaded:g}},v=e=>{let[t,i]=(0,l.eJ)(!1),n=()=>{i(!0)},o=()=>{i(!1)};return(0,l.d4)(()=>{let t=e.current;if(t)return t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",o),()=>{t.removeEventListener("mouseenter",n),t.removeEventListener("mouseleave",o)}},[e]),[t]},Z=(e,t,i)=>{(0,l.d4)(()=>{let n=e.toLocaleLowerCase(),o=e=>{if(!i)return;e.preventDefault();let o=e.key.toLocaleLowerCase();if(o===n||e.ctrlKey&&"ctrl+shift+".concat(o)===n||e.ctrlKey&&"ctrl+".concat(o)===n||e.shiftKey&&"shift+".concat(o)===n){t();return}};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[e,t,i])},f=e=>{let[t,i]=(0,l.eJ)(null);return(0,l.d4)(()=>{let t=async e=>{let{body:{src:t}}=await h().get("/api/v1/video/upload/".concat(e,"/storyboard"));i((await h().get(t)).body)};(null==e?void 0:e.id)&&t(e.id)},[e]),t},b=e=>{let[t,i]=(0,l.eJ)(!1),n=e=>{i(e)},o=t=>{e.current&&e.current.contains(t.target)?n(!0):n(!1)};return(0,l.d4)(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}),[]),t},y=e=>{let{transcription:t,processAlignedRows:i}=e,[n,o]=(0,l.eJ)(!1),[r,s]=(0,l.eJ)([]),[d,c]=(0,l.eJ)([]),[p,m]=(0,l.eJ)({});return(0,l.d4)(()=>{(async()=>{if(!t.cdn_url)return;o(!0);let e=await h().get(t.cdn_url);if(!e.text){o(!1);return}let n=JSON.parse(e.text);i?s(i({rows:n})):s(n);let l=a()(u()(n.map(e=>{var t;return null!==(t=e.speaker)&&void 0!==t?t:""}))).sort();l.length&&c(l),t.speaker_map&&Object.values(t.speaker_map).length&&m(t.speaker_map)})()},[t.cdn_url,t.cdn_unaligned_url,t.speaker_map,i]),{loading:n,rows:r,speakers:d,speakerMap:p}},_=e=>{let{containerRef:t,playerRef:i,disable:n}=e,o=(0,l.sO)(null),r=(0,l.sO)(null),[a,s]=(0,l.eJ)();return(0,l.d4)(()=>{let e=()=>{!n&&setTimeout(()=>{var e,t,i;let n=window.getSelection();if(!n||0===n.rangeCount||n.isCollapsed||!r.current){s(void 0),r.current=null,o.current=null;return}let l=n.focusNode,a=parseInt(null==l?void 0:null===(t=l.parentNode)||void 0===t?void 0:null===(e=t.dataset)||void 0===e?void 0:e.chunkIndex),c=n.focusOffset;d()(a)||(o.current={rowIndex:a,offset:c,text:null!==(i=null==l?void 0:l.textContent)&&void 0!==i?i:""}),s(n)},0)},i=null,l=0,a=e=>{var t,i,n,o;let l=e.srcElement,a=parseInt(null!==(o=null===(t=l.dataset)||void 0===t?void 0:t.chunkIndex)&&void 0!==o?o:null===(n=l.parentNode)||void 0===n?void 0:null===(i=n.dataset)||void 0===i?void 0:i.chunkIndex);setTimeout(()=>{let e=window.getSelection(),t=null==e?void 0:e.anchorOffset;"number"!=typeof t||d()(a)||(r.current={rowIndex:a,offset:t,text:l.textContent})},0)},c=()=>{!(l>5)&&((i=t.current)?(i.addEventListener("mouseup",e),i.addEventListener("selectstart",a)):(l+=1,setTimeout(()=>{c()},50)))};return c(),()=>{null==i||i.removeEventListener("mouseup",e),null==i||i.removeEventListener("selectstart",a)}},[t,n,i]),{clearSelection:(0,l.I4)(()=>{a&&(a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty()),s(void 0),r.current=null,o.current=null},[a]),selection:a,selectStartRef:r,selectEndRef:o}}},79582:function(e,t,i){i.d(t,{x:()=>o});var n=i(31377);let o=(e,t,i,o,l)=>!(!l&&!(null==e?void 0:e.has_publication)||o.invite_only||(0,n.isPaidAudience)(i.audience))&&!!t.enable_restacking}}]);