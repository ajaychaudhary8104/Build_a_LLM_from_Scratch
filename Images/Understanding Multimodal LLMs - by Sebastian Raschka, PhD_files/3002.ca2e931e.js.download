"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["3002"],{58319:function(e,t,i){i.d(t,{Z:()=>c});var n=i(27412),r=i(16584),s=i(6400),l=i(94184),a=i.n(l),o=i(98914);class c extends s.Component{async componentDidMount(){"undefined"!=typeof window&&(this.ref||await new Promise(e=>setTimeout(e,0)),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))}componentWillUnmount(){"undefined"!=typeof window&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render(e){let{className:t,children:i}=e;return(0,r.tZ)("div",{ref:this.assignRef,className:a()("visibility-check",t),children:i})}constructor(...e){super(...e),(0,n._)(this,"ref",void 0),(0,n._)(this,"assignRef",e=>{this.ref=e}),(0,n._)(this,"checkVisibility",()=>{if(!this.ref)return;let e=this.ref.getBoundingClientRect(),t=this.props.threshold||0,i=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),n=!(e.bottom<0-t||e.top>=i+t);(0,o.nn)(this,async(e,t)=>{if(e.isVisible!==n)this.setState({isVisible:n});else if(!t.noDedupe)return;let i=n?"hadFirstVisible":"hadFirstInvisible",r=!e[i];r&&this.setState({[i]:!0}),(await Promise.all([n&&t.onVisible&&t.onVisible(),n&&t.onFirstVisible&&r&&t.onFirstVisible(),!n&&t.onInvisible&&t.onInvisible(),!n&&t.onFirstInvisible&&r&&t.onFirstInvisible()])).reduce((e,t)=>!0===t||e)&&this.checkVisibility()})})}}},62981:function(e,t,i){i.d(t,{Z:()=>o});var n=i(30396),r=i(68833),s=i(59176),l=i(98012);let a=()=>{};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,[o,u]=(0,n.eJ)(!!e&&c(e,t,l));return((0,n.d4)(()=>{e&&u(c(e,t,l));let i=()=>{u(!0)};if(e){document.addEventListener("dismiss: ".concat(e),i,!1);let t=(0,s.mM)("".concat(e,"-seen-count"))||0;(!l||t<l)&&(0,s.ex)("".concat(e,"-seen-count"),t+1)}return()=>{document.removeEventListener("dismiss: ".concat(e),i)}},[e]),e)?[o,()=>{i(),(0,r.j)(r.FP.DASHBOARD_ACTION_BOX_DISMISSED,{key:e});let t=new Date;(0,s.ex)(e,t.toString()),u(!0);let n=new Event("dismiss: ".concat(e));document.dispatchEvent(n)}]:[!0,a]}function c(e,t,i){let n;let r="undefined"==typeof window?new Date().toString():(0,s.mM)(e),a="undefined"==typeof window?0:(0,s.mM)("".concat(e,"-seen-count")),o=r||i&&a>=i;return o&&t?(0,l.Z)(r).add(t,"second").isAfterNow():!!(r||o)}},73857:function(e,t,i){i.d(t,{L:()=>d});var n=i(7409),r=i(99282),s=i(16584),l=i(64998),a=i(62372),o=i(71068),c=i(14775),u=i(14651),f=i(25938);function d(e){let{content:t,children:i,leading:d,trailing:h=(0,s.tZ)(l.Z,{size:20}),priority:p="primary"}=e,[m,g,b]=(0,a.XI)(),{triggerProps:v,layerProps:w,renderLayer:_}=(0,a.sJ)({isOpen:m,onParentClose:b,auto:!0,snap:!0,placement:"right-start",possiblePlacements:["left-start","right-start","left-end","right-end"],triggerOffset:0});return(0,s.BX)(s.HY,{children:[(0,s.tZ)(u.sN,(0,r._)((0,n._)({},g,v),{onClick:e=>{e.preventDefault()},leading:d,trailing:h,priority:p,children:t})),m&&_((0,s.tZ)(o.xu,(0,r._)((0,n._)({"data-submenu-root":!0},w,g),{children:(0,s.tZ)(c.F,{className:f.Z.submenu,padding:4,bg:"elevated",children:i})})))]})}},89635:function(e,t,i){i.d(t,{F:()=>a});var n=i(7409),r=i(99282),s=i(98661),l=i(95441);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxFiles:t=1/0,maxSize:i=1/0,accept:a="*",multiple:c=!1,initialFiles:u=[],onFilesChange:f,onFilesAdded:d}=e,{iString:h}=(0,l.M1)(),[p,m]=(0,s.useState)({files:u.map(e=>({file:e,id:e.id,preview:e.url})),isDragging:!1,errors:[]}),g=(0,s.useRef)(null),b=(0,s.useCallback)(e=>{if(e instanceof File){if(e.size>i)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(i),".")}else if(e.size>i)return'File "'.concat(e.name,'" exceeds the maximum size of ').concat(o(i),".");if("*"!==a){let t=a.split(",").map(e=>e.trim()),i=e instanceof File?e.type||"":e.type,n=(File,e.name),r=n.lastIndexOf("."),s=r>0?n.substring(r):"";if(!t.some(e=>{if(e.startsWith("."))return s.toLowerCase()===e.toLowerCase();if(e.endsWith("/*")){let t=e.split("/")[0];return i.startsWith("".concat(t,"/"))}return i===e}))return'File "'.concat((File,e.name),'" is not an accepted file type.')}return null},[a,i]),v=(0,s.useCallback)(e=>e instanceof File?URL.createObjectURL(e):e.url,[]),w=(0,s.useCallback)(e=>e instanceof File?"".concat(e.name,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,9)):e.id,[]),_=(0,s.useCallback)(()=>{m(e=>{e.files.forEach(e=>{e.preview&&e.file instanceof File&&e.file.type.startsWith("image/")&&URL.revokeObjectURL(e.preview)}),g.current&&(g.current.value="");let t=(0,r._)((0,n._)({},e),{files:[],errors:[]});return null==f||f(t.files),t})},[f]),k=(0,s.useCallback)(e=>{if(!e||0===e.length)return;let s=Array.from(e),l=[];if(m(e=>(0,r._)((0,n._)({},e),{errors:[]})),c||_(),c&&t!==1/0&&p.files.length+s.length>t){l.push("You can only upload a maximum of ".concat(t," files.")),m(e=>(0,r._)((0,n._)({},e),{errors:l}));return}let a=[];s.forEach(e=>{if(c&&p.files.some(t=>t.file.name===e.name&&t.file.size===e.size))return;if(e.size>i){l.push(c?"Some files exceed the maximum size of ".concat(o(i),"."):"File exceeds the maximum size of ".concat(o(i),"."));return}let t=b(e);t?l.push(t):a.push({file:e,id:w(e),preview:v(e)})}),a.length>0?(null==d||d(a),m(e=>{let t=c?[...e.files,...a]:a;return null==f||f(t),(0,r._)((0,n._)({},e),{files:t,errors:l})})):l.length>0&&m(e=>(0,r._)((0,n._)({},e),{errors:l})),g.current&&(g.current.value="")},[p.files.length,t,c,i,b,v,w,_,f,d]),y=(0,s.useCallback)(e=>{void 0!==e&&m(t=>{let i=t.files.find(t=>t.id===e);i&&i.preview&&i.file instanceof File&&i.file.type.startsWith("image/")&&URL.revokeObjectURL(i.preview);let s=t.files.filter(t=>t.id!==e);return null==f||f(s),(0,r._)((0,n._)({},t),{files:s,errors:[]})})},[f]),C=(0,s.useCallback)(()=>{m(e=>(0,r._)((0,n._)({},e),{errors:[]}))},[]),F=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),m(e=>(0,r._)((0,n._)({},e),{isDragging:!0}))},[]),D=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),!(e.relatedTarget&&e.relatedTarget instanceof Node&&e.currentTarget.contains(e.relatedTarget))&&m(e=>(0,r._)((0,n._)({},e),{isDragging:!1}))},[]),x=(0,s.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),B=(0,s.useCallback)(e=>{var t,i;if(e.preventDefault(),e.stopPropagation(),m(e=>(0,r._)((0,n._)({},e),{isDragging:!1})),(null===(t=g.current)||void 0===t||!t.disabled)&&(null===(i=e.dataTransfer)||void 0===i?void 0:i.files)&&e.dataTransfer.files.length>0){if(c)k(e.dataTransfer.files);else{let t=e.dataTransfer.files[0];t&&k([t])}}},[k,c]),L=(0,s.useCallback)(e=>{e.currentTarget.files&&e.currentTarget.files.length>0&&k(e.currentTarget.files)},[k]),T=(0,s.useCallback)(()=>{g.current&&g.current.click()},[]),M=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r._)((0,n._)({},e),{type:"file",onChange:L,accept:e.accept||a,multiple:void 0!==e.multiple?e.multiple:c,ref:g,className:"sr-only","aria-label":h("Upload file"),tabIndex:-1})},[a,c,L]),E=(0,s.useCallback)(()=>({onDragEnter:F,onDragLeave:D,onDragOver:x,onDrop:B}),[F,D,x,B]);return[p,{addFiles:k,removeFile:y,clearFiles:_,clearErrors:C,handleDragEnter:F,handleDragLeave:D,handleDragOver:x,handleDrop:B,handleFileChange:L,openFileDialog:T,getInputProps:M,getDragProps:E}]},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let i=Math.floor(Math.log(e)/Math.log(1024));return Number.parseFloat((e/Math.pow(1024,i)).toFixed(t<0?0:t))+(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i]||"Bytes")}}}]);